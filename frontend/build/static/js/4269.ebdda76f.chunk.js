"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4269],{14840:(e,s,a)=>{a.d(s,{A:()=>n});var l=a(65043),r=a(21197),t=a(59255),i=a(70579);function n(){const[e,s]=(0,l.useState)(!1);return(0,i.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,i.jsx)(r.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,i.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,i.jsx)("div",{children:(0,i.jsx)(t.A,{isSidebarOpen:e})}),(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,i.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},94269:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var l=a(65043),r=a(86213),t=a(66727),i=a(21197),n=a(59255),d=a(14840),c=a(70579);function u(){const[e,s]=(0,l.useState)([]),[a,u]=(0,l.useState)([]),[o,p]=(0,l.useState)({warehouse:"",supplier:""}),[h,x]=(0,l.useState)(null),[m,f]=(0,l.useState)(!1),j=(0,t.Zp)(),v={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}};(0,l.useEffect)((()=>{(async()=>{const[e,a]=await Promise.all([r.A.get("/api/warehouses",v),r.A.get("/api/suppliers",v)]);s((e.data.data||[]).filter((e=>"Active"===e.status))),u(a.data.data||[])})()}),[]);return m?(0,c.jsx)(d.A,{}):(0,c.jsxs)("div",{className:"flex h-screen flex-col bg-gray-50",children:[(0,c.jsx)(i.A,{}),(0,c.jsxs)("div",{className:"flex flex-grow",children:[(0,c.jsx)(n.A,{}),(0,c.jsxs)("main",{className:"flex-1 p-6",children:[(0,c.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Bulk Purchase Upload"}),(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!o.warehouse||!o.supplier)return alert("Pick warehouse & supplier");if(!h)return alert("Choose a CSV file");const s=new FormData;s.append("file",h),s.append("warehouse",o.warehouse),s.append("supplier",o.supplier);try{f(!0),await r.A.post("/api/purchases/bulk",s,v),alert("Bulk purchase saved!"),j("/purchase-list")}catch(t){var a,l;alert((null===(a=t.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)||t.message)}finally{f(!1)}},className:"max-w-md space-y-4 bg-white p-6 rounded shadow",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{children:"Warehouse"}),(0,c.jsxs)("select",{value:o.warehouse,onChange:e=>p({...o,warehouse:e.target.value}),className:"w-full border p-2 rounded",children:[(0,c.jsx)("option",{value:"",children:"Select"}),e.map((e=>(0,c.jsx)("option",{value:e._id,children:e.warehouseName},e._id)))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{children:"Supplier"}),(0,c.jsxs)("select",{value:o.supplier,onChange:e=>p({...o,supplier:e.target.value}),className:"w-full border p-2 rounded",children:[(0,c.jsx)("option",{value:"",children:"Select"}),a.map((e=>(0,c.jsx)("option",{value:e._id,children:e.supplierName},e._id)))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{children:"CSV File"}),(0,c.jsx)("input",{type:"file",accept:".csv",onChange:e=>x(e.target.files[0]),className:"w-full border p-2 rounded"}),(0,c.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Columns: ",(0,c.jsx)("code",{children:"itemCode,quantity,price"})," (price optional)"]})]}),(0,c.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded w-full",children:"Upload"})]})]})]})]})}}}]);
//# sourceMappingURL=4269.ebdda76f.chunk.js.map