"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7481],{14840:(e,t,s)=>{s.d(t,{A:()=>o});var r=s(65043),l=s(21197),a=s(59255),n=s(70579);function o(){const[e,t]=(0,r.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(l.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,n.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,n.jsx)("div",{children:(0,n.jsx)(a.A,{isSidebarOpen:e})}),(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,n.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},17069:(e,t,s)=>{s.d(t,{A:()=>l});var r=s(65043);const l=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))}))},41430:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var r=s(65043),l=s(60184),a=s(21197),n=s(59255),o=s(86213),i=s(26873),c=s(66727),d=s(14840),u=s(53888),x=s(17069),m=s(79038),h=s(65239),f=s.n(h),p=s(70579);const g=r.forwardRef(((e,t)=>{var s,r;let{item:l}=e;return(0,p.jsxs)("div",{className:"w-64 p-4 mx-auto text-center bg-white rounded-lg shadow",ref:t,style:{backgroundColor:"#fff"},children:[(0,p.jsx)("h4",{className:"text-lg font-bold",children:"Grocery on wheels"}),(0,p.jsx)("p",{className:"text-sm text-gray-600",children:"shop number 210-211 basement new rishi nagar hisar 125001"}),(0,p.jsx)("div",{className:"flex justify-center mt-2 mb-3",children:(0,p.jsx)("img",{src:"uploads/1746207961000.png",alt:l.itemName,className:"object-contain h-auto w-28",crossOrigin:"anonymous"})}),(0,p.jsxs)("p",{className:"font-semibold text-gray-800",children:[l.itemName," \u2013 ",l.description]}),(0,p.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-2",children:[(0,p.jsxs)("p",{className:"font-bold text-blue-800",children:["Rs.",l.salesPrice,"/",null===(s=l.unit)||void 0===s?void 0:s.unitName]}),(0,p.jsxs)("span",{className:"px-2 py-1 text-xs text-white bg-green-500 rounded-full",children:["Fixed"===l.discountType&&"Rs.",l.discount,"Percentage"===l.discountType&&"%"," off"]})]}),(0,p.jsxs)("p",{className:"text-sm text-gray-400 line-through",children:["Rs. ","Percentage"===l.discountType?(l.salesPrice+l.salesPrice*l.discount/100).toFixed(2):(l.salesPrice+l.discount).toFixed(2),"/",null===(r=l.unit)||void 0===r?void 0:r.unitName]})]})})),b=r.forwardRef(((e,t)=>{var s,r;let{item:l}=e;return(0,p.jsxs)("div",{className:"w-64 bg-[#f9fafb] rounded-md shadow-md border p-3 relative text-center",ref:t,children:[(0,p.jsx)("h4",{className:"text-lg font-bold",children:"Grocery on wheels"}),(0,p.jsx)("p",{className:"text-sm text-gray-600",children:"shop number 210-211 basement new rishi nagar hisar 125001"}),(0,p.jsx)("div",{className:"absolute top-0 right-0 px-2 py-1 text-xs text-white bg-red-500 rounded-bl-lg",children:"SALE"}),(0,p.jsx)("img",{src:"uploads/1746207961000.png",alt:l.itemName,className:"object-contain w-24 h-24 mx-auto my-2"}),(0,p.jsx)("h3",{className:"text-base font-bold",children:l.itemName}),(0,p.jsx)("p",{className:"text-xs text-gray-600",children:l.description}),(0,p.jsxs)("div",{className:"mt-1",children:[(0,p.jsxs)("span",{className:"font-bold text-green-600",children:["Rs. ",l.salesPrice,"/",null===(s=l.unit)||void 0===s?void 0:s.unitName]}),(0,p.jsxs)("span",{className:"ml-2 text-sm text-gray-400 line-through",children:["Rs. ","Percentage"===l.discountType?l.salesPrice+l.salesPrice*(l.discount/100):l.salesPrice+l.discount,"/",null===(r=l.unit)||void 0===r?void 0:r.unitName]})]})]})})),v=r.forwardRef(((e,t)=>{var s,r;let{item:l}=e;return(0,p.jsxs)("div",{className:"relative w-64 p-4 text-center bg-white rounded-lg shadow-xl",ref:t,children:[(0,p.jsx)("h4",{className:"text-lg font-bold",children:"Grocery on wheels"}),(0,p.jsx)("p",{className:"text-sm text-gray-600",children:"shop number 210-211 basement new rishi nagar hisar 125001"}),(0,p.jsx)("img",{src:"uploads/1746207961000.png",alt:l.itemName,className:"w-24 h-auto mx-auto mb-2"}),(0,p.jsx)("h3",{className:"text-base font-bold",children:l.itemName}),(0,p.jsx)("p",{className:"mb-1 text-xs text-gray-600",children:l.description}),(0,p.jsxs)("div",{className:"absolute px-2 py-1 text-xs text-white bg-green-600 rounded-full top-2 right-2",children:["Fixed"===l.discountType?`Rs.${l.discount}`:`${l.discount}%`," OFF"]}),(0,p.jsxs)("p",{className:"mt-2 font-bold text-blue-700",children:["Rs. ",l.salesPrice,"/",null===(s=l.unit)||void 0===s?void 0:s.unitName]}),(0,p.jsxs)("p",{className:"text-sm text-gray-400 line-through",children:["Rs. ","Percentage"===l.discountType?l.salesPrice+l.salesPrice*(l.discount/100):l.salesPrice+l.discount,"/",null===(r=l.unit)||void 0===r?void 0:r.unitName]})]})})),j=e=>{let{item:t,setView:s}=e;const l=[(0,r.useRef)(),(0,r.useRef)(),(0,r.useRef)()];return(0,p.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,p.jsxs)("div",{style:{backgroundColor:"#f9fafb",padding:"30px",borderRadius:"16px",maxHeight:"90%",width:"90%",overflowY:"auto",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",position:"relative",textAlign:"center"},children:[(0,p.jsx)("button",{onClick:()=>s(!1),style:{position:"absolute",top:"15px",right:"20px",background:"none",border:"none",fontSize:"26px",fontWeight:"bold",color:"#555",cursor:"pointer"},children:"\u2716"}),(0,p.jsx)("h3",{style:{marginBottom:"25px",color:"#111827",fontSize:"20px",fontWeight:"600",borderBottom:"1px solid #ddd",paddingBottom:"10px"},children:"Banner Templates Preview"}),(0,p.jsx)("div",{style:{display:"flex",gap:"20px",overflowX:"auto",paddingBottom:"10px",justifyContent:"flex-start"},children:[g,b,v].map(((e,s)=>(0,p.jsxs)("div",{style:{minWidth:"280px",backgroundColor:"#fff",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0,0,0,0.1)",padding:"16px",textAlign:"center",flexShrink:0},children:[(0,p.jsx)(e,{ref:l[s],item:t}),(0,p.jsxs)("button",{onClick:()=>{return e=l[s],t=s,void f()(e.current,{useCORS:!0,scale:3,backgroundColor:null}).then((e=>{const s=document.createElement("a");s.download=`banner-template-${t+1}.png`,s.href=e.toDataURL("image/png"),s.click()}));var e,t},style:{marginTop:"16px",padding:"10px 20px",backgroundColor:"#3b82f6",color:"#fff",borderRadius:"8px",border:"none",fontWeight:"500",fontSize:"14px",cursor:"pointer",boxShadow:"0 2px 6px rgba(59,130,246,0.3)"},children:["Download Template ",s+1]})]},s)))})]})})},y=e=>{let{items:t,setMultiView:s}=e;const l=(0,r.useRef)();return(0,p.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,p.jsxs)("div",{className:"relative w-full max-w-6xl p-6 bg-white rounded-lg",children:[(0,p.jsx)("button",{className:"absolute text-2xl text-gray-500 top-4 right-4 hover:text-red-600",onClick:()=>s(!1),children:"\u2715"}),(0,p.jsxs)("div",{ref:l,className:"p-4 bg-[#fdfef6] rounded-lg",children:[(0,p.jsx)("h2",{className:"mb-4 text-lg font-semibold",children:"Products"}),(0,p.jsx)("div",{className:"grid grid-cols-2 gap-6 md:grid-cols-3",children:t.map(((e,t)=>{var s;return(0,p.jsxs)("div",{className:"text-center",children:["Percentage"===e.discountType&&(0,p.jsxs)("div",{className:"inline-block px-2 py-1 mb-1 text-xs font-bold text-center text-white bg-green-600 rounded",children:[e.discount,"% OFF"]}),(0,p.jsxs)("div",{className:"relative inline-block",children:[(0,p.jsx)("img",{src:"uploads/1746207961000.png",alt:e.itemName,className:"object-contain mx-auto h-28",crossOrigin:"anonymous"}),(0,p.jsxs)("div",{className:"absolute top-0 right-0 px-3 py-1 text-sm font-bold transform translate-x-2 -translate-y-2 bg-yellow-400 rounded-full shadow",children:["\u20b9",e.salesPrice.toFixed(1),"/",null===(s=e.unit)||void 0===s?void 0:s.unitName]})]}),(0,p.jsx)("p",{className:"mt-2 text-sm font-medium text-gray-800",children:e.itemName}),(0,p.jsxs)("p",{className:"text-xs text-gray-400 line-through",children:["\u20b9","Percentage"===e.discountType?(e.salesPrice+e.salesPrice*e.discount/100).toFixed(1):(e.salesPrice+e.discount).toFixed(1)]})]},t)}))})]}),(0,p.jsx)("div",{className:"flex justify-center mt-6",children:(0,p.jsx)("button",{onClick:()=>{f()(l.current,{useCORS:!0,backgroundColor:"#ffffff",scale:3}).then((e=>{const t=document.createElement("a");t.download="products-banner.png",t.href=e.toDataURL(),t.click()}))},className:"px-6 py-2 font-semibold text-white transition bg-blue-600 rounded hover:bg-blue-700",children:"Download"})})]})})},w=()=>{const[e,t]=(0,r.useState)(!0),[s,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)([]),[b,v]=(0,r.useState)([{label:"Single Product",value:"SingleProduct"},{label:"Multi Product",value:"MultiProduct"}]),[w,N]=(0,r.useState)("SingleProduct"),[C,S]=(0,r.useState)(null),[k,P]=(0,r.useState)(!1),[R,A]=(0,r.useState)(!1),[F,T]=(0,r.useState)(""),[E,O]=(0,r.useState)(null),[B,L]=(0,r.useState)([]);(0,r.useEffect)((()=>{window.innerWidth<768&&t(!1)}),[window.innerWidth]);(0,r.useEffect)((()=>{(async()=>{try{h(!0);const e=await o.A.get("api/items",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});g(e.data.data)}catch(e){console.error("Error fetching item code:",e)}finally{h(!1)}})()}),[]);const[z,W]=(0,r.useState)(!1),I=(0,r.useRef)(null),$=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(!z)return;return(async()=>{if(!I.current)return;const e=new m.BrowserMultiFormatReader;$.current=e;const t=async t=>{const s={video:{facingMode:t,advanced:[{width:1920},{height:1080},{zoom:2}]}};return e.decodeFromConstraints(s,I.current,((e,t)=>{if(e){var s,r,l,a;const t=e.getText();alert(t),T(t),null===(s=(r=window.navigator).vibrate)||void 0===s||s.call(r,200);new Audio("/beep.mp3").play();const n=null===(l=I.current)||void 0===l?void 0:l.srcObject;null===n||void 0===n||n.getTracks().forEach((e=>e.stop())),null!==(a=$.current)&&void 0!==a&&a.reset&&"function"===typeof $.current.reset&&$.current.reset(),W(!1)}t&&"NotFoundException"!==t.name&&console.error("Scan error:",t)}))};try{await t({exact:"environment"})}catch(s){if("OverconstrainedError"===s.name||"NotFoundError"===s.name){console.warn("Back camera not found. Trying front camera...");try{await t("user")}catch(r){console.error("Front camera also failed:",r),alert("No camera found or accessible."),W(!1)}}else console.error("Camera access error:",s),alert("Camera access error: "+s.message),W(!1)}})(),()=>{var e,t;const s=null===(e=I.current)||void 0===e?void 0:e.srcObject;null===s||void 0===s||s.getTracks().forEach((e=>e.stop())),null!==(t=$.current)&&void 0!==t&&t.reset&&"function"===typeof $.current.reset&&$.current.reset()}}),[z]);const M=F?f.filter((e=>{var t,s;const r=F.toLowerCase();return(null===(t=e.itemName)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(s=e.itemCode)||void 0===s?void 0:s.toLowerCase().includes(r))||e.barcode&&e.barcode.toLowerCase().includes(r)})):[];(0,r.useEffect)((()=>{F&&f.filter((e=>{var t,s;const r=F.toLowerCase();return(null===(t=e.itemName)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(s=e.itemCode)||void 0===s?void 0:s.toLowerCase().includes(r))||e.barcode&&e.barcode.toLowerCase().includes(r)}))}),[F]);(0,r.useEffect)((()=>{E?(alert("Item added successfully"),console.log(E),L((e=>[...e,E])),T("")):console.log("No item is selected ")}),[E]),(0,r.useEffect)((()=>{console.log(B)}),[B]);const D=(e,t)=>{const{name:s,value:r}=e.target;L((l=>{const a=[...l];return a[t]={...a[t],[s]:"number"===e.target.type?Number(r):r},a}))};return s?(0,p.jsx)(d.A,{}):(0,p.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,p.jsx)(a.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,p.jsxs)("div",{className:"flex flex-grow ",children:[(0,p.jsx)(n.A,{isSidebarOpen:e}),(0,p.jsxs)("div",{className:"flex-grow flex flex-col p-2 md:p-2  ",children:[(0,p.jsxs)("header",{className:"flex flex-col items-center justify-between p-4 rounded-md shadow sm:flex-row",children:[(0,p.jsxs)("div",{className:"flex items-center gap-1 text-center sm:flex-row sm:text-left",children:[(0,p.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"New Banner"}),(0,p.jsx)("span",{className:"text-xs text-gray-600 sm:text-sm",children:"Add/Update Banner"})]}),(0,p.jsxs)("nav",{className:"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0",children:[(0,p.jsxs)(c.k2,{to:"/dashboard",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,p.jsx)(l.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,p.jsx)(c.k2,{to:"/banners/view",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:"> Banner List"}),(0,p.jsx)(c.k2,{to:"/banners/add",className:"text-gray-700 no-underline hover:text-cyan-600",children:"> Add Banner"})]})]}),(0,p.jsxs)("div",{className:"p-4 mt-1 bg-white border-t-4 rounded-lg shadow-md border-cyan-500",children:[k&&(0,p.jsx)(j,{item:C,setView:P}),R&&(0,p.jsx)(y,{items:B,setMultiView:A}),(0,p.jsxs)("div",{className:"flex gap-5",children:[(0,p.jsxs)("div",{className:"w-full",children:[(0,p.jsx)("label",{htmlFor:"",children:"Banner Type"}),(0,p.jsx)(i.Ay,{className:"w-full",options:b,onChange:e=>N(e.value)})]}),(0,p.jsxs)("div",{className:"relative flex flex-col w-full",children:[(0,p.jsx)("label",{htmlFor:"",children:"Items"}),(0,p.jsxs)("label",{htmlFor:"",className:"flex",children:[(0,p.jsx)("input",{type:"text",name:"type",className:"w-full px-2 py-1 border-2 rounded-md",value:F,onChange:e=>{T(e.target.value)}}),(0,p.jsx)("button",{type:"button",className:"p-2 ml-2 text-white rounded-full hover:bg-blue-600",onClick:()=>W(!0),children:(0,p.jsx)(x.A,{className:"w-6 h-6 text-gray-500"})})]}),""!==F&&(0,p.jsx)("div",{className:"absolute z-50 w-full overflow-y-auto bg-white border rounded-lg shadow-lg top-20 sm:w-96 max-h-60 touch-auto",style:{WebkitOverflowScrolling:"touch"},children:(0,p.jsx)("ul",{children:M.map((e=>(0,p.jsxs)("li",{onClick:()=>{O(e)},className:"p-2 cursor-pointer hover:bg-gray-100",children:[(0,p.jsx)("strong",{children:e.itemCode})," - ",e.itemName," - ",e.barcode]},e.itemCode)))})}),z&&(0,p.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black bg-opacity-50",children:[(0,p.jsxs)("div",{className:"relative overflow-hidden border-4 border-white rounded-lg shadow-xl w-72 h-72",children:[(0,p.jsx)("video",{ref:I,className:"absolute object-cover w-full h-full",autoPlay:!0,muted:!0,playsInline:!0}),(0,p.jsx)("div",{className:"absolute w-full h-1 bg-red-500 animate-scan"})]}),(0,p.jsx)("button",{onClick:()=>{var e,t;const s=null===(e=I.current)||void 0===e?void 0:e.srcObject;null===s||void 0===s||s.getTracks().forEach((e=>e.stop())),null!==(t=$.current)&&void 0!==t&&t.reset&&"function"===typeof $.current.reset&&$.current.reset(),W(!1)},className:"px-4 py-2 mt-6 text-white bg-red-600 rounded hover:bg-red-700",children:"Cancel"})]})]})]}),B.map(((e,t)=>(0,p.jsxs)("div",{className:"py-2 mb-4 border-b-2",children:[(0,p.jsxs)("h3",{children:["Item",t+1,":",e.itemName]}),(0,p.jsxs)("div",{className:"flex w-full gap-5 mb-4",children:[(0,p.jsxs)("div",{className:"flex flex-col w-full gap-1",children:[(0,p.jsx)("label",{htmlFor:"",children:"Description"}),(0,p.jsx)("input",{type:"text",name:"description",className:"w-full px-2 py-1 border-2 rounded-md",value:e.description,onChange:e=>D(e,t)})]}),(0,p.jsxs)("div",{className:"flex flex-col w-full gap-1",children:[(0,p.jsx)("label",{htmlFor:"",children:"Purchase Price"}),(0,p.jsx)("input",{type:"Number",min:"0",name:"purchasePrice",className:"w-full px-2 py-1 border-2 rounded-md",value:e.purchasePrice,onChange:e=>D(e,t)})]})]}),(0,p.jsxs)("div",{className:"flex w-full gap-5",children:[(0,p.jsxs)("div",{className:"flex flex-col w-full gap-1",children:[(0,p.jsx)("label",{htmlFor:"",children:"Price Without Tax"}),(0,p.jsx)("input",{type:"Number",min:"0",name:"priceWithoutTax",className:"w-full px-2 py-1 border-2 rounded-md",value:e.priceWithoutTax,onChange:e=>D(e,t)})]}),(0,p.jsxs)("div",{className:"flex flex-col w-full gap-1",children:[(0,p.jsx)("label",{htmlFor:"",children:"Sales Price"}),(0,p.jsx)("input",{type:"Number",min:"0",onChange:e=>D(e,t),name:"salesPrice",className:"w-full px-2 py-1 border-2 rounded-md",value:e.salesPrice})]})]}),(0,p.jsx)(u.A,{className:"px-4 py-2 mt-2 text-white bg-green-500 rounded cursor-pointer hover:bg-green-600",onClick:e=>((e,t)=>{e.preventDefault();const s=B[t],r=s._id;console.log(s),(async()=>{try{h(!0);const e=await o.A.put(`api/items/${r}`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e),alert("updated")}catch(e){console.error("Error fetching item code:",e)}finally{h(!1)}})()})(e,t),text:"Save"})," ","SingleProduct"===w&&(0,p.jsx)(u.A,{className:"px-4 py-2 mt-2 text-white bg-teal-400 rounded cursor-pointer hover:bg-teal-600",type:"button",onClick:()=>{S(e),P(!0)},text:"view"})]}))),"SingleProduct"!==w&&(0,p.jsx)(u.A,{className:"w-full px-4 py-2 mt-2 mt-5 text-white bg-teal-400 rounded cursor-pointer hover:bg-teal-600",type:"button",onClick:()=>{A(!0)},text:"view"})]})]})]})]})}},53888:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var r=s(70579);function l(e){let{text:t,type:s="button",className:l,...a}=e;return(0,r.jsx)("button",{className:`${l}`,...a,children:t})}},82284:(e,t,s)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}s.d(t,{A:()=>r})}}]);
//# sourceMappingURL=7481.04742ca9.chunk.js.map