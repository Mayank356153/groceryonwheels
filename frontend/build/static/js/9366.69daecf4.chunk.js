"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9366],{79366:(e,s,t)=>{t.r(s),t.d(s,{default:()=>i});var r=t(65043),a=t(86213),d=t(21197),l=t(59255),n=t(70579);function i(){const[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!0),h=async()=>{i(!0);try{const{data:e}=await a.A.get("api/deletion-requests?status=PENDING",{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}});s(e.data||[])}catch(r){var e,t;console.error("Failed to fetch deletion requests:",r),alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||r.message)}finally{i(!1)}};(0,r.useEffect)((()=>{h()}),[]);const x=async(e,s)=>{i(!0);try{const t=`api/deletion-requests/${e}`+(s?"/approve":"/reject");await a.A.put(t,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}}),await h()}catch(d){var t,r;console.error(`Failed to ${s?"approve":"reject"} request:`,d),alert((null===(t=d.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||d.message)}finally{i(!1)}};return t?(0,n.jsx)("div",{className:"p-4",children:(0,n.jsx)("p",{children:"Loading\u2026"})}):(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(d.A,{isSidebarOpen:o,setSidebarOpen:c}),(0,n.jsxs)("div",{className:"flex flex-grow",children:[(0,n.jsx)(l.A,{isSidebarOpen:o}),(0,n.jsxs)("div",{className:"p-3 container-fluid",children:[(0,n.jsx)("h1",{className:"text-lg font-bold mb-3",children:"Pending Deletion Requests"}),(0,n.jsxs)("table",{className:"min-w-full text-sm border-collapse border",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"bg-gray-100",children:[(0,n.jsx)("th",{children:"Request ID"}),(0,n.jsx)("th",{children:"Warehouse"}),(0,n.jsx)("th",{children:"Requested By"}),(0,n.jsx)("th",{children:"Reason"}),(0,n.jsx)("th",{className:"border px-2 py-1",children:"Action"})]})}),(0,n.jsxs)("tbody",{children:[e.map((e=>{var s,t;return(0,n.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,n.jsx)("td",{children:e._id}),(0,n.jsx)("td",{children:(null===(s=e.itemId)||void 0===s?void 0:s.warehouseName)||(null===(t=e.itemId)||void 0===t?void 0:t._id)}),(0,n.jsx)("td",{className:"border px-2 py-1",children:e.requestedBy?`${e.requestedBy.FirstName} ${e.requestedBy.LastName}`:"\u2014"}),(0,n.jsx)("td",{children:e.reason||"\u2014"}),(0,n.jsxs)("td",{className:"border px-2 py-1 space-x-2",children:[(0,n.jsx)("button",{onClick:()=>x(e._id,!0),className:"px-2 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Approve"}),(0,n.jsx)("button",{onClick:()=>x(e._id,!1),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Reject"})]})]},e._id)})),0===e.length&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:5,className:"text-center p-4",children:"No pending requests."})})]})]})]})]})]})}}}]);
//# sourceMappingURL=9366.69daecf4.chunk.js.map