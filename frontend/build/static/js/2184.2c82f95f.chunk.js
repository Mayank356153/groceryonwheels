"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2184],{92184:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var s=t(65043),r=t(66727),l=t(86213),n=t(21197),o=t(59255),i=t(70579);const c=function(){const{taxGroupId:e}=(0,r.g)(),a=(0,r.Zp)(),[t,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(!1),[x,p]=(0,s.useState)({groupName:"",taxes:[],status:"active"});(0,s.useEffect)((()=>{window.innerWidth<768&&c(!1)}),[]);const[m,g]=(0,s.useState)([]);(0,s.useEffect)((()=>{h(),e&&b(e)}),[e]);const h=async()=>{try{const e=localStorage.getItem("token"),a=await l.A.get("api/taxes",{headers:{Authorization:`Bearer ${e}`}});g(a.data.data||[])}catch(e){console.error("Error fetching all taxes:",e.message)}},b=async e=>{u(!0);try{const a=localStorage.getItem("token"),t=(await l.A.get(`api/tax-groups/${e}`,{headers:{Authorization:`Bearer ${a}`}})).data.data;p({groupName:t.groupName||"",taxes:t.taxes?t.taxes.map((e=>e._id)):[],status:t.status||"active"})}catch(a){console.error("Error fetching tax group:",a.message)}finally{u(!1)}},f=e=>{p((a=>({...a,[e.target.name]:e.target.value})))},v=e=>{const a=e.target.value;x.taxes.includes(a)?p((e=>({...e,taxes:e.taxes.filter((e=>e!==a))}))):p((e=>({...e,taxes:[...e.taxes,a]})))};return d?(0,i.jsx)("div",{children:"Loading..."}):(0,i.jsxs)("div",{className:"flex flex-col h-screen bg-gray-100",children:[(0,i.jsx)(n.A,{isSidebarOpen:t,setSidebarOpen:c}),(0,i.jsxs)("div",{className:"flex flex-grow",children:[(0,i.jsx)(o.A,{isSidebarOpen:t}),(0,i.jsxs)("div",{className:"flex-grow w-full p-4 transition-all duration-300 ",children:[(0,i.jsx)("h1",{className:"mb-4 text-xl font-bold",children:e?"Edit Tax Group":"Add Tax Group"}),(0,i.jsx)("div",{className:"p-4 bg-white rounded-md shadow-md ",children:(0,i.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),u(!0);try{const t={Authorization:`Bearer ${localStorage.getItem("token")}`};e?(await l.A.put(`api/tax-groups/${e}`,x,{headers:t}),alert("Tax Group updated successfully!")):(await l.A.post("api/tax-groups",x,{headers:t}),alert("Tax Group created successfully!")),a("/tax-list")}catch(s){console.error("Error submitting tax group:",s.message),alert("Error submitting tax group.")}finally{u(!1)}},children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block mb-1 font-semibold",children:"Group Name"}),(0,i.jsx)("input",{type:"text",name:"groupName",value:x.groupName,onChange:f,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block mb-1 font-semibold",children:"Sub Taxes"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:m.map((e=>(0,i.jsxs)("label",{className:"flex items-center space-x-1",children:[(0,i.jsx)("input",{type:"checkbox",value:e._id,checked:x.taxes.includes(e._id),onChange:v}),(0,i.jsxs)("span",{children:[e.taxName," (",e.taxPercentage,"%)"]})]},e._id)))})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block mb-1 font-semibold",children:"Status"}),(0,i.jsxs)("select",{name:"status",value:x.status,onChange:f,className:"w-full p-2 border border-gray-300 rounded",children:[(0,i.jsx)("option",{value:"active",children:"Active"}),(0,i.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,i.jsx)("button",{type:"submit",disabled:d,className:"px-4 py-2 text-white bg-green-500 rounded hover:bg-green-600",children:e?"Update Tax Group":"Save"}),(0,i.jsx)("button",{type:"button",onClick:()=>{a("/tax-list")},className:"px-4 py-2 text-white bg-orange-500 rounded hover:bg-orange-600",children:"Close"})]})]})})]})]})]})}}}]);
//# sourceMappingURL=2184.2c82f95f.chunk.js.map