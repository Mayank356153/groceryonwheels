{"version":3,"file":"static/js/9622.b921c7c2.chunk.js","mappings":"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","sources":["Loading.jsx","components/Sales/ViewSale.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport Navbar from \"./components/Navbar\";\nimport Sidebar from \"./components/Sidebar\";\nexport default function LoadingScreen() {\n    const[isSidebarOpen,setSidebarOpen]=useState(false)\n    return (\n        <div className='flex flex-col h-screen'>\n        {/* Navbar component with sidebar open state */}\n        <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\n        <div className='flex flex-grow mt-20'>\n          <div>\n            {/* Sidebar component with open state */}\n            <Sidebar isSidebarOpen={isSidebarOpen} />\n          </div>\n  \n          {/* Container for the entire component */}\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm\">\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin\"></div>\n            <p className=\"mt-3 text-lg font-semibold text-gray-700\">Loading...</p>\n          </div>\n        </div>\n          \n        </div>\n      </div>\n    );\n  }\n  ","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Navbar from \"../Navbar.jsx\";\r\nimport Sidebar from \"../Sidebar.jsx\";\r\nimport LoadingScreen from \"../../Loading\";\r\n\r\n// Helper function to format address object into a string\r\nconst formatAddress = (address) => {\r\n  if (!address || typeof address !== 'object') return \"N/A\";\r\n  const parts = [\r\n    address.street || \"\",\r\n    address.city || \"\",\r\n    address.state || \"\",\r\n    address.zip || \"\",\r\n    address.country || \"\"\r\n  ].filter(part => part.trim() !== \"\");\r\n  return parts.length > 0 ? parts.join(\", \") : \"N/A\";\r\n};\r\n\r\nconst ViewSale = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const queryParams = new URLSearchParams(location.search);\r\n  const id = queryParams.get('id');\r\n  const source = queryParams.get('source');\r\n\r\n  const [isSidebarOpen, setSidebarOpen] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n  const [allItems, setAllItems] = useState([]);\r\n  const [invoiceData, setInvoiceData] = useState({\r\n    warehouse: {},\r\n    customer: {},\r\n    items: [],\r\n    payments: [],\r\n    saleDate: '',\r\n    saleCode: '',\r\n    amount: 0,\r\n    status: '',\r\n    subtotal: 0,\r\n    tax: 0,\r\n    discount: 0,\r\n    paymentStatus: '',\r\n    notes: '',\r\n    creatorName: '',\r\n    shippingCost: 0,\r\n  });\r\n  const [downloadMessage, setDownloadMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const script = document.createElement('script');\r\n    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';\r\n    script.async = true;\r\n    script.onload = () => console.log('jsPDF loaded successfully');\r\n    script.onerror = () => console.error('Failed to load jsPDF');\r\n    document.body.appendChild(script);\r\n\r\n    if (window.innerWidth < 768) {\r\n      setSidebarOpen(false);\r\n    }\r\n    fetchItems();\r\n    fetchInvoiceDetails();\r\n\r\n    return () => {\r\n      document.body.removeChild(script);\r\n    };\r\n  }, []);\r\n\r\n  const fetchItems = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) return;\r\n      const response = await axios.get(\"api/items\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      const rawItems = response.data.data || [];\r\n      const flatItems = rawItems\r\n        .filter((it) => it._id && it.warehouse?._id)\r\n        .map((it) => {\r\n          const isVariant = Boolean(it.parentItemId);\r\n          return {\r\n            ...it,\r\n            parentId: isVariant ? it.parentItemId : it._id,\r\n            variantId: isVariant ? it._id : null,\r\n            itemName: isVariant ? `${it.itemName} / ${it.variantName || \"Variant\"}` : it.itemName,\r\n            barcode: it.barcode || \"\",\r\n            barcodes: it.barcodes || [],\r\n            itemCode: it.itemCode || \"\",\r\n          };\r\n        });\r\n      setAllItems(flatItems);\r\n      console.log(\"Fetched allItems:\", flatItems.map(i => ({ _id: i._id, parentId: i.parentId, variantId: i.variantId, itemName: i.itemName, warehouseId: i.warehouse?._id })));\r\n    } catch (err) {\r\n      console.error(\"Fetch items error:\", err.message);\r\n    }\r\n  };\r\n\r\n  const fetchInvoiceDetails = async () => {\r\n    if (!id || !source) {\r\n      alert(\"Invalid invoice ID or source\");\r\n      navigate('/sale-list');\r\n      return;\r\n    }\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) return;\r\n    setLoading(true);\r\n    try {\r\n      const endpoint = source === \"POS\" ? `api/pos/${id}` : `api/sales/${id}`;\r\n      const response = await axios.get(endpoint, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      console.log(\"API Response:\", response.data);\r\n      if (response.data) {\r\n        const totalPaid = (response.data.payments || []).reduce((sum, payment) => sum + (payment.amount || 0), 0);\r\n        const amount = response.data.amount || response.data.total || response.data.totalAmount || 0;\r\n        let paymentStatus = response.data.paymentStatus || response.data.payment_state || \"N/A\";\r\n        if (paymentStatus === \"N/A\") {\r\n          if (totalPaid >= amount && amount > 0) {\r\n            paymentStatus = \"Paid\";\r\n          } else if (totalPaid > 0) {\r\n            paymentStatus = \"Partially Paid\";\r\n          } else {\r\n            paymentStatus = \"Unpaid\";\r\n          }\r\n        }\r\n\r\n        const detailedItems = (response.data.items || []).map((i) => {\r\n          console.log(\"Processing item:\", {\r\n            item: i.item,\r\n            variant: i.variant,\r\n            itemName: i.itemName,\r\n            warehouseId: response.data.warehouse?._id || response.data.warehouse\r\n          });\r\n\r\n          const itemDoc = allItems.find((ai) => {\r\n            const itemId = i.item?._id || i.item;\r\n            const warehouseId = response.data.warehouse?._id || response.data.warehouse;\r\n            const isVariantItem = i.variant && i.variant !== itemId;\r\n            if (isVariantItem) {\r\n              return (\r\n                ai.parentId === itemId &&\r\n                (ai._id === i.variant || ai.variantId === i.variant) &&\r\n                ai.warehouse?._id === warehouseId\r\n              );\r\n            }\r\n            return (\r\n              ai._id === itemId &&\r\n              ai.warehouse?._id === warehouseId\r\n            );\r\n          });\r\n\r\n          console.log(\"Matched itemDoc:\", itemDoc ? {\r\n            _id: itemDoc._id,\r\n            parentId: itemDoc.parentId,\r\n            variantId: itemDoc.variantId,\r\n            itemName: itemDoc.itemName,\r\n            warehouseId: itemDoc.warehouse?._id\r\n          } : \"Not found\");\r\n\r\n          const unitPrice = i.price || i.unitPrice || (itemDoc?.salesPrice) || 0;\r\n          const quantity = i.quantity || 1;\r\n          const discount = i.discount || 0;\r\n          const taxRate = i.tax?.taxPercentage || (i.taxAmount ? (i.taxAmount * 100) / (unitPrice * quantity - discount) : 0) || (itemDoc?.tax?.taxPercentage) || 0;\r\n          const priceBeforeTax = unitPrice * quantity;\r\n          const taxAmount = i.taxAmount || ((priceBeforeTax - discount) * taxRate) / 100 || 0;\r\n          const subtotal = i.subtotal || (priceBeforeTax - discount + taxAmount);\r\n\r\n          return {\r\n            item: i.item?._id || i.item,\r\n            variant: i.variant || null,\r\n            itemName: i.itemName || (i.item && typeof i.item === 'object' ? i.item.itemName || i.item.name || i.item.productName || i.item.title : null) || (itemDoc?.itemName) || \"N/A\",\r\n            itemCode: i.itemCode || (itemDoc?.itemCode) || \"\",\r\n            unitPrice: unitPrice,\r\n            quantity: quantity,\r\n            price: priceBeforeTax,\r\n            taxRate: taxRate,\r\n            taxAmount: taxAmount,\r\n            discount: discount,\r\n            discountAmount: discount,\r\n            unitCost: (itemDoc?.costPrice) || unitPrice,\r\n            unit: i.unit || (itemDoc?.unit) || null,\r\n            total: subtotal,\r\n          };\r\n        });\r\n\r\n        setInvoiceData({\r\n          warehouse: response.data.warehouse || {},\r\n          customer: response.data.customer || {},\r\n          items: detailedItems,\r\n          payments: response.data.payments || [],\r\n          saleDate: response.data.saleDate && !isNaN(new Date(response.data.saleDate).getTime())\r\n            ? new Date(response.data.saleDate).toLocaleDateString()\r\n            : \"N/A\",\r\n          saleCode: response.data.saleCode || '',\r\n          amount: amount,\r\n          status: response.data.status || (source === \"POS\" ? \"Completed\" : \"N/A\"),\r\n          subtotal: response.data.subtotal || 0,\r\n          tax: response.data.tax || response.data.taxAmount || 0,\r\n          discount: response.data.discount || response.data.discountAmount || 0,\r\n          paymentStatus: paymentStatus,\r\n          notes: response.data.notes || response.data.comments || \"\",\r\n          creatorName: response.data.creatorName || \"N/A\",\r\n          shippingCost: response.data.shippingCost || 0,\r\n        });\r\n      } else {\r\n        throw new Error(\"No data returned from API\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching invoice details:\", error);\r\n      alert(`Could not load invoice details: ${error.message}`);\r\n      navigate('/sale-list');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const generatePDF = () => {\r\n    const { jsPDF } = window.jspdf;\r\n    if (!jsPDF) {\r\n      console.error('jsPDF is not loaded');\r\n      setDownloadMessage('Failed to generate PDF: jsPDF library not loaded.');\r\n      setTimeout(() => setDownloadMessage(''), 5000);\r\n      return;\r\n    }\r\n\r\n    const doc = new jsPDF();\r\n    const pageWidth = doc.internal.pageSize.getWidth();\r\n    let y = 15;\r\n\r\n    const wrapText = (text, x, maxWidth, lineHeight, fontSize = 8) => {\r\n      doc.setFontSize(fontSize);\r\n      const words = text.split(' ');\r\n      let line = '';\r\n      const lines = [];\r\n      for (let i = 0; i < words.length; i++) {\r\n        const testLine = line + words[i] + ' ';\r\n        const testWidth = doc.getTextWidth(testLine);\r\n        if (testWidth > maxWidth && line !== '') {\r\n          lines.push(line.trim());\r\n          line = words[i] + ' ';\r\n        } else {\r\n          line = testLine;\r\n        }\r\n      }\r\n      lines.push(line.trim());\r\n      lines.forEach((l, index) => {\r\n        doc.text(l, x, y + (index * lineHeight));\r\n      });\r\n      return lines.length * lineHeight;\r\n    };\r\n\r\n    doc.setFontSize(16);\r\n    doc.setFont('helvetica', 'bold');\r\n    const title = source === \"POS\" ? \"POS Order Invoice\" : \"Sale Invoice\";\r\n    const titleWidth = doc.getTextWidth(title);\r\n    doc.text(title, (pageWidth - titleWidth) / 2, y);\r\n    y += 10;\r\n\r\n    doc.setFontSize(12);\r\n    doc.setFont('helvetica', 'normal');\r\n    const subtitle = \"Invoice Details\";\r\n    const subtitleWidth = doc.getTextWidth(subtitle);\r\n    doc.text(subtitle, (pageWidth - subtitleWidth) / 2, y);\r\n    y += 10;\r\n\r\n    doc.setFontSize(10);\r\n    const details = [\r\n      `Warehouse: ${invoiceData.warehouse.warehouseName || \"N/A\"}`,\r\n      `Customer: ${invoiceData.customer.customerName || \"N/A\"}`,\r\n      `Sale Date: ${invoiceData.saleDate || \"N/A\"}`,\r\n      `Sale Code: ${invoiceData.saleCode || \"N/A\"}`,\r\n      `Tax: Rs. ${(invoiceData.tax || 0).toFixed(2)}`,\r\n      `Discount: Rs. ${(invoiceData.discount || 0).toFixed(2)}`,\r\n      `Payment Status: ${invoiceData.paymentStatus || \"N/A\"}`,\r\n      ...(source === \"POS\" ? [`Status: ${invoiceData.status || \"N/A\"}`] : []),\r\n      \r\n      `Shipping Address: ${formatAddress(invoiceData.customer.shippingAddress)}`,\r\n      `Shipping Cost: Rs. ${(invoiceData.shippingCost || 0).toFixed(2)}`,\r\n      `Notes: ${invoiceData.notes || \"N/A\"}`,\r\n    ];\r\n\r\n    details.forEach(detail => {\r\n      const [label, value] = detail.split(': ');\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text(label + ':', 15, y);\r\n      doc.setFont('helvetica', 'normal');\r\n      const maxWidth = pageWidth - 60;\r\n      const linesHeight = wrapText(value, 55, maxWidth, 5, 10);\r\n      y += linesHeight + 3;\r\n      if (y > 270) {\r\n        doc.addPage();\r\n        y = 15;\r\n      }\r\n    });\r\n\r\n    y += 10;\r\n\r\n    doc.setFontSize(12);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(\"Items\", 15, y);\r\n    y += 7;\r\n\r\n    const itemHeaders = [\r\n      \"Item\", \"Unit Price\", \"Qty\", \"Price\", \"Tax (%)\", \"Tax Amt\", \"Disc\", \"Disc Amt\", \"Unit Cost\", \"Total\"\r\n    ];\r\n    const colWidths = [40, 18, 10, 18, 16, 16, 14, 16, 16, 16];\r\n    let x = 15;\r\n\r\n    doc.setFontSize(7);\r\n    doc.setFont('helvetica', 'bold');\r\n    itemHeaders.forEach((header, index) => {\r\n      wrapText(header, x, colWidths[index], 4, 7);\r\n      x += colWidths[index];\r\n    });\r\n    y += 5;\r\n    doc.line(15, y, pageWidth - 15, y);\r\n    y += 3;\r\n\r\n    doc.setFont('helvetica', 'normal');\r\n    if (invoiceData.items.length === 0) {\r\n      doc.text(\"No items available\", 15, y);\r\n      y += 6;\r\n    } else {\r\n      invoiceData.items.forEach(item => {\r\n        x = 15;\r\n        const row = [\r\n          item.itemName,\r\n          `Rs. ${item.unitPrice.toFixed(2)}`,\r\n          item.quantity.toString(),\r\n          `Rs. ${item.price.toFixed(2)}`,\r\n          `${item.taxRate.toFixed(2)}%`,\r\n          `Rs. ${item.taxAmount.toFixed(2)}`,\r\n          `Rs. ${item.discount.toFixed(2)}`,\r\n          `Rs. ${item.discountAmount.toFixed(2)}`,\r\n          `Rs. ${item.unitCost.toFixed(2)}`,\r\n          `Rs. ${item.total.toFixed(2)}`,\r\n        ];\r\n        let maxLinesHeight = 0;\r\n        row.forEach((cell, index) => {\r\n          const linesHeight = wrapText(cell, x, colWidths[index], 4, 7);\r\n          maxLinesHeight = Math.max(maxLinesHeight, linesHeight);\r\n          x += colWidths[index];\r\n        });\r\n        y += maxLinesHeight + 2;\r\n        if (y > 270) {\r\n          doc.addPage();\r\n          y = 15;\r\n          x = 15;\r\n          doc.setFont('helvetica', 'bold');\r\n          itemHeaders.forEach((header, index) => {\r\n            wrapText(header, x, colWidths[index], 4, 7);\r\n            x += colWidths[index];\r\n          });\r\n          y += 5;\r\n          doc.line(15, y, pageWidth - 15, y);\r\n          y += 3;\r\n          doc.setFont('helvetica', 'normal');\r\n        }\r\n      });\r\n    }\r\n    doc.line(15, y, pageWidth - 15, y);\r\n    y += 10;\r\n\r\n    doc.setFontSize(12);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text(\"Payments\", 15, y);\r\n    y += 7;\r\n\r\n    const paymentHeaders = [\"Payment Type\", \"Amount\", \"Date\"];\r\n    const paymentColWidths = [80, 30, 40];\r\n    x = 15;\r\n\r\n    doc.setFontSize(7);\r\n    doc.setFont('helvetica', 'bold');\r\n    paymentHeaders.forEach((header, index) => {\r\n      wrapText(header, x, paymentColWidths[index], 4, 7);\r\n      x += paymentColWidths[index];\r\n    });\r\n    y += 5;\r\n    doc.line(15, y, pageWidth - 15, y);\r\n    y += 3;\r\n\r\n    doc.setFont('helvetica', 'normal');\r\n    if (invoiceData.payments.length === 0) {\r\n      doc.text(\"No payments available\", 15, y);\r\n      y += 6;\r\n    } else {\r\n      invoiceData.payments.forEach(payment => {\r\n        x = 15;\r\n        const paymentType = typeof payment.paymentType === 'string' ? \r\n          (payment.paymentType.match(/^[0-9a-fA-F]{24}$/) ? \"Cash\" : payment.paymentType) : \r\n          (payment.paymentType?.paymentTypeName || \"Cash\");\r\n        const row = [\r\n          paymentType,\r\n          `Rs. ${payment.amount.toFixed(2)}`,\r\n          payment.paymentDate && !isNaN(new Date(payment.paymentDate).getTime())\r\n            ? new Date(payment.paymentDate).toLocaleDateString()\r\n            : \"N/A\"\r\n        ];\r\n        let maxLinesHeight = 0;\r\n        row.forEach((cell, index) => {\r\n          const linesHeight = wrapText(cell, x, paymentColWidths[index], 4, 7);\r\n          maxLinesHeight = Math.max(maxLinesHeight, linesHeight);\r\n          x += paymentColWidths[index];\r\n        });\r\n        y += maxLinesHeight + 2;\r\n        if (y > 270) {\r\n          doc.addPage();\r\n          y = 15;\r\n          x = 15;\r\n          doc.setFont('helvetica', 'bold');\r\n          paymentHeaders.forEach((header, index) => {\r\n            wrapText(header, x, paymentColWidths[index], 4, 7);\r\n            x += paymentColWidths[index];\r\n          });\r\n          y += 5;\r\n          doc.line(15, y, pageWidth - 15, y);\r\n          y += 3;\r\n          doc.setFont('helvetica', 'normal');\r\n        }\r\n      });\r\n    }\r\n    doc.line(15, y, pageWidth - 15, y);\r\n\r\n    const pdfBlob = doc.output('blob');\r\n    const url = URL.createObjectURL(pdfBlob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `Invoice-${invoiceData.saleCode || 'unknown'}.pdf`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n\r\n    setDownloadMessage('PDF has been downloaded successfully.');\r\n    setTimeout(() => setDownloadMessage(''), 5000);\r\n  };\r\n\r\n  const handleDownloadPDF = () => {\r\n    generatePDF();\r\n  };\r\n\r\n  if (loading) return <LoadingScreen />;\r\n\r\n  return (\r\n    <div className=\"flex flex-col\">\r\n      <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\r\n      <div className=\"box-border flex min-h-screen\">\r\n        <div className=\"w-auto\">\r\n          <Sidebar isSidebarOpen={isSidebarOpen} />\r\n        </div>\r\n        <div className=\"flex flex-col p-2 md:p-2 w-full mx-auto overflow-x-auto\">\r\n          <header className=\"flex flex-col items-center justify-between px-2 py-2 mb-2 bg-gray-100 rounded-md shadow md:flex-row\">\r\n            <div className=\"flex items-baseline gap-1 text-center sm:flex-row sm:text-left\">\r\n              <h1 className=\"text-lg font-semibold truncate sm:text-xl\">\r\n                View {source === \"POS\" ? \"POS Order\" : \"Sale\"}\r\n              </h1>\r\n              <span className=\"text-xs text-gray-600 sm:text-sm\">\r\n                Invoice Details\r\n              </span>\r\n            </div>\r\n          </header>\r\n          <div className=\"p-4 bg-white shadow-md rounded-md mt-3 border-t-4 border-cyan-500\">\r\n            {downloadMessage && (\r\n              <div className=\"mb-4 p-2 bg-green-100 text-green-700 rounded-md\">\r\n                {downloadMessage}\r\n              </div>\r\n            )}\r\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\r\n              <div>\r\n                <label className=\"block font-semibold text-gray-700\">Warehouse</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={invoiceData.warehouse.warehouseName || \"N/A\"}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                  disabled\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block font-semibold text-gray-700\">Customer</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={invoiceData.customer.customerName || \"N/A\"}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                  disabled\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block font-semibold text-gray-700\">Sale Date</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={invoiceData.saleDate || \"N/A\"}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                  disabled\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block font-semibold text-gray-700\">Sale Code</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={invoiceData.saleCode || \"N/A\"}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                  disabled\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block font-semibold text-gray-700\">Tax</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={`₹${(invoiceData.tax || 0).toFixed(2)}`}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                  disabled\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block font-semibold text-gray-700\">Discount</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={`₹${(invoiceData.discount || 0).toFixed(2)}`}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                  disabled\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block font-semibold text-gray-700\">Payment Status</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={invoiceData.paymentStatus || \"N/A\"}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                  disabled\r\n                />\r\n              </div>\r\n              {source === \"POS\" && (\r\n                <div>\r\n                  <label className=\"block font-semibold text-gray-700\">Status</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={invoiceData.status || \"N/A\"}\r\n                    className=\"w-full p-2 border rounded-md\"\r\n                    disabled\r\n                  />\r\n                </div>\r\n              )}\r\n             \r\n              <div>\r\n                <label className=\"block font-semibold text-gray-700\">Shipping Address</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formatAddress(invoiceData.customer.shippingAddress)}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                  disabled\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block font-semibold text-gray-700\">Shipping Cost</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={`₹${(invoiceData.shippingCost || 0).toFixed(2)}`}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                  disabled\r\n                />\r\n              </div>\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block font-semibold text-gray-700\">Notes</label>\r\n                <textarea\r\n                  value={invoiceData.notes || \"N/A\"}\r\n                  className=\"w-full p-2 border rounded-md\"\r\n                  rows=\"3\"\r\n                  disabled\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-4\">\r\n              <h3 className=\"text-lg font-semibold\">Items</h3>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full bg-white border border-gray-300 shadow-sm\">\r\n                  <thead className=\"bg-gray-200\">\r\n                    <tr>\r\n                      <th className=\"px-4 py-2 text-sm font-medium text-left border\">Item</th>\r\n                      <th className=\"px-4 py-2 text-sm font-medium text-left border\">Unit Price</th>\r\n                      <th className=\"px-4 py-2 text-sm font-medium text-left border\">Quantity</th>\r\n                      <th className=\"px-4 py-2 text-sm font-medium text-left border\">Price</th>\r\n                      <th className=\"px-4 py-2 text-sm font-medium text-left border\">Tax (%)</th>\r\n                      <th className=\"px-4 py-2 text-sm font-medium text-left border\">Tax Amount</th>\r\n                      <th className=\"px-4 py-2 text-sm font-medium text-left border\">Discount</th>\r\n                      <th className=\"px-4 py-2 text-sm font-medium text-left border\">Discount Amount</th>\r\n                      <th className=\"px-4 py-2 text-sm font-medium text-left border\">Unit Cost</th>\r\n                      <th className=\"px-4 py-2 text-sm font-medium text-left border\">Total Amount</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {invoiceData.items.length === 0 ? (\r\n                      <tr>\r\n                        <td colSpan=\"10\" className=\"p-4 text-center text-gray-500 border\">\r\n                          No items available\r\n                        </td>\r\n                      </tr>\r\n                    ) : (\r\n                      invoiceData.items.map((item, index) => (\r\n                        <tr key={index}>\r\n                          <td className=\"border px-2 py-1\">{item.itemName}</td>\r\n                          <td className=\"border px-2 py-1\">₹{(item.unitPrice || 0).toFixed(2)}</td>\r\n                          <td className=\"border px-2 py-1\">{item.quantity || 0}</td>\r\n                          <td className=\"border px-2 py-1\">₹{(item.price || 0).toFixed(2)}</td>\r\n                          <td className=\"border px-2 py-1\">{(item.taxRate || 0).toFixed(2)}%</td>\r\n                          <td className=\"border px-2 py-1\">₹{(item.taxAmount || 0).toFixed(2)}</td>\r\n                          <td className=\"border px-2 py-1\">₹{(item.discount || 0).toFixed(2)}</td>\r\n                          <td className=\"border px-2 py-1\">₹{(item.discountAmount || 0).toFixed(2)}</td>\r\n                          <td className=\"border px-2 py-1\">₹{(item.unitCost || 0).toFixed(2)}</td>\r\n                          <td className=\"border px-2 py-1\">₹{(item.total || 0).toFixed(2)}</td>\r\n                        </tr>\r\n                      ))\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-4\">\r\n              <h3 className=\"text-lg font-semibold\">Payments</h3>\r\n              <table className=\"min-w-full bg-white border border-gray-300 shadow-sm\">\r\n                <thead className=\"bg-gray-200\">\r\n                  <tr>\r\n                    <th className=\"px-4 py-2 text-sm font-medium text-left border\">Payment Type</th>\r\n                    <th className=\"px-4 py-2 text-sm font-medium text-left border\">Amount</th>\r\n                    <th className=\"px-4 py-2 text-sm font-medium text-left border\">Date</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {invoiceData.payments.length === 0 ? (\r\n                    <tr>\r\n                      <td colSpan=\"3\" className=\"p-4 text-center text-gray-500 border\">\r\n                        No payments available\r\n                      </td>\r\n                    </tr>\r\n                  ) : (\r\n                    invoiceData.payments.map((payment, index) => (\r\n                      <tr key={index}>\r\n                        <td className=\"border px-2 py-1\">\r\n  {payment.paymentType?.paymentTypeName\r\n    || payment.paymentTypeName\r\n    || payment.paymentType\r\n    || \"N/A\"}\r\n</td>\r\n\r\n                        <td className=\"border px-2 py-1\">₹{(payment.amount || 0).toFixed(2)}</td>\r\n                        <td className=\"border px-2 py-1\">\r\n                          {payment.paymentDate && !isNaN(new Date(payment.paymentDate).getTime())\r\n                            ? new Date(payment.paymentDate).toLocaleDateString()\r\n                            : \"N/A\"}\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div className=\"mt-4 flex space-x-2\">\r\n              <button\r\n                onClick={() => navigate('/sale-list')}\r\n                className=\"px-4 py-2 text-white bg-cyan-500 rounded-md hover:bg-cyan-600\"\r\n              >\r\n                Back to List\r\n              </button>\r\n              <button\r\n                onClick={handleDownloadPDF}\r\n                className=\"px-4 py-2 text-white bg-green-500 rounded-md hover:bg-green-600\"\r\n              >\r\n                Download PDF\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewSale;"],"names":["LoadingScreen","isSidebarOpen","setSidebarOpen","useState","_jsxs","className","children","_jsx","Navbar","Sidebar","formatAddress","address","parts","street","city","state","zip","country","filter","part","trim","length","join","ViewSale","navigate","useNavigate","location","useLocation","queryParams","URLSearchParams","search","id","get","source","loading","setLoading","allItems","setAllItems","invoiceData","setInvoiceData","warehouse","customer","items","payments","saleDate","saleCode","amount","status","subtotal","tax","discount","paymentStatus","notes","creatorName","shippingCost","downloadMessage","setDownloadMessage","useEffect","script","document","createElement","src","async","onload","console","log","onerror","error","body","appendChild","window","innerWidth","fetchItems","fetchInvoiceDetails","removeChild","token","localStorage","getItem","response","axios","headers","Authorization","flatItems","data","it","_it$warehouse","_id","map","isVariant","Boolean","parentItemId","parentId","variantId","itemName","variantName","barcode","barcodes","itemCode","i","_i$warehouse","warehouseId","err","message","alert","endpoint","Error","totalPaid","reduce","sum","payment","total","totalAmount","payment_state","detailedItems","_response$data$wareho","_itemDoc$warehouse","_i$tax","_itemDoc$tax","_i$item2","item","variant","itemDoc","find","ai","_i$item","_response$data$wareho2","_ai$warehouse2","itemId","_ai$warehouse","unitPrice","price","salesPrice","quantity","taxRate","taxPercentage","taxAmount","priceBeforeTax","name","productName","title","discountAmount","unitCost","costPrice","unit","isNaN","Date","getTime","toLocaleDateString","comments","type","value","warehouseName","disabled","customerName","toFixed","shippingAddress","rows","colSpan","index","_payment$paymentType2","paymentType","paymentTypeName","paymentDate","onClick","handleDownloadPDF","generatePDF","jsPDF","jspdf","setTimeout","doc","pageWidth","internal","pageSize","getWidth","y","wrapText","text","x","maxWidth","lineHeight","fontSize","arguments","undefined","setFontSize","words","split","line","lines","testLine","getTextWidth","push","forEach","l","setFont","titleWidth","subtitle","subtitleWidth","detail","label","linesHeight","addPage","itemHeaders","colWidths","header","row","toString","maxLinesHeight","cell","Math","max","paymentHeaders","paymentColWidths","_payment$paymentType","match","pdfBlob","output","url","URL","createObjectURL","link","href","download","click","revokeObjectURL"],"sourceRoot":""}