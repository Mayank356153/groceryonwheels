"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[968],{80968:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(65043),n=s(66727),r=s(21197),c=s(59255),o=s(86213),l=s(49804),i=s(60184),d=s(37762),x=s(64857),h=s(11238),u=s(70579);const p=function(){const e=(0,n.Zp)(),[t,s]=(0,a.useState)(!0),[p,m]=(0,a.useState)([]),[y,b]=(0,a.useState)(""),[j,g]=(0,a.useState)(10),[N,w]=(0,a.useState)(1);(0,a.useEffect)((()=>{window.innerWidth<768&&s(!1)}),[]);const f=async()=>{try{const e=localStorage.getItem("token"),t=await o.A.get("api/countries",{headers:{Authorization:`Bearer ${e}`}});m(t.data.data||[])}catch(e){console.error("Error fetching countries:",e)}};if((0,a.useEffect)((()=>{f()}),[]),"admin"!==localStorage.getItem("role"))return(0,u.jsx)(n.C5,{to:"/dashboard",replace:!0});const C=p.filter((e=>e.countryName.toLowerCase().includes(y.toLowerCase()))),v=N*j,k=v-j,S=C.slice(k,v),$=Math.ceil(C.length/j),A=e=>{e>=1&&e<=$&&w(e)};return(0,u.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,u.jsx)(r.A,{isSidebarOpen:t,setSidebarOpen:s}),(0,u.jsxs)("div",{className:"flex flex-grow",children:[(0,u.jsx)(c.A,{isSidebarOpen:t}),(0,u.jsxs)("div",{className:"overflow-x-auto p-4 w-full transition-all duration-300",children:[(0,u.jsxs)("header",{className:"flex justify-between p-4 mb-2 bg-gray-100 rounded shadow sm:flex-row sm:items-center",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("h1",{className:"text-lg font-semibold",children:"Country List"}),(0,u.jsx)("span",{className:"text-sm text-gray-600",children:"View/Search"})]}),(0,u.jsxs)("nav",{className:"flex items-center text-xs text-gray-500",children:[(0,u.jsxs)(n.k2,{to:"/dashboard",className:"flex items-center hover:text-cyan-600",children:[(0,u.jsx)(i.$BV,{className:"mr-1"})," Home"]}),(0,u.jsx)(l.XWt,{className:"mx-1"}),(0,u.jsx)("span",{children:"Country List"})]})]}),(0,u.jsxs)("div",{className:"p-4 bg-white border-t-4 border-cyan-500 rounded shadow",children:[(0,u.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,u.jsx)("h2",{className:"text-lg font-semibold",children:"Countries"}),(0,u.jsx)("button",{onClick:()=>e("/add-country"),className:"px-4 py-2 text-white bg-cyan-500 rounded",children:"+ New Country"})]}),(0,u.jsxs)("div",{className:"flex flex-wrap justify-between mb-4 gap-2",children:[(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Show"}),(0,u.jsx)("select",{className:"p-1 border rounded",value:j,onChange:e=>{g(+e.target.value),w(1)},children:[10,20,50].map((e=>(0,u.jsx)("option",{children:e},e)))}),(0,u.jsx)("span",{children:"entries"})]}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,u.jsx)("button",{onClick:()=>{const e=C.map((e=>`${e.countryName},${e.countryCode},${e.status}`)).join("\n");navigator.clipboard.writeText(e),alert("Copied to clipboard")},className:"px-2 py-1 bg-cyan-500 text-white rounded",children:"Copy"}),(0,u.jsx)("button",{onClick:()=>{const e=h.utils.json_to_sheet(C),t=h.utils.book_new();h.utils.book_append_sheet(t,e,"Countries"),h.writeFile(t,"countries.xlsx")},className:"px-2 py-1 bg-cyan-500 text-white rounded",children:"Excel"}),(0,u.jsx)("button",{onClick:()=>{const e=new d.uE;e.text("Countries List",20,20),(0,x.Ay)(e,{head:[["Name","Code","Status"]],body:C.map((e=>[e.countryName,e.countryCode,e.status]))}),e.save("countries.pdf")},className:"px-2 py-1 bg-cyan-500 text-white rounded",children:"PDF"}),(0,u.jsx)("button",{onClick:()=>window.print(),className:"px-2 py-1 bg-cyan-500 text-white rounded",children:"Print"}),(0,u.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,"+C.map((e=>`${e.countryName},${e.countryCode},${e.status}`)).join("\n"),t=document.createElement("a");t.href=encodeURI(e),t.download="countries.csv",document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"px-2 py-1 bg-cyan-500 text-white rounded",children:"CSV"}),(0,u.jsx)("input",{type:"text",placeholder:"Search",className:"p-1 border rounded",value:y,onChange:e=>b(e.target.value)})]})]}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"min-w-full bg-white border-collapse rounded shadow",children:[(0,u.jsx)("thead",{className:"bg-gray-200",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-4 py-2 border",children:"Name"}),(0,u.jsx)("th",{className:"px-4 py-2 border",children:"Code"}),(0,u.jsx)("th",{className:"px-4 py-2 border",children:"Status"}),(0,u.jsx)("th",{className:"px-4 py-2 border",children:"Action"})]})}),(0,u.jsx)("tbody",{children:0===S.length?(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"4",className:"py-4 text-center text-gray-500",children:"No records"})}):S.map((t=>(0,u.jsxs)("tr",{className:"border-b",children:[(0,u.jsx)("td",{className:"px-4 py-2",children:t.countryName}),(0,u.jsx)("td",{className:"px-4 py-2",children:t.countryCode}),(0,u.jsx)("td",{className:"px-4 py-2",children:(0,u.jsx)("button",{onClick:()=>(async(e,t)=>{const s="active"===t?"inactive":"active";try{const t=localStorage.getItem("token");await o.A.put(`api/countries/${e}`,{status:s},{headers:{Authorization:`Bearer ${t}`}}),m((t=>t.map((t=>t._id===e?{...t,status:s}:t))))}catch(a){console.error("toggleStatus error:",a.response||a),alert("Unable to change status.")}})(t._id,t.status),className:`px-2 py-1 rounded ${"active"===t.status?"bg-green-500":"bg-red-500"} text-white`,children:t.status})}),(0,u.jsxs)("td",{className:"px-4 py-2",children:[(0,u.jsx)("button",{onClick:()=>e(`/edit-country/${t._id}`),className:"px-2 py-1 mr-2 bg-cyan-600 text-white rounded",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this country?"))try{const t=localStorage.getItem("token");await o.A.delete(`api/countries/${e}`,{headers:{Authorization:`Bearer ${t}`}}),alert("Deleted"),f()}catch(t){console.error("Error deleting:",t)}})(t._id),className:"px-2 py-1 bg-red-600 text-white rounded",children:"Delete"})]})]},t._id)))})]})}),(0,u.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,u.jsxs)("span",{children:["Showing ",k+1," to ",Math.min(v,C.length)," of ",C.length," entries"]}),(0,u.jsxs)("div",{className:"space-x-2",children:[(0,u.jsx)("button",{onClick:()=>A(N-1),disabled:1===N,className:"px-2 py-1 bg-gray-300 rounded disabled:opacity-50",children:"Previous"}),(0,u.jsx)("button",{onClick:()=>A(N+1),disabled:v>=C.length,className:"px-2 py-1 bg-gray-300 rounded disabled:opacity-50",children:"Next"})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=968.a63f7068.chunk.js.map