(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1924],{7875:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(65043),r=s(65173),l=s.n(r);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},o.apply(this,arguments)}function n(e,t){if(null==e)return{};var s,a,r=function(e,t){if(null==e)return{};var s,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)s=l[a],t.indexOf(s)>=0||(r[s]=e[s]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}var i=(0,a.forwardRef)((function(e,t){var s=e.color,r=void 0===s?"currentColor":s,l=e.size,i=void 0===l?24:l,c=n(e,["color","size"]);return a.createElement("svg",o({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),a.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))}));i.propTypes={color:l().string,size:l().oneOfType([l().string,l().number])},i.displayName="X";const c=i},13218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},21513:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(65043),r=s(7875),l=s(23546),o=s(3605),n=s(70579);const i=e=>{var t,s,i,c;let{coupon:d,onClose:u}=e;const[m,x]=(0,a.useState)(!0),p={items:(null===(t=d.itemsAllowed)||void 0===t?void 0:t.length)>0,categories:(null===(s=d.categoryAllowed)||void 0===s?void 0:s.length)>0,subCategories:(null===(i=d.subCategoryAllowed)||void 0===i?void 0:i.length)>0,subSubCategories:(null===(c=d.subsubCategoryAllowed)||void 0===c?void 0:c.length)>0},h=Object.values(p).some(Boolean),b=()=>{x(!1),null===u||void 0===u||u()};if(!m||!h)return null;return(0,n.jsx)(l.N,{children:(0,n.jsx)(o.P.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:{visible:{opacity:1},hidden:{opacity:0}},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm",children:(0,n.jsxs)(o.P.div,{variants:{visible:{opacity:1,y:0,scale:1},hidden:{opacity:0,y:20,scale:.95}},transition:{type:"spring",damping:25},className:"relative w-full max-w-md overflow-hidden bg-white shadow-2xl rounded-xl",children:[(0,n.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between p-4 border-b bg-gradient-to-r from-blue-50 to-gray-50",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Coupon Restrictions"}),(0,n.jsx)("button",{onClick:b,className:"p-1 transition-colors rounded-full hover:bg-gray-200","aria-label":"Close",children:(0,n.jsx)(r.A,{className:"text-gray-500",size:20})})]}),(0,n.jsxs)("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[p.items&&(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("h4",{className:"flex items-center text-sm font-medium text-gray-700",children:[(0,n.jsx)("span",{className:"w-2 h-2 mr-2 bg-blue-500 rounded-full"}),"Applicable Items"]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:d.itemsAllowed.map(((e,t)=>(0,n.jsx)("span",{className:"px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-full",children:e.itemName||"Unnamed Item"},t)))})]}),p.categories&&(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("h4",{className:"flex items-center text-sm font-medium text-gray-700",children:[(0,n.jsx)("span",{className:"w-2 h-2 mr-2 bg-purple-500 rounded-full"}),"Categories"]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:d.categoryAllowed.map(((e,t)=>(0,n.jsx)("span",{className:"px-3 py-1 text-xs font-medium text-purple-700 bg-purple-100 rounded-full",children:e.name||"Uncategorized"},t)))})]}),p.subCategories&&(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("h4",{className:"flex items-center text-sm font-medium text-gray-700",children:[(0,n.jsx)("span",{className:"w-2 h-2 mr-2 bg-green-500 rounded-full"}),"Sub Categories"]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:d.subCategoryAllowed.map(((e,t)=>(0,n.jsx)("span",{className:"px-3 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full",children:e.name||"Unnamed Subcategory"},t)))})]}),p.subSubCategories&&(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("h4",{className:"flex items-center text-sm font-medium text-gray-700",children:[(0,n.jsx)("span",{className:"w-2 h-2 mr-2 rounded-full bg-amber-500"}),"Sub Sub Categories"]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:d.subsubCategoryAllowed.map(((e,t)=>(0,n.jsx)("span",{className:"px-3 py-1 text-xs font-medium rounded-full text-amber-700 bg-amber-100",children:e.name||"Unnamed Sub-subcategory"},t)))})]})]}),(0,n.jsx)("div",{className:"sticky bottom-0 p-4 border-t bg-gray-50",children:(0,n.jsx)("button",{onClick:b,className:"w-full px-4 py-2 text-sm font-medium text-white transition-colors bg-blue-600 rounded-lg hover:bg-blue-700",children:"Close"})})]})})})}},41497:(e,t,s)=>{"use strict";var a=s(13218);function r(){}function l(){}l.resetWarningCache=r,e.exports=function(){function e(e,t,s,r,l,o){if(o!==a){var n=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw n.name="Invariant Violation",n}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:r};return s.PropTypes=s,s}},61924:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(65043),r=s(60184),l=s(21197),o=s(59255),n=s(86213),i=s(37762),c=s(64857),d=s(11238),u=s(66727),m=s(21513),x=s(70579);const p=()=>{const e=(0,u.Zp)(),[t,s]=(0,a.useState)(10),[p,h]=(0,a.useState)(1),[b,y]=(0,a.useState)(""),[g,f]=(0,a.useState)(!0),[v,j]=(0,a.useState)([]),[w,N]=(0,a.useState)(!1),[C,S]=(0,a.useState)(!1),[k,A]=(0,a.useState)({}),O=async()=>{try{N(!0);const e=await n.A.get("api/customer-coupons",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e.data),j(e.data)}catch(e){console.log(e.message)}finally{N(!1)}};(0,a.useEffect)((()=>{O()}),[]),(0,a.useEffect)((()=>{window.innerWidth<768&&f(!1)}),[]);const D=v.filter((e=>{var t,s,a,r;const l=b.toLowerCase();return(null===(t=e.customer)||void 0===t||null===(s=t.customerName)||void 0===s?void 0:s.toLowerCase().includes(l))||(null===(a=e.customer)||void 0===a||null===(r=a.mobile)||void 0===r?void 0:r.toLowerCase().includes(l))})),_=Math.ceil(D.length/t),E=D.slice((p-1)*t,p*t),T=e=>{e>=1&&e<=_&&h(e)},[$,I]=(0,a.useState)(null),[P,L]=(0,a.useState)({}),z=e=>{const t=v.find((t=>t._id===e));if(!t)return void console.error("Category not found for ID:",e);const s="Active"===t.status?"Inactive":"Active";(async(e,t)=>{N(!0);try{await n.A.put(`api/customer-coupons/${e}`,{status:t},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`}}),alert("Update Successfully"),O()}catch(l){var s,a,r;console.error("Error:",(null===(s=l.response)||void 0===s?void 0:s.data)||l.message),alert("Unsuccessful: "+((null===(a=l.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||l.message))}finally{N(!1)}})(e,s),L((t=>({...t,[e]:s})))};return(0,x.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,x.jsx)(l.A,{isSidebarOpen:g,setSidebarOpen:f}),(0,x.jsxs)("div",{className:"flex flex-grow",children:[(0,x.jsx)("div",{children:(0,x.jsx)(o.A,{isSidebarOpen:g})}),(0,x.jsxs)("div",{className:"flex-grow  flex flex-col p-2 md:p-2 min-h-screen",children:[C&&(0,x.jsx)(m.A,{coupon:k,onClose:()=>{S(!1),f(!0)}}),(0,x.jsxs)("div",{className:"flex flex-col items-center justify-between p-4 mb-6 bg-white rounded shadow md:flex-row",children:[(0,x.jsx)("h2",{className:"text-lg font-bold text-center md:text-left",children:"Customer Coupons List"}),(0,x.jsxs)("p",{className:"flex text-sm text-center text-gray-500 hover:text-cyan-500 md:text-left",children:[(0,x.jsx)(r.$BV,{className:"mt-1 mr-2 text-gray-500 hover:text-cyan-500"}),"Home > Customer Coupons List"]})]}),(0,x.jsxs)("div",{className:"flex flex-col items-center justify-between p-4 mb-4 border-t-4 rounded md:flex-row border-cyan-500",children:[(0,x.jsx)("h3",{className:"font-semibold text-center text-md md:text-left",children:"Customer Coupons List"}),(0,x.jsxs)("button",{className:"flex items-center w-full gap-2 px-4 py-2 mt-2 text-white rounded bg-cyan-300 hover:bg-cyan-500 md:w-auto md:mt-0",onClick:()=>e("/create"),children:[(0,x.jsx)(r.OiG,{})," Create Coupon"]})]}),(0,x.jsxs)("div",{className:"flex flex-col items-center justify-between gap-2 p-4 mb-4 rounded md:flex-row",children:[(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("label",{className:"text-sm/6",children:"Show"}),(0,x.jsxs)("select",{className:"px-2 py-1 border rounded text-sm/6",value:t,onChange:e=>{s(Number(e.target.value)),h(1)},children:[(0,x.jsx)("option",{value:10,children:"10"}),(0,x.jsx)("option",{value:25,children:"25"}),(0,x.jsx)("option",{value:50,children:"50"}),(0,x.jsx)("option",{value:100,children:"100"})]}),(0,x.jsx)("label",{className:"text-sm/6",children:"Entries"})]}),(0,x.jsxs)("div",{className:"flex flex-wrap justify-center md:justify-end gap-0.5 w-full md:w-auto mt-1 md:mt-0",children:[(0,x.jsx)("button",{className:"w-full px-3 py-1 text-white bg-cyan-300 hover:bg-cyan-500 md:w-auto text-sm/6",onClick:()=>{const e=v.map((e=>{var t;return`${(null===(t=e.customer)||void 0===t?void 0:t.customerName)||"NA"}, ${e.occasionName}, ${e.couponCode},${new Date(e.expiryDate).toDateString()},${e.value},${e.couponType},${e.description},${e.status}`})).join("\n");navigator.clipboard.writeText(e),alert("Data copied to clipboard!")},children:"Copy"}),(0,x.jsx)("button",{className:"w-full px-3 py-1 text-white bg-cyan-300 hover:bg-cyan-500 md:w-auto text-sm/6",onClick:()=>{const e=d.utils.json_to_sheet(v),t=d.utils.book_new();d.utils.book_append_sheet(t,e,"CustomerCoupons"),d.writeFile(t,"customer_coupon.xlsx")},children:"Excel"}),(0,x.jsx)("button",{className:"w-full px-3 py-1 text-white bg-cyan-300 hover:bg-cyan-500 md:w-auto text-sm/6",onClick:()=>{const e=new i.uE;e.text("Customer Coupon List",20,20);const t=v.map((e=>{var t;return[(null===(t=e.customer)||void 0===t?void 0:t.customerName)||"NA",e.occasionName,e.couponCode,new Date(e.expiryDate).toDateString(),e.value,e.couponType,e.description,e.status]}));(0,c.Ay)(e,{head:[["Customer Name","Occasion Name","Coupon Code","Expire Date","Value","Coupon Type","Description","Status"]],body:t}),e.save("customerCoupon.pdf")},children:"PDF"}),(0,x.jsx)("button",{className:"w-full px-3 py-1 text-white bg-cyan-300 hover:bg-cyan-500 md:w-auto text-sm/6",onClick:()=>{window.print()},children:"Print"}),(0,x.jsx)("button",{className:"w-full px-3 py-1 text-white bg-cyan-300 hover:bg-cyan-500 md:w-auto text-sm/6",onClick:()=>{const e="data:text/csv;charset=utf-8,"+v.map((e=>Object.values(e).join(","))).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","customer_coupon.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},children:"CSV"}),(0,x.jsx)("input",{type:"text",placeholder:"Search...",value:b,onChange:e=>y(e.target.value),className:"w-full px-2 py-1 border md:w-auto text-sm/6"})]})]}),(0,x.jsx)("div",{className:"p-4 overflow-x-auto rounded",children:(0,x.jsxs)("table",{className:"w-full text-sm border border-collapse border-gray-300 md:text-base",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{className:"text-center bg-gray-200",children:[(0,x.jsx)("th",{className:"p-2 border text-sm/6",children:"Customer Name"}),(0,x.jsx)("th",{className:"p-2 border text-sm/6",children:"Occasion Name"}),(0,x.jsx)("th",{className:"p-2 border text-sm/6",children:"Coupon Code"}),(0,x.jsx)("th",{className:"p-2 border text-sm/6",children:"Expire Date"}),(0,x.jsx)("th",{className:"p-2 border text-sm/6",children:"Value"}),(0,x.jsx)("th",{className:"p-2 border text-sm/6",children:"Coupon Type"}),(0,x.jsx)("th",{className:"p-2 border text-sm/6",children:"Description"}),(0,x.jsx)("th",{className:"p-2 border text-sm/6",children:"Status"}),(0,x.jsx)("th",{className:"p-2 border text-sm/6",children:"Action"})]})}),(0,x.jsx)("tbody",{children:0===E.length?(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"9",className:"p-4 text-center text-gray-500 border",children:"No data available in table"})}):E.map(((t,s)=>{var a;return(0,x.jsxs)("tr",{className:"text-center",children:[(0,x.jsx)("td",{className:"p-2 border",children:(null===(a=t.customer)||void 0===a?void 0:a.customerName)||"NA"}),(0,x.jsx)("td",{className:"p-2 border",children:t.occasionName}),(0,x.jsx)("td",{className:"p-2 border",children:t.couponCode}),(0,x.jsx)("td",{className:"p-2 border",children:new Date(t.expiryDate).toDateString()}),(0,x.jsx)("td",{className:"p-2 border",children:t.value}),(0,x.jsx)("td",{className:"p-2 border",children:t.couponType}),(0,x.jsx)("td",{className:"p-2 border",children:t.description}),(0,x.jsx)("td",{className:"p-2 border",onClick:()=>z(t._id),children:"active"==t.status.toLowerCase()?(0,x.jsx)("span",{className:"p-1 text-white bg-green-400 rounded-md",children:"Active"}):(0,x.jsx)("span",{className:"p-1 text-white bg-red-500 rounded-md",children:"InActive"})}),(0,x.jsxs)("td",{className:"p-2 border",children:[(0,x.jsx)("button",{onClick:()=>(e=>{I($===e?null:e)})(t._id),className:"px-3 py-1 text-white rounded bg-cyan-600",children:"Action \u25bc"}),$===t._id&&(0,x.jsxs)("div",{className:"absolute z-10 w-32 -mt-5 bg-white border border-gray-200 rounded-md shadow-md right-12",children:[(0,x.jsx)("button",{className:"block w-full px-4 py-2 text-left hover:bg-gray-100",onClick:()=>{f(!1),S(!0),A(t)},children:"View Details"}),(0,x.jsxs)("button",{className:"flex items-center w-full px-3 py-2 text-gray-700 hover:bg-gray-100",onClick:()=>e(`/create?couponid=${t._id}`),children:[(0,x.jsx)(r.uO9,{className:"mr-2"})," Edit"]}),(0,x.jsxs)("button",{className:"flex items-center w-full px-3 py-2 text-red-600 hover:bg-gray-100",onClick:()=>(async e=>{if(window.confirm("Do u want to delete this")){N(!0);try{await n.A.delete(`api/customer-coupons/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Deleted Successfully")}catch(t){console.error(t.message)}finally{await O(),N(!1)}}})(t._id),children:[(0,x.jsx)(r.qbC,{className:"mr-2"})," Delete"]})]})]})]},s)}))})]})}),(0,x.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,x.jsxs)("span",{children:["Showing ",t*(p-1)+1," to ",Math.min(t*p,v.length)," of ",v.length," entries"]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("button",{onClick:T,className:"px-4 py-2 mr-2 text-gray-600 bg-gray-300 disabled:opacity-50",disabled:1===p,children:"Previous"}),(0,x.jsx)("button",{onClick:T,className:"px-4 py-2 text-gray-600 bg-gray-300 disabled:opacity-50",disabled:p===_,children:"Next"})]})]})]})]})]})}},65173:(e,t,s)=>{e.exports=s(41497)()}}]);
//# sourceMappingURL=1924.f872bc0a.chunk.js.map