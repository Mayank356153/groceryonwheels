"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6185],{6185:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var r=s(65043),a=s(66727),n=s(21197),l=s(59255),o=s(86213),c=s(14840),i=s(49804),d=s(60184),u=s(70579);const x=function(){const{countryId:e}=(0,a.g)(),t=(0,a.Zp)(),[s,x]=(0,r.useState)(!0),[m,h]=(0,r.useState)(!1),[y,b]=(0,r.useState)({countryName:"",countryCode:"",status:"active"});if((0,r.useEffect)((()=>{window.innerWidth<768&&x(!1)}),[]),(0,r.useEffect)((()=>{if(!e)return;(async()=>{h(!0);try{const t=localStorage.getItem("token"),s=(await o.A.get(`api/countries/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data.data;b({countryName:s.countryName||"",countryCode:s.countryCode||"",status:s.status||"active"})}catch(t){console.error("Error fetching country:",t),alert("Error fetching country data.")}finally{h(!1)}})()}),[e]),"admin"!==localStorage.getItem("role"))return(0,u.jsx)(a.C5,{to:"/dashboard",replace:!0});const f=e=>b((t=>({...t,[e.target.name]:e.target.value})));return m?(0,u.jsx)(c.A,{}):(0,u.jsxs)("div",{className:"flex flex-col h-screen bg-gray-100",children:[(0,u.jsx)(n.A,{isSidebarOpen:s,setSidebarOpen:x}),(0,u.jsxs)("div",{className:"flex flex-grow",children:[(0,u.jsx)(l.A,{isSidebarOpen:s}),(0,u.jsxs)("div",{className:"flex-grow p-4 transition-all duration-300 w-full",children:[(0,u.jsx)("h1",{className:"mb-2 text-2xl font-bold",children:e?"Edit Country":"Add Country"}),(0,u.jsxs)("nav",{className:"flex items-center text-xs text-gray-500 mb-4",children:[(0,u.jsxs)(a.k2,{to:"/dashboard",className:"flex items-center no-underline hover:text-cyan-600",children:[(0,u.jsx)(d.$BV,{className:"mr-2"})," Home"]}),(0,u.jsxs)(a.k2,{to:"/country-list",className:"flex items-center no-underline hover:text-cyan-600 mx-2",children:[(0,u.jsx)(i.XWt,{className:"text-gray-400 mt-1.5"}),"Country List"]}),(0,u.jsx)(i.XWt,{className:"mx-2 text-gray-400 mt-1.5"}),(0,u.jsx)("span",{children:e?"Edit Country":"Add Country"})]}),(0,u.jsx)("div",{className:"p-6 bg-white rounded shadow-md",children:(0,u.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),h(!0);try{const s={Authorization:`Bearer ${localStorage.getItem("token")}`};e?(await o.A.put(`api/countries/${e}`,y,{headers:s}),alert("Country updated successfully!")):(await o.A.post("api/countries",y,{headers:s}),alert("Country created successfully!")),t("/country-list")}catch(r){console.error("Error submitting country:",r),alert("Error submitting country.")}finally{h(!1)}},children:[(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block mb-1 font-semibold",children:"Country Name"}),(0,u.jsx)("input",{type:"text",name:"countryName",value:y.countryName,onChange:f,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block mb-1 font-semibold",children:"Country Code"}),(0,u.jsx)("input",{type:"text",name:"countryCode",value:y.countryCode,onChange:f,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block mb-1 font-semibold",children:"Status"}),(0,u.jsxs)("select",{name:"status",value:y.status,onChange:f,className:"w-full p-2 border border-gray-300 rounded",children:[(0,u.jsx)("option",{value:"active",children:"Active"}),(0,u.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,u.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,u.jsx)("button",{type:"submit",className:"px-4 py-2 text-white bg-green-500 rounded hover:bg-green-600",children:e?"Update Country":"Create Country"}),(0,u.jsx)("button",{type:"button",onClick:()=>t("/country-list"),className:"px-4 py-2 text-white bg-orange-500 rounded hover:bg-orange-600",children:"Close"})]})]})})]})]})]})}},14840:(e,t,s)=>{s.d(t,{A:()=>o});var r=s(65043),a=s(21197),n=s(59255),l=s(70579);function o(){const[e,t]=(0,r.useState)(!1);return(0,l.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,l.jsx)(a.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,l.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,l.jsx)("div",{children:(0,l.jsx)(n.A,{isSidebarOpen:e})}),(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,l.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}}}]);
//# sourceMappingURL=6185.e40e88cc.chunk.js.map