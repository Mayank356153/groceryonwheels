"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7799],{14840:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(65043),r=s(21197),l=s(59255),n=s(70579);function c(){const[e,t]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(r.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,n.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,n.jsx)("div",{children:(0,n.jsx)(l.A,{isSidebarOpen:e})}),(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,n.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},77799:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(65043),r=s(49804),l=s(60184),n=s(21197),c=s(59255),i=s(86213),o=s(37762),d=s(64857),x=s(11238),m=s(14840),h=s(66727),p=s(70579);const u=()=>{const e=(0,h.Zp)(),[t,s]=(0,a.useState)(10),[u,f]=(0,a.useState)(1),[b,j]=(0,a.useState)(!0),[y,g]=(0,a.useState)([]),[w,N]=(0,a.useState)(10),[v,k]=(0,a.useState)(""),[S,C]=(0,a.useState)(!1),[A,D]=(0,a.useState)(null);(0,a.useEffect)((()=>{window.innerWidth<768&&j(!1)}),[]);const T=async()=>{try{C(!0);const e=localStorage.getItem("token"),t=await i.A.get("api/stock-transfers",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});console.log(t.data),g(t.data.data)}catch(e){console.log(e.message)}finally{C(!1)}},_=y.filter((e=>e._id.toLowerCase().includes(v.toLowerCase()))).sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))),E=Math.ceil(_.length/w),W=_.slice((u-1)*w,u*w),$=e=>{e>=1&&e<=E&&f(e)};(0,a.useEffect)((()=>{T()}),[]);return S?(0,p.jsx)(m.A,{}):(0,p.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,p.jsx)(n.A,{isSidebarOpen:b,setSidebarOpen:j}),(0,p.jsxs)("div",{className:"flex flex-grow",children:[(0,p.jsx)("div",{className:"w-auto",children:(0,p.jsx)(c.A,{isSidebarOpen:b})}),(0,p.jsxs)("div",{className:"overflow-x-auto flex flex-col p-2 md:p-2 min-h-screen w-full",children:[(0,p.jsxs)("header",{className:"flex items-center justify-between p-4 mb-2 bg-gray-100 rounded-md shadow sm:flex-row",children:[(0,p.jsxs)("div",{className:"flex flex-col items-center gap-1 text-center sm:flex-row sm:text-left",children:[(0,p.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"Stock Transfer List"}),(0,p.jsx)("span",{className:"text-xs text-gray-600 sm:text-sm",children:"View/Search Sold Items"})]}),(0,p.jsxs)("nav",{className:"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0",children:[(0,p.jsxs)("a",{href:"#",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,p.jsx)(l.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,p.jsx)(r.XWt,{className:"hidden mx-1 sm:mx-2 sm:inline"}),(0,p.jsx)("a",{href:"#",className:"text-gray-700 no-underline hover:text-cyan-600",children:"Stock Transfer List"})]})]}),(0,p.jsxs)("div",{className:"p-4 bg-white border-t-4 rounded-lg shadow-md border-cyan-500",children:[(0,p.jsxs)("header",{className:"flex items-center justify-between mb-4",children:[(0,p.jsx)("h1",{className:"text-lg font-semibold",children:"Stock Transfer List"}),(0,p.jsxs)("button",{className:"px-4 py-2 text-white rounded bg-cyan-500",onClick:()=>e("/stock-transfer"),children:[(0,p.jsx)("span",{className:"font-bold",children:"+"})," New Transfer"]})]}),(0,p.jsxs)("div",{className:"flex flex-col justify-between w-full mt-4 mb-4 space-y-2 lg:flex-row lg:space-y-0 lg:items-center",children:[(0,p.jsxs)("div",{className:"flex items-center px-2 space-x-2",children:[(0,p.jsx)("span",{className:"text-sm",children:"Show"}),(0,p.jsxs)("select",{className:"p-2 text-sm border border-gray-300 rounded-md",value:t,onChange:e=>{s(Number(e.target.value)),f(1)},children:[(0,p.jsx)("option",{children:"10"}),(0,p.jsx)("option",{children:"20"}),(0,p.jsx)("option",{children:"50"})]}),(0,p.jsx)("span",{className:"text-sm",children:"Entries"})]}),(0,p.jsxs)("div",{className:"flex flex-col justify-around w-full gap-2 lg:flex-row",children:[(0,p.jsxs)("div",{className:"flex items-center justify-around flex-1 w-full gap-1 px-2",children:[(0,p.jsx)("button",{onClick:()=>{const e=W.map((e=>`${new Date(e.createdAt).toDateString()},${e.fromWarehouse.warehouseName},${e.toWarehouse.warehouseName},${e.details},${e.note},${e.createdBy}`)).join("\n");navigator.clipboard.writeText(e),alert("Data copied to clipboard!")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Copy"}),(0,p.jsx)("button",{onClick:()=>{const e=x.utils.json_to_sheet(_),t=x.utils.book_new();x.utils.book_append_sheet(t,e,"Transfer list"),x.writeFile(t,"TransferList.xlsx")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Excel"}),(0,p.jsx)("button",{onClick:()=>{const e=new o.uE;e.text("Stock_Transfer List",20,20);const t=_.map((e=>[new Date(e.createdAt).toDateString(),e.fromWarehouse.warehouseName,e.toWarehouse.warehouseName,e.details,e.note,e.createdBy]));(0,d.Ay)(e,{head:[["Transfer Date","From Warehouse","To Warehouse","Details","Note","Created By"]],body:t}),e.save("advance_list.pdf")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"PDF"}),(0,p.jsx)("button",{onClick:()=>{window.print()},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Print"}),(0,p.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,"+_.map((e=>Object.values(e).join(","))).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","stockTransferlist.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"CSV"})]}),(0,p.jsx)("input",{type:"text",placeholder:"Search",className:"w-full p-2 text-sm border border-gray-300 rounded-sm md:w-auto",onChange:e=>k(e.target.value)})]})]}),(0,p.jsx)("div",{className:"overflow-x-auto",children:(0,p.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,p.jsx)("thead",{className:"bg-gray-200",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"px-3 py-2 text-left border",children:"Transfer Date"}),(0,p.jsx)("th",{className:"px-3 py-2 text-left border",children:"From Warehouse"}),(0,p.jsx)("th",{className:"px-3 py-2 text-left border",children:"To Warehouse"}),(0,p.jsx)("th",{className:"px-3 py-2 text-left border",children:"Details"}),(0,p.jsx)("th",{className:"px-3 py-2 text-left border",children:"Note"}),(0,p.jsx)("th",{className:"px-3 py-2 text-left border",children:"Created by"}),(0,p.jsx)("th",{className:"px-3 py-2 text-left border",children:"Action"})]})}),(0,p.jsx)("tbody",{children:0===W.length?(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"7",className:"py-4 text-center",children:"No data available in table"})}):W.map(((t,s)=>{var a,r;return(0,p.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,p.jsx)("td",{className:"px-3 py-2 border",children:new Date(t.createdAt).toDateString()}),(0,p.jsx)("td",{className:"px-3 py-2 border",children:(null===(a=t.fromWarehouse)||void 0===a?void 0:a.warehouseName)||"NA"}),(0,p.jsx)("td",{className:"px-3 py-2 border",children:(null===(r=t.toWarehouse)||void 0===r?void 0:r.warehouseName)||"NA"}),(0,p.jsx)("td",{className:"px-3 py-2 border",children:t.details}),(0,p.jsx)("td",{className:"px-3 py-2 border",children:t.note}),(0,p.jsx)("td",{className:"px-3 py-2 border",children:t.createdBy}),(0,p.jsxs)("td",{className:"relative px-3 py-2 border",children:[(0,p.jsx)("button",{onClick:()=>{D(A===t._id?null:t._id)},className:"px-3 py-1 text-white transition rounded bg-cyan-600 hover:bg-cyan-700",children:"Action \u25bc"}),A===t._id&&(0,p.jsxs)("div",{className:"absolute right-0 z-50 mt-2 bg-white border border-gray-200 rounded-md shadow-lg w-36 animate-fade-in",children:[(0,p.jsxs)("button",{className:"flex items-center w-full px-3 py-2 text-gray-700 hover:bg-gray-100",onClick:()=>e(`/stock-transfer?id=${t._id}`),children:[(0,p.jsx)(l.uO9,{className:"mr-2"})," Edit"]}),(0,p.jsxs)("button",{className:"flex items-center w-full px-3 py-2 text-red-600 hover:bg-gray-100",onClick:e=>(async(e,t)=>{if(e.preventDefault(),window.confirm("Do you want to delete this Expense?"))try{if(!(await fetch(`api/stock-transfers/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Failed to delete supplier");console.log("Purchase deleted successfully!"),T()}catch(s){console.error("Error deleting purchase:",s.message)}})(e,t._id),children:[(0,p.jsx)(l.qbC,{className:"mr-2"})," Delete"]}),(0,p.jsxs)("button",{className:"flex items-center w-full px-3 py-2 text-gray-700 hover:bg-gray-100",onClick:()=>e(`/transfer-details/${t._id}`),children:[(0,p.jsx)(l.Ny1,{className:"mr-2"})," View"]})]})]})]},t._id)}))})]})}),(0,p.jsxs)("div",{className:"flex flex-col items-center justify-between mt-4 md:flex-row",children:[(0,p.jsxs)("span",{children:["Showing ",w*(u-1)+1," to ",Math.min(w*u,y.length)," of ",y.length," entries"]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("button",{onClick:()=>$(u-1),className:"px-4 py-2 mr-2 text-gray-600 bg-gray-300 disabled:opacity-50",disabled:1===u,children:"Previous"}),(0,p.jsx)("button",{onClick:()=>$(u+1),className:"px-4 py-2 text-gray-600 bg-gray-300 disabled:opacity-50",disabled:u===E,children:"Next"})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=7799.4c7183de.chunk.js.map