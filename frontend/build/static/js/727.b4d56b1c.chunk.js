"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[727],{10727:(e,l,s)=>{s.r(l),s.d(l,{default:()=>u});var t=s(65043),a=s(59255),r=s(21197),c=s(66727),i=s(60184),o=s(26873),n=s(86213),d=s(37762),x=s(64857),h=s(11238),m=(s(79038),s(70579));function u(){const[e,l]=(0,t.useState)(!1),[s,u]=(0,t.useState)(!0),[p,b]=(0,t.useState)(!0),[g,N]=(0,t.useState)({warehouses:[],categories:[],brands:[]});(0,t.useEffect)((()=>{window.innerWidth<768&&u(!1)}),[]);const[j,v]=(0,t.useState)("all"),[f,w]=(0,t.useState)("all"),[y,S]=(0,t.useState)("all"),[k,P]=(0,t.useState)([]),[C,A]=(0,t.useState)(0),[W,B]=(0,t.useState)([]);(0,t.useEffect)((()=>{(async()=>{try{const e=(await n.A.get("api/warehouses",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data.map((e=>({label:e.warehouseName,value:e._id})));N((l=>({...l,warehouses:[{label:"All",value:"all"},...e]})))}catch(e){console.log(e.message)}finally{b(!1)}})(),(async()=>{try{const e=(await n.A.get("api/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data.map((e=>({label:e.name,value:e._id})));N((l=>({...l,categories:[{label:"All",value:"all"},...e]})))}catch(e){console.log(e.message)}finally{b(!1)}})(),(async()=>{try{const e=await n.A.get("api/items",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e.data),B(e.data.data)}catch(e){console.log(e.message)}finally{b(!1)}})(),(async()=>{try{const e=await n.A.get("api/brands",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e.data);const l=e.data.data.map((e=>({label:e.brandName,value:e._id})));N((e=>({...e,brands:[{label:"All",value:"all"},...l]})))}catch(e){console.log(e.message)}finally{b(!1)}})()}),[]);const I=W.filter((e=>{const{warehouse:l,category:s,brand:t}=e,a="all"===j||l&&l._id===j,r="all"===f||s&&s._id===f,c="all"===y||t&&t._id===y;return a&&r&&c}));return(0,t.useEffect)((()=>console.log(I)),[I]),(0,t.useEffect)((()=>console.log("sale")),[k]),(0,m.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,m.jsx)(r.A,{isSidebarOpen:s,setSidebarOpen:u}),(0,m.jsxs)("div",{className:"flex flex-grow",children:[(0,m.jsx)("div",{children:(0,m.jsx)(a.A,{isSidebarOpen:s})}),(0,m.jsxs)("div",{className:"relative flex flex-col flex-grow px-4 py-6 bg-gray-100",children:[(0,m.jsxs)("header",{className:"flex flex-col items-center justify-between sm:flex-row",children:[(0,m.jsx)("div",{className:"flex items-center gap-1 text-center sm:flex-row sm:text-left",children:(0,m.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"Stock Report"})}),(0,m.jsxs)("nav",{className:"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0",children:[(0,m.jsxs)(c.k2,{to:"/dashboard",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,m.jsx)(i.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,m.jsx)(c.k2,{to:"/reports/sale-",className:"text-gray-700 no-underline hover:text-cyan-600",children:"> stock Report"})]})]}),(0,m.jsxs)("div",{className:"flex flex-col w-full mx-auto mt-4 bg-white border-t-4 rounded-lg shadow-md border-cyan-600",children:[(0,m.jsx)("div",{className:"w-full h-auto px-2 border-b-2 border-gray-200",children:(0,m.jsx)("h4",{className:"text-gray-700",children:"Please Enter Valid Information"})}),(0,m.jsxs)("div",{className:"py-4 ",children:[(0,m.jsxs)("div",{className:"flex w-full gap-5 px-4 mb-4",children:[(0,m.jsxs)("div",{className:"flex flex-col w-full",children:[(0,m.jsx)("label",{htmlFor:"",children:"Warehouse"}),(0,m.jsx)(o.Ay,{className:"w-full",options:g.warehouses,onChange:e=>v(e.value),value:g.warehouses.find((e=>e.value===j))})]}),(0,m.jsx)("div",{className:"hidden w-full md:flex "})]}),(0,m.jsxs)("div",{className:"flex w-full gap-5 px-4 mb-4",children:[(0,m.jsxs)("div",{className:"flex flex-col w-full",children:[(0,m.jsx)("label",{htmlFor:"",children:"Category"}),(0,m.jsx)(o.Ay,{className:"w-full",options:g.categories,onChange:e=>w(e.value),value:g.categories.find((e=>e.value===f))||null})]}),(0,m.jsxs)("div",{className:"flex flex-col w-full",children:[(0,m.jsx)("label",{htmlFor:"",children:"Brand"}),(0,m.jsx)(o.Ay,{className:"w-full",options:g.brands,onChange:e=>S(e.value),value:g.brands.find((e=>e.value===y))||null})]})]})]})]}),(0,m.jsxs)("div",{className:"flex flex-col w-full mt-5 bg-white border-t-4 border-gray-400",children:[(0,m.jsxs)("div",{className:"flex w-full px-2 py-2",children:[(0,m.jsx)("div",{className:"w-full",children:(0,m.jsx)("h4",{className:"text-gray-700",children:"Records Table"})}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsxs)("button",{onClick:()=>l(!e),className:"flex items-center px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600",children:[(0,m.jsx)(i.OXb,{className:"mr-2"}),"Export",(0,m.jsx)("span",{className:"ml-2 text-sm",children:"\u25bc"})]}),e&&(0,m.jsx)("div",{className:"absolute right-0 z-10 w-40 mt-2 bg-white rounded-md shadow-lg",onMouseLeave:()=>l(!1),children:(0,m.jsxs)("div",{className:"py-1",children:[(0,m.jsxs)("button",{onClick:()=>{(()=>{const e=I.map(((e,l)=>{var s,t,a;return{"#":l+1,"Item Code":e.itemCode||"","Item Name":e.itemName||"",Brand:(null===(s=e.brand)||void 0===s?void 0:s.brandName)||"",Category:(null===(t=e.category)||void 0===t?void 0:t.name)||"",MRP:e.mrp||0,"Seller Points":e.sellerPoints||0,Barcode:e.barcode||"","Unit Price":e.priceWithoutTax||0,Tax:(null===(a=e.tax)||void 0===a?void 0:a.taxName)||"","Purchase Cost":e.purchasePrice||0,"Sales Price":e.salesPrice||0,"Current Stock":e.openingStock||0,"Stock Value (Sale)":(e.openingStock||0)*(e.salesPrice||0),"Stock Value (Purchase)":(e.openingStock||0)*(e.purchasePrice||0)}})),l=h.utils.json_to_sheet(e),s=h.utils.book_new();h.utils.book_append_sheet(s,l,"Inventory Report"),h.writeFile(s,"Inventory_Report.xlsx")})(),l(!1)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,m.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Excel"]}),(0,m.jsxs)("button",{onClick:()=>{(()=>{const e=new d.Ay({orientation:"landscape"});e.text("Inventory Report",14,15);const l=I.map(((e,l)=>{var s,t,a,r,c,i,o;return[l+1,e.itemCode||"N/A",e.itemName||"N/A",(null===(s=e.brand)||void 0===s?void 0:s.brandName)||"N/A",(null===(t=e.category)||void 0===t?void 0:t.name)||"N/A",(null===(a=e.mrp)||void 0===a?void 0:a.toFixed(2))||"0.00",e.sellerPoints||"0",e.barcode||"N/A",(null===(r=e.priceWithoutTax)||void 0===r?void 0:r.toFixed(2))||"0.00",(null===(c=e.tax)||void 0===c?void 0:c.taxName)||"N/A",(null===(i=e.purchasePrice)||void 0===i?void 0:i.toFixed(2))||"0.00",(null===(o=e.salesPrice)||void 0===o?void 0:o.toFixed(2))||"0.00",e.openingStock||"0",((e.openingStock||0)*(e.salesPrice||0)).toFixed(2),((e.openingStock||0)*(e.purchasePrice||0)).toFixed(2)]}));(0,x.Ay)(e,{head:[["#","Item Code","Item Name","Brand","Category","MRP","Seller Points","Barcode","Unit Price","Tax","Purchase Cost","Sales Price","Current Stock","Stock Value (Sale)","Stock Value (Purchase)"]],body:l,startY:20,styles:{fontSize:7,cellPadding:1,overflow:"linebreak"},headStyles:{fillColor:[33,150,243],textColor:255},columnStyles:{0:{cellWidth:8},1:{cellWidth:15},2:{cellWidth:25},3:{cellWidth:15},4:{cellWidth:15},5:{cellWidth:12},6:{cellWidth:15},7:{cellWidth:20},8:{cellWidth:12},9:{cellWidth:12},10:{cellWidth:15},11:{cellWidth:12},12:{cellWidth:15},13:{cellWidth:20},14:{cellWidth:20}}}),e.save("Inventory_Report.pdf")})(),l(!1)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,m.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"PDF"]})]})})]})]}),(0,m.jsx)("div",{className:"flex w-full px-2 py-2",children:(0,m.jsx)("div",{className:"w-full overflow-x-auto",children:(0,m.jsxs)("table",{className:"min-w-full gap-2 border-separate",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"px-2 text-sm text-white bg-blue-500 ",children:"#"}),(0,m.jsx)("th",{className:"px-2 text-sm text-white bg-blue-500",children:"Item Code"}),(0,m.jsx)("th",{className:"px-2 text-sm text-white bg-blue-500",children:"Item Name"}),(0,m.jsx)("th",{className:"px-2 text-sm text-white bg-blue-500",children:"Brand"}),(0,m.jsx)("th",{className:"px-2 text-sm text-white bg-blue-500",children:"Category"}),(0,m.jsx)("th",{className:"px-2 text-sm text-white bg-blue-500",children:"MRP"}),(0,m.jsx)("th",{className:"px-2 text-sm text-white bg-blue-500",children:"Seller Points"}),(0,m.jsx)("th",{className:"px-2 text-sm text-white bg-blue-500",children:"Barcode"}),(0,m.jsx)("th",{className:"px-2 text-sm text-white bg-blue-500",children:"Unit Price"}),(0,m.jsx)("th",{className:"px-2 text-sm text-white bg-blue-500",children:"Tax"}),(0,m.jsx)("th",{className:"px-2 text-sm text-white bg-blue-500",children:"Purchase Cost"}),(0,m.jsx)("th",{className:"px-2 text-sm text-white bg-blue-500",children:"Sales Price"}),(0,m.jsx)("th",{className:"px-2 text-sm text-white bg-blue-500",children:"Current Stock"}),(0,m.jsxs)("th",{className:"px-2 text-sm text-white bg-blue-500",children:["Stock Value ",(0,m.jsx)("br",{})," (By Sale Price)"]}),(0,m.jsxs)("th",{className:"px-2 text-sm text-white bg-blue-500",children:["Stock Value ",(0,m.jsx)("br",{})," (By Purchase Price)"]})]})}),(0,m.jsxs)("tbody",{children:[I.length>0&&I.map(((e,l)=>{var s,t,a;return(0,m.jsxs)("tr",{className:"bg-gray-100 border-2 border-black",children:[(0,m.jsx)("td",{className:"px-2",children:l+1}),(0,m.jsx)("td",{className:"px-2",children:e.itemCode}),(0,m.jsx)("td",{className:"px-2",children:e.itemName}),(0,m.jsx)("td",{className:"px-2 ",children:null===(s=e.brand)||void 0===s?void 0:s.brandName}),(0,m.jsx)("td",{className:"px-2",children:null===(t=e.category)||void 0===t?void 0:t.name}),(0,m.jsx)("td",{className:"px-2 ",children:e.mrp}),(0,m.jsx)("td",{className:"px-2",children:e.sellerPoints}),(0,m.jsx)("td",{className:"px-2 ",children:e.barcode}),(0,m.jsx)("td",{className:"px-2",children:e.priceWithoutTax}),(0,m.jsx)("td",{className:"px-2",children:null===(a=e.tax)||void 0===a?void 0:a.taxName}),(0,m.jsx)("td",{className:"px-2",children:e.purchasePrice}),(0,m.jsx)("td",{className:"px-2",children:e.salesPrice}),(0,m.jsx)("td",{className:"px-2",children:e.openingStock}),(0,m.jsx)("td",{className:"px-2",children:e.openingStock*e.salesPrice}),(0,m.jsx)("td",{className:"px-2",children:e.openingStock*e.purchasePrice})]},l)})),0===I.length&&(0,m.jsx)("tr",{className:"bg-gray-100 border-2 border-black",children:(0,m.jsx)("td",{className:"px-4 py-2 text-center",colSpan:"15",children:(0,m.jsx)("h5",{children:"No Data Found"})})})]})]})})})]})]})]})]})}}}]);
//# sourceMappingURL=727.b4d56b1c.chunk.js.map