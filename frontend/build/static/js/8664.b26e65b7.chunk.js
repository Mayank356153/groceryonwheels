"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8664],{14840:(e,l,a)=>{a.d(l,{A:()=>r});var s=a(65043),o=a(21197),t=a(59255),n=a(70579);function r(){const[e,l]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(o.A,{isSidebarOpen:e,setSidebarOpen:l}),(0,n.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,n.jsx)("div",{children:(0,n.jsx)(t.A,{isSidebarOpen:e})}),(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,n.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},35541:(e,l,a)=>{a.r(l),a.d(l,{default:()=>m});var s=a(65043),o=a(66727),t=a(21197),n=a(59255),r=a(86213),c=a(60184),i=a(26873),d=a(14840),u=a(70579);const m=()=>{const e=(0,o.Zp)(),[l,a]=(0,s.useState)([]),[m,f]=(0,s.useState)([]),[x,p]=(0,s.useState)(!0),[h,g]=(0,s.useState)(!1),[w]=(0,o.ok)(),y=w.get("couponid"),[v,b]=(w.get("customerid"),(0,s.useState)([])),[j,N]=(0,s.useState)([]),[C,A]=(0,s.useState)([]),[S,T]=(0,s.useState)([]),[M,k]=(0,s.useState)({couponCode:"",occasionName:"",expiryDate:"",value:0,minCartValue:0,allowedTimes:1,usedTimes:0,couponType:"",description:"",itemsAllowed:[],categoryAllowed:[],subCategoryAllowed:[],subsubCategoryAllowed:[]}),E=[{label:"Percentage(%)",value:"Percentage"},{label:"Fixed",value:"Fixed"}];(0,s.useEffect)((()=>{function e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const l="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let a="";for(let s=0;s<e;s++){a+=l[Math.floor(36*Math.random())]}return a}k((l=>({...l,couponCode:e(10)})))}),[]),(0,s.useEffect)((()=>{window.innerWidth<768&&p(!1)}),[]);function D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const l="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let a="";for(let s=0;s<e;s++){a+=l[Math.floor(36*Math.random())]}return a}(0,s.useEffect)((()=>{(async()=>{try{g(!0);const e=(await r.A.get("api/items",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data.map((e=>({label:e.itemName,value:e._id})));b(e)}catch(e){console.log(e.message)}finally{g(!1)}})(),(async()=>{try{g(!0);const e=(await r.A.get("api/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data.map((e=>({label:e.name,value:e._id})));N(e)}catch(e){console.log(e.message)}finally{g(!1)}})(),(async()=>{try{g(!0);const e=await r.A.get("api/subcategories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("JHg"),console.log(e.data);const l=e.data.data.map((e=>({label:e.name,value:e._id})));A(l)}catch(e){console.log(e.message)}finally{g(!1)}})(),(async()=>{try{g(!0);const e=await r.A.get("api/sub-subcategories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("JHg"),console.log(e.data);const l=e.data.data.map((e=>({label:e.name,value:e._id})));T(l)}catch(e){console.log(e.message)}finally{g(!1)}})()}),[]);const O=e=>{const{name:l,value:a}=e.target;k((s=>({...s,[l]:"number"==e.target.type?Number(a):a})))};return h?(0,u.jsx)(d.A,{}):(0,u.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,u.jsx)(t.A,{isSidebarOpen:x,setSidebarOpen:p}),(0,u.jsxs)("div",{className:"flex flex-grow",children:[(0,u.jsx)("div",{children:(0,u.jsx)(n.A,{isSidebarOpen:x})}),(0,u.jsxs)("div",{className:"flex flex-col p-4 min-h-screen transition-all duration-300 w-full",children:[(0,u.jsxs)("header",{className:"flex flex-col items-center justify-between h-auto p-4 mb-6 bg-gray-100 rounded-lg shadow-md md:flex-row",children:[(0,u.jsx)("h5",{className:"text-2xl font-semibold",children:"Add/Update Coupon"}),(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-blue-600",children:[(0,u.jsxs)(o.N_,{to:"/",className:"flex items-center text-sm text-gray-500 no-underline hover:text-cyan-600",children:[(0,u.jsx)(c.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,u.jsx)("span",{className:"text-gray-400",children:">"}),(0,u.jsx)(o.N_,{to:"/coupons",className:"text-sm text-gray-500 no-underline hover:text-cyan-600",children:"Master Coupons List "})]})]}),(0,u.jsxs)("form",{className:"flex flex-col px-2 bg-white border-t-4 rounded-lg shadow-md border-cyan-500",onSubmit:l=>{l.preventDefault(),y?(async()=>{try{g(!0),console.log(M),await r.A.put(`api/customer-coupons/${y}`,M,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})}catch(l){alert("Unable to update coupon"),console.log(l.message)}finally{g(!1),e("/customer-coupen-list")}})():(async()=>{try{g(!0),console.log(M);const e=await r.A.post("api/discount-coupons/create",M,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e),alert("Added successfully"),k({couponCode:D(10),occasionName:"",expiryDate:"",value:0,minCartValue:0,allowedTimes:1,usedTimes:0,couponType:"",description:"",itemsAllowed:[],categoryAllowed:[],subCategoryAllowed:[],subsubCategoryAllowed:[]})}catch(e){alert("Unable to add coupon"),console.log(e.message)}finally{g(!1)}})()},children:[(0,u.jsxs)("div",{className:"flex flex-col w-full mt-2 space-y-3 md:flex-row",children:[(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsxs)("label",{className:"w-full text-sm font-medium md:w-1/3",children:["Coupon Code ",(0,u.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,u.jsx)("input",{type:"text",className:"w-full p-2 border rounded md:w-2/3 focus:ring",name:"couponCode",value:M.couponCode,onChange:O,placeholder:"Enter Coupon Code"})]}),(0,u.jsx)("div",{className:"flex flex-col w-full"}),(0,u.jsx)("div",{className:"flex flex-col w-full"})]}),(0,u.jsxs)("div",{className:"flex flex-col justify-around w-full mt-2 space-y-3 md:flex-row",children:[(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Minimum Cart Value"}),(0,u.jsx)("input",{type:"number",className:"w-full p-2 border rounded md:w-2/3 focus:ring",name:"minCartValue",value:M.minCartValue,onChange:O,min:"0",placeholder:"Minimum order amount to apply coupon"})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Usage Limit"}),(0,u.jsx)("input",{type:"number",className:"w-full p-2 border rounded md:w-2/3 focus:ring",name:"allowedTimes",value:M.allowedTimes,onChange:O,min:"1",placeholder:"How many times this coupon can be used"})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Expiry Date"}),(0,u.jsx)("input",{type:"date",className:"w-full p-2 border rounded md:w-2/3 focus:ring",name:"expiryDate",value:M.expiryDate,onChange:O})]})]}),(0,u.jsxs)("div",{className:"flex flex-col justify-around w-full mt-2 space-y-3 md:flex-row",children:[(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Coupon Value"}),(0,u.jsx)("input",{type:"number",className:"w-full p-2 border rounded md:w-2/3 focus:ring",name:"value",value:M.value,onChange:O,min:"0",placeholder:"Enter Coupon Value"})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Coupon Type"}),(0,u.jsx)(i.Ay,{options:E,onChange:e=>k((l=>({...l,couponType:e.value}))),className:"w-full md:w-2/3",value:(null===E||void 0===E?void 0:E.find((e=>e.value===(M.couponType||""))))||null})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Applicable Items"}),(0,u.jsx)(i.Ay,{isMulti:!0,options:v,onChange:e=>k((l=>({...l,itemsAllowed:e.map((e=>e.value))}))),value:(null===v||void 0===v?void 0:v.filter((e=>{var l;return null===(l=M.itemsAllowed)||void 0===l?void 0:l.includes(e.value)})))||[],className:"w-full md:w-2/3",placeholder:"Select items this coupon applies to"})]})]}),(0,u.jsxs)("div",{className:"flex flex-col justify-around w-full mt-2 space-y-3 md:flex-row",children:[(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Applicable Categories"}),(0,u.jsx)(i.Ay,{isMulti:!0,options:j,onChange:e=>k((l=>({...l,categoryAllowed:e.map((e=>e.value))}))),value:(null===j||void 0===j?void 0:j.filter((e=>{var l;return null===(l=M.categoryAllowed)||void 0===l?void 0:l.includes(e.value)})))||[],className:"w-full md:w-2/3",placeholder:"Select categories "})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Applicable Subcategories"}),(0,u.jsx)(i.Ay,{isMulti:!0,options:C,onChange:e=>k((l=>({...l,subCategoryAllowed:e.map((e=>e.value))}))),value:(null===C||void 0===C?void 0:C.filter((e=>{var l;return null===(l=M.subCategoryAllowed)||void 0===l?void 0:l.includes(e.value)})))||[],className:"w-full md:w-2/3",placeholder:"Select subcategories "})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium ",children:"Applicable Subsubcategories"}),(0,u.jsx)(i.Ay,{isMulti:!0,options:S,onChange:e=>k((l=>({...l,subsubCategoryAllowed:e.map((e=>e.value))}))),value:(null===S||void 0===S?void 0:S.filter((e=>{var l;return null===(l=M.subsubCategoryAllowed)||void 0===l?void 0:l.includes(e.value)})))||[],className:"w-full md:w-2/3",placeholder:"Select subsubcategories "})]})]}),(0,u.jsxs)("div",{className:"flex flex-col justify-around w-full mt-2 space-y-3 md:flex-row",children:[(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Occasion Name"}),(0,u.jsx)("input",{type:"text",className:"w-full p-2 border rounded md:w-2/3 focus:ring",name:"occasionName",value:M.occasionName,onChange:O,placeholder:"Enter Occasion Name"})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Description"}),(0,u.jsx)("textarea",{className:"w-full p-2 border rounded md:w-2/3 focus:ring",placeholder:"Enter Description",value:M.description,name:"description",onChange:O})]}),(0,u.jsx)("div",{className:"flex flex-col w-full"})]}),(0,u.jsxs)("div",{className:"flex w-full gap-4 py-4 mt-6",children:[(0,u.jsx)("button",{type:"submit",className:"px-6 py-2.5 font-medium text-white bg-gradient-to-r from-green-500 to-green-600 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-75 w-full",children:(0,u.jsx)("span",{className:"flex items-center justify-center gap-2",children:y?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.KP4,{className:"text-sm"}),"Update"]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.E5P,{}),"Create"]})})}),(0,u.jsx)("button",{type:"button",className:"px-6 py-2.5 font-medium text-gray-800 bg-gradient-to-r from-gray-100 to-gray-200 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 border border-gray-300 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-200 focus:ring-opacity-50 w-full",children:(0,u.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,u.jsx)(c.QCr,{}),"Close"]})})]})]})]})]})]})}},82284:(e,l,a)=>{function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}a.d(l,{A:()=>s})}}]);
//# sourceMappingURL=8664.b26e65b7.chunk.js.map