"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5502],{15502:(e,t,s)=>{s.r(t),s.d(t,{default:()=>F});var r=s(65043),l=s(66727),a=s(21197),i=s(59255),n=s(60184),o=s(86213),d=(s(59602),s(76399)),c=s(12020),m=s(16317),x=s(78318),h=s(20691),u=s(8354),g=s(15615),p=s(53722),v=s(75388),j=s(87534),b=s(42156),f=s(70579);const y=e=>{var t,s;let{customerData:l,visible:a,onClose:i}=e;const[n,y]=(0,r.useState)(l),[N,w]=(0,r.useState)(!1),[A,k]=(0,r.useState)({});(0,r.useEffect)((()=>{(async()=>{try{const e=await o.A.get("https://pos.inspiredgrow.in/vps/api/addresses/admin/all",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),t=e.data.data.find((e=>{var t;return(null===(t=e.user)||void 0===t?void 0:t._id)===n._id}));k(t||{}),console.log("Address Data:",e.data)}catch(e){console.error("Error fetching customer data:",e)}})()}),[]);d.A,d.A,d.A,d.A;return(0,f.jsx)(c.A,{visible:a,onCancel:i,footer:null,closable:!1,centered:!0,width:800,bodyStyle:{backgroundColor:"transparent",boxShadow:"none",padding:0},children:(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)(m.Ay,{icon:(0,f.jsx)(g.A,{}),onClick:i,style:{position:"absolute",top:10,right:10,zIndex:10},shape:"circle"}),(0,f.jsxs)(x.A,{title:(0,f.jsx)("div",{className:"flex items-center justify-between",children:(0,f.jsxs)("span",{children:[(0,f.jsx)(p.A,{className:"mr-2"}),"Customer Profile"]})}),style:{borderRadius:"10px"},children:[(0,f.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,f.jsx)("div",{children:(0,f.jsxs)(h.A,{title:"Basic Information",column:1,children:[(0,f.jsx)(h.A.Item,{label:"Customer ID",children:n._id||"N/A"}),(0,f.jsx)(h.A.Item,{label:"Name",children:n.name}),(0,f.jsx)(h.A.Item,{label:"Join Date",children:new Date(n.createdAt).toLocaleDateString()})]})}),(0,f.jsx)("div",{children:(0,f.jsxs)(h.A,{title:"Contact Information",column:1,children:[(0,f.jsx)(h.A.Item,{label:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v.A,{})," Email"]}),children:n.email||"N/A"}),(0,f.jsx)(h.A.Item,{label:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(j.A,{})," Phone"]}),children:n.mobile||n.phone||"N/A"}),(0,f.jsx)(h.A.Item,{label:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b.A,{})," Address"]}),children:A?(0,f.jsxs)(f.Fragment,{children:[A.houseNo&&`${A.houseNo}, `,A.area&&`${A.area}, `,A.city&&`${A.city}, `,A.state&&`${A.state}, `,A.postalCode&&`${A.postalCode}`]}):"N/A"})]})})]}),(0,f.jsx)(u.A,{}),(0,f.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:"font-semibold",children:"Account Details"}),(0,f.jsxs)("p",{children:["Credit Limit: Rs.",(null===(t=n.creditLimit)||void 0===t?void 0:t.toFixed(2))||"0.00"]}),(0,f.jsxs)("p",{children:["Previous Due: Rs.",(null===(s=n.previousDue)||void 0===s?void 0:s.toFixed(2))||"0.00"]}),(0,f.jsxs)("p",{children:["Price Level: ",n.priceLevelType||"Standard"]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:"font-semibold",children:"Tax Information"}),(0,f.jsxs)("p",{children:["GST Number: ",n.gstNumber||"N/A"]}),(0,f.jsxs)("p",{children:["PAN Number: ",n.panNumber||"N/A"]}),(0,f.jsxs)("p",{children:["Tax Number: ",n.taxNumber||"N/A"]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:"font-semibold",children:"Shipping Information"}),n.shippingAddress?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("p",{children:[n.shippingAddress.houseNo&&`${n.shippingAddress.houseNo}, `,n.shippingAddress.area&&`${n.shippingAddress.area}, `,n.shippingAddress.city&&`${n.shippingAddress.city}`]}),(0,f.jsxs)("p",{children:[n.shippingAddress.state&&`${n.shippingAddress.state}, `,n.shippingAddress.postalCode&&`${n.shippingAddress.postalCode}`]}),n.shippingAddress.locationLink&&(0,f.jsx)("a",{href:n.shippingAddress.locationLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"View on Map"})]}):(0,f.jsx)("p",{children:"Same as billing address"})]})]}),(0,f.jsx)(u.A,{})]})]})})};var N=s(94626),w=s(93761),A=s(76401),k=s(42177),C=s(67630),S=s(94834),I=s(37762),L=s(65239),D=s.n(L);const T=e=>{var t;let{visible:s,onClose:l,order:a}=e;const[i,n]=(0,r.useState)({});(0,r.useEffect)((()=>{(async()=>{try{const e=await o.A.get("https://pos.inspiredgrow.in/vps/api/addresses/admin/all",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),t=e.data.data.find((e=>{var t;return(null===(t=e.user)||void 0===t?void 0:t._id)===a.customer._id}));n(t||{}),console.log("Address Data:",e.data)}catch(e){console.error("Error fetching customer data:",e)}})()}),[]);const g=(0,r.useRef)();if(!a)return null;const p=(()=>{let e=0,t=0,s=[];a.items.forEach((r=>{const l=r.salesPrice*r.quantity,i=r.discount||0;e+=l,t+=i;const n=(l-i)*((a.tax||0)/100);s.push({...r,itemTotal:l,itemTax:n,finalPrice:l-i+n})}));const r=s.reduce(((e,t)=>e+t.itemTax),0),l=e-t+r+(a.shippingFee||0);return{itemDetails:s,subtotal:e,totalTax:r,totalDiscount:t,grandTotal:l}})(),v=[{title:"Item",dataIndex:["item","name"],key:"itemName",render:(e,t)=>{var s;return(0,f.jsx)("div",{children:(null===(s=t.item)||void 0===s?void 0:s.itemName)||"Unnamed Item"})}},{title:"Unit Price",dataIndex:"price",key:"price",align:"right",render:(e,t)=>{var s;return`${null===(s=t.item.salesPrice)||void 0===s?void 0:s.toFixed(2)}`}},{title:"Qty",dataIndex:"quantity",key:"quantity",align:"center"},{title:"Discount",dataIndex:"discount",key:"discount",align:"right",render:e=>e>0?(0,f.jsxs)(d.A,{color:"orange",children:["-",e.toFixed(2)]}):"0"},{title:"Tax",dataIndex:"itemTax",key:"tax",align:"right",render:e=>`${e.toFixed(2)}`},{title:"Total",dataIndex:"finalPrice",key:"total",align:"right",render:e=>(0,f.jsx)("span",{className:"font-medium",children:e.toFixed(2)})}];return(0,f.jsxs)(c.A,{open:s,onCancel:l,footer:null,width:900,title:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("span",{children:[(0,f.jsx)(w.A,{className:"mr-2"}),"Order #",a.orderId]}),(0,f.jsx)(d.A,{color:"blue",children:a.status})]}),children:[(0,f.jsx)("div",{ref:g,children:(0,f.jsxs)(x.A,{bordered:!1,children:[(0,f.jsxs)(h.A,{bordered:!0,size:"small",column:2,children:[(0,f.jsx)(h.A.Item,{label:"Order Time",children:new Date(a.orderTime).toLocaleString()}),(0,f.jsx)(h.A.Item,{label:"Customer",children:(null===(t=a.customer)||void 0===t?void 0:t.name)||"N/A"}),(0,f.jsx)(h.A.Item,{label:"Payment Method",children:(0,f.jsx)(d.A,{color:"purple",children:a.paymentMethod})}),(0,f.jsx)(h.A.Item,{label:"Payment Status",children:(0,f.jsx)(d.A,{color:"Completed"===a.paymentStatus?"green":"red",children:a.paymentStatus})}),a.couponCode&&(0,f.jsx)(h.A.Item,{label:"Coupon Code",children:(0,f.jsx)(d.A,{color:"orange",children:a.couponCode})})]}),(0,f.jsxs)(u.A,{orientation:"left",children:[(0,f.jsx)(w.A,{className:"mr-2"}),"Items Breakdown"]}),(0,f.jsx)(N.A,{columns:v,dataSource:p.itemDetails,rowKey:(e,t)=>t,pagination:!1,size:"middle",className:"mb-6"}),(0,f.jsxs)(u.A,{orientation:"left",children:[(0,f.jsx)(A.A,{className:"mr-2"}),"Price Summary"]}),(0,f.jsxs)("div",{className:"price-summary-grid",children:[(0,f.jsxs)("div",{className:"price-summary-col",children:[(0,f.jsxs)("div",{className:"price-row",children:[(0,f.jsx)("span",{children:"Subtotal:"}),(0,f.jsx)("span",{children:p.subtotal.toFixed(2)})]}),(0,f.jsxs)("div",{className:"price-row",children:[(0,f.jsx)("span",{children:"Item Discounts:"}),(0,f.jsxs)("span",{children:["-",p.totalDiscount.toFixed(2)]})]}),(0,f.jsxs)("div",{className:"price-row",children:[(0,f.jsx)("span",{children:"Tax:"}),(0,f.jsx)("span",{children:p.totalTax.toFixed(2)})]})]}),(0,f.jsxs)("div",{className:"price-summary-col",children:[(0,f.jsxs)("div",{className:"price-row",children:[(0,f.jsx)("span",{children:"Shipping Fee:"}),(0,f.jsx)("span",{children:(a.shippingFee||0).toFixed(2)})]}),(0,f.jsxs)("div",{className:"mt-2 text-lg font-semibold price-row",children:[(0,f.jsx)("span",{children:"Total:"}),(0,f.jsx)("span",{children:p.grandTotal.toFixed(2)})]})]})]}),(0,f.jsxs)(u.A,{orientation:"left",children:[(0,f.jsx)(k.A,{className:"mr-2"}),"Shipping Address"]}),(0,f.jsx)("div",{className:"text-sm",children:i&&(0,f.jsxs)("div",{children:[i.houseNo,", ",i.area,",",(0,f.jsx)("br",{}),i.city,", ",i.state,", ",i.country," - ",i.postalCode]})})]})}),(0,f.jsx)(u.A,{}),(0,f.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,f.jsx)(m.Ay,{icon:(0,f.jsx)(C.A,{}),onClick:async()=>{const e=await D()(g.current),t=e.toDataURL("image/png"),s=new I.Ay("p","mm","a4"),r=s.internal.pageSize.getWidth(),l=e.height*r/e.width;s.addImage(t,"PNG",0,0,r,l),s.save(`order_${a.orderId}.pdf`)},children:"Export PDF"}),(0,f.jsx)(m.Ay,{icon:(0,f.jsx)(S.A,{}),onClick:()=>{const e=g.current,t=window.open("","","width=900,height=650");t.document.write(`<html><head><title>Print Order</title></head><body>${e.innerHTML}</body></html>`),t.document.close(),t.focus(),setTimeout((()=>{t.print(),t.close()}),500)},children:"Print"}),(0,f.jsx)(m.Ay,{type:"primary",onClick:l,children:"Close"})]}),(0,f.jsx)("style",{jsx:!0,children:"\n        .price-summary-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n          gap: 1rem;\n          margin-bottom: 1.5rem;\n        }\n        .price-row {\n          display: flex;\n          justify-content: space-between;\n          padding: 8px 0;\n          border-bottom: 1px solid #f0f0f0;\n        }\n      "})]})},M=e=>{let{orderId:t,onClose:s,setSidebarOpen:l,fetchusers:a}=e;const[i,n]=(0,r.useState)([]),[d,c]=(0,r.useState)(!0),[m,x]=(0,r.useState)(null),[h,u]=(0,r.useState)(""),[g,p]=(0,r.useState)(!1),v={Authorization:`Bearer ${localStorage.getItem("token")}`};(0,r.useEffect)((()=>{l&&l(!1);(async()=>{try{const e=(await o.A.get("api/rider/all",{headers:v})).data.data.filter((e=>"active"===e.status.toLowerCase()));console.log("active"),console.log(e),n(e||[])}catch(e){console.error("Error fetching riders:",e)}finally{c(!1)}})()}),[]);const j=i.filter((e=>`${e.firstname} ${e.lastname}`.toLowerCase().includes(h.toLowerCase())||e.mobile.includes(h)));return(0,f.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm",children:(0,f.jsxs)("div",{className:"relative flex flex-col w-full max-w-md h-[80vh] bg-white rounded-xl shadow-2xl overflow-hidden border border-gray-100",children:[(0,f.jsxs)("div",{className:"sticky top-0 z-10 p-5 bg-white border-b border-gray-100",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Assign Delivery Partner"}),(0,f.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Order #",t]})]}),(0,f.jsx)("button",{onClick:s,className:"p-1 text-gray-400 transition-colors rounded-full hover:bg-gray-100 hover:text-gray-600",children:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,f.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,f.jsxs)("div",{className:"relative mt-4",children:[(0,f.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,f.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,f.jsx)("input",{type:"text",className:"w-full py-2.5 pl-10 pr-4 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search by name or phone...",value:h,onChange:e=>u(e.target.value)})]})]}),(0,f.jsx)("div",{className:"flex-1 overflow-y-auto",children:d?(0,f.jsxs)("div",{className:"flex flex-col items-center justify-center h-full space-y-3",children:[(0,f.jsx)("div",{className:"w-10 h-10 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"}),(0,f.jsx)("p",{className:"text-gray-500",children:"Loading available riders..."})]}):0===j.length?(0,f.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[(0,f.jsx)("svg",{className:"w-16 h-16 mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,f.jsx)("h3",{className:"text-lg font-medium text-gray-700",children:"No riders found"}),(0,f.jsx)("p",{className:"mt-1 text-gray-500",children:h?"Try a different search term":"No active riders available"}),h&&(0,f.jsx)("button",{onClick:()=>u(""),className:"px-4 py-2 mt-3 text-sm text-blue-600 hover:underline",children:"Clear search"})]}):(0,f.jsx)("ul",{className:"divide-y divide-gray-100",children:j.map((e=>(0,f.jsx)("li",{className:"px-5 py-4 transition-colors hover:bg-gray-50",children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsxs)("div",{className:"relative flex-shrink-0 mr-4",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center w-12 h-12 text-lg font-medium text-white rounded-full bg-gradient-to-br from-blue-500 to-blue-600",children:[e.firstname.charAt(0),e.lastname.charAt(0)]}),m===e._id&&(0,f.jsx)("div",{className:"absolute flex items-center justify-center w-6 h-6 bg-green-500 border-2 border-white rounded-full -bottom-1 -right-1",children:(0,f.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]}),(0,f.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,f.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:[e.firstname," ",e.lastname]}),(0,f.jsxs)("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[(0,f.jsx)("svg",{className:"flex-shrink-0 mr-1.5 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),(0,f.jsx)("span",{children:e.mobile})]})]}),(0,f.jsx)("button",{onClick:()=>!m&&(async e=>{try{const r=await o.A.put(`api/order/assign-order/${t}`,{deliveryAgent:e,deliveryAgentModel:"Rider"},{headers:v});console.log(r),x(e),p(!0),a(),setTimeout((()=>{s()}),1500)}catch(r){console.error("Assign error:",r),alert("Failed to assign rider.")}})(e._id),disabled:m,className:"px-4 py-2 text-sm font-medium rounded-lg transition-all "+(m===e._id?"bg-green-100 text-green-800":m?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 shadow-sm"),children:m===e._id?"Assigned":"Assign"})]})},e._id)))})}),g&&(0,f.jsx)("div",{className:"sticky bottom-0 left-0 right-0 p-4 border-t border-green-100 bg-green-50 animate-slide-up",children:(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-green-800",children:[(0,f.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,f.jsx)("span",{children:"Rider assigned successfully!"})]})})]})})},$=e=>{let{orderId:t,onClose:s,setSidebarOpen:l,fetchusers:a}=e;const[i,n]=(0,r.useState)([]),[d,c]=(0,r.useState)(!0),[m,x]=(0,r.useState)(null),[h,u]=(0,r.useState)(""),[g,p]=(0,r.useState)(!1),v={Authorization:`Bearer ${localStorage.getItem("token")}`};(0,r.useEffect)((()=>{const e=localStorage.getItem("role");l&&l(!1);(async()=>{try{const t=await o.A.get("api/warehouses",{headers:v});"admin"===e&&n(t.data.data),console.log("asdf"),console.log(t)}catch(t){console.error("Error fetching riders:",t)}finally{c(!1)}})(),"admin"!==e&&(async()=>{try{const e=await o.A.get("admiaddinguser/profile",{headers:v});console.log(e)}catch(e){console.error("Error fetching riders:",e)}finally{c(!1)}})()}),[]);const j=i.filter((e=>` ${e.WarehouseName}`.toLowerCase().includes(h.toLowerCase())||e.mobile.includes(h)));return(0,f.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm",children:(0,f.jsxs)("div",{className:"relative flex flex-col w-full max-w-md h-[80vh] bg-white rounded-xl shadow-2xl overflow-hidden border border-gray-100",children:[(0,f.jsxs)("div",{className:"sticky top-0 z-10 p-5 bg-white border-b border-gray-100",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Assign Delivery Partner"}),(0,f.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Order #",t]})]}),(0,f.jsx)("button",{onClick:s,className:"p-1 text-gray-400 transition-colors rounded-full hover:bg-gray-100 hover:text-gray-600",children:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,f.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,f.jsxs)("div",{className:"relative mt-4",children:[(0,f.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,f.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,f.jsx)("input",{type:"text",className:"w-full py-2.5 pl-10 pr-4 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search by name or phone...",value:h,onChange:e=>u(e.target.value)})]})]}),(0,f.jsx)("div",{className:"flex-1 overflow-y-auto",children:d?(0,f.jsxs)("div",{className:"flex flex-col items-center justify-center h-full space-y-3",children:[(0,f.jsx)("div",{className:"w-10 h-10 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"}),(0,f.jsx)("p",{className:"text-gray-500",children:"Loading available van..."})]}):0===j.length?(0,f.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[(0,f.jsx)("svg",{className:"w-16 h-16 mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,f.jsx)("h3",{className:"text-lg font-medium text-gray-700",children:"No Van found"}),(0,f.jsx)("p",{className:"mt-1 text-gray-500",children:h?"Try a different search term":"No active riders available"}),h&&(0,f.jsx)("button",{onClick:()=>u(""),className:"px-4 py-2 mt-3 text-sm text-blue-600 hover:underline",children:"Clear search"})]}):(0,f.jsx)("ul",{className:"divide-y divide-gray-100",children:j.map((e=>{var r,l,i;return(0,f.jsx)("li",{className:"px-5 py-4 transition-colors hover:bg-gray-50",children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsxs)("div",{className:"relative flex-shrink-0 mr-4",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center w-12 h-12 text-lg font-medium text-white rounded-full bg-gradient-to-br from-blue-500 to-blue-600",children:[(null===(r=e.firstname)||void 0===r?void 0:r.charAt(0))||"",(null===(l=e.lastname)||void 0===l?void 0:l.charAt(0))||"",null===(i=e.warehouseName)||void 0===i?void 0:i.charAt(0)]}),m===e._id&&(0,f.jsx)("div",{className:"absolute flex items-center justify-center w-6 h-6 bg-green-500 border-2 border-white rounded-full -bottom-1 -right-1",children:(0,f.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]}),(0,f.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,f.jsx)("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:e.warehouseName}),(0,f.jsxs)("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[(0,f.jsx)("svg",{className:"flex-shrink-0 mr-1.5 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),(0,f.jsx)("span",{children:e.mobile})]})]}),(0,f.jsx)("button",{onClick:()=>!m&&(async e=>{try{const r=await o.A.put(`api/order/assign-order/${t}`,{deliveryAgent:e,deliveryAgentModel:"Warehouse"},{headers:v});console.log(r),x(e),p(!0),a(),setTimeout((()=>{s()}),1500)}catch(r){console.error("Assign error:",r),alert("Failed to assign rider.")}})(e._id),disabled:m,className:"px-4 py-2 text-sm font-medium rounded-lg transition-all "+(m===e._id?"bg-green-100 text-green-800":m?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 shadow-sm"),children:m===e._id?"Assigned":"Assign"})]})},e._id)}))})}),g&&(0,f.jsx)("div",{className:"sticky bottom-0 left-0 right-0 p-4 border-t border-green-100 bg-green-50 animate-slide-up",children:(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-green-800",children:[(0,f.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,f.jsx)("span",{children:"Van assigned successfully!"})]})})]})})};var P=s(75200);const z=e=>{let{items:t,heading:s,onClose:l}=e;const[a,i]=(0,r.useState)(null),[n,o]=(0,r.useState)("");return(0,f.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,f.jsx)("div",{className:"relative w-full max-w-6xl mx-4 bg-transparent rounded-lg shadow-2xl",children:(0,f.jsxs)("div",{className:"overflow-hidden bg-white rounded-lg bg-opacity-90 backdrop-blur-sm",children:[(0,f.jsx)("div",{className:"flex items-center justify-between p-6 bg-white bg-opacity-80",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:s}),l&&(0,f.jsx)("button",{onClick:l,className:"p-2 text-gray-500 transition rounded-full hover:bg-gray-200 hover:text-gray-700",title:"Close",children:(0,f.jsx)(P.yGN,{size:20})})]})}),0===t.length?(0,f.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 bg-white bg-opacity-70",children:[(0,f.jsx)(P.S8s,{className:"mb-4 text-5xl text-gray-400"}),(0,f.jsx)("p",{className:"text-lg text-gray-600",children:"No items found"}),n&&(0,f.jsx)("button",{onClick:()=>o(""),className:"mt-4 text-blue-600 hover:text-blue-800",children:"Clear search"})]}):(0,f.jsx)("div",{className:"overflow-hidden bg-transparent",children:(0,f.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,f.jsx)("thead",{className:"bg-white bg-opacity-70",children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Item"}),(0,f.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Code"}),(0,f.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Price"}),(0,f.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Quantity"}),(0,f.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Category"})]})}),(0,f.jsx)("tbody",{className:"bg-white bg-opacity-50 divide-y divide-gray-200",children:t.map((e=>{var t,s;return(0,f.jsxs)("tr",{className:"transition-colors hover:bg-white hover:bg-opacity-70",children:[(0,f.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,f.jsxs)("div",{className:"flex items-center",children:[e.item.itemImages?(0,f.jsx)("img",{className:"object-cover w-10 h-10 mr-3 rounded-full",src:`/vps/uploads/qr/items/${e.item.itemImages[0]}`,alt:e.item.itemName}):(0,f.jsx)("div",{className:"flex items-center justify-center w-10 h-10 mr-3 bg-gray-200 rounded-full",children:(0,f.jsx)(P.fZZ,{className:"text-gray-400"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"font-medium text-gray-900",children:e.item.itemName}),(0,f.jsx)("div",{className:"text-sm text-gray-500",children:(null===(t=e.item.brand)||void 0===t?void 0:t.brandName)||"N/A"})]})]})}),(0,f.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:e.item.itemCode}),(0,f.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,f.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["Rs.",e.salesPrice]}),e.discount>0&&(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"Percentage"===e.discountType?`${e.discount}% off`:`$${e.discount} off`})]}),(0,f.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,f.jsx)("div",{className:"text-sm font-medium "+(e.openingStock<=e.alertQuantity?"text-red-600":"text-green-600"),children:e.quantity})}),(0,f.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:(null===(s=e.item.category)||void 0===s?void 0:s.name)||"N/A"})]},e._id)}))})]})})]})})})};var _=s(11238),B=s(64857),O=s(26873);const F=()=>{const[e,t]=(0,r.useState)(!1),[s,d]=(0,r.useState)(null),[c,m]=(0,r.useState)(!0),[x,h]=(0,r.useState)([]),[u,g]=(0,r.useState)([]),[p,v]=(0,r.useState)(1),[j,b]=(0,r.useState)(10),[N,w]=(0,r.useState)([]),A=(0,l.Zp)(),[k,C]=(0,r.useState)(""),[S,L]=(0,r.useState)([]),[D,P]=(0,r.useState)([]),[F,E]=(0,r.useState)(!1),[R,W]=(0,r.useState)([]),[V,U]=(0,r.useState)([]),[q,H]=(0,r.useState)(!1),[G,Q]=(0,r.useState)(!1),[Z,J]=(0,r.useState)(!1),[K,Y]=(0,r.useState)(!1),[X,ee]=(0,r.useState)([]),[te,se]=(0,r.useState)(""),[re,le]=(0,r.useState)(null),[ae,ie]=(0,r.useState)("Pending"),ne=[{value:"Pending",label:"Pending",icon:"\u23f3",color:"orange"},{value:"Confirmed",label:"Confirmed",icon:"\u2713",color:"blue"},{value:"Processing",label:"Processing",icon:"\u2699\ufe0f",color:"purple"},{value:"Shipped",label:"Shipped",icon:"\ud83d\ude9a",color:"indigo"},{value:"Out for Delivery",label:"Out for Delivery",icon:"\ud83d\udef5",color:"teal"},{value:"Delivered",label:"Delivered",icon:"\u2705",color:"green"},{value:"Cancelled",label:"Cancelled",icon:"\u274c",color:"red"},{value:"Returned",label:"Returned",icon:"\ud83d\udd04",color:"gray"}];(0,r.useEffect)((()=>{window.innerWidth<768&&m(!1)}),[]),(0,r.useEffect)((()=>{const e=localStorage.getItem("permissions");w(e?JSON.parse(e):[])}),[]);(0,r.useEffect)((()=>{(async()=>{const e=localStorage.getItem("token");try{const t=await fetch("admin/store/add/store",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error("Failed to fetch stores");const s=await t.json();U(s.result||[]),console.log(s.result)}catch(t){console.error("Error fetching stores:",t)}})(),(async()=>{t(!0);const e=localStorage.getItem("token");if(!e)return console.log("No token found redirecting..."),void A("/");try{const t=await o.A.get("api/warehouses",{headers:{Authorization:`Bearer ${e}`}});W(t.data.data)}catch(s){alert(s.message)}finally{t(!1)}})()}),[]);const oe=async()=>{t(!0);const e=localStorage.getItem("token");if(e)try{const t=await fetch("/vps/api/orders/admin",{headers:{Authorization:`Bearer ${e}`}}),s=await t.json();console.log("payload"),console.log(s);const r=Array.isArray(s)?s:Array.isArray(s.data)?s.data:[];console.log(r),g(r)}catch(s){console.error("Error fetching users:",s)}finally{t(!1)}else A("/")};(0,r.useEffect)((()=>{oe()}),[]);const de=u.filter((e=>{var t,s;const r=k.toLowerCase().trim();return!r||(null===(t=e.userName)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(s=e.Email)||void 0===s?void 0:s.toLowerCase().includes(r))||e.status===ae}));(0,r.useEffect)((()=>{u.filter((e=>e.status===ae))}),[ae]);const ce=Math.ceil(de.length/j),me=(p-1)*j,xe=de.slice(me,me+j);return(0,f.jsxs)("div",{className:"flex flex-col ",children:[(0,f.jsx)(a.A,{isSidebarOpen:c,setSidebarOpen:m}),(0,f.jsxs)("div",{className:"box-border flex min-h-screen",children:[(0,f.jsx)("div",{className:"w-auto",children:(0,f.jsx)(i.A,{isSidebarOpen:c})}),(0,f.jsxs)("div",{className:"flex flex-col w-full p-2 mx-auto overflow-x-auto transition-all duration-300",children:[(0,f.jsxs)("header",{className:"flex flex-col items-center justify-start px-2 py-2 mb-2 bg-gray-100 rounded-md shadow md:justify-between md:flex-row",children:[(0,f.jsxs)("div",{className:"flex items-baseline gap-2 sm:text-left",children:[(0,f.jsx)("h1",{className:"text-lg font-semibold",children:"Orders List"}),(0,f.jsx)("span",{className:"text-xs text-gray-600",children:"View/Search Orders"})]}),(0,f.jsxs)("nav",{className:"flex gap-2 text-xs text-gray-500",children:[(0,f.jsxs)(l.k2,{to:"/dashboard",className:"flex items-center text-gray-500 no-underline hover:text-gray-800",children:[(0,f.jsx)(n.$BV,{})," Home"]}),(0,f.jsx)(l.k2,{to:"/order.view",className:"text-gray-500 no-underline hover:text-gray-800",children:"> Orders List"})]})]}),F&&(0,f.jsx)(y,{customerData:S,visible:F,onClose:()=>E(!1)}),q&&(0,f.jsx)(T,{visible:q,onClose:()=>H(!1),order:D}),G&&(0,f.jsx)(M,{orderId:re,onClose:()=>{Q(!1),le(""),window.innerWidth>768&&m(!0)},setSidebarOpen:m,fetchusers:oe}),Z&&(0,f.jsx)($,{orderId:re,onClose:()=>{J(!1),le(""),window.innerWidth>768&&m(!0)},setSidebarOpen:m,fetchusers:oe}),K&&(0,f.jsx)(z,{items:X,heading:te,onClose:()=>Y(!1)}),(0,f.jsxs)("div",{className:"p-4 bg-white border rounded-lg shadow-md",children:[(0,f.jsx)("div",{className:"w-1/2 mb-4",children:(0,f.jsxs)("div",{className:"flex flex-col ",children:[(0,f.jsx)("label",{htmlFor:"",children:"Order Status"}),(0,f.jsx)(O.Ay,{options:ne,onChange:e=>ie(e.value),value:ne.find((e=>e.value===ae))||null})]})}),(0,f.jsxs)("div",{className:"flex flex-col mb-4 md:flex-row md:items-center md:justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 mb-2 md:mb-0",children:[(0,f.jsx)("span",{children:"Show"}),(0,f.jsx)("select",{className:"p-1 border rounded",value:j,onChange:e=>{b(+e.target.value),v(1)},children:[10,20,50].map((e=>(0,f.jsx)("option",{children:e},e)))}),(0,f.jsx)("span",{children:"Entries"})]}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)("button",{onClick:()=>{const e=xe.map(((e,t)=>{var s,r,l;return[me+t+1,e.orderId,(null===(s=e.customer)||void 0===s?void 0:s.customerName)||"",e.items.length,e.unAvailableItems.length,0===e.items.length?0:e.finalAmount,e.status,(null===(r=e.deliveryAgent)||void 0===r?void 0:r.username)||(null===(l=e.deliveryAgent)||void 0===l?void 0:l.warehouseName)||"Not Assigned",e.deliveryTime]}));let t=["#","Order ID","Customer Name","Items","UnAvailable Items","Total","Status","Delivery Agent","Delivery Time"].join("\t")+"\n";e.forEach((e=>{t+=e.join("\t")+"\n"})),navigator.clipboard.writeText(t).then((()=>{alert("Table data copied to clipboard!")})).catch((e=>{console.error("Failed to copy: ",e),alert("Failed to copy data to clipboard")}))},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"Copy"}),(0,f.jsx)("button",{onClick:()=>{const e=xe.map(((e,t)=>{var s,r,l;return{"#":me+t+1,"Order ID":e.orderId,"Customer Name":(null===(s=e.customer)||void 0===s?void 0:s.customerName)||"N/A","Items Count":e.items.length,"Unavailable Items Count":e.unAvailableItems.length,"Total Amount":0===e.items.length?0:e.finalAmount,Status:e.status,"Delivery Agent":(null===(r=e.deliveryAgent)||void 0===r?void 0:r.username)||(null===(l=e.deliveryAgent)||void 0===l?void 0:l.warehouseName)||"Not Assigned","Delivery Time":e.deliveryTime,"Agent Type":e.deliveryAgentModel||"N/A"}})),t=_.utils.json_to_sheet(e),s=_.utils.book_new();_.utils.book_append_sheet(s,t,"Orders"),(0,_.writeFile)(s,"orders.xlsx")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"Excel"}),(0,f.jsx)("button",{onClick:()=>{const e=new I.uE;e.text("Orders Report",14,15);const t=xe.map(((e,t)=>{var s,r,l;return[me+t+1,e.orderId,(null===(s=e.customer)||void 0===s?void 0:s.customerName)||"N/A",e.items.length,e.unAvailableItems.length,0===e.items.length?0:e.finalAmount,e.status,(null===(r=e.deliveryAgent)||void 0===r?void 0:r.username)||(null===(l=e.deliveryAgent)||void 0===l?void 0:l.warehouseName)||"Not Assigned",e.deliveryTime,e.deliveryAgentModel||"N/A"]}));(0,B.cs)(e,{head:[["#","Order ID","Customer Name","Items","Unavailable Items","Total","Status","Delivery Agent","Delivery Time","Agent Type"]],body:t,startY:20,styles:{fontSize:8,cellPadding:2,overflow:"linebreak"},headStyles:{fillColor:[229,231,235],textColor:[0,0,0],fontStyle:"bold"}}),e.save("orders.pdf")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"PDF"}),(0,f.jsx)("button",{onClick:()=>{window.print()},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"Print"}),(0,f.jsx)("button",{onClick:()=>{const e=xe.map(((e,t)=>{var s,r,l;return[me+t+1,e.orderId,(null===(s=e.customer)||void 0===s?void 0:s.customerName)||"",e.items.length,e.unAvailableItems.length,0===e.items.length?0:e.finalAmount,e.status,(null===(r=e.deliveryAgent)||void 0===r?void 0:r.username)||(null===(l=e.deliveryAgent)||void 0===l?void 0:l.warehouseName)||"Not Assigned",e.deliveryTime]}));let t=["#","Order ID","Customer Name","Items","UnAvailable Items","Total","Status","Delivery Agent","Delivery Time"].join(",")+"\n";e.forEach((e=>{t+=e.map((e=>`"${e}"`)).join(",")+"\n"}));const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(s),l=document.createElement("a");l.setAttribute("href",r),l.setAttribute("download","orders_data.csv"),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"CSV"}),(0,f.jsx)("input",{className:"p-1 border rounded",placeholder:"Search",onChange:e=>C(e.target.value)})]})]}),(0,f.jsx)("div",{className:"overflow-y-visible ",children:(0,f.jsxs)("table",{className:"w-full border border-collapse",children:[(0,f.jsx)("thead",{className:"bg-gray-200",children:(0,f.jsx)("tr",{children:["#","Order ID"," Customer Name","Items","UnAvailable Items","Total","Status","DeliveryAgent","Action"].map((e=>(0,f.jsx)("th",{className:"p-1 border",children:e},e)))})}),(0,f.jsx)("tbody",{children:0===xe.length?(0,f.jsx)("tr",{children:(0,f.jsx)("td",{colSpan:"10",className:"p-2 text-center",children:"No data Available"})}):xe.map(((e,r)=>{var l,a,i;return(0,f.jsxs)("tr",{className:"text-sm",children:[(0,f.jsx)("td",{className:"p-1 border",children:me+r+1}),(0,f.jsx)("td",{className:"p-1 border",children:e.orderNumber}),(0,f.jsx)("td",{className:"p-1 border ",children:(0,f.jsx)("span",{className:"cursor-pointer hover:text-cyan-400",onClick:()=>{e.customer&&(E(!0),L(e.customer))},children:null===(l=e.customer)||void 0===l?void 0:l.name})}),(0,f.jsx)("td",{className:`\n    p-3 border \n    ${e.items.length>0?"text-blue-500 hover:text-blue-700 hover:bg-blue-50 cursor-pointer transition-colors duration-200":"text-gray-400"}\n    ${e.items.length>0&&"font-medium"}\n  `,onClick:()=>{e.items.length>0&&(Y(!0),ee(e.items),se("Available Items"))},children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{children:e.items.length>0?"View items":"No items available"}),e.items.length>0&&(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),(0,f.jsx)("td",{className:`\n    p-3 border \n    ${e.unAvailableItems.length>0?"text-blue-500 hover:text-blue-700 hover:bg-blue-50 cursor-pointer transition-colors duration-200":"text-gray-400"}\n    ${e.unAvailableItems.length>0&&"font-medium"}\n  `,onClick:()=>{e.unAvailableItems.length>0&&(Y(!0),ee(e.unAvailableItems),se("UnAvailable Items"))},children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{children:e.unAvailableItems.length>0?"View items":"All items available"}),e.unAvailableItems.length>0&&(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),(0,f.jsx)("td",{className:"p-1 border hover:text-blue-400 hover:cursor-pointer",onClick:()=>{H(!0),P(e)},children:0===e.items.length?0:e.finalAmount}),(0,f.jsx)("td",{className:"p-2 border border-gray-200",children:(()=>{const t={Pending:{color:"bg-orange-100 text-orange-800",icon:"\u23f3",label:"Pending"},Confirmed:{color:"bg-blue-100 text-blue-800",icon:"\u2713",label:"Confirmed"},Processing:{color:"bg-purple-100 text-purple-800",icon:"\u2699\ufe0f",label:"Processing"},Shipped:{color:"bg-indigo-100 text-indigo-800",icon:"\ud83d\ude9a",label:"Shipped"},"Out for Delivery":{color:"bg-teal-100 text-teal-800",icon:"\ud83d\udef5",label:"Out for Delivery"},Delivered:{color:"bg-green-100 text-green-800",icon:"\u2705",label:"Delivered"},Cancelled:{color:"bg-red-100 text-red-800",icon:"\u274c",label:"Cancelled"},Returned:{color:"bg-gray-100 text-gray-800",icon:"\ud83d\udd04",label:"Returned"}}[e.status]||{color:"bg-gray-100 text-gray-800",icon:"\u2753",label:e.status};return(0,f.jsx)("div",{className:"flex items-center",children:(0,f.jsxs)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${t.color} transition-all duration-200 hover:shadow-sm`,children:[(0,f.jsx)("span",{className:"mr-2","aria-hidden":"true",children:t.icon}),t.label]})})})()}),(0,f.jsx)("td",{className:"p-1 text-gray-800 border",children:(0,f.jsxs)("div",{className:"flex items-center gap-1",children:[(null===(a=e.deliveryAgent)||void 0===a?void 0:a.username)||(null===(i=e.deliveryAgent)||void 0===i?void 0:i.warehouseName)||(0,f.jsx)("span",{className:"text-gray-400",children:"Not Assigned"}),e.deliveryAgentModel&&(0,f.jsxs)("span",{className:"ml-1 text-xs text-gray-500",children:["(",e.deliveryAgentModel,")"]})]})}),(0,f.jsx)("td",{className:"relative p-2 overflow-visible border border-gray-200",children:(0,f.jsx)("div",{className:"flex justify-center",children:(0,f.jsxs)("div",{className:"relative inline-block text-left",children:[(0,f.jsxs)("button",{className:"inline-flex items-center justify-center px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 transition-all duration-150",onClick:()=>d((t=>t===e._id?null:e._id)),"aria-expanded":s===e._id,"aria-haspopup":"true",children:["Actions",(0,f.jsx)("svg",{className:"w-4 h-4 ml-2 transition-transform duration-200 "+(s===e._id?"transform rotate-180":""),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,f.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),s===e._id&&(0,f.jsx)("div",{className:"absolute right-0 z-50 w-48 mt-2 origin-top-right bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none animate-fade-in",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",children:(0,f.jsxs)("div",{className:"py-1",role:"none",children:[(0,f.jsxs)("button",{className:"flex items-center w-full px-4 py-2.5 text-sm text-gray-700 transition-colors duration-150 hover:bg-blue-50 hover:text-blue-600 group",role:"menuitem",onClick:()=>{le(e._id),J(!0),d(null)},children:[(0,f.jsx)("div",{className:"p-1 mr-2 transition-colors rounded-md bg-blue-50 group-hover:bg-blue-100",children:(0,f.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.75",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,f.jsx)("span",{children:"Assign Van"})]}),(0,f.jsxs)("button",{className:"flex items-center w-full px-4 py-2.5 text-sm text-gray-700 transition-colors duration-150 hover:bg-blue-50 hover:text-blue-600 group",role:"menuitem",onClick:()=>{le(e._id),Q(!0),d(null)},children:[(0,f.jsx)("div",{className:"p-1 mr-2 transition-colors rounded-md bg-blue-50 group-hover:bg-blue-100",children:(0,f.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.75",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),(0,f.jsx)("span",{children:"Assign Rider"})]}),(0,f.jsx)("div",{className:"my-1 border-t border-gray-200"}),(0,f.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-sm text-red-600 transition-colors duration-150 hover:bg-red-50",role:"menuitem",onClick:()=>{(async e=>{if(window.confirm("Delete this order?")){t(!0);try{await o.A.delete(`api/order/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),oe()}catch(s){console.error(s)}finally{t(!1)}}})(e._id),d(null)},children:[(0,f.jsx)("svg",{className:"w-4 h-4 mr-2 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})})]})})})]},e._id)}))})]})}),(0,f.jsxs)("div",{className:"flex flex-col items-center gap-2 p-2 md:flex-row md:justify-between",children:[(0,f.jsxs)("span",{children:["Showing ",me+1," to ",Math.min(me+j,de.length)," of ",de.length," entries"]}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)("button",{className:"px-3 py-1 rounded "+(1===p?"bg-gray-300":"bg-blue-500 text-white"),disabled:1===p,onClick:()=>v((e=>e-1)),children:"Previous"}),(0,f.jsx)("button",{className:"px-3 py-1 rounded "+(p===ce?"bg-gray-300":"bg-blue-500 text-white"),disabled:p===ce,onClick:()=>v((e=>e+1)),children:"Next"})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=5502.52879383.chunk.js.map