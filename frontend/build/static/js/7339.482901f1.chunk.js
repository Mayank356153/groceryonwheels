"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7339],{7339:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var n=s(65043),r=s(37762),l=s(64857),a=s(11238),i=s(49804),o=s(60184),c=s(21197),d=s(59255),x=s(66727),m=s(86213),h=s(14840),u=s(70579);const p=()=>{const e=(0,x.Zp)(),[t,s]=(0,n.useState)(10),[p,f]=(0,n.useState)(1),[b,g]=(0,n.useState)(!0),[w,j]=(0,n.useState)([]),[y,N]=(0,n.useState)(!1),[v,k]=(0,n.useState)([]),[S,C]=(0,n.useState)(""),[A,_]=(0,n.useState)(null),R=(0,n.useRef)(null),$=(0,n.useRef)({});(0,n.useEffect)((()=>{window.innerWidth<768&&g(!1)}),[]),(0,n.useEffect)((()=>{if(A&&R.current&&$.current[A]){const e=R.current,t=$.current[A].getBoundingClientRect(),s=e.getBoundingClientRect(),n=window.innerHeight,r=window.innerWidth,l=5,a=5;let i=t.bottom+window.scrollY+l,o=t.right+window.scrollX+a;i+s.height>window.scrollY+n&&(i=t.top+window.scrollY-s.height-5),i<window.scrollY&&(i=t.bottom+window.scrollY+l),o+s.width>r+window.scrollX&&(o=t.left+window.scrollX-s.width-5),e.style.position="fixed",e.style.top=`${i}px`,e.style.left=`${o}px`,e.style.right="auto",e.style.bottom="auto"}}),[A]);const E=async()=>{const t=localStorage.getItem("token");if(!t)return console.error("No token found. Redirecting to login..."),void e("/");N(!0);try{const e=await m.A.get("/admincreatingrole/api/roles",{headers:{Authorization:`Bearer ${t}`}});console.log("API Response:",e.data),k(e.data.roles)}catch(n){var s;console.error("Error fetching roles:",(null===(s=n.response)||void 0===s?void 0:s.data)||n.message)}finally{N(!1)}};(0,n.useEffect)((()=>{E()}),[]);const L=v.filter((e=>{var t,s;const n=S.toLowerCase().trim(),r=null!==(t=null===(s=e.roleName)||void 0===s?void 0:s.toLowerCase().includes(n))&&void 0!==t&&t;return""===n||r})),I=Math.ceil(L.length/t);return y?(0,u.jsx)(h.A,{}):(0,u.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,u.jsx)(c.A,{isSidebarOpen:b,setSidebarOpen:g}),(0,u.jsxs)("div",{className:"flex flex-grow",children:[(0,u.jsx)(d.A,{isSidebarOpen:b}),(0,u.jsxs)("main",{className:"flex-grow flex flex-col p-2 md:p-2 min-h-screen overflow-x-hidden",children:[(0,u.jsxs)("header",{className:"flex items-center justify-between p-4 mb-2 bg-gray-100 rounded-md shadow sm:flex-row",children:[(0,u.jsxs)("div",{className:"flex flex-col items-center gap-1 text-center sm:flex-row sm:text-left",children:[(0,u.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"Roles List"}),(0,u.jsx)("span",{className:"text-xs text-gray-600 sm:text-sm",children:"View/Search Items Category"})]}),(0,u.jsxs)("nav",{className:"flex items-center justify-start text-xs text-gray-500 sm:text-sm",children:[(0,u.jsxs)(x.k2,{to:"/dashboard",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,u.jsx)(o.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,u.jsx)(i.XWt,{className:"inline mx-1 sm:mx-2"}),(0,u.jsx)("a",{href:"#",className:"text-gray-700 no-underline hover:text-cyan-600",children:"Roles List"})]})]}),(0,u.jsxs)("section",{className:"p-1 bg-white border-t-4 rounded-lg shadow-md border-cyan-500",children:[(0,u.jsxs)("header",{className:"flex items-center justify-between mb-4",children:[(0,u.jsx)("div",{}),(0,u.jsx)(x.N_,{to:"/admin/create/list",children:(0,u.jsx)("button",{className:"px-4 py-2 mt-2 text-white rounded bg-cyan-500",children:"+ Create Role"})})]}),(0,u.jsxs)("div",{className:"flex flex-col justify-between mb-2 space-y-1 md:flex-row md:space-y-0 md:items-center",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-sm",children:"Show"}),(0,u.jsxs)("select",{className:"p-2 text-sm border border-gray-300",value:t,onChange:e=>s(Number(e.target.value)),children:[(0,u.jsx)("option",{children:"10"}),(0,u.jsx)("option",{children:"20"}),(0,u.jsx)("option",{children:"50"})]}),(0,u.jsx)("span",{className:"text-sm",children:"Entries"})]}),(0,u.jsxs)("div",{className:"flex justify-end flex-1 gap-1 mt-2 mb-2",children:[(0,u.jsx)("button",{onClick:()=>{const e=L.map((e=>`${e.roleName}, ${e.description}, ${w.find((t=>t===e._id))?"Active":"InActive"}`)).join("\n");navigator.clipboard.writeText(e),alert("Data copied to clipboard!")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"Copy"}),(0,u.jsx)("button",{onClick:()=>{const e=a.utils.json_to_sheet(L),t=a.utils.book_new();a.utils.book_append_sheet(t,e,"roles"),a.writeFile(t,"roleslist.xlsx")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"Excel"}),(0,u.jsx)("button",{onClick:()=>{const e=new r.uE;e.text("Roles List",20,20);const t=L.map((e=>[e.roleName,e.description,w.find((t=>t===e._id))?"InActive":"Active"]));(0,l.Ay)(e,{head:[["Role Name","Description","Status"]],body:t}),e.save("roles.pdf")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"PDF"}),(0,u.jsx)("button",{onClick:()=>{window.print()},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"Print"}),(0,u.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,"+L.map((e=>Object.values(e).join(","))).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","roleList.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"CSV"}),(0,u.jsx)("input",{type:"text",placeholder:"Search",className:"w-full p-2 text-sm border border-gray-300",onChange:e=>C(e.target.value)})]})]}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,u.jsx)("thead",{className:"bg-gray-200",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-3 py-2 text-sm text-center border",children:"#"}),(0,u.jsx)("th",{className:"px-3 py-2 text-sm text-center border",children:"Role Name"}),(0,u.jsx)("th",{className:"px-3 py-2 text-sm text-center border",children:"Description"}),(0,u.jsx)("th",{className:"px-3 py-2 text-sm text-center border",children:"Status"}),(0,u.jsx)("th",{className:"py-2 text-sm text-center border",children:"Actions"})]})}),(0,u.jsx)("tbody",{children:0===L.length?(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"5",className:"py-4 text-center",children:"No data available in table"})}):L.slice((p-1)*t,p*t).map(((e,t)=>(0,u.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,u.jsx)("td",{className:"text-sm text-center border",children:t+1}),(0,u.jsx)("td",{className:"text-sm text-center border",children:e.roleName}),(0,u.jsx)("td",{className:"text-sm text-center border",children:e.description}),(0,u.jsx)("td",{className:"text-center border cursor-pointer sm:px-4 sm:py-2",onClick:()=>j((t=>t.includes(e._id)?t.filter((t=>t!==e._id)):[...t,e._id])),children:w.includes(e._id)?(0,u.jsx)("span",{className:"p-1 text-white bg-red-700 rounded-md",children:"Inactive"}):(0,u.jsx)("span",{className:"p-1 text-white bg-green-400 rounded-md",children:"Active"})}),(0,u.jsxs)("td",{className:"relative flex items-center justify-center py-2 text-sm text-center border",children:[(0,u.jsxs)("button",{ref:t=>$.current[e._id]=t,className:"flex items-center gap-1 px-4 py-2 text-sm font-medium text-white transition-all duration-200 ease-in-out rounded-full shadow bg-cyan-600 hover:bg-cyan-700 active:scale-95 focus:outline-none focus:ring-2 focus:ring-cyan-400",onClick:()=>{return t=e._id,void _(A===t?null:t);var t},children:["Actions",(0,u.jsx)("svg",{className:"w-4 h-4 transition-transform duration-200 "+(A===e._id?"rotate-180":""),fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,u.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),A===e._id&&(0,u.jsxs)("div",{ref:R,className:"z-50 w-32 bg-white border border-gray-200 rounded-md shadow-md animate-dropdown-open",style:{minWidth:"120px",maxHeight:"200px",overflowY:"auto"},children:[(0,u.jsx)(x.N_,{to:`/admin/create/list?id=${e._id}`,className:"block px-4 py-2 text-sm text-left text-gray-700 no-underline transition-colors hover:bg-gray-100 flex items-center gap-2",children:"\u270f\ufe0f Edit"}),(0,u.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Do you want to delete?")){N(!0);try{await m.A.delete(`/admincreatingrole/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Deleted Successfully"),E()}catch(t){console.error(t.message),alert("Unable to delete")}finally{N(!1)}}})(e._id),className:"w-full px-4 py-2 text-sm text-left text-red-600 transition-colors hover:bg-gray-100 flex items-center gap-2",children:"\ud83d\uddd1\ufe0f Delete"})]})]})]},e._id)))})]})}),(0,u.jsxs)("div",{className:"flex flex-col items-center justify-between mt-4 md:flex-row",children:[(0,u.jsxs)("span",{children:["Showing ",t*(p-1)+1," to ",Math.min(t*p,L.length)," of ",L.length," entries"]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("button",{onClick:()=>f((e=>Math.max(e-1,1))),className:"px-4 py-2 mr-2 text-gray-600 bg-gray-300 disabled:opacity-50",disabled:1===p,children:"Previous"}),(0,u.jsx)("button",{onClick:()=>f((e=>Math.min(e+1,I))),className:"px-4 py-2 text-gray-600 bg-gray-300 disabled:opacity-50",disabled:p===I,children:"Next"})]})]})]})]})]}),(0,u.jsx)("style",{jsx:!0,children:"\n        @keyframes dropdown-open {\n          from {\n            opacity: 0;\n            transform: scale(0.95);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n        .animate-dropdown-open {\n          animation: dropdown-open 0.2s ease-in-out forwards;\n        }\n      "})]})}},14840:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(65043),r=s(21197),l=s(59255),a=s(70579);function i(){const[e,t]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,a.jsx)(r.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,a.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,a.jsx)("div",{children:(0,a.jsx)(l.A,{isSidebarOpen:e})}),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,a.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}}}]);
//# sourceMappingURL=7339.482901f1.chunk.js.map