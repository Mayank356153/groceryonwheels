"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4964],{14840:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(65043),l=t(21197),r=t(59255),i=t(70579);function n(){const[e,s]=(0,a.useState)(!1);return(0,i.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,i.jsx)(l.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,i.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,i.jsx)("div",{children:(0,i.jsx)(r.A,{isSidebarOpen:e})}),(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,i.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},64964:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var a=t(65043),l=t(66727),r=t(59255),i=t(21197),n=t(14840),c=t(86213),d=t(60184),o=t(37762),x=t(64857),m=t(11238),u=t(70579);function h(){const[e,s]=(0,a.useState)(!0),[t,h]=(0,a.useState)([]),[b,p]=(0,a.useState)(!1),[g,j]=(0,a.useState)(null),[f,N]=(0,a.useState)(""),[w,y]=(0,a.useState)(10),[v,C]=(0,a.useState)(1),k=(0,l.Zp)(),S="/vps",[A,_]=(0,a.useState)(null);(0,a.useEffect)((()=>{window.innerWidth<768&&s(!1),$()}),[]);const $=async()=>{p(!0);try{const e=await c.A.get("api/subcategories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),s=Array.isArray(e.data)?e.data:Array.isArray(e.data.data)?e.data.data:[];h(s)}catch(e){console.error("Error fetching subcategories:",e)}finally{p(!1)}},E=t.filter((e=>e.name.toLowerCase().includes(f.toLowerCase()))),I=Math.ceil(E.length/w),L=E.slice((v-1)*w,v*w);return b?(0,u.jsx)(n.A,{}):(0,u.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,u.jsx)(i.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,u.jsxs)("div",{className:"flex flex-grow md:flex-row",children:[(0,u.jsx)("div",{className:"w-auto",children:(0,u.jsx)(r.A,{isSidebarOpen:e})}),(0,u.jsxs)("div",{className:"w-full min-h-screen p-6 bg-gray-100",children:[(0,u.jsxs)("header",{className:"flex flex-col items-center justify-between gap-2 mb-6 md:flex-row",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-semibold",children:"SubCategory List"}),(0,u.jsxs)("nav",{className:"flex mt-1 text-sm text-gray-600",children:[(0,u.jsxs)(l.k2,{to:"/dashboard",className:"flex items-center text-gray-600 no-underline",children:[(0,u.jsx)(d.$BV,{}),(0,u.jsx)("span",{className:"ml-1",children:"Home"})]}),(0,u.jsx)("span",{children:" > SubCategory List"})]})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full gap-2 md:flex-row md:w-auto",children:[(0,u.jsx)("button",{onClick:()=>k("/categories-list"),className:"w-full px-4 py-2 text-white bg-indigo-600 rounded md:w-auto",children:"Category List"}),(0,u.jsx)("button",{onClick:()=>k("/sub-subcategory-list"),className:"w-full px-4 py-2 text-white bg-indigo-600 rounded md:w-auto",children:"Sub\u2011SubCategory List"}),(0,u.jsx)(l.k2,{to:"/subcategories/import",children:(0,u.jsx)("button",{className:"w-full px-4 py-2 text-white bg-green-600 rounded md:w-auto",children:"Import SubCategories"})})]})]}),(0,u.jsxs)("div",{className:"flex flex-col gap-3 mb-4 md:flex-row md:items-center md:justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("label",{children:"Show"}),(0,u.jsx)("select",{className:"px-2 py-1 border",value:w,onChange:e=>y(+e.target.value),children:[10,25,50,100].map((e=>(0,u.jsx)("option",{value:e,children:e},e)))}),(0,u.jsx)("label",{children:"Entries"})]}),(0,u.jsxs)("div",{className:"flex gap-1",children:[(0,u.jsxs)("div",{className:"flex flex-1 gap-1 text-sm",children:[(0,u.jsx)("button",{onClick:()=>{const e=L.map((e=>[e.name,e.description,e.status].join(","))).join("\n");navigator.clipboard.writeText(e),alert("Copied to clipboard!")},className:"px-2 bg-teal-300",children:"Copy"}),(0,u.jsx)("button",{onClick:()=>{const e=m.utils.json_to_sheet(E),s=m.utils.book_new();m.utils.book_append_sheet(s,e,"SubCategories"),m.writeFile(s,"subcategories_list.xlsx")},className:"px-2 bg-teal-300",children:"Excel"}),(0,u.jsx)("button",{onClick:()=>{const e=new o.uE;e.text("SubCategory List",20,20),(0,x.Ay)(e,{head:[["Name","Description","Status"]],body:E.map((e=>[e.name,e.description,e.status]))}),e.save("subcategories_list.pdf")},className:"px-2 bg-teal-300",children:"PDF"}),(0,u.jsx)("button",{onClick:()=>window.print(),className:"px-2 bg-teal-300",children:"Print"}),(0,u.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,"+E.map((e=>[e.name,e.description,e.status].join(","))).join("\n"),s=document.createElement("a");s.href=encodeURI(e),s.download="subcategories_list.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"px-2 bg-teal-300",children:"CSV"})]}),(0,u.jsx)("input",{type:"text",placeholder:"Search",className:"w-full px-2 py-1 border",value:f,onChange:e=>N(e.target.value)})]})]}),(0,u.jsx)("div",{className:"overflow-x-auto overflow-visible",children:(0,u.jsxs)("table",{className:"w-full bg-white border",children:[(0,u.jsx)("thead",{className:"bg-gray-200",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-2 border",children:"#"}),(0,u.jsx)("th",{className:"p-2 border",children:"Image"}),"                 ",(0,u.jsx)("th",{className:"p-2 border",children:"Name"}),(0,u.jsx)("th",{className:"p-2 border",children:"Description"}),(0,u.jsx)("th",{className:"p-2 border",children:"Status"}),(0,u.jsx)("th",{className:"p-2 border",children:"Action"})]})}),(0,u.jsx)("tbody",{children:L.map(((e,s)=>(0,u.jsxs)("tr",{className:"text-center border",children:[(0,u.jsx)("td",{className:"p-2 border",children:s+1}),(0,u.jsx)("td",{className:"p-2 border",children:e.image?(0,u.jsx)("img",{src:`${S}/uploads/subcategories/${e.image}`,alt:e.name,className:"inline-block object-cover w-12 h-12 rounded",onClick:()=>_(`${S}/uploads/subcategories/${e.image}`)}):(0,u.jsx)("span",{className:"text-gray-400",children:"No image"})}),(0,u.jsx)("td",{className:"p-2 border",children:e.name}),(0,u.jsx)("td",{className:"p-2 border",children:e.description}),(0,u.jsx)("td",{className:"p-2 border cursor-pointer",onClick:()=>(async e=>{const s=t.find((s=>s._id===e));if(!s)return;const a={...s,status:"Active"===s.status?"Inactive":"Active"};p(!0);try{await c.A.put(`api/subcategories/${e}`,a,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),$()}catch(l){console.error("Error toggling status:",l)}finally{p(!1)}})(e._id),children:"Active"===e.status?(0,u.jsx)("span",{className:"px-2 py-1 text-white bg-green-600 rounded",children:"Active"}):(0,u.jsx)("span",{className:"px-2 py-1 text-white bg-red-600 rounded",children:"Inactive"})}),(0,u.jsxs)("td",{className:"relative p-2 border",children:[(0,u.jsx)("button",{onClick:()=>(e=>j(g===e?null:e))(s),className:"px-2 py-1 text-white rounded bg-cyan-600",children:"Action"}),g===s&&(0,u.jsxs)("div",{className:"absolute right-0 mt-1 w-32 bg-white border rounded shadow z-20",children:[(0,u.jsxs)("button",{className:"flex items-center w-full gap-1 px-3 py-2 hover:bg-gray-100",onClick:()=>k(`/subcategories-form?id=${e._id}`),children:[(0,u.jsx)(d.uO9,{})," Edit"]}),(0,u.jsxs)("button",{className:"flex items-center w-full gap-1 px-3 py-2 text-red-600 hover:bg-gray-100",onClick:()=>(async e=>{if(window.confirm("Delete this subcategory?")){p(!0);try{await c.A.delete(`api/subcategories/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),$()}catch(s){console.error("Error deleting subcategory:",s)}finally{p(!1)}}})(e._id),children:[(0,u.jsx)(d.qbC,{})," Delete"]})]})]})]},e._id)))})]})}),(0,u.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,u.jsxs)("span",{children:["Showing ",(v-1)*w+1," to"," ",Math.min(v*w,E.length)," of"," ",E.length," entries"]}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("button",{onClick:()=>v>1&&C(v-1),disabled:1===v,className:"px-3 py-1 bg-gray-300 rounded disabled:opacity-50",children:"Previous"}),(0,u.jsx)("button",{onClick:()=>v<I&&C(v+1),disabled:v===I,className:"px-3 py-1 bg-gray-300 rounded disabled:opacity-50",children:"Next"})]})]}),A&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:()=>_(null),children:(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("button",{className:"absolute top-0 right-0 m-2 text-white text-2xl",onClick:()=>_(null),children:"\xd7"}),(0,u.jsx)("img",{src:A,className:"max-w-full max-h-full rounded"})]})})]})]})]})}}}]);
//# sourceMappingURL=4964.14d09c27.chunk.js.map