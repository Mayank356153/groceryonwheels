"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2644],{22644:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var r=s(65043),a=s(66727),l=s(49804),n=s(60184),o=s(37762),c=s(64857),i=s(11238),d=s(21197),x=s(59255),u=s(86213),m=s(70579);const h=()=>{const e=(0,a.Zp)(),[t,s]=(0,r.useState)(1),[h,p]=(0,r.useState)(""),[b,g]=(0,r.useState)(""),[N,j]=(0,r.useState)(""),[f,w]=(0,r.useState)("All"),[v,y]=(0,r.useState)(10),[A,D]=(0,r.useState)(""),[C,S]=(0,r.useState)(!0),[k,L]=(0,r.useState)(0),[$,_]=(0,r.useState)([]),[E,B]=(0,r.useState)(null);(0,r.useEffect)((()=>{window.innerWidth<768&&S(!1)}),[]);const M=async()=>{try{const e=await u.A.get("api/deposits",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e.data),_(e.data.data)}catch(e){console.error(e.message)}};(0,r.useEffect)((()=>{M()}),[]);const W=$.filter((e=>{var t,s,r,a;const l=A.trim().toLowerCase()||"",n=(null===(t=e.debitAccount)||void 0===t||null===(s=t.accountNumber)||void 0===s?void 0:s.toLowerCase().includes(l))||!1,o=(null===(r=e.creditAccount)||void 0===r||null===(a=r.accountNumber)||void 0===a?void 0:a.toLowerCase().includes(l))||!1,c=!!e.creatorName&&e.creatorName.toLowerCase().includes(l),i=!h||e.depositDate&&new Date(e.depositDate).toDateString()===new Date(h).toDateString();return(""===l||n||o||c)&&i})),z=t*v,I=z-v,O=Math.ceil(W.length/v),P=W.slice(I,z),R=e=>{e>=1&&e<=O&&s(e)};(0,r.useEffect)((()=>{(()=>{const e=P.reduce(((e,t)=>e+t.amount),0);L(e)})()}),[W,P]);return(0,m.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,m.jsx)(d.A,{isSidebarOpen:C,setSidebarOpen:S}),(0,m.jsxs)("div",{className:"flex flex-grow",children:[(0,m.jsx)("div",{className:"w-auto",children:(0,m.jsx)(x.A,{isSidebarOpen:C})}),(0,m.jsxs)("div",{className:"overflow-x-auto  flex flex-col p-2 md:p-2 min-h-screen w-full",children:[(0,m.jsxs)("header",{className:"flex flex-col items-center justify-between px-2 py-2 mb-2 bg-gray-100 shadow rouded-md sm:flex-row",children:[(0,m.jsxs)("div",{className:"flex items-baseline gap-1 text-center sm:flex-row sm:text-left",children:[(0,m.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"Deposit List"}),(0,m.jsx)("span",{className:"text-xs text-gray-600 sm:text-sm",children:"View/Search Deposits"})]}),(0,m.jsxs)("nav",{className:"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0 sm:space-x-3",children:[(0,m.jsxs)("a",{href:"#",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,m.jsx)(n.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,m.jsx)(l.XWt,{className:"mx-1 "}),(0,m.jsx)("a",{href:"#",className:"text-gray-700 no-underline hover:text-cyan-600",children:"Deposit List"})]})]}),(0,m.jsxs)("div",{className:"flex items-center justify-between p-4 mt-1 mb-4 border-t-4 rounded-lg border-cyan-500",children:[(0,m.jsx)("div",{}),(0,m.jsxs)("div",{children:[(0,m.jsxs)(a.N_,{to:"/add-deposit",className:"px-4 py-2 text-white no-underline transition rounded bg-cyan-500 hover:bg-cyan-600",children:[(0,m.jsx)("span",{className:"text-lg",children:"+"})," Create Deposit"]}),(0,m.jsxs)(a.N_,{to:"/account-list",className:"bg-green-600 text-white px-4 py-2 rounded",children:[(0,m.jsx)("span",{className:"text-lg",children:"+"})," Account List"]})]})]}),(0,m.jsx)("div",{className:"flex-col items-start md:flex-row md:items-center",children:(0,m.jsxs)("div",{className:"flex flex-wrap justify-between space-y-2",children:[(0,m.jsxs)("div",{className:"flex flex-col",children:[(0,m.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Deposit Date"}),(0,m.jsx)("input",{type:"date",value:h,onChange:e=>p(e.target.value),className:"w-48 p-2 border"})]}),(0,m.jsxs)("div",{className:"flex flex-col",children:[(0,m.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Debit Account"}),(0,m.jsxs)("select",{value:b,onChange:e=>g(e.target.value),className:"w-48 p-2 border",children:[(0,m.jsx)("option",{value:"",children:"Select"}),(0,m.jsx)("option",{value:"all",children:"ALL"}),$.map(((e,t)=>{var s,r;return(0,m.jsx)("option",{value:null===(s=e.debitAccount)||void 0===s?void 0:s.accountNumber.toLowerCase(),children:null===(r=e.debitAccount)||void 0===r?void 0:r.accountNumber},t)}))]})]}),(0,m.jsxs)("div",{className:"flex flex-col",children:[(0,m.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Credit Account"}),(0,m.jsxs)("select",{value:N,onChange:e=>j(e.target.value),className:"w-48 p-2 border",children:[(0,m.jsx)("option",{value:"",children:"Select"}),(0,m.jsx)("option",{value:"all",children:"ALL"}),$.map(((e,t)=>{var s,r;return(0,m.jsx)("option",{value:null===(s=e.creditAccount)||void 0===s?void 0:s.accountNumber.toLowerCase(),children:null===(r=e.creditAccount)||void 0===r?void 0:r.accountNumber},t)}))]})]}),(0,m.jsxs)("div",{className:"flex flex-col",children:[(0,m.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Users"}),(0,m.jsxs)("select",{value:f,onChange:e=>w(e.target.value),className:"w-48 p-2 border",children:[(0,m.jsx)("option",{value:"All",children:"All"}),(0,m.jsx)("option",{children:"Admin"}),(0,m.jsx)("option",{children:"Manager"})]})]})]})}),(0,m.jsxs)("div",{className:"flex flex-col justify-between mt-4 mb-4 space-y-2 lg:flex-row lg:space-y-0 lg:items-center",children:[(0,m.jsxs)("div",{className:"flex items-center px-2 space-x-2",children:[(0,m.jsx)("span",{className:"text-sm",children:"Show"}),(0,m.jsxs)("select",{className:"p-2 text-sm border border-gray-300 rounded-md",value:v,onChange:e=>{y(Number(e.target.value)),s(1)},children:[(0,m.jsx)("option",{children:"10"}),(0,m.jsx)("option",{children:"20"}),(0,m.jsx)("option",{children:"50"})]}),(0,m.jsx)("span",{className:"text-sm",children:"Entries"})]}),(0,m.jsxs)("div",{className:"flex flex-col gap-2 lg:flex-row",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between flex-1 gap-2 px-2",children:[(0,m.jsx)("button",{onClick:()=>{const e=$.map((e=>{var t,s;return`${e.referenceNo}\t${new Date(e.depositDate).toDateString()}\t${(null===(t=e.debitAccount)||void 0===t?void 0:t.accountNumber)||"NA"}\t${(null===(s=e.creditAccount)||void 0===s?void 0:s.accountNumber)||"NA"}\t${e.amount}\t${e.creatorName||"NA"}`})).join("\n");navigator.clipboard.writeText(e),alert("Data copied to clipboard")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Copy"}),(0,m.jsx)("button",{onClick:()=>{const e=i.utils.json_to_sheet($),t=i.utils.book_new();i.utils.book_append_sheet(t,e,"Deposits"),i.writeFile(t,"deposits.xlsx")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Excel"}),(0,m.jsx)("button",{onClick:()=>{const e=new o.uE;e.text("Deposit List",14,16);const t=$.map((e=>{var t,s;return[e.referenceNo,new Date(e.depositDate).toDateString(),(null===(t=e.debitAccount)||void 0===t?void 0:t.accountNumber)||"NA",(null===(s=e.creditAccount)||void 0===s?void 0:s.accountNumber)||"NA",e.amount,e.creatorName||"NA",new Date(e.createdAt).toDateString()]}));(0,c.Ay)(e,{head:[["Reference No.","Deposit Date","Debit Account","Credit Account","Amount","Created By","Created At"]],body:t}),e.save("deposits.pdf")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"PDF"}),(0,m.jsx)("button",{onClick:()=>{window.print()},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Print"}),(0,m.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,"+$.map((e=>{var t,s;return`${e.referenceNo},${new Date(e.depositDate).toDateString()},${(null===(t=e.debitAccount)||void 0===t?void 0:t.accountNumber)||"NA"},${(null===(s=e.creditAccount)||void 0===s?void 0:s.accountNumber)||"NA"},${e.amount},${e.creatorName||"NA"}`})).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","deposits.csv"),document.body.appendChild(s),s.click()},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"CSV"})]}),(0,m.jsx)("input",{type:"text",placeholder:"Search",className:"w-full p-2 text-sm border border-gray-300 rounded-sm ",onChange:e=>D(e.target.value)})]})]}),(0,m.jsx)("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"min-w-full mt-4 border border-collapse border-gray-300",children:[(0,m.jsx)("thead",{className:"text-sm bg-gray-200 md:text-base",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Reference No."}),(0,m.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Deposit Date"}),(0,m.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Debit Account"}),(0,m.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Credit Account"}),(0,m.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Amount"}),(0,m.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Created by"}),(0,m.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Created at"}),(0,m.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Action"})]})}),(0,m.jsxs)("tbody",{children:[0===P.length?(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:"8",className:"p-4 text-center",children:"No data available"})}):P.map((t=>{var s,r;return(0,m.jsxs)("tr",{className:"text-sm md:text-base",children:[(0,m.jsx)("td",{className:"p-2 border border-gray-300",children:t.referenceNo||"NA"}),(0,m.jsx)("td",{className:"p-2 border border-gray-300",children:new Date(t.depositDate).toDateString()}),(0,m.jsx)("td",{className:"p-2 border border-gray-300",children:(null===(s=t.debitAccount)||void 0===s?void 0:s.accountNumber)||"NA"}),(0,m.jsx)("td",{className:"p-2 border border-gray-300",children:(null===(r=t.creditAccount)||void 0===r?void 0:r.accountNumber)||"NA"}),(0,m.jsx)("td",{className:"p-2 border border-gray-300",children:t.amount}),(0,m.jsx)("td",{className:"p-2 border border-gray-300",children:t.creatorName||"NA"}),(0,m.jsx)("td",{className:"p-2 border border-gray-300",children:new Date(t.createdAt).toDateString()}),(0,m.jsxs)("td",{className:"p-2 border border-gray-300",children:[(0,m.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold text-white bg-cyan-600 rounded-full shadow-sm \n            hover:bg-cyan-700 active:scale-95 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-cyan-400",onClick:()=>{B(E?null:t._id)},children:[(0,m.jsx)("span",{children:"Action"}),(0,m.jsx)("svg",{className:"w-4 h-4 transition-transform duration-200 "+(E===t._id?"rotate-180":""),fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),E===t._id&&(0,m.jsxs)("div",{className:"absolute z-50 mt-2 bg-white border shadow-lg t-0 w-28",children:[(0,m.jsx)("button",{className:"w-full px-1 py-0 text-left text-green-500 hover:bg-gray-100",onClick:()=>e(`/add-deposit?id=${t._id}`),children:"\u270f\ufe0f Edit"}),(0,m.jsx)("button",{className:"w-full px-1 py-0 text-left text-red-500 hover:bg-gray-100",onClick:()=>(async e=>{if(window.confirm("Do u want to delete this ?"))try{await u.A.delete(`api/deposits/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Deleted Successfully"),M()}catch(t){console.error(t.message)}})(t._id),children:"\ud83d\uddd1\ufe0f Delete"})]})]})]},t._id)})),W.length>0&&(0,m.jsxs)("tr",{className:"font-bold md:text-base",children:[(0,m.jsx)("td",{className:"p-2 text-right border border-gray-300",colSpan:"5",children:"Total:"}),(0,m.jsx)("td",{className:"p-2 text-right border border-gray-300",children:k})]})]})]})}),(0,m.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 p-2 md:justify-between md:flex-row",children:[(0,m.jsxs)("span",{children:["                    ",(0,m.jsxs)("span",{children:["Showing ",v*(t-1)+1," to ",Math.min(v*t,W.length)," of ",W.length," entries"]}),"              "]}),(0,m.jsxs)("div",{className:"flex justify-between w-full md:w-auto md:gap-2",children:[(0,m.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(1===t?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>R(t-1),disabled:1===t,children:[(0,m.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Previous"]}),(0,m.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(t===O?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>R(t+1),disabled:t===O,children:["Next",(0,m.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=2644.45bb1bd2.chunk.js.map