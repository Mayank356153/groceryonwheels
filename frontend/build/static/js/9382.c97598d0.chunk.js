"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9382],{12003:(e,s,l)=>{l.r(s),l.d(s,{default:()=>b});var t=l(65043),a=l(21197),r=l(59255),o=l(66727),n=l(60184),c=l(21830),d=l(53888),i=l(26873),m=l(47252),x=l(86213),u=l(14840),f=l(70579);function b(){const[e,s]=(0,t.useState)(!0),[l,b]=(0,t.useState)(!1),[p,g]=(0,t.useState)(""),[h,y]=(0,t.useState)({category:[],discounttype:[{label:"Percentage(%)",value:"Percentage"},{label:"Fixed",value:"Fixed"}],tax:[],taxType:[{label:"Inclusive",value:"Inclusive"},{label:"Exclusive",value:"Exclusive"}]}),[v,w]=(0,t.useState)({barcode:"",category:null,description:"",discount:0,discountType:"",hsn:"",itemCode:"",itemName:"",priceWithoutTax:0,sac:"",salesPrice:0,sellerPoints:0,salesTaxType:"",serviceImage:"",tax:null});(0,t.useEffect)((()=>{window.innerWidth<768&&s(!1)}),[]);(0,t.useEffect)((()=>{try{b(!0),(async()=>{try{const e=await x.A.get("api/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e.data);const s=e.data.map((e=>({label:e.name,value:e._id})));y((e=>({...e,category:s})))}catch(e){g(e.message)}finally{b(!1)}})(),A(),(async()=>{try{const e=localStorage.getItem("token"),s=await x.A.get("api/taxes",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});console.log(s.data);const l=s.data.data.map((e=>({label:e.taxName,value:e._id})));y((e=>({...e,tax:l})))}catch(e){g(e.message)}})()}catch(p){console.log(p)}finally{b(!1)}}),[]);const j=e=>{const{name:s,value:l}=e.target;w((t=>({...t,[s]:"number"===e.target.type?Number(l):l})))},N=e=>s=>{w({...v,[e]:s.value})},S=e=>{const s=e.match(/(\D+)(\d+)/);if(!s)return"IT050031";return`${s[1]}${(parseInt(s[2],10)+1).toString().padStart(6,"0")}`},A=async()=>{try{b(!0);const e=localStorage.getItem("token"),s=await x.A.get("api/services",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(console.log(s.data),s.data.data.length>0){const e=s.data.data[s.data.data.length-1].itemCode||"IT050055";w((s=>({...s,itemCode:S(e)})))}else w((e=>({...e,itemCode:"IT050060"})))}catch(e){console.log(e.message)}finally{b(!1)}};return(0,t.useEffect)((()=>{A()}),[]),l?(0,f.jsx)(u.A,{}):(0,f.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,f.jsx)(a.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,f.jsxs)("div",{className:"flex flex-grow ",children:[(0,f.jsx)(r.A,{isSidebarOpen:e}),(0,f.jsxs)("div",{className:"w-full h-full px-6 pb-6 bg-gray-300",children:[(0,f.jsxs)("div",{className:"flex flex-col items-start justify-between mt-4 sm:items-end md:flex-row",children:[(0,f.jsxs)("div",{className:"flex flex-wrap items-end w-full md:w-1/2",children:[(0,f.jsx)("div",{children:(0,f.jsx)("span",{className:"text-3xl ",children:"Services"})}),(0,f.jsx)("div",{children:(0,f.jsx)("span",{className:"text-sm text-gray-700",children:"Add/Update Services"})})]}),(0,f.jsxs)("div",{className:"flex flex-wrap w-full gap-2 px-2 py-2 mb-2 text-sm font-semibold text-black bg-gray-500 bg-opacity-50 rounded-md md:text-gray-500 md:justify-end md:w-1/2 md:bg-transparent",children:[(0,f.jsxs)(o.k2,{to:"/dashboard",className:"flex items-center text-gray-700 no-underline",children:[(0,f.jsx)(n.$BV,{}),"Home "]}),(0,f.jsx)(o.k2,{to:"/services/view",className:"text-gray-700 no-underline",children:">View Services"}),(0,f.jsx)(o.k2,{to:"/services/add",className:"text-gray-700 no-underline",children:">Services"})]})]}),(0,f.jsx)("form",{onSubmit:async e=>{e.preventDefault(),b(!0);try{await(async()=>{try{console.log("Sending FormData:",v);const e=await x.A.post("api/services",v,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("Response:",e.data),alert("Service Added Successfully")}catch(t){var e,s,l;console.error("Error:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message),alert("Unsuccessful: "+((null===(s=t.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)||t.message))}})(),console.log("Form submitted successfully!")}catch(s){console.error("Form submission failed:",s)}finally{b(!1)}w({barcode:"",category:null,description:"",discount:0,discountType:"",hsn:"",itemCode:"",itemName:"",priceWithoutTax:0,sac:"",salesPrice:0,sellerPoints:0,salesTaxType:"",serviceImage:"",tax:null})},children:(0,f.jsxs)("div",{className:"flex flex-col w-full gap-4 px-4 pt-2 pb-6 mx-auto bg-white border-t-4 border-blue-500 rounded-md sm:gap-5",children:[(0,f.jsx)(c.A,{div_class:"flex flex-col",label:"Item Code*",required:!0,label_class:"text-sm font-semibold",name:"itemCode",className:"px-4 py-2 mt-1 text-sm text-gray-800 border-[1px] border-gray-300 rounded-md lg:w-1/3 focus:outline-none focus:border-2 focus:border-blue-600 lg:w-1/4",value:v.itemCode,onChange:j}),(0,f.jsxs)("div",{className:"flex flex-col justify-between gap-2 sm:flex-row",children:[(0,f.jsx)(c.A,{label:"ItemName*",value:v.itemName,onChange:j,name:"itemName",required:!0,div_class:"flex flex-col  w-full sm:w-1/4",className:"w-full px-4 py-2 mt-1 text-sm text-gray-800 border-gray-300 rounded-md border-[1px] focus:outline-none focus:border-2 focus:border-blue-600",label_class:"text-sm font-semibold"}),(0,f.jsxs)("div",{className:"flex flex-col w-full gap-1 sm:w-1/4",children:[(0,f.jsx)("label",{htmlFor:"",className:"text-sm font-semibold",children:"Category"}),(0,f.jsx)(i.Ay,{options:h.category,value:v.category,onChange:N("category"),className:"w-full -z-1"})]}),(0,f.jsx)(m.A,{formData:v,setFormData:w})]}),(0,f.jsxs)("div",{className:"flex flex-col justify-between gap-2 sm:flex-row",children:[(0,f.jsx)(c.A,{label:"SAC",name:"sac",value:v.sac,onChange:j,div_class:"flex flex-col  w-full sm:w-1/4",className:"w-full px-4 py-2 mt-1 text-sm text-gray-800 border-gray-300 rounded-md border-[1px] focus:outline-none focus:border-2 focus:border-blue-600",label_class:"text-sm font-semibold"}),(0,f.jsx)(c.A,{label:"hsn",div_class:"flex flex-col  w-full sm:w-1/4",className:"w-full px-4 py-2 mt-1 text-sm text-gray-800 border-gray-300 rounded-md border-[1px] focus:outline-none focus:border-2 focus:border-blue-600",label_class:"text-sm font-semibold",name:"hsn",value:v.hsn,onChange:j}),(0,f.jsx)(c.A,{label:"Seller Points",type:"number",min:"0",div_class:"flex flex-col  w-full sm:w-1/4",className:"w-full px-4 py-2 mt-1 text-sm text-gray-800 border-gray-300 rounded-md border-[1px] focus:outline-none focus:border-2 focus:border-blue-600",label_class:"text-sm font-semibold",name:"sellerPoints",value:v.sellerPoints,onChange:j})]}),(0,f.jsxs)("div",{className:"flex flex-col justify-between gap-2 sm:flex-row",children:[(0,f.jsxs)("div",{className:"flex flex-col w-full sm:w-1/4",children:[(0,f.jsx)("label",{className:"text-sm font-semibold",children:"Description"}),(0,f.jsx)("textarea",{name:"description",value:v.description,onChange:j,className:"w-full px-4 py-2 mt-1 text-sm text-gray-800 border-gray-300 rounded-md border-[1px] focus:outline-none focus:border-2 focus:border-blue-600"})]}),(0,f.jsxs)("div",{className:"flex flex-col justify-between w-full sm:w-1/4",children:[(0,f.jsx)("label",{className:"text-sm font-semibold",children:"Select Image"}),(0,f.jsx)(c.A,{onChange:e=>{w({...v,image:e.target.files[0].name})},type:"file",className:"flex flex-wrap mt-1 text-sm font-medium"}),(0,f.jsx)("span",{className:"text-sm text-red-700",children:"Max Width/Height: 1000px * 1000px & Size: 1MB"})]}),(0,f.jsx)("div",{className:"flex-col hidden w-full sm:flex sm:w-1/4"})]}),(0,f.jsxs)("div",{className:"flex flex-col justify-between gap-2 pt-5 border-t-2 border-gray-200 sm:py-5 sm:flex-row",children:[(0,f.jsxs)("div",{className:"flex flex-col w-full gap-1 sm:w-1/4",children:[(0,f.jsx)("label",{htmlFor:"",className:"text-sm font-semibold",children:"Discount Type"}),(0,f.jsx)(i.Ay,{options:h.discounttype,onChange:N("discountType")})]}),(0,f.jsx)(c.A,{label:"Discount",type:"Number",min:"0",name:"discount",value:v.discount,onChange:j,div_class:"flex flex-col  w-full sm:w-1/4",className:"w-full px-4 py-2 mt-1 text-sm text-gray-800 border-gray-300 rounded-md border-[1px] focus:outline-none focus:border-2 focus:border-blue-600",label_class:"text-sm font-semibold"}),(0,f.jsx)("div",{className:"flex-col hidden w-full sm:flex sm:w-1/4"})]}),(0,f.jsxs)("div",{className:"flex flex-col justify-between gap-2 pt-5 border-t-2 border-gray-200 sm:flex-row",children:[(0,f.jsxs)("div",{className:"w-full sm:w-1/4",children:[(0,f.jsx)(c.A,{label:"Price(Expenses)*",className:"w-full px-4 py-2 mt-1 text-sm text-gray-800 border-gray-300 rounded-md border-[1px] focus:outline-none focus:border-2 focus:border-blue-600",name:"priceWithoutTax",value:v.priceWithoutTax,onChange:j,type:"Number",min:"0",label_class:"text-sm font-semibold"}),(0,f.jsx)("span",{className:"text-sm text-blue-700",children:'Enter "0",If there is no expenses'})]}),(0,f.jsxs)("div",{className:"flex flex-col w-full gap-1 sm:w-1/4",children:[(0,f.jsx)("label",{htmlFor:"",className:"text-sm font-semibold",children:"Tax*"}),(0,f.jsx)(i.Ay,{options:h.tax,onChange:N("tax")})]}),(0,f.jsx)("div",{className:"flex-col hidden w-full sm:flex sm:w-1/4"})]}),(0,f.jsxs)("div",{className:"flex flex-col justify-between gap-2 sm:flex-row",children:[(0,f.jsxs)("div",{className:"flex flex-col w-full gap-1 sm:w-1/4",children:[(0,f.jsx)("label",{htmlFor:"",className:"text-sm font-semibold",children:"Sales Tax Type*"}),(0,f.jsx)(i.Ay,{options:h.taxType,onChange:N("salesTaxType")})]}),(0,f.jsx)(c.A,{label:"Sales Price",name:"salesPrice",type:"Number",min:"0",value:v.salesPrice,onChange:j,div_class:"flex flex-col  w-full sm:w-1/4",className:"w-full px-4 py-2 mt-1 text-sm text-gray-800 border-gray-300 rounded-md border-[1px] focus:outline-none focus:border-2 focus:border-blue-600",label_class:"text-sm font-semibold"}),(0,f.jsx)("div",{className:"flex-col hidden w-full sm:flex sm:w-1/4"})]}),(0,f.jsxs)("div",{className:"flex flex-col justify-center gap-2 py-4 border-t-2 border-gray-200 sm:flex-row",children:[(0,f.jsx)(d.A,{className:"w-full text-white bg-green-500 rounded cursor-pointer sm:max-w-80 hover:bg-green-600",type:"submit",text:"Save"})," ",(0,f.jsx)(d.A,{className:"w-full text-white bg-orange-500 rounded cursor-pointer sm:max-w-80 hover:bg-orange-600",text:"Close"})," "]})]})})]})]})]})}},14840:(e,s,l)=>{l.d(s,{A:()=>n});var t=l(65043),a=l(21197),r=l(59255),o=l(70579);function n(){const[e,s]=(0,t.useState)(!1);return(0,o.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,o.jsx)(a.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,o.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,o.jsx)("div",{children:(0,o.jsx)(r.A,{isSidebarOpen:e})}),(0,o.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[(0,o.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,o.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},21830:(e,s,l)=>{l.d(s,{A:()=>r});var t=l(65043),a=l(70579);function r(e){let{id:s=" ",type:l="text",label_class:r="",label:o,className:n="",placeholder:c="",div_class:d="",...i}=e;const m=(0,t.useId)();return(0,a.jsxs)("div",{className:d,children:[" ",o?(0,a.jsx)("label",{className:r,htmlFor:" "===s?m:s,children:o}):null," ",(0,a.jsx)("input",{type:l,id:" "===s?m:s,placeholder:c,className:n,...i})]})}},47252:(e,s,l)=>{l.d(s,{A:()=>x});var t=l(65043),a=l(21830),r=l(31782),o=l(83910),n=l(97929),c=l(70579);const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const s=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").trim();return s&&!e.includes(s)?[...e,s]:e},i=function(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(((s,l)=>l!==e))},m=e=>{let{formData:s={},setFormData:l,fieldName:m="barcodes"}=e;const[x,u]=(0,t.useState)(!1),[f,b]=(0,t.useState)(""),p=(0,t.useRef)(null),g=(0,t.useRef)(null),h=s[m]||[],y=e=>l((s=>({...s,[m]:d(s[m],e)})));return(0,t.useEffect)((()=>{if(!x)return;const e=()=>{var e,s,l,t;null===(e=p.current)||void 0===e||null===(s=e.srcObject)||void 0===s||s.getTracks().forEach((e=>e.stop())),null===(l=g.current)||void 0===l||null===(t=l.reset)||void 0===t||t.call(l),u(!1)};return(async()=>{const s=new r.sx;g.current=s;const l=l=>s.decodeFromConstraints({video:{facingMode:l}},p.current,((s,l)=>{if(s){var t,a;y(s.getText()),null===(t=window.navigator)||void 0===t||null===(a=t.vibrate)||void 0===a||a.call(t,160);try{new Audio("/beep.mp3").play()}catch{}e()}l&&"NotFoundException"!==l.name&&console.error("Scan error:",l)}));try{await l({exact:"environment"})}catch{try{await l("user")}catch(t){console.error("Camera error:",t),e()}}})(),()=>e()}),[x]),(0,c.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,c.jsxs)("div",{className:"flex items-start w-full",children:[(0,c.jsx)(a.A,{label:"Barcodes",placeholder:"Type or scan \u2013 comma or Enter to save",value:f,onChange:e=>{let s=e.target.value;s.endsWith(",")&&(y(s.slice(0,-1)),s=""),b(s)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),y(f),b(""))},onBlur:()=>{y(f),b("")},div_class:"flex flex-col w-full",className:"w-full px-4 py-2 mt-1 text-sm text-gray-800 bg-white\r border-2 border-gray-300 rounded-l-md focus:border-blue-600",label_class:"text-sm font-semibold"}),(0,c.jsx)(o.g,{icon:n.m8z,title:"Scan barcode",onClick:()=>u(!0),className:"px-3 mt-4 py-[10px] text-gray-800 bg-gray-100 border-2\r border-l-0 border-gray-300 rounded-r-md cursor-pointer"})]}),h.length>0&&(0,c.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:h.map(((e,s)=>(0,c.jsxs)("span",{className:"flex items-center px-2 py-1 text-xs bg-gray-200 rounded-full",children:[e,(0,c.jsx)("button",{type:"button",className:"ml-1 text-red-600 hover:text-red-800 focus:outline-none",onClick:()=>(e=>l((s=>({...s,[m]:i(s[m],e)}))))(s),children:"\xd7"})]},s)))}),x&&(0,c.jsxs)("div",{className:"absolute inset-0 z-50 flex flex-col items-center\r justify-center bg-black bg-opacity-50",children:[(0,c.jsxs)("div",{className:"relative overflow-hidden border-4 border-white\r rounded-lg shadow-xl w-72 h-72",children:[(0,c.jsx)("video",{ref:p,className:"absolute object-cover w-full h-full",autoPlay:!0,muted:!0,playsInline:!0}),(0,c.jsx)("div",{className:"absolute w-full h-1 bg-red-500 animate-scan"})]}),(0,c.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-2 mt-6 text-white bg-red-600 rounded hover:bg-red-700",children:"Cancel"})]})]})};m.defaultProps={formData:{barcodes:[]},setFormData:()=>{},fieldName:"barcodes"};const x=m},53888:(e,s,l)=>{l.d(s,{A:()=>a});l(65043);var t=l(70579);function a(e){let{text:s,type:l="button",className:a,...r}=e;return(0,t.jsx)("button",{className:`${a}`,...r,children:s})}},82284:(e,s,l)=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}l.d(s,{A:()=>t})}}]);
//# sourceMappingURL=9382.c97598d0.chunk.js.map