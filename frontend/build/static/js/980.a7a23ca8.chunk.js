"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[980],{53888:(e,t,s)=>{s.d(t,{A:()=>r});s(65043);var a=s(70579);function r(e){let{text:t,type:s="button",className:r,...d}=e;return(0,a.jsx)("button",{className:`${r}`,...d,children:t})}},70980:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var a=s(65043),r=s(86213),d=s(66727),n=s(21197),i=s(59255),l=(s(53888),s(60184)),c=s(70579);function o(e){let{audit:t,onClose:s,sidebarOpen:d=!0}=e;const[n,i]=(0,a.useState)(t.finalUnit),[l,o]=(0,a.useState)(!1),x=(e,t)=>{const{name:s,value:a}=e.target,r=Number(a),d=n.map((e=>{if(e.itemId===t){const t={...e,[s]:r};return t.difference=t.expectedQty-t.scannedQty,t}return e}));i(d),o(!0)},m=()=>{l&&!window.confirm("You have unsaved changes. Are you sure you want to close?")||s()};return(0,c.jsx)("div",{className:"fixed inset-0 w-full h-full overflow-y-auto "+(d?"pl-0 lg:pl-10":""),children:(0,c.jsxs)("div",{className:"relative w-full p-4 mx-auto bg-gray-300 border rounded-md shadow-lg lg:w-3/4 lg:p-5 top-4 lg:top-20",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Audit Items Comparison"}),(0,c.jsxs)("button",{onClick:m,className:"text-gray-400 hover:text-gray-500",children:[(0,c.jsx)("span",{className:"sr-only",children:"Close"}),(0,c.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,c.jsx)("div",{className:"mb-4 space-y-3 lg:hidden",children:n.map((e=>(0,c.jsxs)("div",{className:"p-3 bg-white rounded-lg shadow",children:[(0,c.jsxs)("div",{className:"flex items-start justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium text-gray-900",children:e.itemName}),(0,c.jsxs)("p",{className:"text-xs text-gray-500",children:["ID: ",e.itemId]})]}),(0,c.jsxs)("span",{className:"text-sm "+(e.scannedQty>=e.expectedQty?"text-green-600":"text-red-600"),children:["Diff: ",e.scannedQty-e.expectedQty]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block mb-1 text-xs text-gray-500",children:"Scanned Qty"}),(0,c.jsx)("div",{className:"p-2 text-sm rounded bg-gray-50",children:e.scannedQty})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block mb-1 text-xs text-gray-500",children:"Expected Qty"}),(0,c.jsx)("input",{type:"number",value:e.expectedQty,className:"w-full p-2 text-sm border rounded-md",onChange:t=>x(t,e.itemId),name:"expectedQty",min:"0"})]})]})]},e.itemId)))}),(0,c.jsx)("div",{className:"hidden mb-4 overflow-x-auto lg:block",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,c.jsx)("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Item ID"}),(0,c.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Name"}),(0,c.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Scanned Qty"}),(0,c.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Expected Qty"}),(0,c.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Difference"})]})}),(0,c.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((e=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:e.itemId}),(0,c.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap",children:e.itemName}),(0,c.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:e.scannedQty}),(0,c.jsx)("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:(0,c.jsx)("input",{type:"number",value:e.expectedQty,className:"w-20 pl-2 border-2 rounded-md",onChange:t=>x(t,e.itemId),name:"expectedQty",min:"0"})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm "+(e.scannedQty>=e.expectedQty?"text-green-600":"text-red-600"),children:e.scannedQty-e.expectedQty})]},e.itemId)))})]})}),(0,c.jsxs)("div",{className:"flex flex-col-reverse justify-end pt-4 space-y-3 space-y-reverse border-t border-gray-200 sm:flex-row sm:space-y-0 sm:space-x-4",children:[(0,c.jsx)("button",{onClick:m,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"}),(0,c.jsx)("button",{onClick:async()=>{try{console.log(n);const e=await r.A.put("/api/audit/update-quantity-db",{auditId:t.auditId,finalUnit:n},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e),alert("Changes Save"),s()}catch(e){console.error("Error fetching warehouses:",e)}},disabled:!l,className:"px-4 py-2 text-sm font-medium text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 "+(l?"bg-blue-600 hover:bg-blue-700":"bg-blue-400 cursor-not-allowed"),children:"Save Changes"})]})]})})}const x=()=>{const[e,t]=(0,a.useState)(!0),[s,x]=(0,a.useState)(!1),[m,u]=(0,a.useState)([]),[h,p]=(0,a.useState)([]);(0,a.useEffect)((()=>{window.innerWidth<768&&t(!1)}),[window.innerWidth]);(0,d.Zp)();(0,a.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await r.A.get("/api/audit/compare-items",{headers:{Authorization:`Bearer ${e}`}});console.log(t.data.data),p(t.data.data)}catch(e){console.error("Fetch audit error:",e.message)}})()}),[]);const g=async()=>{try{const e=localStorage.getItem("token"),t=await r.A.get("/api/audit/compare-items",{headers:{Authorization:`Bearer ${e}`}});console.log(t.data.data),p(t.data.data)}catch(e){console.error("Fetch audit error:",e.message)}},y=async e=>{try{const t=localStorage.getItem("token"),s=await r.A.put("/api/audit/end",{auditId:e},{headers:{Authorization:`Bearer ${t}`}});return console.log(s),alert("Audit End sucessfully"),void g()}catch(t){console.error("error in  audit  end :",t.message)}},f=async e=>{if(window.confirm("Do u want to delete audit"))try{const t=await r.A.delete("https://localhost:5000/audit/delete",{id:e},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(t),alert("Deleted Successfully")}catch(t){console.error(t.message)}finally{g()}};return(0,c.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,c.jsx)(n.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,c.jsxs)("div",{className:"flex ",children:[(0,c.jsx)(i.A,{isSidebarOpen:e}),(0,c.jsxs)("div",{className:"w-full flex flex-col p-2 md:p-2  ",children:[(0,c.jsxs)("header",{className:"flex flex-col items-center justify-between p-4 rounded-md shadow sm:flex-row",children:[(0,c.jsx)("div",{className:"flex items-center gap-1 text-center sm:flex-row sm:text-left",children:(0,c.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"Open Audit List"})}),(0,c.jsxs)("nav",{className:"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0",children:[(0,c.jsxs)(d.k2,{to:"/dashboard",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,c.jsx)(l.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,c.jsx)(d.k2,{to:"/banners/view",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:"> Start Audit"}),(0,c.jsx)(d.k2,{to:"/banners/add",className:"text-gray-700 no-underline hover:text-cyan-600",children:"> Open Audit List"})]})]}),s&&(0,c.jsx)(o,{audit:m,onClose:()=>{x(!1),g()},sidebarOpen:e}),(0,c.jsx)("div",{className:"p-4 mt-1 bg-white border-t-4 rounded-lg shadow-md border-cyan-500",children:(0,c.jsxs)("div",{className:"overflow-x-auto border border-gray-200 rounded-lg shadow-sm",children:[(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 ",children:[(0,c.jsx)("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Audit ID"}),(0,c.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Total Items"}),(0,c.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Actions"})]})}),(0,c.jsx)("tbody",{className:"hidden bg-white divide-y divide-gray-200 md:table",children:h.map((e=>{var t;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap",children:e.auditId}),(0,c.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:[(null===(t=e.finalUnit)||void 0===t?void 0:t.length)||0," items"]}),(0,c.jsxs)("td",{className:"px-6 py-4 space-x-4 text-sm font-medium whitespace-nowrap",children:[(0,c.jsx)("button",{className:"text-indigo-600 hover:text-indigo-900",onClick:()=>{u(e),x(!0)},children:"View"}),(0,c.jsx)("button",{className:"text-green-600 hover:text-green-900",onClick:()=>y(e.auditId),children:"End"}),(0,c.jsx)("button",{className:"text-red-600 hover:text-red-900",onClick:()=>f(e.auditId),children:"Delete"})]})]},e.auditId)}))})]}),h.map((e=>{var t;return(0,c.jsxs)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm",children:[(0,c.jsx)("div",{className:"mb-2 text-sm font-medium text-gray-700",children:"Audit ID:"}),(0,c.jsx)("div",{className:"mb-1 text-base font-semibold text-gray-900 break-all",children:e.auditId}),(0,c.jsxs)("div",{className:"mb-3 text-sm text-gray-600",children:["Total Items: ",(null===(t=e.finalUnit)||void 0===t?void 0:t.length)||0]}),(0,c.jsxs)("div",{className:"flex justify-start space-x-4",children:[(0,c.jsx)("button",{className:"text-sm text-indigo-600 hover:text-indigo-900",onClick:()=>{u(e),x(!0)},children:"View"}),(0,c.jsx)("button",{className:"text-sm text-green-600 hover:text-green-900",onClick:()=>y(e.auditId),children:"End"}),(0,c.jsx)("button",{className:"text-sm text-red-600 hover:text-red-900",onClick:()=>f(e.auditId),children:"Delete"})]})]},e.auditId)}))]})})]})]})]})}}}]);
//# sourceMappingURL=980.a7a23ca8.chunk.js.map