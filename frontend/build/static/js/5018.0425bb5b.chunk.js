"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5018],{14840:(e,l,a)=>{a.d(l,{A:()=>c});var s=a(65043),o=a(21197),t=a(59255),n=a(70579);function c(){const[e,l]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(o.A,{isSidebarOpen:e,setSidebarOpen:l}),(0,n.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,n.jsx)("div",{children:(0,n.jsx)(t.A,{isSidebarOpen:e})}),(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,n.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},51647:(e,l,a)=>{a.r(l),a.d(l,{default:()=>m});var s=a(65043),o=a(66727),t=a(21197),n=a(59255),c=a(86213),i=a(60184),r=a(26873),d=a(14840),u=a(70579);const m=()=>{const e=(0,o.Zp)(),[l,a]=(0,s.useState)([]),[m,f]=(0,s.useState)([]),[x,p]=(0,s.useState)(!0),[g,h]=(0,s.useState)(!1),[w]=(0,o.ok)(),v=w.get("couponid"),[y,b]=(w.get("customerid"),(0,s.useState)([])),[j,N]=(0,s.useState)([]),[C,A]=(0,s.useState)([]),[S,T]=(0,s.useState)([]),[k,B]=(0,s.useState)({customer:null,discountCoupon:null,couponCode:"",occasionName:"",expiryDate:"",value:0,minCartValue:0,allowedTimes:1,usedTimes:0,couponType:"",description:"",itemsAllowed:[],categoryAllowed:[],subCategoryAllowed:[],subsubCategoryAllowed:[]}),I=[{label:"Percentage(%)",value:"Percentage"},{label:"Fixed",value:"Fixed"}];function M(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const l="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let a="";for(let s=0;s<e;s++){a+=l[Math.floor(36*Math.random())]}return a}(0,s.useEffect)((()=>{function e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const l="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let a="";for(let s=0;s<e;s++){a+=l[Math.floor(36*Math.random())]}return a}B((l=>({...l,couponCode:e(10)})))}),[]),(0,s.useEffect)((()=>{window.innerWidth<768&&p(!1)}),[]);(0,s.useEffect)((()=>{(async()=>{try{h(!0);const e=await c.A.get("api/customer-data/all",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.data){const l=e.data.map((e=>({label:e.customerName,value:e._id})));a(l)}}catch(e){console.log(e.message)}finally{h(!1)}})(),(async()=>{try{h(!0);const e=await c.A.get("api/discount-coupons",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(console.log(e.data),e.data){const l=e.data.map((e=>({label:e.couponCode,value:e._id})));f(l)}}catch(e){console.log(e.message)}finally{h(!1)}})(),(async()=>{try{h(!0);const e=(await c.A.get("api/items",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data.map((e=>({label:e.itemName,value:e._id})));b(e)}catch(e){console.log(e.message)}finally{h(!1)}})(),(async()=>{try{h(!0);const e=(await c.A.get("api/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data.map((e=>({label:e.name,value:e._id})));N(e)}catch(e){console.log(e.message)}finally{h(!1)}})(),(async()=>{try{h(!0);const e=await c.A.get("api/subcategories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("JHg"),console.log(e.data);const l=e.data.data.map((e=>({label:e.name,value:e._id})));A(l)}catch(e){console.log(e.message)}finally{h(!1)}})(),(async()=>{try{h(!0);const e=await c.A.get("api/sub-subcategories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("JHg"),console.log(e.data);const l=e.data.data.map((e=>({label:e.name,value:e._id})));T(l)}catch(e){console.log(e.message)}finally{h(!1)}})(),v&&(async()=>{try{h(!0);const e=await c.A.get("api/customer-coupons",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e.data);const l=e.data.find((e=>e._id===v));console.log(l),B(l)}catch(e){console.log(e.message)}finally{h(!1)}})()}),[]);const D=e=>{const{name:l,value:a}=e.target;B((s=>({...s,[l]:"number"==e.target.type?Number(a):a})))};return g?(0,u.jsx)(d.A,{}):(0,u.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,u.jsx)(t.A,{isSidebarOpen:x,setSidebarOpen:p}),(0,u.jsxs)("div",{className:"flex flex-grow",children:[(0,u.jsx)("div",{children:(0,u.jsx)(n.A,{isSidebarOpen:x})}),(0,u.jsxs)("div",{className:"flex flex-col p-4 min-h-screen transition-all duration-300 w-full",children:[(0,u.jsxs)("header",{className:"flex flex-col items-center justify-between h-auto p-4 mb-6 bg-gray-100 rounded-lg shadow-md md:flex-row",children:[(0,u.jsxs)("h1",{className:"text-2xl font-semibold",children:["Add ",(0,u.jsx)("span",{className:"text-sm text-gray-500",children:"/Update Coupon"})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-2 text-blue-600",children:[(0,u.jsxs)(o.N_,{to:"/",className:"flex items-center text-sm text-gray-500 no-underline hover:text-cyan-600",children:[(0,u.jsx)(i.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,u.jsx)("span",{className:"text-gray-400",children:">"}),(0,u.jsx)(o.N_,{to:"/coupons",className:"text-sm text-gray-500 no-underline hover:text-cyan-600",children:" Coupons List "})]})]}),(0,u.jsxs)("form",{className:"flex flex-col px-2 bg-white border-t-4 rounded-lg shadow-md border-cyan-500",onSubmit:l=>{l.preventDefault(),v?(async()=>{try{h(!0),console.log(k),await c.A.put(`api/customer-coupons/${v}`,k,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})}catch(l){alert("Unable to update coupon"),console.log(l.message)}finally{h(!1),e("/customer-coupen-list")}})():(async()=>{try{h(!0),console.log(k);const e=await c.A.post("api/customer-coupons/create",k,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e),alert("Added successfully"),B({customer:null,discountCoupon:null,couponCode:M(10),occasionName:"",expiryDate:"",value:0,minCartValue:0,allowedTimes:1,usedTimes:0,couponType:"",description:"",itemsAllowed:[],categoryAllowed:[],subCategoryAllowed:[],subsubCategoryAllowed:[]})}catch(e){alert("Unable to add coupon"),console.log(e.message)}finally{h(!1)}})()},children:[(0,u.jsxs)("div",{className:"flex flex-col w-full mt-2 space-y-3 md:flex-row",children:[(0,u.jsxs)("div",{className:"flex flex-col w-full ",children:[(0,u.jsxs)("label",{className:"w-full text-sm font-medium md:w-1/3",children:["Customer Name ",(0,u.jsx)("span",{className:"text-red-300",children:"*"})]}),(0,u.jsx)("div",{className:"w-full md:w-2/3",children:(0,u.jsx)(r.Ay,{options:l,onChange:e=>B((l=>({...l,customer:e.value}))),value:(null===l||void 0===l?void 0:l.find((e=>{var l;return e.value===((null===k||void 0===k||null===(l=k.customer)||void 0===l?void 0:l._id)||(null===k||void 0===k?void 0:k.customer))})))||null})})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full ",children:[(0,u.jsxs)("label",{className:"w-full text-sm font-medium md:w-1/3",children:["Discount Coupon ",(0,u.jsx)("span",{className:"text-red-300",children:"*"})]}),(0,u.jsx)("div",{className:"w-full md:w-2/3",children:(0,u.jsx)(r.Ay,{options:m,onChange:e=>B((l=>({...l,discountCoupon:e.value}))),value:(null===m||void 0===m?void 0:m.find((e=>{var l;return e.value===((null===(l=k.discountCoupon)||void 0===l?void 0:l._id)||k.discountCoupon||"")})))||null})})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsxs)("label",{className:"w-full text-sm font-medium md:w-1/3",children:["Coupon Code ",(0,u.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,u.jsx)("input",{type:"text",className:"w-full p-2 border rounded md:w-2/3 focus:ring",name:"couponCode",value:k.couponCode,onChange:D,placeholder:"Enter Coupon Code"})]})]}),(0,u.jsxs)("div",{className:"flex flex-col justify-around w-full mt-2 space-y-3 md:flex-row",children:[(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Minimum Cart Value"}),(0,u.jsx)("input",{type:"number",className:"w-full p-2 border rounded md:w-2/3 focus:ring",name:"minCartValue",value:k.minCartValue,onChange:D,min:"0",placeholder:"Minimum order amount to apply coupon"})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Usage Limit"}),(0,u.jsx)("input",{type:"number",className:"w-full p-2 border rounded md:w-2/3 focus:ring",name:"allowedTimes",value:k.allowedTimes,onChange:D,min:"1",placeholder:"How many times this coupon can be used"})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Expiry Date"}),(0,u.jsx)("input",{type:"date",className:"w-full p-2 border rounded md:w-2/3 focus:ring",name:"expiryDate",value:k.expiryDate,onChange:D})]})]}),(0,u.jsxs)("div",{className:"flex flex-col justify-around w-full mt-2 space-y-3 md:flex-row",children:[(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Coupon Value"}),(0,u.jsx)("input",{type:"number",className:"w-full p-2 border rounded md:w-2/3 focus:ring",name:"value",value:k.value,onChange:D,min:"0",placeholder:"Enter Coupon Value"})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Coupon Type"}),(0,u.jsx)(r.Ay,{options:I,onChange:e=>B((l=>({...l,couponType:e.value}))),className:"w-full md:w-2/3",value:(null===I||void 0===I?void 0:I.find((e=>e.value===(k.couponType||""))))||null})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Applicable Items"}),(0,u.jsx)(r.Ay,{isMulti:!0,options:y,onChange:e=>B((l=>({...l,itemsAllowed:e.map((e=>e.value))}))),value:(null===y||void 0===y?void 0:y.filter((e=>{var l;return null===(l=k.itemsAllowed)||void 0===l?void 0:l.includes(e.value)})))||[],className:"w-full md:w-2/3",placeholder:"Select items this coupon applies to"})]})]}),(0,u.jsxs)("div",{className:"flex flex-col justify-around w-full mt-2 space-y-3 md:flex-row",children:[(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Applicable Categories"}),(0,u.jsx)(r.Ay,{isMulti:!0,options:j,onChange:e=>B((l=>({...l,categoryAllowed:e.map((e=>e.value))}))),value:(null===j||void 0===j?void 0:j.filter((e=>{var l;return null===(l=k.categoryAllowed)||void 0===l?void 0:l.includes(e.value)})))||[],className:"w-full md:w-2/3",placeholder:"Select categories "})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Applicable Subcategories"}),(0,u.jsx)(r.Ay,{isMulti:!0,options:C,onChange:e=>B((l=>({...l,subCategoryAllowed:e.map((e=>e.value))}))),value:(null===C||void 0===C?void 0:C.filter((e=>{var l;return null===(l=k.subCategoryAllowed)||void 0===l?void 0:l.includes(e.value)})))||[],className:"w-full md:w-2/3",placeholder:"Select subcategories "})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium ",children:"Applicable Subsubcategories"}),(0,u.jsx)(r.Ay,{isMulti:!0,options:S,onChange:e=>B((l=>({...l,subsubCategoryAllowed:e.map((e=>e.value))}))),value:(null===S||void 0===S?void 0:S.filter((e=>{var l;return null===(l=k.subsubCategoryAllowed)||void 0===l?void 0:l.includes(e.value)})))||[],className:"w-full md:w-2/3",placeholder:"Select subsubcategories "})]})]}),(0,u.jsxs)("div",{className:"flex flex-col justify-around w-full mt-2 space-y-3 md:flex-row",children:[(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Occasion Name"}),(0,u.jsx)("input",{type:"text",className:"w-full p-2 border rounded md:w-2/3 focus:ring",name:"occasionName",value:k.occasionName,onChange:D,placeholder:"Enter Occasion Name"})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full",children:[(0,u.jsx)("label",{className:"w-full text-sm font-medium md:w-1/3",children:"Description"}),(0,u.jsx)("textarea",{className:"w-full p-2 border rounded md:w-2/3 focus:ring",placeholder:"Enter Description",value:k.description,name:"description",onChange:D})]}),(0,u.jsx)("div",{className:"flex flex-col w-full"})]}),(0,u.jsxs)("div",{className:"flex w-full gap-4 py-4 mt-6",children:[(0,u.jsx)("button",{type:"submit",className:"px-6 py-2.5 font-medium text-white bg-gradient-to-r from-green-500 to-green-600 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-75 w-full",children:(0,u.jsx)("span",{className:"flex items-center justify-center gap-2",children:v?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.KP4,{className:"text-sm"}),"Update"]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.E5P,{}),"Create"]})})}),(0,u.jsx)("button",{type:"button",className:"px-6 py-2.5 font-medium text-gray-800 bg-gradient-to-r from-gray-100 to-gray-200 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 border border-gray-300 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-200 focus:ring-opacity-50 w-full",children:(0,u.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,u.jsx)(i.QCr,{}),"Close"]})})]})]})]})]})]})}},82284:(e,l,a)=>{function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}a.d(l,{A:()=>s})}}]);
//# sourceMappingURL=5018.0425bb5b.chunk.js.map