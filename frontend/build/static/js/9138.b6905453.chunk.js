"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9138],{14840:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(65043),r=s(21197),l=s(59255),c=s(70579);function n(){const[e,t]=(0,a.useState)(!1);return(0,c.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,c.jsx)(r.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,c.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,c.jsx)("div",{children:(0,c.jsx)(l.A,{isSidebarOpen:e})}),(0,c.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,c.jsxs)("div",{className:"flex flex-col items-center",children:[(0,c.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,c.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},19138:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var a=s(65043),r=s(21197),l=s(59255),c=s(66727),n=s(86213),i=s(37762),d=s(64857),o=s(11238),x=s(14840),p=s(70579);const h=()=>{const e=(0,c.Zp)(),[t,s]=(0,a.useState)(!0),[h,u]=(0,a.useState)([]),[m,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)(""),[g,N]=(0,a.useState)(10),[f,w]=(0,a.useState)(1),[v]=(0,c.ok)(),S=v.get("storeId"),k=async()=>{try{b(!0);const e=localStorage.getItem("token"),t=S?`api/subscriptions?storeId=${S}`:"api/subscriptions",s=await n.A.get(t,{headers:{Authorization:`Bearer ${e}`}});u(s.data.data||[])}catch(e){console.error("Error fetching subscriptions:",e.message)}finally{b(!1)}};(0,a.useEffect)((()=>{k()}),[S]);const C=h.filter((e=>e.packageName.toLowerCase().includes(y.toLowerCase()))),A=f*g,$=A-g,D=C.slice($,A),E=Math.ceil(C.length/g),P=e=>{e>=1&&e<=E&&w(e)};return m?(0,p.jsx)(x.A,{}):(0,p.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,p.jsx)(r.A,{isSidebarOpen:t,setSidebarOpen:s}),(0,p.jsxs)("div",{className:"flex flex-grow",children:[(0,p.jsx)("div",{className:"w-auto",children:(0,p.jsx)(l.A,{isSidebarOpen:t})}),(0,p.jsxs)("div",{className:"overflow-x-auto  p-4 transition-all duration-300 w-full",children:[(0,p.jsxs)("header",{className:"flex flex-col items-center justify-between p-4 mb-4 bg-gray-100 rounded-md shadow sm:flex-row",children:[(0,p.jsxs)("div",{className:"flex flex-col items-center gap-1 sm:flex-row",children:[(0,p.jsx)("h1",{className:"text-lg font-semibold sm:text-xl",children:"Subscriptions List"}),(0,p.jsx)("span",{className:"text-xs text-gray-600 sm:text-sm",children:"View/Search Subscriptions"})]}),S&&(0,p.jsx)("div",{children:(0,p.jsx)("button",{className:"px-4 py-2 text-white rounded bg-cyan-500",onClick:()=>e(`/add-subscription?storeId=${S}`),children:"+ New Subscription"})})]}),(0,p.jsxs)("div",{className:"flex flex-col justify-between w-full mt-4 mb-4 space-y-2 lg:flex-row lg:space-y-0 lg:items-center",children:[(0,p.jsxs)("div",{className:"flex items-center px-2 space-x-2",children:[(0,p.jsx)("span",{className:"text-sm",children:"Show"}),(0,p.jsxs)("select",{className:"p-2 text-sm border border-gray-300 rounded-md",value:g,onChange:e=>{N(Number(e.target.value)),w(1)},children:[(0,p.jsx)("option",{children:"10"}),(0,p.jsx)("option",{children:"20"}),(0,p.jsx)("option",{children:"50"})]}),(0,p.jsx)("span",{className:"text-sm",children:"Entries"})]}),(0,p.jsxs)("div",{className:"flex flex-col justify-around w-full gap-2 lg:flex-row",children:[(0,p.jsxs)("div",{className:"flex items-center justify-around flex-1 w-full gap-1 px-2",children:[(0,p.jsx)("button",{onClick:()=>{const e=C.map((e=>`${e.packageName}, ${e.category}, ${e.productCount}, ${e.total}, ${e.status}`)).join("\n");navigator.clipboard.writeText(e),alert("Data copied to clipboard!")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Copy"}),(0,p.jsx)("button",{onClick:()=>{const e=o.utils.json_to_sheet(C),t=o.utils.book_new();o.utils.book_append_sheet(t,e,"Subscriptions"),o.writeFile(t,"subscriptions.xlsx")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Excel"}),(0,p.jsx)("button",{onClick:()=>{const e=new i.uE;e.text("Subscriptions List",20,20);const t=C.map((e=>[e.packageName,e.category,e.productCount,e.total,e.status]));(0,d.Ay)(e,{head:[["Package Name","Category","Product Count","Total","Status"]],body:t}),e.save("subscriptions.pdf")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"PDF"}),(0,p.jsx)("button",{onClick:()=>{window.print()},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Print"}),(0,p.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,"+C.map((e=>`${e.packageName},${e.category},${e.productCount},${e.total},${e.status}`)).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","subscriptions.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"CSV"})]}),(0,p.jsx)("input",{type:"text",placeholder:"Search",className:"w-full p-2 text-sm border border-gray-300 rounded-sm md:w-auto",onChange:e=>j(e.target.value)})]})]}),(0,p.jsx)("div",{className:"overflow-x-auto",children:(0,p.jsxs)("table",{className:"min-w-full bg-white rounded-lg shadow-lg",children:[(0,p.jsx)("thead",{className:"bg-gray-200",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"px-4 py-2 border",children:"Package Name"}),(0,p.jsx)("th",{className:"px-4 py-2 border",children:"Category"}),(0,p.jsx)("th",{className:"px-4 py-2 border",children:"Product Count"}),(0,p.jsx)("th",{className:"px-4 py-2 border",children:"Total (\u20b9)"}),(0,p.jsx)("th",{className:"px-4 py-2 border",children:"Payment Type"}),(0,p.jsx)("th",{className:"px-4 py-2 border",children:"Status"}),(0,p.jsx)("th",{className:"px-4 py-2 border",children:"Start Date"}),(0,p.jsx)("th",{className:"px-4 py-2 border",children:"End Date"}),(0,p.jsx)("th",{className:"px-4 py-2 text-center border",children:"Action"})]})}),(0,p.jsx)("tbody",{children:0===D.length?(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"9",className:"p-4 text-center text-gray-500",children:"No matching records found"})}):D.map((t=>{var s;return(0,p.jsxs)("tr",{className:"border-b",children:[(0,p.jsx)("td",{className:"px-4 py-2 border",children:t.packageName}),(0,p.jsx)("td",{className:"px-4 py-2 border",children:t.category}),(0,p.jsx)("td",{className:"px-4 py-2 border",children:t.productCount}),(0,p.jsx)("td",{className:"px-4 py-2 border",children:t.total}),(0,p.jsx)("td",{className:"px-4 py-2 border",children:(null===(s=t.paymentType)||void 0===s?void 0:s.paymentTypeName)||"N/A"}),(0,p.jsx)("td",{className:"px-4 py-2 border",children:t.status}),(0,p.jsx)("td",{className:"px-4 py-2 border",children:new Date(t.startDate).toLocaleDateString()}),(0,p.jsx)("td",{className:"px-4 py-2 border",children:t.endDate?new Date(t.endDate).toLocaleDateString():"N/A"}),(0,p.jsxs)("td",{className:"px-4 py-2 text-center border",children:[(0,p.jsx)("button",{className:"px-2 py-1 mr-2 text-white rounded bg-cyan-600 hover:bg-cyan-500",onClick:()=>e(`/edit-subscription/${t._id}?storeId=${S}`),children:"Edit"}),(0,p.jsx)("button",{className:"px-2 py-1 text-white bg-red-600 rounded hover:bg-red-500",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this subscription?"))try{const t=localStorage.getItem("token");await n.A.delete(`api/subscriptions/${e}`,{headers:{Authorization:`Bearer ${t}`}}),alert("Subscription deleted successfully!"),k()}catch(t){console.error("Error deleting subscription:",t.message),alert("Error deleting subscription")}})(t._id),children:"Delete"})]})]},t._id)}))})]})}),(0,p.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,p.jsxs)("div",{children:["Showing ",$+1," to ",Math.min(A,C.length)," of ",C.length," entries"]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("button",{onClick:()=>P(f-1),disabled:1===f,className:"px-2 py-1 mr-2 text-gray-700 bg-gray-300 rounded disabled:opacity-50",children:"Previous"}),(0,p.jsx)("button",{onClick:()=>P(f+1),disabled:A>=C.length,className:"px-2 py-1 ml-2 text-gray-700 bg-gray-300 rounded disabled:opacity-50",children:"Next"})]})]})]})]})]})}}}]);
//# sourceMappingURL=9138.b6905453.chunk.js.map