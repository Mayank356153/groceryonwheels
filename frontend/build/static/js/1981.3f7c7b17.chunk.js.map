{"version":3,"file":"static/js/1981.3f7c7b17.chunk.js","mappings":"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","sources":["Loading.jsx","components/purchase/SupplierPopup.jsx","components/purchase/RawLotModal.jsx","components/purchase/newpurcheas.jsx","../node_modules/dayjs/dayjs.min.js","../node_modules/@babel/runtime/helpers/esm/typeof.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport Navbar from \"./components/Navbar\";\nimport Sidebar from \"./components/Sidebar\";\nexport default function LoadingScreen() {\n    const[isSidebarOpen,setSidebarOpen]=useState(false)\n    return (\n        <div className='flex flex-col h-screen'>\n        {/* Navbar component with sidebar open state */}\n        <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\n        <div className='flex flex-grow mt-20'>\n          <div>\n            {/* Sidebar component with open state */}\n            <Sidebar isSidebarOpen={isSidebarOpen} />\n          </div>\n  \n          {/* Container for the entire component */}\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm\">\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin\"></div>\n            <p className=\"mt-3 text-lg font-semibold text-gray-700\">Loading...</p>\n          </div>\n        </div>\n          \n        </div>\n      </div>\n    );\n  }\n  ","/* ──────────────────────────────────────────────────────────────\r\n   SupplierPopup.jsx     –  full-screen modal to create a Supplier\r\n   Covers *all* fields that exist in your standalone Add-Supplier page\r\n   (supplierName, email, mobile, phone, address, city, state, country,\r\n    gstNumber, taxNumber, postcode, openingBalance, previousBalance,\r\n    purchaseDue, purchaseReturnDue, status)\r\n   ────────────────────────────────────────────────────────────── */\r\nimport { useEffect, useState } from \"react\";\r\nimport Select  from \"react-select\";\r\nimport axios   from \"axios\";\r\n\r\n/* utility to map API list → react-select options */\r\nconst toOpt = (label) => (o) => ({\r\n  label: o[label],\r\n  value: o._id ?? o[label],\r\n});\r\n\r\nexport default function SupplierPopup({ open, onClose, onCreated }) {\r\n  /* ────── 1. Hooks (always defined) ────── */\r\n  const empty = {\r\n    supplierName: \"\",\r\n    email: \"\",\r\n    mobile: \"\",\r\n    phone: \"\",\r\n    address: \"\",\r\n    city: \"\",\r\n    state: \"\",\r\n    country: \"\",\r\n    postcode: \"\",\r\n    gstNumber: \"\",\r\n    taxNumber: \"\",\r\n    openingBalance: 0,\r\n    previousBalance: 0,\r\n    purchaseDue: 0,\r\n    purchaseReturnDue: 0,\r\n    status: \"Active\",\r\n  };\r\n\r\n  const [form,       setForm]       = useState(empty);\r\n  const [countries,  setCountries]  = useState([]);\r\n  const [states,     setStates]     = useState([]);\r\n  const [saving,     setSaving]     = useState(false);\r\n  const [errorMsg,   setErrorMsg]   = useState(\"\");\r\n\r\n  /* load look-ups & reset form whenever the popup opens */\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    setForm(empty);\r\n    setErrorMsg(\"\");\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n    const hdr   = { headers:{ Authorization:`Bearer ${token}` } };\r\n\r\n    Promise.all([\r\n      axios.get(\"api/countries\", hdr),\r\n      axios.get(\"api/states\",    hdr),\r\n    ])\r\n      .then(([cRes, sRes]) => {\r\n        setCountries(\r\n          (cRes.data.data || []).filter(c=>c.status===\"active\").map(toOpt(\"countryName\"))\r\n        );\r\n        setStates(\r\n          (sRes.data.data || []).filter(s=>s.status===\"active\").map(toOpt(\"stateName\"))\r\n        );\r\n      })\r\n      .catch((e) => setErrorMsg(\"Failed to load country/state lists\"));\r\n  }, [open]);\r\n\r\n  /* esc-key closes dialog */\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    const onEsc = (e) => e.key === \"Escape\" && onClose();\r\n    window.addEventListener(\"keydown\", onEsc);\r\n    return () => window.removeEventListener(\"keydown\", onEsc);\r\n  }, [open, onClose]);\r\n\r\n  /* ────── 2. early-return when hidden ────── */\r\n  if (!open) return null;\r\n\r\n  /* ────── 3. helpers ────── */\r\n  const change = (e) =>\r\n    setForm({ ...form, [e.target.name]: e.target.type === \"number\" ? Number(e.target.value) : e.target.value });\r\n\r\n  const save = async (e) => {\r\n    e.preventDefault();\r\n    setSaving(true); setErrorMsg(\"\");\r\n    try {\r\n      const { data } = await axios.post(\r\n        \"api/suppliers\",\r\n        form,\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n          },\r\n        }\r\n      );\r\n      onCreated?.(data.data || data);\r\n      onClose();\r\n    } catch (err) {\r\n      setErrorMsg(err.response?.data?.message || err.message || \"Save failed\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  /* ────── 4. UI ────── */\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center\r\n                 bg-black bg-opacity-50\"\r\n      onClick={onClose}\r\n    >\r\n      <form\r\n        onClick={(e) => e.stopPropagation()}\r\n        onSubmit={save}\r\n        className=\"max-h-[95vh] w-full max-w-3xl overflow-y-auto\r\n                   rounded-lg bg-white p-6 shadow-lg\"\r\n      >\r\n        <h2 className=\"mb-4 text-xl font-semibold text-center\">Add Supplier</h2>\r\n\r\n        {/* --- 1st row --- */}\r\n        <div className=\"grid gap-4 md:grid-cols-2\">\r\n          <div>\r\n            <label className=\"mb-1 block text-sm font-medium\">\r\n              Supplier Name *\r\n            </label>\r\n            <input\r\n              required\r\n              name=\"supplierName\"\r\n              value={form.supplierName}\r\n              onChange={change}\r\n              className=\"w-full rounded border px-3 py-2\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"mb-1 block text-sm\">Email</label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              value={form.email}\r\n              onChange={change}\r\n              className=\"w-full rounded border px-3 py-2\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* --- 2nd row --- */}\r\n        <div className=\"mt-4 grid gap-4 md:grid-cols-2\">\r\n          <div>\r\n            <label className=\"mb-1 block text-sm\">Mobile</label>\r\n            <input\r\n              name=\"mobile\"\r\n              value={form.mobile}\r\n              onChange={change}\r\n              className=\"w-full rounded border px-3 py-2\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"mb-1 block text-sm\">Phone</label>\r\n            <input\r\n              name=\"phone\"\r\n              value={form.phone}\r\n              onChange={change}\r\n              className=\"w-full rounded border px-3 py-2\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* --- address block --- */}\r\n        <div className=\"mt-4\">\r\n          <label className=\"mb-1 block text-sm\">Address</label>\r\n          <textarea\r\n            name=\"address\"\r\n            rows=\"2\"\r\n            value={form.address}\r\n            onChange={change}\r\n            className=\"w-full rounded border px-3 py-2\"\r\n          />\r\n        </div>\r\n\r\n        {/* city / postcode */}\r\n        <div className=\"mt-4 grid gap-4 md:grid-cols-2\">\r\n          <div>\r\n            <label className=\"mb-1 block text-sm\">City</label>\r\n            <input\r\n              name=\"city\"\r\n              value={form.city}\r\n              onChange={change}\r\n              className=\"w-full rounded border px-3 py-2\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"mb-1 block text-sm\">Postcode</label>\r\n            <input\r\n              name=\"postcode\"\r\n              value={form.postcode}\r\n              onChange={change}\r\n              className=\"w-full rounded border px-3 py-2\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* country / state selects */}\r\n        <div className=\"mt-4 grid gap-4 md:grid-cols-2\">\r\n          <div>\r\n            <label className=\"mb-1 block text-sm\">Country</label>\r\n            <Select\r\n              options={countries}\r\n              value={countries.find((o) => o.value === form.country) || null}\r\n              onChange={(o) => setForm({ ...form, country: o?.value || \"\" })}\r\n              placeholder=\"Select country\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"mb-1 block text-sm\">State</label>\r\n            <Select\r\n              options={states}\r\n              value={states.find((o) => o.value === form.state) || null}\r\n              onChange={(o) => setForm({ ...form, state: o?.value || \"\" })}\r\n              placeholder=\"Select state\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* GST / TAX numbers */}\r\n        <div className=\"mt-4 grid gap-4 md:grid-cols-2\">\r\n          <div>\r\n            <label className=\"mb-1 block text-sm\">GST Number</label>\r\n            <input\r\n              name=\"gstNumber\"\r\n              value={form.gstNumber}\r\n              onChange={change}\r\n              className=\"w-full rounded border px-3 py-2\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"mb-1 block text-sm\">Tax Number</label>\r\n            <input\r\n              name=\"taxNumber\"\r\n              value={form.taxNumber}\r\n              onChange={change}\r\n              className=\"w-full rounded border px-3 py-2\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* money fields */}\r\n        <div className=\"mt-4 grid gap-4 md:grid-cols-2\">\r\n          <div>\r\n            <label className=\"mb-1 block text-sm\">Opening Balance</label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              name=\"openingBalance\"\r\n              value={form.openingBalance}\r\n              onChange={change}\r\n              className=\"w-full rounded border px-3 py-2\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"mb-1 block text-sm\">Previous Balance</label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              name=\"previousBalance\"\r\n              value={form.previousBalance}\r\n              onChange={change}\r\n              className=\"w-full rounded border px-3 py-2\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-4 grid gap-4 md:grid-cols-2\">\r\n          <div>\r\n            <label className=\"mb-1 block text-sm\">Purchase Due</label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              name=\"purchaseDue\"\r\n              value={form.purchaseDue}\r\n              onChange={change}\r\n              className=\"w-full rounded border px-3 py-2\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"mb-1 block text-sm\">Purchase Return Due</label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              name=\"purchaseReturnDue\"\r\n              value={form.purchaseReturnDue}\r\n              onChange={change}\r\n              className=\"w-full rounded border px-3 py-2\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* status */}\r\n        <div className=\"mt-4\">\r\n          <label className=\"mb-1 block text-sm\">Status</label>\r\n          <select\r\n            name=\"status\"\r\n            value={form.status}\r\n            onChange={change}\r\n            className=\"w-full rounded border px-3 py-2\"\r\n          >\r\n            <option value=\"Active\">Active</option>\r\n            <option value=\"Inactive\">Inactive</option>\r\n          </select>\r\n        </div>\r\n\r\n        {/* error msg */}\r\n        {errorMsg && (\r\n          <p className=\"mt-4 rounded border border-red-300 bg-red-100 px-3 py-2 text-sm text-red-700\">\r\n            {errorMsg}\r\n          </p>\r\n        )}\r\n\r\n        {/* buttons */}\r\n        <div className=\"mt-6 flex justify-end gap-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            className=\"rounded bg-gray-200 px-4 py-2 text-gray-700 hover:bg-gray-300\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            disabled={saving}\r\n            className=\"rounded bg-emerald-600 px-6 py-2 text-white hover:bg-emerald-700 disabled:opacity-60\"\r\n          >\r\n            {saving ? \"Saving…\" : \"Save\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\n\nexport default function RawLotModal({ open, onClose, onSave, init }) {\n  const [bulkQty,  setBulkQty]  = useState(\"\");\n  const [bulkUnit, setBulkUnit] = useState(\"kg\");\n  const [bulkCost, setBulkCost] = useState(\"\");\n\n  useEffect(() => {\n    if (!init) return;\n    setBulkQty(String(init.bulkQty ?? \"\"));\n    setBulkUnit(init.bulkUnit ?? \"kg\");\n    setBulkCost(String(init.bulkCost ?? \"\"));\n  }, [init]);\n\n  if (!open) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\n      <div className=\"bg-white w-80 rounded-md shadow p-6\">\n        <h2 className=\"text-lg font-semibold mb-4\">\n          {init ? \"Edit Raw Material\" : \"Add Raw Material\"}\n        </h2>\n\n        <label className=\"block text-sm mb-1\">Bulk Quantity</label>\n        <input\n          type=\"number\"\n          min=\"0.01\"\n          step=\"0.01\"\n          value={bulkQty}\n          onChange={(e) => setBulkQty(e.target.value)}\n          className=\"w-full border px-2 py-1 mb-3\"\n        />\n\n        <label className=\"block text-sm mb-1\">Unit (kg/ltr…)</label>\n        <input\n          type=\"text\"\n          value={bulkUnit}\n          onChange={(e) => setBulkUnit(e.target.value)}\n          className=\"w-full border px-2 py-1 mb-3\"\n        />\n\n        <label className=\"block text-sm mb-1\">Total Cost (₹)</label>\n        <input\n          type=\"number\"\n          min=\"0.01\"\n          step=\"0.01\"\n          value={bulkCost}\n          onChange={(e) => setBulkCost(e.target.value)}\n          className=\"w-full border px-2 py-1 mb-6\"\n        />\n\n        <div className=\"flex justify-end gap-3\">\n          <button onClick={onClose} className=\"px-4 py-1 bg-gray-300 rounded\">\n            Cancel\n          </button>\n          <button\n            onClick={() =>\n              onSave({\n                bulkQty : Number(bulkQty),\n                bulkUnit: bulkUnit.trim() || \"kg\",\n                bulkCost: Number(bulkCost),\n              })\n            }\n            disabled={!bulkQty || !bulkCost}\n            className=\"px-4 py-1 bg-green-600 text-white rounded disabled:opacity-40\"\n          >\n            Save\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport { BiChevronRight } from \"react-icons/bi\";\r\nimport { FaTachometerAlt, FaBarcode } from \"react-icons/fa\";\r\nimport Navbar from \"../Navbar.jsx\";\r\nimport Sidebar from \"../Sidebar.jsx\";\r\nimport { useNavigate, Link, useSearchParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Select from 'react-select';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCamera } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { BrowserMultiFormatReader } from \"@zxing/browser\";\r\nimport LoadingScreen from '../../Loading.jsx';\r\nimport dayjs from 'dayjs';\r\nimport SupplierPopup from \"./SupplierPopup\";\r\nimport RawLotModal from \"./RawLotModal\";\r\n\r\n\r\n// Generate reference number\r\nconst generateReferenceNo = (lastReferenceNo) => {\r\n  const currentYear = new Date().getFullYear();\r\n  if (!lastReferenceNo || typeof lastReferenceNo !== 'string') {\r\n    return `PO/${currentYear}/01`;\r\n  }\r\n  const parts = lastReferenceNo.split(\"/\");\r\n  if (parts.length !== 3 || parts[0] !== \"PO\" || !/^\\d{4}$/.test(parts[1]) || isNaN(parseInt(parts[2]))) {\r\n    return `PO/${currentYear}/01`;\r\n  }\r\n  const lastNumber = parseInt(parts[2], 10);\r\n  return `PO/${parts[1]}/${String(lastNumber + 1).padStart(2, \"0\")}`;\r\n};\r\n\r\n// Handle item field changes\r\nconst handleItemFieldChange = (index, field, value, formData, setFormData, operation = null) => {\r\n  if ((field === 'mrp' || field === 'purchasePrice' || field === 'salesPrice') && value === '') {\r\n    setFormData(prev => {\r\n      const items = [...prev.items];\r\n      items[index] = { ...items[index], [field]: '' };\r\n      return { ...prev, items };\r\n    });\r\n    return;  // skip the rest of the logic\r\n  }\r\n  const currentMRP = formData.items[index]?.mrp || 0;\r\n  const currentUnitCost = formData.items[index]?.purchasePrice  || 0;\r\n  let newValue = value;\r\n\r\n  if (field === 'quantity' && operation) {\r\n    // Handle plus/minus buttons\r\n    const currentQuantity = Number(formData.items[index]?.quantity) || 1;\r\n    newValue = operation === 'increment' ? currentQuantity + 1 : Math.max(1, currentQuantity - 1);\r\n  } else if (field === 'salesPrice' && Number(value) > currentUnitCost) {\r\n    alert(`Sorry, the Sales Price cannot exceed the Cost Price (${currentUnitCost}).`);\r\n    newValue = currentUnitCost;\r\n  } else if ((field === 'salesPrice' || field === 'purchasePrice') && Number(value) > currentMRP) {\r\n    alert(`Sorry, the ${field === 'salesPrice' ? 'Sales Price' : 'Cost Price'} cannot exceed the MRP (${currentMRP}).`);\r\n    newValue = currentMRP;\r\n  } else {\r\n    newValue = field === 'expiryDate' ? value : Number(value) || 0;\r\n  }\r\n\r\n  setFormData((prev) => {\r\n    const updatedItems = [...prev.items];\r\n    updatedItems[index] = {\r\n      ...updatedItems[index],\r\n      [field]: field === 'expiryDate' ? newValue : Number(newValue) || 0,\r\n      totalAmount:\r\n        field === 'quantity' || field === 'purchasePrice' || field === 'discount'\r\n          ? (Number(field === 'quantity' ? newValue : updatedItems[index].quantity) || 1) *\r\n            (Number(field === 'purchasePrice' ? newValue : updatedItems[index].purchasePrice) || 0) -\r\n            (Number(field === 'discount' ? newValue : updatedItems[index].discount) || 0)\r\n          : updatedItems[index].totalAmount,\r\n    };\r\n    return {\r\n      ...prev,\r\n      items: updatedItems,\r\n    };\r\n  });\r\n};\r\n// Utility to escape regex special characters\r\nconst esc = (s) => s.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\r\nconst sndNew    = new Audio(\"/sounds/beep-new.mp3\");\r\nconst sndRepeat = new Audio(\"/sounds/beep-repeat.mp3\");\r\nfunction playBeep(snd) {\r\n  try {\r\n    snd.pause();        // restart if it was still playing\r\n    snd.currentTime = 0;\r\n    snd.play();\r\n  } catch { /* ignored – autoplay policies, etc. */ }\r\n}\r\n\r\nconst QuotationSummary = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const id = searchParams.get(\"id\");\r\n  const [otherCharges, setOtherCharges] = useState(0);\r\n  const [discount, setDiscount] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [discountType, setDiscountType] = useState('amount');\r\n  const [subtotal, setSubtotal] = useState(0);\r\n  const [grandtotal, setGrandTotal] = useState(0);\r\n  const [isSidebarOpen, setSidebarOpen] = useState(true);\r\n  const [result, setResult] = useState(\"\");\r\n  const [allItems, setAllItems] = useState([]);\r\n  const [filteredItems, setFilteredItems] = useState([]);\r\n  const [discountMoney, setDiscountMoney] = useState(0);\r\n  const [scanning, setScanning] = useState(false);\r\n  const [showSupplierPop, setShowSupplierPop] = useState(false);\r\n  const prevWarehouse = useRef(null);\r\n  const [defaultWarehouse, setDefaultWarehouse] = useState(null);\r\n  const token = localStorage.getItem(\"token\") || \"\";\r\nconst authHeader = { headers: { Authorization: `Bearer ${token}` } };\r\nconst [ownerMap, setOwnerMap] = useState({});  \r\nconst [rawModal, setRawModal] = useState({ open: false, rowIdx: null });\r\n\r\nuseEffect(() => {\r\n  (async () => {\r\n    try {\r\n      const { data } = await axios.get(\"/api/items\", authHeader); // ⚠ no ?warehouse\r\n      const map = {};\r\n      (data.data || []).forEach(r => {\r\n        const key = r.parentItemId || r._id;      // variants share parent owner\r\n        if (!map[key]) map[key] = r.warehouse?._id;\r\n      });\r\n      setOwnerMap(map);\r\n    } catch (e) {\r\n      console.error(\"Owner-map fetch failed:\", e);\r\n    }\r\n  })();\r\n}, []);          // ← empty dep-array → runs once\r\n\r\n\r\n  const [options, setOptions] = useState({\r\n    warehouse: [],\r\n    items: [],\r\n    suppliers: [],\r\n    accounts: [],\r\n    paymentType: [],\r\n    terminals: [],\r\n  });\r\n\r\n  const [formData, setFormData] = useState({\r\n    discountOnAll: 0,\r\n    grandTotal: 0,\r\n    items: [],\r\n    note: \"\",\r\n    otherCharges: 0,\r\n    payments: [{\r\n      account: null,\r\n      amount: 0,\r\n      paymentNote: \"\",\r\n      paymentType: null,\r\n      terminal: null,\r\n    }],\r\n    purchaseCode: \"\",\r\n    purchaseDate: new Date().toLocaleDateString('en-CA'),\r\n    referenceNo: \"\",\r\n    supplier: null,\r\n    warehouse: null,\r\n    createdBy: \"\",\r\n    createdByModel: \"\",\r\n  });\r\n\r\n  const navigate = useNavigate();\r\n  const videoRef = useRef(null);\r\n  const codeReaderRef = useRef(null);\r\n\r\n  async function getLiveBalance(accountId) {\r\n  // 1) figure out warehouse for this account\r\n  const {\r\n    data: { warehouseId }\r\n  } = await axios.get(\r\n    `/api/by-cash-account/${accountId}`,\r\n    authHeader\r\n  );\r\n\r\n  // 2) fetch the cash‐summary with the same header\r\n  const { data } = await axios.get(\r\n    \"/api/cash-summary\",\r\n    {\r\n      ...authHeader,\r\n      params: { warehouseId }\r\n    }\r\n  );\r\n  return data.liveBalance;\r\n}\r\n\r\nfunction saveRawData({ bulkQty, bulkUnit, bulkCost }) {\r\n  setFormData((prev) => {\r\n    const items = [...prev.items];\r\n    const it    = items[rawModal.rowIdx];\r\n\r\n   items[rawModal.rowIdx] = {\r\n  ...it,\r\n\r\n  \r\n  isRaw    : true,\r\n  bulkQty,\r\n  bulkUnit,\r\n  bulkCost,        \r\n\r\n  \r\n  quantity      : bulkQty,                     \r\n  mrp           : +(bulkCost / bulkQty).toFixed(4),  \r\n  purchasePrice : +(bulkCost / bulkQty).toFixed(4),  \r\n  discount      : 0,\r\n  totalAmount   : bulkCost,                    \r\n  salesPrice    : 0\r\n};\r\n    return { ...prev, items };\r\n  });\r\n  setRawModal({ open: false, rowIdx: null });\r\n}\r\n\r\n\r\n\r\n  useEffect(() => {\r\n  // ‼️ Skip the very first render\r\n  if (!prevWarehouse.current) {\r\n    prevWarehouse.current = formData.warehouse;\r\n    return;\r\n  }\r\n\r\n  // Did the warehouse actually change?\r\n  if (prevWarehouse.current !== formData.warehouse) {\r\n    // 1. Stop scanner if running\r\n    const reader = codeReaderRef.current;\r\n    if (reader?.stopStreams) reader.stopStreams();\r\n    if (videoRef.current?.srcObject) {\r\n      videoRef.current.srcObject.getTracks().forEach(t => t.stop());\r\n    }\r\n    setScanning(false);\r\n\r\n    // 2. Clear cart\r\n    setOptions(o => ({ ...o, items: [] }));\r\n    setFormData(fd => ({ ...fd, items: [] }));\r\n  }\r\n\r\n  // remember for next tick\r\n  prevWarehouse.current = formData.warehouse;\r\n}, [formData.warehouse]);\r\nuseEffect(() => {\r\n  (async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) {\r\n        navigate(\"/\");            // or \"/login\" – whatever you use\r\n        return;\r\n      }\r\n\r\n      // Pick the right endpoint for the current role\r\n      const role = localStorage.getItem(\"role\");\r\n      const url =\r\n        role === \"admin\"\r\n          ? \"/auth/profile\"\r\n          : \"/admiaddinguser/profile\";  // 🔁 change if your route differs\r\n\r\n      const { data } = await axios.get(url, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      \r\n      const dw =\r\n        typeof data.defaultWarehouse === \"string\"\r\n          ? data.defaultWarehouse\r\n          : data.defaultWarehouse?._id;\r\n\r\n      setDefaultWarehouse(dw || null);\r\n    } catch (err) {\r\n      console.error(\"Profile fetch failed:\", err);\r\n    }\r\n  })();\r\n}, [navigate]);\r\n\r\n\r\n // Fetch last purchase for reference number\r\nuseEffect(() => {\r\n  if (id) return;                 // editing → keep existing ref. no.\r\n  const fetchLastPurchase = async () => {\r\n    try {\r\n      const { data } = await axios.get(\"/api/purchases\", {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n      });\r\n\r\n      const purchases = data.data || [];\r\n\r\n      /* 🔽  NEW filter: skip returns *and* BULK uploads */\r\n      const normalPurchases = purchases.filter(\r\n        p =>\r\n          !p.isReturn &&                // ignore returns\r\n          !(p.referenceNo || \"\").startsWith(\"BULK/\")   // ignore BULK/… refs\r\n      );\r\n\r\n      const lastRef = normalPurchases.length\r\n        ? normalPurchases[normalPurchases.length - 1].referenceNo\r\n        : null;\r\n\r\n      const newRef  = generateReferenceNo(lastRef);\r\n      setFormData(prev => ({ ...prev, referenceNo: newRef }));\r\n    } catch (err) {\r\n      console.error(\"Error fetching last purchase:\", err);\r\n    }\r\n  };\r\n  fetchLastPurchase();\r\n}, [id]);\r\n\r\n\r\n  // Set sidebar state based on screen size\r\n  useEffect(() => {\r\n    if (window.innerWidth < 768) {\r\n      setSidebarOpen(false);\r\n    }\r\n  }, []);\r\n\r\n  \r\n\r\n  // Fetch all items\r\n const fetchItems = async () => {\r\n  setLoading(true);\r\n  try {\r\n    // 1. call the API\r\n    const response = await axios.get(\"/api/items\", {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n      params : { warehouse: formData.warehouse, includeZero: 1 }\r\n    });\r\n\r\n    // 2. response.data.data is the array the API returned\r\n    const raw = response.data.data || [];\r\n\r\n    // 3. flatten / reshape as before\r\n    const flatItems = raw.map(it => {\r\n      const isVar = Boolean(it.parentItemId);\r\n      return {\r\n        ...it,\r\n        parentId  : isVar ? it.parentItemId : it._id,\r\n        variantId : isVar ? it._id : null,\r\n        itemName  : isVar\r\n                   ? `${it.itemName} / ${it.variantName || \"Variant\"}`\r\n                   : it.itemName,\r\n        barcode   : it.barcode  || \"\",\r\n        barcodes  : it.barcodes || [],\r\n        itemCode  : it.itemCode || \"\"\r\n      };\r\n    });\r\n\r\n   setAllItems(flatItems);\r\n  } catch (err) {\r\n    alert(err.response?.data?.message || err.message);\r\n    setAllItems([]);\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n\r\n  useEffect(() => {\r\n    if (formData.warehouse) {\r\n      fetchItems();\r\n    } else {\r\n      setAllItems([]);\r\n    }\r\n  }, [formData.warehouse]);\r\n\r\n  // Fetch purchase data for editing\r\n  const fetchPurchase = async () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      console.log(\"No token found, redirecting...\");\r\n      navigate(\"/\");\r\n      return;\r\n    }\r\n    try {\r\n      const response = await axios.get(`/api/purchases/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      const purchaseData = response.data.data;\r\n      setFormData({\r\n        ...purchaseData,\r\n        warehouse: purchaseData.warehouse?._id || purchaseData.warehouse,\r\n        supplier: purchaseData.supplier?._id || purchaseData.supplier,\r\n        purchaseDate: purchaseData.purchaseDate ? dayjs(purchaseData.purchaseDate).format(\"YYYY-MM-DD\") : new Date().toLocaleDateString('en-CA'),\r\n        items: purchaseData.items.map(item => ({\r\n          item: item.item?._id || item.item,\r\n          variant: item.variant || null,\r\n          quantity: item.quantity || 1,\r\n          purchasePrice: item.purchasePrice || 0,\r\n          mrp: item.mrp || 0,\r\n          expiryDate: item.expiryDate || \"\",\r\n          discount: item.discount || 0,\r\n          salesPrice: item.salesPrice || 0,\r\n          totalAmount: item.totalAmount || (item.quantity * item.mrp - item.discount),\r\n        })),\r\n        payments: purchaseData.payments?.length > 0 ? purchaseData.payments.map(p => ({\r\n          account: p.account?._id || p.account,\r\n          amount: p.amount || 0,\r\n          paymentNote: p.paymentNote || \"\",\r\n          paymentType: p.paymentType?._id || p.paymentType,\r\n          terminal: p.terminal?._id || p.terminal,\r\n        })) : [{\r\n          account: null,\r\n          amount: 0,\r\n          paymentNote: \"\",\r\n          paymentType: null,\r\n          terminal: null,\r\n        }],\r\n      });\r\n      setOptions((prev) => ({\r\n        ...prev,\r\n        items: purchaseData.items.map(item => ({\r\n          ...item.item,\r\n          parentId: item.item?.parentItemId || item.item?._id,\r\n          variantId: item.variant || null,\r\n          itemName: item.item?.parentItemId ? `${item.item?.itemName} / ${item.item?.variantName || \"Variant\"}` : item.item?.itemName,\r\n        })),\r\n      }));\r\n      setGrandTotal(purchaseData.grandTotal || 0);\r\n      setSubtotal(purchaseData.subtotal || 0);\r\n      setDiscountMoney(purchaseData.discountOnAll || 0);\r\n      setDiscount(purchaseData.discountOnAll || 0);\r\n      setOtherCharges(purchaseData.otherCharges || 0);\r\n    } catch (error) {\r\n      alert(error.response?.data?.message || error.message);\r\n    }\r\n  };\r\n\r\n  // Fetch warehouses\r\n  const fetchWarehouses = async () => {\r\n  setLoading(true);\r\n  const token = localStorage.getItem(\"token\");\r\n  if (!token) {\r\n    console.log(\"No token found, redirecting...\");\r\n    navigate(\"/\");\r\n    return;\r\n  }\r\n  try {\r\n    const response = await axios.get(\"/api/warehouses\", {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    const allWh = response.data.data || [];\r\n    const activeWh = allWh\r\n      .filter(w => w.status === \"Active\")\r\n      .map(w => ({\r\n        label: w.warehouseName,\r\n        value: w._id,\r\n        cashAccount: w.cashAccount?._id || w.cashAccount,\r\n      }));\r\n    setOptions(prev => ({ ...prev, warehouse: activeWh }));\r\n    //if (!id && activeWh.length) {\r\n     // const restrictedWarehouse = allWh.find((w) => w.isRestricted && w.status === \"Active\");\r\n      //setFormData(prev => ({\r\n        //...prev,\r\n        //warehouse: restrictedWarehouse?._id || activeWh[0]?.value || null\r\n      //}));\r\n    //}\r\n  } catch (error) {\r\n    alert(error.response?.data?.message || error.message);\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\nuseEffect(() => {\r\n  if (id) return;                     // editing – keep whatever came from DB\r\n  if (!options.warehouse.length) return;   // wait for the list to load\r\n\r\n  if (defaultWarehouse) {\r\n    // ① user has a preferred warehouse\r\n    setFormData(prev => ({ ...prev, warehouse: defaultWarehouse }));\r\n  } else {\r\n    // ② fall back to restricted-then-first-active\r\n    const restricted = options.warehouse.find(\r\n      w => w.isRestricted && w.status === \"Active\"\r\n    ); // we only kept label/value above, so this will probably be undefined; if so, skip\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      warehouse:\r\n        restricted?.value || options.warehouse[0].value || null\r\n    }));\r\n  }\r\n}, [options.warehouse, defaultWarehouse, id]);\r\n\r\n  // Fetch suppliers\r\n  const fetchSuppliers = async () => {\r\n    setLoading(true);\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      console.log(\"No token found, redirecting...\");\r\n      navigate(\"/\");\r\n      return;\r\n    }\r\n    try {\r\n      const response = await axios.get(\"/api/suppliers\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      const newSuppliers = response.data.data\r\n        .filter((supplier) => supplier.supplierName)\r\n        .map((supplier) => ({\r\n          label: supplier.supplierName,\r\n          value: supplier._id,\r\n        }));\r\n      setOptions((prev) => ({ ...prev, suppliers: newSuppliers }));\r\n    } catch (error) {\r\n      alert(error.response?.data?.message || error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fetch accounts\r\n  const fetchAccount = async () => {\r\n    setLoading(true);\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      console.log(\"No token found, redirecting...\");\r\n      navigate(\"/\");\r\n      return;\r\n    }\r\n    try {\r\n      const response = await axios.get(\"/api/accounts\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      const newAccounts = response.data.data.map((account) => ({\r\n        label: account.accountNumber,\r\n        value: account._id,\r\n      }));\r\n      setOptions((prev) => ({ ...prev, accounts: newAccounts }));\r\n    } catch (error) {\r\n      alert(error.response?.data?.message || error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fetch payment types\r\n  const fetchPaymentType = async () => {\r\n    setLoading(true);\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      console.log(\"No token found, redirecting...\");\r\n      navigate(\"/\");\r\n      return;\r\n    }\r\n    try {\r\n      const response = await axios.get(\"/api/payment-types\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      const newPaymentType = response.data.data.map((type) => ({\r\n        label: type.paymentTypeName,\r\n        value: type._id,\r\n        name: type.paymentTypeName.toLowerCase(),\r\n      }));\r\n      setOptions((prev) => ({ ...prev, paymentType: newPaymentType }));\r\n    } catch (error) {\r\n      alert(error.response?.data?.message || error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fetch terminals\r\n  const fetchTerminals = async () => {\r\n    setLoading(true);\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      console.log(\"No token found, redirecting...\");\r\n      navigate(\"/\");\r\n      return;\r\n    }\r\n    try {\r\n      const response = await axios.get(\"/api/terminals\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      const newTerminals = response.data.data.map((terminal) => ({\r\n        label: terminal.tid,\r\n        value: terminal._id,\r\n        warehouse: terminal.warehouse?._id || terminal.warehouse,\r\n      }));\r\n      setOptions((prev) => ({ ...prev, terminals: newTerminals }));\r\n    } catch (error) {\r\n      alert(error.response?.data?.message || error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filter items by warehouse and search query\r\n  useEffect(() => {\r\n    const q = result.trim();\r\n    if (!q || !formData.warehouse) {\r\n      setFilteredItems([]);\r\n      return;\r\n    }\r\n    const rx = new RegExp(esc(q), \"i\");\r\n    setFilteredItems(\r\n      allItems\r\n        .filter((it) =>\r\n     rx.test(it.itemName) ||\r\n     rx.test(it.itemCode) ||\r\n     rx.test(it.barcodes?.join(\" \") || \"\")\r\n   )\r\n        .slice(0, 15)\r\n    );\r\n  }, [result, formData.warehouse, allItems]);\r\n\r\n  // Handle form field changes\r\n  const handleChange = (e) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.type === \"number\" ? Number(e.target.value) : e.target.value,\r\n    }));\r\n  };\r\n\r\n  // Handle payment field changes\r\n  const handlePayment = (e) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      payments: [{\r\n        ...prev.payments[0],\r\n        [e.target.name]: e.target.type === \"number\" ? Number(e.target.value) : e.target.value,\r\n      }],\r\n    }));\r\n  };\r\n\r\n  // Calculate totals\r\n  useEffect(() => {\r\n    const sub = (formData?.items || []).reduce((acc, item) => {\r\n      const itemTotal = (item.quantity || 0) * (item.purchasePrice || 0) - (item.discount || 0);\r\n      return acc + itemTotal;\r\n    }, 0);\r\n\r\n    let discountAmount = discount;\r\n    if (discountType === \"percent\") {\r\n      discountAmount = (sub * discount) / 100;\r\n    }\r\n\r\n    const gtotal = sub + parseFloat(otherCharges || 0) - discountAmount;\r\n    setSubtotal(sub);\r\n    setDiscountMoney(discountAmount);\r\n    setGrandTotal(gtotal > 0 ? gtotal : 0);\r\n\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      grandTotal: isNaN(gtotal) ? 0 : gtotal,\r\n      discountOnAll: discountAmount,\r\n    }));\r\n  }, [formData.items, discount, discountType, otherCharges]);\r\n   useEffect(() => {\r\n  setFormData(prev => ({\r\n    ...prev,\r\n    payments: [\r\n      {\r\n        ...prev.payments[0],\r\n        amount: grandtotal\r\n      }\r\n    ]\r\n  }));\r\n}, [grandtotal]);\r\n\r\n  // Fetch data on mount\r\n  useEffect(() => {\r\n    if (id) fetchPurchase();\r\n    fetchWarehouses();\r\n    fetchSuppliers();\r\n    fetchPaymentType();\r\n    fetchAccount();\r\n    fetchTerminals();\r\n  }, [id]);\r\n\r\n  // Handle item removal\r\n  const handleRemoveItem = (indexToRemove) => {\r\n    setOptions((prev) => ({\r\n      ...prev,\r\n      items: prev.items.filter((_, index) => index !== indexToRemove),\r\n    }));\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      items: prev.items.filter((_, index) => index !== indexToRemove),\r\n    }));\r\n  };\r\n\r\n  // Post or update purchase\r\n\r\n\r\n  const postData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.put(\r\n        `/api/purchases/${id}`,\r\n        formData,\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n      alert(\"Updated Successfully\");\r\n      navigate(\"/purchase-list\");\r\n    } catch (err) {\r\n      alert(`Unsuccessful: ${err.response?.data?.message || err.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const sendData = async () => {\r\n    setLoading(true);\r\n    if (!token) {\r\n      console.log(\"No token found, redirecting...\");\r\n      navigate(\"/\");\r\n      return;\r\n    }\r\n    console.log(\"Sending formData:\", JSON.stringify(formData, null, 2));\r\n    try {\r\n      const response = await axios.post(\"/api/purchases\", formData, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      alert(\"Created Successfully\");\r\n      navigate(\"/purchase-list\");\r\n    } catch (error) {\r\n      const errorMessage = error.response?.data?.message || error.message;\r\n      alert(`Unsuccessful: ${errorMessage}`);\r\n      console.error(\"Error creating purchase:\", errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Handle form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!formData.warehouse) {\r\n      alert(\"Please select a warehouse.\");\r\n      return;\r\n    }\r\n    if (!formData.supplier) {\r\n      alert(\"Please select a supplier.\");\r\n      return;\r\n    }\r\n    if (!formData.purchaseDate) {\r\n      alert(\"Please select a purchase date.\");\r\n      return;\r\n    }\r\n    if (formData.items.length === 0) {\r\n      alert(\"Please add at least one item.\");\r\n      return;\r\n    }\r\n    if (formData.grandTotal <= 0) {\r\n      alert(\"Grand total must be greater than zero.\");\r\n      return;\r\n    }\r\n    if (formData.payments[0].amount > 0 && !formData.payments[0].paymentType) {\r\n      alert(\"Please select a payment type.\");\r\n      return;\r\n    }\r\n\r\n     const payment = formData.payments[0];\r\n  if (payment.amount > 0 && payment.account) {\r\n    const balance = await getLiveBalance(payment.account);\r\n    if (payment.amount > balance) {\r\n      alert(`Insufficient funds. You only have ₹${balance.toFixed(2)} available.`);\r\n      return;  // abort submission\r\n    }\r\n  }\r\n    if (id) postData();\r\n    else sendData();\r\n  };\r\n\r\n  // Barcode scanner\r\n const startScanner = async () => {\r\n  if (!formData.warehouse) {\r\n    alert(\"Please select a warehouse to scan items.\");\r\n    return;\r\n  }\r\n  setResult(\"\");\r\n  setScanning(true);\r\n  setLoading(true);\r\n\r\n  // 1️⃣ Create reader\r\n  const codeReader = new BrowserMultiFormatReader();\r\n  codeReaderRef.current = codeReader;\r\n\r\n  try {\r\n    // 2️⃣ Pick your first video device\r\n    const devices = await codeReader.listVideoInputDevices();\r\n    if (!devices.length) throw new Error(\"No camera found\");\r\n    const deviceId = devices[0].deviceId;\r\n\r\n    // 3️⃣ Wait for exactly one successful decode, then resolve\r\n    const result = await codeReader.decodeOnceFromVideoDevice(\r\n      deviceId,\r\n      videoRef.current\r\n    );\r\n\r\n    // 4️⃣ Tear down the camera stream yourself\r\n    const stream = videoRef.current.srcObject;\r\n    if (stream) {\r\n      stream.getTracks().forEach((t) => t.stop());\r\n      videoRef.current.srcObject = null;\r\n    }\r\n\r\n    // 5️⃣ Handle the barcode text\r\n    const text = result.getText();\r\n    const hit = allItems.find(\r\n      (i) =>\r\n        i.warehouse?._id === formData.warehouse &&\r\n        (i.itemCode === text || i.barcodes?.includes(text))\r\n    );\r\n    if (hit) addItem(hit);\r\n    else alert(\"Scanned code not found in this warehouse.\");\r\n\r\n  } catch (e) {\r\n    console.error(\"Scanner error:\", e);\r\n    alert(\"Scanner failed: \" + e.message);\r\n  } finally {\r\n    setScanning(false);\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      const reader = codeReaderRef.current;\r\n      if (!reader) return;\r\n      if (typeof reader.stopStreams === \"function\") {\r\n        reader.stopStreams();\r\n      } else if (typeof reader.reset === \"function\") {\r\n        reader.reset();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Add item to purchase\r\n  // Add item to purchase\r\nconst addItem = (targetItem) => {\r\n  if (!targetItem) {\r\n    console.log(\"No item selected\");\r\n    return;\r\n  }\r\n\r\n  // Check if the item already exists in formData.items\r\n  const existingItemIndex = formData.items.findIndex(\r\n    (item) =>\r\n      item.item === targetItem.parentId &&\r\n      (item.variant || null) === (targetItem.variantId || null)\r\n  );\r\n\r\n  if (existingItemIndex >= 0) {\r\n    // Item exists, increment quantity\r\n    setFormData((prev) => {\r\n      const updatedItems = [...prev.items];\r\n      updatedItems[existingItemIndex] = {\r\n        ...updatedItems[existingItemIndex],\r\n        quantity: (updatedItems[existingItemIndex].quantity || 1) + 1,\r\n        totalAmount:\r\n          ((updatedItems[existingItemIndex].quantity || 1) + 1) *\r\n            (updatedItems[existingItemIndex].mrp || 0) -\r\n          (updatedItems[existingItemIndex].discount || 0),\r\n      };\r\n      return { ...prev, items: updatedItems };\r\n    });\r\n    playBeep(sndRepeat); \r\n  } else {\r\n    // Item doesn't exist, add new item\r\n    setOptions((prev) => ({\r\n      ...prev,\r\n      items: [\r\n        ...(prev.items || []),\r\n        {\r\n          ...targetItem,\r\n          parentId: targetItem.parentId,\r\n          variantId: targetItem.variantId,\r\n          itemName: targetItem.itemName,\r\n        },\r\n      ],\r\n    }));\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      items: [\r\n        ...(prev.items || []),\r\n        {\r\n          item: targetItem.parentId,\r\n          variant: targetItem.variantId || null,\r\n          quantity: 1,\r\n          purchasePrice: targetItem.purchasePrice || 0,\r\n          mrp: targetItem.mrp || 0,\r\n          expiryDate: targetItem.expiryDate || \"\",\r\n          discount:\r\n            targetItem.discountType?.toLowerCase() === \"percentage\"\r\n              ? (targetItem.discount * targetItem.mrp) / 100\r\n              : targetItem.discount || 0,\r\n          salesPrice: targetItem.salesPrice || 0,\r\ntotalAmount: 1 * (targetItem.purchasePrice || 0) - (targetItem.discount || 0),        },\r\n      ],\r\n    }));\r\n    playBeep(sndNew); \r\n  }\r\n  \r\n  setResult(\"\");\r\n};\r\n\r\n  // Handle manual item addition\r\n  const handleAddItem = () => {\r\n    const targetItem = filteredItems[0];\r\n    if (targetItem) addItem(targetItem);\r\n  };\r\n\r\n  // Handle select changes\r\n  const handleSelectChange = (selectedOption, name) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: selectedOption ? selectedOption.value : null,\r\n    }));\r\n  };\r\n\r\n  // Handle payment select changes\r\n  const handlePaymentSelect = (name) => (selectedOption) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      payments: [{\r\n        ...prev.payments[0],\r\n        [name]: selectedOption ? selectedOption.value : null,\r\n      }],\r\n    }));\r\n  };\r\n\r\n  // Derive cash accounts and terminals\r\n  const selectedWarehouse = options.warehouse.find(w => w.value === formData.warehouse);\r\n  const cashAccounts = selectedWarehouse && selectedWarehouse.cashAccount\r\n    ? options.accounts.filter(a => a.value === selectedWarehouse.cashAccount)\r\n    : [];\r\n  const paymentMode = options.paymentType.find(pt => pt.value === formData.payments[0]?.paymentType)?.name;\r\n  const isCash = paymentMode === \"cash\";\r\n  const isBank = paymentMode === \"bank\";\r\n\r\n  if (loading) return <LoadingScreen />;\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen\">\r\n      <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\r\n      <div className=\"flex\">\r\n        <div className=\"w-auto\">\r\n          <Sidebar isSidebarOpen={isSidebarOpen} />\r\n        </div>\r\n        <div className=\"overflow-x-auto flex flex-col p-2 md:p-2 min-h-screen w-full\">\r\n          <header className=\"flex flex-col items-center justify-between p-4 bg-gray-100 rounded-md shadow sm:flex-row\">\r\n            <div className=\"flex items-baseline gap-1 text-center sm:flex-row sm:text-left\">\r\n              <h1 className=\"text-lg font-semibold truncate sm:text-xl\">Purchase</h1>\r\n              <span className=\"text-xs text-gray-600 sm:text-sm\">Add/Update Purchase</span>\r\n            </div>\r\n            <nav className=\"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0\">\r\n              <Link to=\"/dashboard\" className=\"flex items-center text-gray-700 no-underline hover:text-cyan-600\">\r\n                <FaTachometerAlt className=\"mr-2 text-gray-500 hover:text-cyan-600\" /> Home\r\n              </Link>\r\n              <BiChevronRight className=\"mx-1 sm:mx-2\" />\r\n              <Link to=\"/purchase-list\" className=\"text-gray-700 no-underline hover:text-cyan-600\">Purchase List</Link>\r\n              <BiChevronRight className=\"mx-1 sm:mx-2\" />\r\n              <Link to=\"/purchase-new\" className=\"text-gray-700 no-underline hover:text-cyan-600\">New Purchase</Link>\r\n            </nav>\r\n          </header>\r\n          <form onSubmit={handleSubmit}>\r\n            <div className='p-2 mt-2 border-t-4 rounded-lg border-cyan-500'>\r\n              <div className=\"flex flex-col mb-2 sm:flex-row\">\r\n                <label className=\"block mt-2 mb-1 text-sm font-medium\">Warehouse <span className='text-red-500'>*</span></label>\r\n                <div className=\"flex items-center w-full mt-2 border rounded sm:mt-0 sm:ml-4 sm:w-64\">\r\n                  <Select\r\n                    className='w-full'\r\n                    options={options.warehouse}\r\n                    onChange={(selectedOption) => handleSelectChange(selectedOption, \"warehouse\")}\r\n                    value={options.warehouse.find(opt => opt.value === formData.warehouse) || null}\r\n                    placeholder=\"Select Warehouse\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"flex flex-col mb-4 sm:flex-row\">\r\n                <label className=\"block mt-2 mb-1 text-sm font-medium\">Supplier Name <span className='text-red-500'>*</span></label>\r\n                <div className=\"flex items-center w-full mt-2 border rounded sm:mt-0 sm:ml-4 sm:w-64\">\r\n                  <Select\r\n                    className=\"w-full\"\r\n                    options={options.suppliers}\r\n                    onChange={(o) => handleSelectChange(o, \"supplier\")}\r\n                    value={options.suppliers.find(opt => opt.value === formData.supplier) || null}\r\n                    placeholder=\"Select Supplier\"\r\n                  />\r\n                  <span\r\n                    onClick={() => setShowSupplierPop(true)}\r\n                    title=\"Add new supplier\"\r\n                    className=\"px-3 py-[6px] text-lg font-bold text-blue-600 border-l cursor-pointer hover:bg-gray-100\"\r\n                  >\r\n                    +\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex flex-col mb-2 sm:flex-row\">\r\n                <label className=\"block mt-2 mb-1 text-sm font-medium\">Reference No.</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"referenceNo\"\r\n                  value={formData.referenceNo}\r\n                  readOnly\r\n                  className=\"w-full px-3 py-2 mt-2 border rounded bg-gray-100 sm:w-64 sm:mt-0 sm:ml-7\"\r\n                  placeholder=\"Auto-generated\"\r\n                />\r\n              </div>\r\n              <div className=\"flex flex-col mb-2 sm:flex-row\">\r\n                <label className=\"block mt-2 mb-1 text-sm font-medium\">Purchase Date</label>\r\n                <input\r\n                  type=\"date\"\r\n                  name=\"purchaseDate\"\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-3 py-2 mt-2 border rounded sm:w-64 sm:mt-0 sm:ml-6\"\r\n                  required\r\n                  value={formData.purchaseDate ? dayjs(formData.purchaseDate).format(\"YYYY-MM-DD\") : \"\"}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"relative flex justify-center p-2 border-t-2 border-gray-500 rounded-lg\">\r\n              <FaBarcode className=\"w-12 h-10 mt-2 mr-2 text-gray-500 hover:text-cyan-600\" />\r\n              <input\r\n  type=\"text\"\r\n  name=\"items\"\r\n  value={result}\r\n  onChange={e => {\r\n    const val = e.target.value;\r\n    setResult(val);\r\n\r\n    // if it’s an exact barcode match for this warehouse, auto-add:\r\n    const hit = allItems.find(i =>\r\n      i.warehouse?._id === formData.warehouse &&\r\n      i.barcodes?.includes(val)\r\n    );\r\n    if (hit) {\r\n      addItem(hit);\r\n      setResult(\"\");\r\n    }\r\n  }}\r\n  onKeyDown={e => {                  // ⬅️ new handler\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();            // stop form submit\r\n      //handleAddItem();               // add the item only once\r\n    }\r\n  }}\r\n  placeholder=\"Item name/Barcode/Item code\"\r\n  className=\"w-full h-10 p-2 mt-2 border sm:w-96\"\r\n  disabled={!formData.warehouse}\r\n/>\r\n\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleAddItem}\r\n                disabled={!result || !formData.warehouse}\r\n                className={`ml-2 px-4 py-2 text-white ${result && formData.warehouse ? 'bg-green-600 hover:bg-green-700' : 'bg-gray-400 cursor-not-allowed'}`}\r\n              >\r\n                Add\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={startScanner}\r\n                disabled={!formData.warehouse}\r\n                className={`ml-2 p-2 rounded-full ${formData.warehouse ? 'bg-blue-500 hover:bg-blue-600 text-white' : 'bg-gray-400 text-gray-600 cursor-not-allowed'}`}\r\n              >\r\n                <FontAwesomeIcon icon={faCamera} className=\"w-5 h-5\" />\r\n              </button>\r\n              {!formData.warehouse && (\r\n                <p className=\"mt-2 text-sm text-red-500\">Please select a warehouse to add items.</p>\r\n              )}\r\n              {scanning && (\r\n                <div className=\"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black bg-opacity-70\">\r\n                  <div className=\"w-72 h-72 border-4 border-white rounded-lg overflow-hidden\">\r\n                    <video\r\n                      ref={videoRef}\r\n                      className=\"object-cover w-full h-full\"\r\n                      autoPlay\r\n                      muted\r\n                      playsInline\r\n                    />\r\n                  </div>\r\n                  <button\r\n                    onClick={() => {\r\n                      const reader = codeReaderRef.current;\r\n                      if (reader?.stopStreams) reader.stopStreams();\r\n                      setScanning(false);\r\n                    }}\r\n                    className=\"px-4 py-2 mt-6 text-white bg-red-600 rounded hover:bg-red-700\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              )}\r\n              {result && filteredItems.length > 0 && (\r\n                <div className=\"absolute z-50 w-full bg-white border rounded-lg shadow-lg top-20 sm:w-96 max-h-60 overflow-y-auto\">\r\n                  <ul>\r\n                    {filteredItems.map((list) => (\r\n                      <li\r\n                        key={list._id}\r\n                        onClick={() => addItem(list)}\r\n                        className=\"p-2 cursor-pointer hover:bg-gray-100\"\r\n                      >\r\n                        <strong>{list.itemCode}</strong> - {list.itemName}\r\n                        {list.barcodes?.length > 0 && (\r\n                          <span className=\"text-gray-500\"> ({list.barcodes[0]})</span>\r\n                        )}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n              {result && filteredItems.length === 0 && (\r\n                <p className=\"mt-2 text-sm text-gray-500\">No items found for the selected warehouse.</p>\r\n              )}\r\n            </div>\r\n            <div className=\"mt-4 overflow-x-auto border-b-2 border-gray-500 rounded-lg max-h-96\">\r\n  <table className=\"w-full min-w-[1200px] border border-gray-300 text-sm\">\r\n    <thead>\r\n      <tr className=\"text-center text-white bg-sky-600\">\r\n        <th className=\"p-3 text-base font-semibold border\">Item Name</th>\r\n        <th className=\"p-3 text-base font-semibold border\">Quantity</th>\r\n        <th className=\"p-3 text-base font-semibold border\">MRP</th>\r\n        <th className=\"p-3 text-base font-semibold border\">Expiry Date</th>\r\n        <th className=\"p-3 text-base font-semibold border\">Purchas Price</th>\r\n        <th className=\"p-3 text-base font-semibold border\">Discount (₹)</th>\r\n        <th className=\"p-3 text-base font-semibold border\">Sales Price</th>\r\n        <th className=\"p-3 text-base font-semibold border\">Total Amount</th>\r\n        <th className=\"p-3 text-base font-semibold border\">Action</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      {options.items.length === 0 ? (\r\n        <tr>\r\n          <td colSpan=\"9\" className=\"p-4 text-center border text-base\">No items added</td>\r\n        </tr>\r\n      ) : (\r\n        options.items.map((item, index) => (\r\n          <tr key={index} className=\"text-center\">\r\n            <td className=\"p-3 border text-base\">{item.itemName || 'N/A'}</td>\r\n            <td className=\"p-3 border\">\r\n              <div className=\"flex items-center justify-center gap-2\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => handleItemFieldChange(index, 'quantity', null, formData, setFormData, 'decrement')}\r\n                  className=\"w-8 h-8 bg-gray-200 rounded hover:bg-gray-300 text-lg\"\r\n                >\r\n                  -\r\n                </button>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={formData.items[index]?.quantity || 1}\r\n                  onChange={(e) => handleItemFieldChange(index, 'quantity', e.target.value, formData, setFormData)}\r\n                  className=\"w-24 px-2 py-1 border rounded text-center text-base\"\r\n                  style={{ MozAppearance: 'textfield' }}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => handleItemFieldChange(index, 'quantity', null, formData, setFormData, 'increment')}\r\n                  className=\"w-8 h-8 bg-gray-200 rounded hover:bg-gray-300 text-lg\"\r\n                >\r\n                  +\r\n                </button>\r\n              </div>\r\n            </td>\r\n            <td className=\"p-3 border\">\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                step=\"any\" \r\n                value={formData.items[index]?.mrp    ?? ''}  \r\n                onChange={(e) => handleItemFieldChange(index, 'mrp', e.target.value, formData, setFormData)}\r\n                className=\"w-24 px-2 py-1 border rounded text-center text-base\"\r\n              />\r\n            </td>\r\n            <td className=\"p-3 border\">\r\n              <input\r\n                type=\"date\"\r\n                value={formData.items[index]?.expiryDate ? dayjs(formData.items[index].expiryDate).format('YYYY-MM-DD') : ''}\r\n                onChange={(e) => handleItemFieldChange(index, 'expiryDate', e.target.value, formData, setFormData)}\r\n                className=\"w-32 px-2 py-1 border rounded text-base\"\r\n              />\r\n            </td>\r\n            <td className=\"p-3 border\">\r\n  <input\r\n    type=\"number\"\r\n    min=\"0\"\r\n    step=\"any\" \r\n    value={formData.items[index]?.purchasePrice ?? ''}\r\n    onChange={e =>\r\n      handleItemFieldChange(\r\n        index,\r\n        'purchasePrice',      //  ←  not 'unitCost'\r\n        e.target.value,\r\n        formData,\r\n        setFormData\r\n      )\r\n    }\r\n    className=\"w-24 px-2 py-1 border rounded text-center text-base\"\r\n  />\r\n</td>\r\n\r\n            <td className=\"p-3 border\">\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                value={formData.items[index]?.discount || 0}\r\n                onChange={(e) => handleItemFieldChange(index, 'discount', e.target.value, formData, setFormData)}\r\n                className=\"w-24 px-2 py-1 border rounded text-center text-base\"\r\n              />\r\n            </td>\r\n            <td className=\"p-3 border\">\r\n              <input type=\"number\" step=\"1\"\r\n                min=\"0\"\r\n                value={formData.items[index]?.salesPrice   ?? ''}\r\n                onChange={(e) => handleItemFieldChange(index, 'salesPrice', e.target.value, formData, setFormData)}\r\n                className=\"w-24 px-2 py-1 border rounded text-center\"\r\n              />\r\n            </td>\r\n            <td className=\"p-3 border text-base\">\r\n             {(formData.items[index]?.quantity || 1) * (formData.items[index]?.purchasePrice || 0) - (formData.items[index]?.discount || 0)}\r\n            </td>\r\n            <td className=\"p-3 border\">\r\n  <div className=\"flex flex-col gap-1\">\r\n    <button\r\n      type=\"button\"\r\n      className=\"text-blue-600 hover:text-blue-800 font-medium\"\r\n      onClick={() => handleRemoveItem(index)}\r\n    >\r\n      Remove\r\n    </button>\r\n\r\n    <button\r\n      type=\"button\"\r\n      className={`text-sm ${\r\n        formData.items[index]?.isRaw\r\n          ? \"text-yellow-700 font-semibold\"\r\n          : \"text-gray-600\"\r\n      } hover:text-yellow-800`}\r\n      onClick={() => setRawModal({ open: true, rowIdx: index })}\r\n    >\r\n      {formData.items[index]?.isRaw ? \"Edit Raw\" : \"Raw Material\"}\r\n    </button>\r\n  </div>\r\n</td>\r\n\r\n          </tr>\r\n        ))\r\n      )}\r\n    </tbody>\r\n  </table>\r\n</div>\r\n            <div className='flex flex-col sm:flex-row'>\r\n              <div className='mb-2'>\r\n                <div className=\"flex gap-5 mt-5 mb-4\">\r\n                  <label className=\"block text-sm font-medium\">Total Quantities</label>\r\n                  <p className=\"text-green-600\">{formData.items.reduce((acc, item) => acc + (item.quantity || 0), 0)}</p>\r\n                </div>\r\n                <div className=\"flex gap-5 mb-4\">\r\n                  <label className=\"block text-sm font-medium\">Other Charges</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min='0'\r\n                    name=\"otherCharges\"\r\n                    value={formData.otherCharges}\r\n                    onChange={(e) => { handleChange(e); setOtherCharges(e.target.value); }}\r\n                    className=\"w-full px-3 py-2 ml-2 border rounded sm:w-64\"\r\n                    placeholder=\"Enter other charges\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex gap-5 mb-4\">\r\n                  <label className=\"block text-sm font-medium\">Discount on All</label>\r\n                  <div className=\"flex gap-1\">\r\n                    <input\r\n                      type=\"number\"\r\n                      min='0'\r\n                      name=\"discountOnAll\"\r\n                      value={discount}\r\n                      onChange={(e) => { handleChange(e); setDiscount(e.target.value); }}\r\n                      className=\"w-full px-2 py-2 border rounded sm:w-32\"\r\n                      placeholder=\"Enter discount\"\r\n                    />\r\n                    <select\r\n                      value={discountType}\r\n                      onChange={(e) => setDiscountType(e.target.value)}\r\n                      className=\"w-32 px-2 border rounded\"\r\n                    >\r\n                      <option value=\"percent\">Per%</option>\r\n                      <option value=\"amount\">Amount</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-20 mt-2 mb-2\">\r\n                  <label className=\"block text-sm font-medium\">Note</label>\r\n                  <textarea\r\n                    value={formData.note}\r\n                    name=\"note\"\r\n                    onChange={handleChange}\r\n                    className=\"w-full h-16 px-3 py-2 border rounded sm:w-64 ml-9\"\r\n                    rows=\"3\"\r\n                    placeholder=\"Add a note\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"pt-4 mt-4 ml-0 border-t sm:ml-40 sm:w-1/2\">\r\n                <div className=\"flex gap-16 font-bold\">\r\n                  <span>Subtotal</span>\r\n                  <span>₹ {subtotal.toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex gap-4 font-bold\">\r\n                  <span>Other Charges</span>\r\n                  <span>₹ {parseFloat(formData.otherCharges || 0).toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex gap-3 font-bold\">\r\n                  <span>Discount on All</span>\r\n                  <span>₹ {parseFloat(discountMoney || 0).toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex gap-5 font-bold\">\r\n                  <span>Grand Total</span>\r\n                  <span>₹ {grandtotal.toFixed(2)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-6\">\r\n              <h2 className=\"mb-4 text-base font-semibold text-cyan-500\">Previous Payments Information :</h2>\r\n              <div className=\"mb-6 overflow-x-auto\">\r\n                <table className=\"min-w-full bg-white border border-gray-300\">\r\n                  <thead className=\"bg-gray-200\">\r\n                    <tr>\r\n                      <th className=\"px-2 py-2 border\">#</th>\r\n                      <th className=\"px-2 py-2 border\">Date</th>\r\n                      <th className=\"px-2 py-2 border\">Payment Type</th>\r\n                      <th className=\"px-2 py-2 border\">Payment Note</th>\r\n                      <th className=\"px-2 py-2 border\">Action</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr>\r\n                      <td className=\"px-4 py-2 text-center border\" colSpan=\"5\">Payments Pending!!</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <h2 className=\"mb-4 text-base font-semibold text-cyan-500\">Make Payment :</h2>\r\n              <div className=\"p-2 mb-6 bg-white rounded shadow-md\">\r\n                <div className=\"flex items-center gap-4 mb-2\">\r\n                  <label className=\"block w-1/4 text-sm font-medium text-right\">Amount</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    min='0'\r\n                    step=\"0.01\"\r\n                    value={formData.payments[0]?.amount}\r\n                    name=\"amount\"\r\n                    onChange={handlePayment}\r\n                    className=\"w-1/2 px-3 py-2 border rounded\"\r\n                    placeholder=\"Enter Amount\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex items-center gap-4 mb-2\">\r\n                  <label className=\"block w-1/4 text-sm font-medium text-right\">Payment Type</label>\r\n                  <Select\r\n                    options={options.paymentType}\r\n                    className='w-1/2'\r\n                    onChange={(o) => {\r\n                      handlePaymentSelect(\"paymentType\")(o);\r\n                      setFormData((prev) => ({\r\n                        ...prev,\r\n                        payments: [{\r\n                          ...prev.payments[0],\r\n                          account: null,\r\n                          terminal: null,\r\n                        }],\r\n                      }));\r\n                    }}\r\n                    value={options.paymentType.find(opt => opt.value === (formData.payments[0]?.paymentType?._id || formData.payments[0]?.paymentType)) || null}\r\n                    placeholder=\"Select Payment Type\"\r\n                  />\r\n                </div>\r\n                {isCash && (\r\n                  <div className=\"flex items-center gap-4 mb-2\">\r\n                    <label className=\"block w-1/4 text-sm font-medium text-right\">Account</label>\r\n                    <Select\r\n                      options={cashAccounts}\r\n                      className='w-1/2'\r\n                      onChange={handlePaymentSelect(\"account\")}\r\n                      value={cashAccounts.find(opt => opt.value === formData.payments[0]?.account) || null}\r\n                      placeholder=\"Select Account\"\r\n                    />\r\n                  </div>\r\n                )}\r\n                {isBank && (\r\n                  <div className=\"flex items-center gap-4 mb-2\">\r\n                    <label className=\"block w-1/4 text-sm font-medium text-right\">Terminal</label>\r\n                    <Select\r\n                      options={options.terminals.filter(t => t.warehouse === formData.warehouse)}\r\n                      className='w-1/2'\r\n                      onChange={handlePaymentSelect(\"terminal\")}\r\n                      value={options.terminals.find(opt => opt.value === formData.payments[0]?.terminal) || null}\r\n                      placeholder=\"Select Terminal\"\r\n                    />\r\n                  </div>\r\n                )}\r\n                <div className=\"flex items-center gap-4 mb-2\">\r\n                  <label className=\"block w-1/4 text-sm font-medium text-right\">Payment Note</label>\r\n                  <textarea\r\n                    name=\"paymentNote\"\r\n                    value={formData.payments[0]?.paymentNote}\r\n                    onChange={handlePayment}\r\n                    className=\"w-1/2 py-2 border rounded px-3 h-14\"\r\n                    rows=\"3\"\r\n                    placeholder=\"Add a payment note\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"flex justify-center gap-4 mt-4\">\r\n                <button\r\n                  className=\"px-12 py-2 text-white transition duration-200 bg-green-600 hover:bg-green-700\"\r\n                  type='submit'\r\n                >\r\n                  {id ? \"Update\" : \"Save\"}\r\n                </button>\r\n                <button\r\n                  className=\"px-12 py-2 text-white transition duration-200 bg-orange-500 hover:bg-orange-600\"\r\n                  type='reset'\r\n                  onClick={() => navigate(\"/purchase-list\")}\r\n                >\r\n                  Close\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      <SupplierPopup\r\n        open={showSupplierPop}\r\n        onClose={() => setShowSupplierPop(false)}\r\n        onCreated={(sup) => {\r\n          const newOpt = { label: sup.supplierName, value: sup._id };\r\n          setOptions((opts) => ({ ...opts, suppliers: [...opts.suppliers, newOpt] }));\r\n          setFormData((fd) => ({ ...fd, supplier: sup._id }));\r\n        }}\r\n      />\r\n      <RawLotModal\r\n  open={rawModal.open}\r\n  init={rawModal.rowIdx != null ? formData.items[rawModal.rowIdx] : null}\r\n  onClose={() => setRawModal({ open: false, rowIdx: null })}\r\n  onSave={saveRawData}\r\n/>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationSummary;","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",c=\"month\",f=\"quarter\",h=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),s=n-i<0,u=e.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:f}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=\"$isDayjsObject\",S=function(t){return t instanceof _||!(!t||!t[p])},w=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},O=function(t,e){if(S(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},b=v;b.l=w,b.i=S,b.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!b.u(e)||e,f=b.p(t),l=function(t,e){var i=b.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return b.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(f){case h:return r?l(1,0):l(31,11);case c:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=b.p(t),f=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=f+\"Date\",n[d]=f+\"Date\",n[c]=f+\"Month\",n[h]=f+\"FullYear\",n[u]=f+\"Hours\",n[s]=f+\"Minutes\",n[i]=f+\"Seconds\",n[r]=f+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===c||o===h){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(r,f){var d,l=this;r=Number(r);var $=b.p(f),y=function(t){var e=O(l);return b.w(e.date(e.date()+Math.round(t*r)),l)};if($===c)return this.set(c,this.$M+r);if($===h)return this.set(h,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return b.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=b.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,c=n.months,f=n.meridiem,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},d=function(t){return b.s(s%12||12,t,\"0\")},$=f||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r};return r.replace(y,(function(t,r){return r||function(t){switch(t){case\"YY\":return String(e.$y).slice(-2);case\"YYYY\":return b.s(e.$y,4,\"0\");case\"M\":return a+1;case\"MM\":return b.s(a+1,2,\"0\");case\"MMM\":return h(n.monthsShort,a,c,3);case\"MMMM\":return h(c,a);case\"D\":return e.$D;case\"DD\":return b.s(e.$D,2,\"0\");case\"d\":return String(e.$W);case\"dd\":return h(n.weekdaysMin,e.$W,o,2);case\"ddd\":return h(n.weekdaysShort,e.$W,o,3);case\"dddd\":return o[e.$W];case\"H\":return String(s);case\"HH\":return b.s(s,2,\"0\");case\"h\":return d(1);case\"hh\":return d(2);case\"a\":return $(s,u,!0);case\"A\":return $(s,u,!1);case\"m\":return String(u);case\"mm\":return b.s(u,2,\"0\");case\"s\":return String(e.$s);case\"ss\":return b.s(e.$s,2,\"0\");case\"SSS\":return b.s(e.$ms,3,\"0\");case\"Z\":return i}return null}(t)||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=this,M=b.p(d),m=O(r),v=(m.utcOffset()-this.utcOffset())*e,g=this-m,D=function(){return b.m(y,m)};switch(M){case h:$=D()/12;break;case c:$=D();break;case f:$=D()/3;break;case o:$=(g-v)/6048e5;break;case a:$=(g-v)/864e5;break;case u:$=g/n;break;case s:$=g/e;break;case i:$=g/t;break;default:$=g}return l?$:b.a($)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),k=_.prototype;return O.prototype=k,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",c],[\"$y\",h],[\"$D\",d]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,_,O),t.$i=!0),O},O.locale=w,O.isDayjs=S,O.unix=function(t){return O(1e3*t)},O.en=D[g],O.Ls=D,O.p={},O}));","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };"],"names":["LoadingScreen","isSidebarOpen","setSidebarOpen","useState","_jsxs","className","children","_jsx","Navbar","Sidebar","toOpt","label","o","_o$_id","value","_id","SupplierPopup","_ref","open","onClose","onCreated","empty","supplierName","email","mobile","phone","address","city","state","country","postcode","gstNumber","taxNumber","openingBalance","previousBalance","purchaseDue","purchaseReturnDue","status","form","setForm","countries","setCountries","states","setStates","saving","setSaving","errorMsg","setErrorMsg","useEffect","hdr","headers","Authorization","localStorage","getItem","Promise","all","axios","get","then","_ref2","cRes","sRes","data","filter","c","map","s","catch","e","onEsc","key","window","addEventListener","removeEventListener","change","target","name","type","Number","onClick","stopPropagation","onSubmit","async","preventDefault","post","err","_err$response","_err$response$data","response","message","required","onChange","rows","Select","options","find","placeholder","min","disabled","RawLotModal","onSave","init","bulkQty","setBulkQty","bulkUnit","setBulkUnit","bulkCost","setBulkCost","_init$bulkQty","_init$bulkUnit","_init$bulkCost","String","step","trim","handleItemFieldChange","index","field","formData","setFormData","_formData$items$index","_formData$items$index2","operation","arguments","length","undefined","prev","items","currentMRP","mrp","currentUnitCost","purchasePrice","newValue","_formData$items$index3","currentQuantity","quantity","Math","max","alert","updatedItems","totalAmount","discount","sndNew","Audio","sndRepeat","playBeep","snd","pause","currentTime","play","QuotationSummary","_options$paymentType$","_formData$payments$2","_formData$payments$7","searchParams","useSearchParams","id","otherCharges","setOtherCharges","setDiscount","loading","setLoading","discountType","setDiscountType","subtotal","setSubtotal","grandtotal","setGrandTotal","result","setResult","allItems","setAllItems","filteredItems","setFilteredItems","discountMoney","setDiscountMoney","scanning","setScanning","showSupplierPop","setShowSupplierPop","prevWarehouse","useRef","defaultWarehouse","setDefaultWarehouse","token","authHeader","ownerMap","setOwnerMap","rawModal","setRawModal","rowIdx","forEach","r","_r$warehouse","parentItemId","warehouse","console","error","setOptions","suppliers","accounts","paymentType","terminals","discountOnAll","grandTotal","note","payments","account","amount","paymentNote","terminal","purchaseCode","purchaseDate","Date","toLocaleDateString","referenceNo","supplier","createdBy","createdByModel","navigate","useNavigate","videoRef","codeReaderRef","current","_videoRef$current","reader","stopStreams","srcObject","getTracks","t","stop","fd","_data$defaultWarehous","url","dw","normalPurchases","p","isReturn","startsWith","newRef","lastReferenceNo","currentYear","getFullYear","parts","split","test","isNaN","parseInt","lastNumber","padStart","generateReferenceNo","fetchLastPurchase","innerWidth","flatItems","params","includeZero","it","isVar","Boolean","parentId","variantId","itemName","variantName","barcode","barcodes","itemCode","fetchItems","restricted","w","isRestricted","q","rx","RegExp","replace","_it$barcodes","join","slice","handleChange","handlePayment","sub","reduce","acc","item","discountAmount","gtotal","parseFloat","log","_purchaseData$warehou","_purchaseData$supplie","_purchaseData$payment","purchaseData","dayjs","format","_item$item","variant","expiryDate","salesPrice","_p$account","_p$paymentType","_p$terminal","_item$item2","_item$item3","_item$item4","_item$item5","_item$item6","_item$item7","_error$response","_error$response$data","fetchPurchase","activeWh","_w$cashAccount","warehouseName","cashAccount","_error$response2","_error$response2$data","fetchWarehouses","newSuppliers","_error$response3","_error$response3$data","fetchSuppliers","newPaymentType","paymentTypeName","toLowerCase","_error$response5","_error$response5$data","fetchPaymentType","newAccounts","accountNumber","_error$response4","_error$response4$data","fetchAccount","newTerminals","_terminal$warehouse","tid","_error$response6","_error$response6$data","fetchTerminals","reset","addItem","targetItem","existingItemIndex","findIndex","_targetItem$discountT","handleSelectChange","selectedOption","handlePaymentSelect","selectedWarehouse","cashAccounts","a","paymentMode","pt","_formData$payments$","isCash","isBank","Link","to","FaTachometerAlt","BiChevronRight","payment","balance","accountId","warehouseId","liveBalance","getLiveBalance","toFixed","put","_err$response2","_err$response2$data","postData","JSON","stringify","_error$response7","_error$response7$data","errorMessage","sendData","opt","title","readOnly","FaBarcode","val","hit","i","_i$warehouse2","_i$barcodes2","includes","onKeyDown","handleAddItem","codeReader","BrowserMultiFormatReader","devices","listVideoInputDevices","Error","deviceId","decodeOnceFromVideoDevice","stream","text","getText","_i$warehouse","_i$barcodes","FontAwesomeIcon","icon","faCamera","ref","autoPlay","muted","playsInline","list","_list$barcodes","colSpan","_formData$items$index4","_formData$items$index5","_formData$items$index6","_formData$items$index7","_formData$items$index8","_formData$items$index9","_formData$items$index10","_formData$items$index11","_formData$items$index12","_formData$items$index13","_formData$items$index14","_formData$items$index15","_formData$items$index16","_formData$items$index17","style","MozAppearance","handleRemoveItem","indexToRemove","_","isRaw","_formData$payments$3","_formData$payments$3$","_formData$payments$4","_formData$payments$5","_formData$payments$6","sup","newOpt","opts","module","exports","n","u","f","h","d","l","$","y","M","weekdays","months","ordinal","m","Array","v","z","utcOffset","abs","floor","date","year","month","clone","add","ceil","D","ms","Q","g","S","O","args","b","locale","$L","utc","$u","x","$x","$offset","this","parse","prototype","$d","NaN","match","substring","UTC","$y","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","toString","isSame","startOf","endOf","isAfter","isBefore","$g","set","unix","valueOf","getTime","toDate","apply","$locale","weekStart","$set","daysInMonth","round","subtract","invalidDate","meridiem","monthsShort","weekdaysMin","weekdaysShort","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","k","extend","$i","isDayjs","en","Ls","_typeof","Symbol","iterator","constructor"],"sourceRoot":""}