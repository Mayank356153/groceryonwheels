{"version":3,"file":"static/js/57.a4f2b6c7.chunk.js","mappings":"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","sources":["components/Sales/AddSale.jsx","../node_modules/dayjs/dayjs.min.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@heroicons/react/outline/esm/CameraIcon.js"],"sourcesContent":["// src/components/AddSale.jsx\r\n\r\nimport React, { useEffect, useState, useRef, useMemo } from \"react\";\r\nimport { BrowserMultiFormatReader } from \"@zxing/browser\";\r\nimport { BiChevronRight } from \"react-icons/bi\";\r\nimport { FaTachometerAlt, FaBarcode } from \"react-icons/fa\";\r\nimport { CameraIcon } from \"@heroicons/react/outline\";\r\nimport Navbar from \"../Navbar.jsx\";\r\nimport Sidebar from \"../Sidebar.jsx\";\r\nimport axios from \"axios\";\r\nimport Select from \"react-select\";\r\nimport dayjs from \"dayjs\";\r\nimport { Link, NavLink, useNavigate, useSearchParams } from \"react-router-dom\";\r\n\r\nconst esc = (s) => s.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\r\n const generateSaleRef = (lastRef) => {\r\n   const year = new Date().getFullYear();\r\n   if (!lastRef || typeof lastRef !== \"string\") {\r\n     return `SO/${year}/01`;\r\n   }\r\n   const [prefix, yr, num] = lastRef.split(\"/\");\r\n   if (prefix !== \"SO\" || !/^\\d{4}$/.test(yr) || isNaN(+num)) {\r\n    return `SO/${year}/01`;\r\n   }\r\n   return `SO/${yr}/${String(+num + 1).padStart(2, \"0\")}`;\r\n };\r\n\r\n\r\nexport default function AddSale() {\r\n  const navigate = useNavigate();\r\n  const [params] = useSearchParams();\r\n  const editId = params.get(\"id\");\r\n\r\n  // look-ups\r\n  const [allItems, setAllItems] = useState([]);\r\n  const [warehouses, setWarehouses] = useState([]);\r\n  const [customers, setCustomers] = useState([]);\r\n  const [paymentTypes, setPaymentTypes] = useState([]);\r\n  const [accounts, setAccounts] = useState([]);\r\n  const [terminals, setTerminals] = useState([]);\r\n\r\n  // selections & form state\r\n  const [selectedWarehouse, setSelectedWarehouse] = useState(null);\r\n  const [selectedCustomer, setSelectedCustomer] = useState(null);\r\n  const [saleDate, setSaleDate] = useState(dayjs().format(\"YYYY-MM-DD\"));\r\n  const [dueDate, setDueDate] = useState(\"\");\r\n  const [referenceNo, setReferenceNo] = useState(\"\");\r\n  const [items, setItems] = useState([]);\r\n  const [otherCharges, setOtherCharges] = useState(0);\r\n  const [couponCode, setCouponCode] = useState(\"\");\r\n  const [couponType, setCouponType] = useState(\"\");\r\n  const [couponValue, setCouponValue] = useState(0);\r\n  const [discountOnAll, setDiscountOnAll] = useState(0);\r\n  const [discountOnAllType, setDiscountOnAllType] = useState(\"percentage\");\r\n  const [note, setNote] = useState(\"\");\r\n\r\n  // payment row\r\n  const [paymentAmount, setPaymentAmount] = useState(0);\r\n  const [selectedPaymentType, setSelectedPaymentType] = useState(null);\r\n  const [selectedAccount, setSelectedAccount] = useState(null);\r\n  const [selectedTerminal, setSelectedTerminal] = useState(null);\r\n  const [paymentNote, setPaymentNote] = useState(\"\");\r\n\r\n  // previous payments\r\n  const [prevPayments, setPrevPayments] = useState([]);\r\n\r\n  // UI\r\n  const [sidebarOpen, setSidebarOpen] = useState(window.innerWidth >= 768);\r\n  const [query, setQuery] = useState(\"\");\r\n  const [scanning, setScanning] = useState(false);\r\n  const videoRef = useRef(null);\r\n  const readerRef = useRef(null);\r\n  function stopScanner() {\r\n  const reader = readerRef.current;\r\n\r\n  if (reader) {\r\n    if (typeof reader.reset === \"function\") {\r\n      reader.reset();                     // old API (<= 0.0.8)\r\n    } else if (typeof reader.stopContinuousDecode === \"function\") {\r\n      reader.stopContinuousDecode();      // mid-API\r\n    } else if (typeof reader.stopStreams === \"function\") {\r\n      reader.stopStreams();               // newest API (2023+)\r\n    }\r\n    readerRef.current = null;             // keep things tidy\r\n  }\r\n\r\n  // always stop the MediaStream so the camera LED goes off\r\n  videoRef.current?.srcObject?.getTracks().forEach(t => t.stop());\r\n}\r\n\r\n  // load look-ups\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) return navigate(\"/login\");\r\n        const auth = { headers: { Authorization: `Bearer ${token}` } };\r\n\r\n        const [respCust, respWh, respPT, respAcc, respTerm] =\r\n          await Promise.all([\r\n            \r\n            axios.get(\"api/customer-data/all\", auth),\r\n            axios.get(\"api/warehouses\", auth),\r\n            axios.get(\"api/payment-types\", auth),\r\n            axios.get(\"api/accounts\", auth),\r\n            axios.get(\"api/terminals\", auth),\r\n          ]);\r\n\r\n        // flatten variants\r\n       \r\n\r\n        const custData = respCust.data.data || respCust.data;\r\n        const custOptions = custData.map((c) => ({\r\n          label: c.customerName,\r\n          value: c._id,\r\n        }));\r\n        setCustomers(custOptions);\r\n\r\n        // ── default to “Walk-in Customer” on a brand-new sale ──\r\n        if (!editId) {\r\n          const walkIn = custOptions.find(\r\n            (o) => o.label.toLowerCase() === \"walk-in customer\"\r\n          );\r\n          setSelectedCustomer(walkIn ? walkIn.value : null);\r\n        }\r\n\r\n        // map warehouses and pull in cashAccount._id\r\n        // map warehouses and pull in cashAccount._id\r\nconst allWh = respWh.data.data || [];\r\nconst activeWh = allWh.filter(w => w.status === \"Active\");\r\nsetWarehouses(\r\n  activeWh.map(w => ({\r\n    label: w.warehouseName,\r\n    value: w._id,\r\n    store: w.store,\r\n    cashAccount: w.cashAccount?._id || w.cashAccount\r\n  }))\r\n);\r\nif (!editId && activeWh.length) {\r\n  const restrictedWarehouse = activeWh.find((w) => w.isRestricted && w.status === \"Active\");\r\n  setSelectedWarehouse(restrictedWarehouse?._id || activeWh[0]?._id || null);\r\n}\r\n\r\n        setPaymentTypes(\r\n          (respPT.data.data || respPT.data).map((p) => ({\r\n            label: p.paymentTypeName,\r\n            value: p._id,\r\n            name: p.paymentTypeName.toLowerCase(),\r\n          }))\r\n        );\r\n\r\n        setAccounts(\r\n          (respAcc.data.data || respAcc.data).map((a) => ({\r\n            label: a.accountName,\r\n            value: a._id,\r\n            parent: a.parentAccount,\r\n          }))\r\n        );\r\n\r\n        setTerminals(\r\n          (respTerm.data.data || respTerm.data).map((t) => ({\r\n            label: t.tid,\r\n            value: t._id,\r\n            warehouse: t.warehouse,\r\n          }))\r\n        );\r\n\r\n        if (editId) {\r\n          const { data: sale } = await axios.get(\r\n            `api/sales/${editId}`,\r\n            auth\r\n          );\r\n          hydrateForEdit(sale);\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  async function fetchItems() {\r\n  if (!selectedWarehouse) {\r\n    setAllItems([]);\r\n    return;\r\n  }\r\n  try {\r\n    const token = localStorage.getItem(\"token\");\r\n    const auth  = { headers: { Authorization: `Bearer ${token}` } };\r\n    const resp  = await axios.get(\r\n      \"api/items\",\r\n      { ...auth, params: { warehouse: selectedWarehouse } }\r\n    );\r\n    const raw = resp.data.data || [];\r\n    const flat = raw.map((it) => {\r\n      const isVar = Boolean(it.parentItemId);\r\n      return {\r\n        ...it,\r\n        parentId:  isVar ? it.parentItemId : it._id,\r\n        variantId: isVar ? it._id : null,\r\n        itemName:  isVar\r\n          ? `${it.itemName} / ${it.variantName}`\r\n          : it.itemName,\r\n      };\r\n    });\r\n    setAllItems(flat);\r\n  } catch (err) {\r\n    console.error(\"Fetch items error\", err);\r\n    setAllItems([]);\r\n  }\r\n}\r\n\r\nuseEffect(() => {\r\n  fetchItems();\r\n}, [selectedWarehouse]);\r\n\r\n\r\n  const hydrateForEdit = (s) => {\r\n    setSelectedWarehouse(s.warehouse?._id);\r\n    setSelectedCustomer(s.customer?._id);\r\n    setSaleDate(dayjs(s.saleDate).format(\"YYYY-MM-DD\"));\r\n    setDueDate(s.dueDate ? dayjs(s.dueDate).format(\"YYYY-MM-DD\") : \"\");\r\n    setReferenceNo(s.referenceNo || \"\");\r\n    setOtherCharges(s.otherCharges || 0);\r\n    setCouponCode(s.discountCouponCode || \"\");\r\n    setCouponType(s.couponType || \"\");\r\n    setCouponValue(s.couponValue || 0);\r\n    setDiscountOnAll(s.discountOnBill || 0);\r\n    setNote(s.note || \"\");\r\n    const pay = s.payments?.[0];\r\n    if (pay) {\r\n      setPaymentAmount(pay.amount || 0);\r\n      setPaymentNote(pay.paymentNote || \"\");\r\n      setSelectedPaymentType(pay.paymentType?._id);\r\n      setSelectedAccount(pay.account || null);\r\n      setSelectedTerminal(pay.terminal || null);\r\n    }\r\n    setPrevPayments(s.payments || []);\r\n    setItems(\r\n      s.items.map((it) => ({\r\n        parentId: it.item?._id || it._id,\r\n        variantId: it.variant || null,\r\n        itemName: it.itemName,\r\n        itemCode: it.itemCode,\r\n        salesPrice: it.unitPrice,\r\n        discount: it.discount,\r\n        taxRate: it.taxAmount\r\n          ? (it.taxAmount * 100) / (it.unitPrice * it.quantity - it.discount)\r\n          : 0,\r\n        quantity: it.quantity,\r\n        tax: it.tax?._id || null,\r\n      }))\r\n    );\r\n  };\r\n\r\n  // filter items by warehouse\r\n  const filteredItems = useMemo(\r\n    () => allItems.filter((i) => i.warehouse?._id === selectedWarehouse),\r\n    [allItems, selectedWarehouse]\r\n  );\r\n  useEffect(() => {\r\n    setItems((prev) =>\r\n      prev.filter((it) => filteredItems.some((f) => f._id === it.parentId))\r\n    );\r\n  }, [filteredItems]);\r\n\r\n  // live search\r\n  const suggestions = useMemo(() => {\r\n    if (!query.trim()) return [];\r\n    const rx = new RegExp(esc(query.trim()), \"i\");\r\n    return filteredItems\r\n      .filter(\r\n        (it) =>\r\n          rx.test(it.itemName) ||\r\n          rx.test(it.itemCode) ||\r\n          rx.test(it.barcodes?.join(\" \") || \"\")\r\n      )\r\n      .slice(0, 15);\r\n  }, [query, filteredItems]);\r\n\r\n  const addItem = (row) => {\r\n  const nameTxt = row.variantName\r\n    ? `${row.itemName} / ${row.variantName}`\r\n    : row.itemName;\r\n\r\n  const existingIdx = items.findIndex(\r\n    (it) =>\r\n      it.parentId === (row.parentId || row._id) &&\r\n      (it.variantId || null) === (row.variantId || null)\r\n  );\r\n\r\n  if (existingIdx !== -1) {\r\n    // If item already exists, just increase quantity\r\n    setItems((prev) =>\r\n      prev.map((it, i) =>\r\n        i === existingIdx\r\n          ? {\r\n              ...it,\r\n              quantity: it.quantity + 1,\r\n            }\r\n          : it\r\n      )\r\n    );\r\n  } else {\r\n    // Otherwise, add as new\r\n    setItems((prev) => [\r\n      ...prev,\r\n      {\r\n        parentId: row.parentId || row._id,\r\n        variantId: row.variantId || null,\r\n        itemName: nameTxt,\r\n        itemCode: row.itemCode,\r\n        salesPrice: row.salesPrice || 0,\r\n        discount: 0,\r\n        taxRate: row.tax?.taxPercentage || 0,\r\n        quantity: 1,\r\n        tax: row.tax?._id || null,\r\n      },\r\n    ]);\r\n  }\r\n};\r\n\r\n\r\n  // barcode scanner\r\n  useEffect(() => {\r\n    if (!scanning) return;\r\n    const reader = new BrowserMultiFormatReader();\r\n    readerRef.current = reader;\r\n    reader.decodeFromConstraints(\r\n      { video: { facingMode: { exact: \"environment\" } } },\r\n      videoRef.current,\r\n      (res) => {\r\n        if (res) {\r\n          const code = res.getText();\r\n          const hit = filteredItems.find(\r\n            (i) =>\r\n              i.itemCode === code ||\r\n              i.barcodes?.includes(code) ||\r\n              i.itemName.toLowerCase() === code.toLowerCase()\r\n          );\r\n          if (hit) addItem(hit);\r\n          setScanning(false);\r\n          stopScanner();\r\n        }\r\n      }\r\n    );\r\n    return () => {\r\n      stopScanner();\r\n    };\r\n  }, [scanning, filteredItems]);\r\n\r\n  // table helpers\r\n  const modItem = (idx, field, value) =>\r\n    setItems((p) =>\r\n      p.map((row, i) =>\r\n        i === idx\r\n          ? {\r\n              ...row,\r\n              [field]: field === \"itemName\" ? value : Number(value),\r\n            }\r\n          : row\r\n      )\r\n    );\r\n  const delItem = (i) => setItems((p) => p.filter((_, idx) => idx !== i));\r\n\r\n  // totals\r\n  const totals = useMemo(() => {\r\n    \r\n    let sub = 0;\r\n    items.forEach((it) => {\r\n      const base = (it.salesPrice || 0) * it.quantity - (it.discount || 0);\r\n      const tax = (base * (it.taxRate || 0)) / 100;\r\n      sub += base + tax;\r\n    });\r\n    \r\n    const oc = Number(otherCharges) || 0;\r\n    const coup =\r\n      couponType === \"percentage\"\r\n        ? (sub * couponValue) / 100\r\n        : couponType === \"value\"\r\n        ? Number(couponValue)\r\n        : 0;\r\n    const doa =\r\n      discountOnAllType === \"percentage\"\r\n        ? (sub * discountOnAll) / 100\r\n        : Number(discountOnAll);\r\n    const grand = sub + oc - coup - doa;\r\n    return {\r\n      sub: sub.toFixed(2),\r\n      coup: coup.toFixed(2),\r\n      doa: doa.toFixed(2),\r\n      grand: grand > 0 ? grand.toFixed(2) : \"0.00\",\r\n    };\r\n  }, [\r\n    items,\r\n    otherCharges,\r\n    couponType,\r\n    couponValue,\r\n    discountOnAll,\r\n    discountOnAllType,\r\n  ]);\r\n  useEffect(() => {\r\n    if (!editId) {\r\n      setPaymentAmount(Number(totals.grand));\r\n    }\r\n  }, [totals.grand, editId]);\r\n\r\n  // save / update\r\n  const save = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) return;\r\n      const auth = { headers: { Authorization: `Bearer ${token}` } };\r\n\r\n      if (!selectedWarehouse || !selectedCustomer || !items.length)\r\n        return alert(\"Fill mandatory fields\");\r\n      if (paymentAmount > 0 && !selectedPaymentType)\r\n        return alert(\"Pick payment type\");\r\n\r\n      const mappedItems = items.map((row) => {\r\n        const base = (row.salesPrice || 0) * row.quantity - (row.discount || 0);\r\n        const tax = (base * (row.taxRate || 0)) / 100;\r\n        return {\r\n          item: row.parentId,\r\n          variant: row.variantId || null,\r\n          quantity: row.quantity,\r\n          unitPrice: row.salesPrice,\r\n          discount: row.discount,\r\n          tax: row.tax || null,\r\n          taxAmount: tax,\r\n          subtotal: base + tax,\r\n        };\r\n      });\r\n\r\n      const payments = [];\r\n      if (paymentAmount > 0) {\r\n        const p = {\r\n          paymentType: selectedPaymentType,\r\n          amount: Number(paymentAmount),\r\n          paymentNote,\r\n        };\r\n        const mode = paymentTypes.find((x) => x.value === selectedPaymentType)\r\n          ?.name;\r\n        if (mode === \"cash\") p.account = selectedAccount;\r\n        if (mode === \"bank\") p.terminal = selectedTerminal;\r\n        payments.push(p);\r\n      }\r\n\r\n      const body = {\r\n        warehouse: selectedWarehouse,\r\n        customer: selectedCustomer,\r\n        saleDate,\r\n        dueDate: dueDate || null,\r\n        referenceNo,\r\n        items: mappedItems,\r\n        otherCharges: Number(otherCharges) || 0,\r\n        discountCouponCode: couponCode,\r\n        couponType,\r\n        couponValue: Number(couponValue) || 0,\r\n        discountOnBill: Number(totals.doa),\r\n        note,\r\n        payments,\r\n        subtotal: Number(totals.sub),\r\n        grandTotal: Number(totals.grand),\r\n        status: \"Completed\",\r\n      };\r\n\r\n      if (editId)\r\n        await axios.put(\r\n          `api/sales/${editId}`,\r\n          body,\r\n          auth\r\n        );\r\n      else\r\n        await axios.post(\"api/sales\", body, auth);\r\n\r\n      alert(\"Saved ✔️\");\r\n      navigate(\"/sale-list\");\r\n    } catch (err) {\r\n      alert(err.response?.data?.message || err.message);\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  // derive cash accounts from selected warehouse\r\n  const selectedWh = warehouses.find((w) => w.value === selectedWarehouse);\r\n  const cashAccounts =\r\n    selectedWh && selectedWh.cashAccount\r\n      ? accounts.filter((a) => a.value === selectedWh.cashAccount)\r\n      : [];\r\n\r\n  const mode = paymentTypes.find((p) => p.value === selectedPaymentType)\r\n    ?.name;\r\n  const isCash = mode === \"cash\";\r\n  const isBank = mode === \"bank\";\r\n   useEffect(() => {\r\n  if (editId) return; // Don’t override when editing\r\n  (async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (!token) {\r\n        console.error(\"No token found, redirecting to login\");\r\n        navigate(\"/login\");\r\n        return;\r\n      }\r\n      const auth = { headers: { Authorization: `Bearer ${token}` } };\r\n      const resp = await axios.get(\"api/sales\", auth);\r\n      // backend replies { summary: {...}, sales: [...] }\r\n      const sales = Array.isArray(resp.data.sales) ? resp.data.sales : [];\r\n      \r\n      // Filter non-return sales and sort by createdAt\r\n      const normal = sales\r\n        .filter((s) => !s.isReturn && !!s.referenceNo)\r\n        .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\r\n      console.log(\"Non-return sales:\", normal); // Debug log\r\n      \r\n      // Get last referenceNo\r\n      const lastRef = normal.length ? normal[0].referenceNo : null;\r\n      console.log(\"Last referenceNo:\", lastRef); // Debug log\r\n      \r\n      const newRef = generateSaleRef(lastRef);\r\n      console.log(\"Generated referenceNo:\", newRef); // Debug log\r\n      \r\n      setReferenceNo(newRef);\r\n    } catch (e) {\r\n      console.error(\"Could not auto-gen ref:\", e);\r\n      // Set default referenceNo on error\r\n      const defaultRef = generateSaleRef(null);\r\n      console.log(\"Using default referenceNo:\", defaultRef); // Debug log\r\n      setReferenceNo(defaultRef);\r\n    }\r\n  })();\r\n}, [editId, navigate]);\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen\">\r\n      <Navbar\r\n        isSidebarOpen={sidebarOpen}\r\n        setSidebarOpen={setSidebarOpen}\r\n      />\r\n      <div className=\"flex flex-grow\">\r\n        <Sidebar isSidebarOpen={sidebarOpen} />\r\n        <main className=\"flex flex-col flex-grow p-2 md:p-4 overflow-x-auto\">\r\n          {/* breadcrumb */}\r\n          <header className=\"bg-gray-200 rounded-md p-2 mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between\">\r\n            <div className=\"flex items-baseline gap-1\">\r\n              <h1 className=\"font-semibold text-lg\">Sales</h1>\r\n              <span className=\"text-xs\">\r\n                {editId ? \"Update\" : \"Add\"} Sale\r\n              </span>\r\n            </div>\r\n            <nav className=\"flex items-center text-xs gap-1 text-gray-600\">\r\n              <NavLink\r\n                to=\"/dashboard\"\r\n                className=\"flex items-center gap-1 hover:text-cyan-600\"\r\n              >\r\n                <FaTachometerAlt /> Home\r\n              </NavLink>\r\n              <BiChevronRight />\r\n              <NavLink to=\"/sale-list\" className=\"hover:text-cyan-600\">\r\n                Sales List\r\n              </NavLink>\r\n            </nav>\r\n          </header>\r\n\r\n          {/* top grid */}\r\n          <div className=\"grid md:grid-cols-3 gap-4\">\r\n            <div>\r\n              <label className=\"font-semibold text-sm\">\r\n                Warehouse *\r\n              </label>\r\n              <Select\r\n                options={warehouses}\r\n                value={\r\n                  warehouses.find((o) => o.value === selectedWarehouse) ||\r\n                  null\r\n                }\r\n                onChange={(o) => setSelectedWarehouse(o.value)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"font-semibold text-sm\">\r\n                Sale Date *\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                className=\"border rounded p-2 w-full\"\r\n                value={saleDate}\r\n                onChange={(e) => setSaleDate(e.target.value)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"font-semibold text-sm\">\r\n                Due Date\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                className=\"border rounded p-2 w-full\"\r\n                value={dueDate}\r\n                onChange={(e) => setDueDate(e.target.value)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"font-semibold text-sm\">\r\n                Customer *\r\n              </label>\r\n              <Select\r\n                options={customers}\r\n                value={\r\n                  customers.find((o) => o.value === selectedCustomer) ||\r\n                  null\r\n                }\r\n                onChange={(o) => setSelectedCustomer(o.value)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"font-semibold text-sm\">\r\n                Reference No\r\n              </label>\r\n              <input\r\n                className=\"border rounded p-2 w-full\"\r\n                value={referenceNo}\r\n                onChange={(e) => setReferenceNo(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* search / barcode */}\r\n          <div className=\"relative flex items-center mt-4\">\r\n            <FaBarcode className=\"mr-2 text-gray-500\" />\r\n            <input\r\n              className=\"border rounded p-2 w-full\"\r\n              placeholder=\"Item name / code / barcode\"\r\n              value={query}\r\n              onChange={(e) => {\r\n                const val = e.target.value;\r\n                setQuery(val);\r\n\r\n                // if this is an exact barcode match, auto-add and clear\r\n                const hit = filteredItems.find(i => i.barcodes?.includes(val));\r\n                if (hit) {\r\n                  addItem(hit);\r\n                  setQuery(\"\");\r\n                }\r\n              }}\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\" && suggestions[0]) {\r\n                  addItem(suggestions[0]);\r\n                  setQuery(\"\");\r\n                }\r\n              }}\r\n            />\r\n            <button\r\n              className=\"ml-2\"\r\n              disabled={!selectedWarehouse}\r\n              onClick={() => setScanning(true)}\r\n            >\r\n              <CameraIcon className=\"w-6 h-6 text-gray-500\" />\r\n            </button>\r\n\r\n            {query && suggestions.length > 0 && (\r\n              <ul className=\"absolute top-11 bg-white border rounded shadow w-full max-h-64 overflow-auto z-50\">\r\n                {suggestions.map((s) => (\r\n                  <li\r\n                    key={s._id}\r\n                    className=\"p-2 hover:bg-gray-100 cursor-pointer\"\r\n                    onClick={() => {\r\n                      addItem(s);\r\n                      setQuery(\"\");\r\n                    }}\r\n                  >\r\n                    <b>{s.itemCode}</b> – {s.itemName}\r\n                    {s.barcodes?.length > 0 && (\r\n                      <span className=\"text-gray-500\">\r\n                        ({s.barcodes[0]})\r\n                      </span>\r\n                    )}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n\r\n          {/* items table */}\r\n          <div className=\"overflow-x-auto mt-4 rounded\">\r\n            <table className=\"min-w-full border\">\r\n              <thead className=\"bg-sky-600 text-white text-sm\">\r\n                <tr>\r\n                  <th className=\"p-1 border\">Name</th>\r\n                  <th className=\"p-1 border\">Code</th>\r\n                  <th className=\"p-1 border\">Qty</th>\r\n                  <th className=\"p-1 border\">Price</th>\r\n                  <th className=\"p-1 border\">Disc</th>\r\n                  <th className=\"p-1 border\">Tax %</th>\r\n                  <th className=\"p-1 border\">Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {items.length === 0 ? (\r\n                  <tr>\r\n                    <td colSpan=\"7\" className=\"text-center p-2\">\r\n                      No items\r\n                    </td>\r\n                  </tr>\r\n                ) : (\r\n                  items.map((it, i) => (\r\n                    <tr\r\n                      key={i}\r\n                      className=\"text-center text-sm odd:bg-gray-50\"\r\n                    >\r\n                      <td className=\"border p-1\">{it.itemName}</td>\r\n                      <td className=\"border p-1\">{it.itemCode}</td>\r\n                      <td className=\"border p-1\">\r\n                        <input\r\n                          type=\"number\"\r\n                          min=\"1\"\r\n                          className=\"border w-16\"\r\n                          value={it.quantity}\r\n                          onChange={(e) =>\r\n                            modItem(i, \"quantity\", e.target.value)\r\n                          }\r\n                        />\r\n                      </td>\r\n                      <td className=\"border p-1\">\r\n                        <input\r\n                          type=\"number\"\r\n                          className=\"border w-20\"\r\n                          value={it.salesPrice}\r\n                          onChange={(e) =>\r\n                            modItem(i, \"salesPrice\", e.target.value)\r\n                          }\r\n                        />\r\n                      </td>\r\n                      <td className=\"border p-1\">\r\n                        <input\r\n                          type=\"number\"\r\n                          className=\"border w-20\"\r\n                          value={it.discount}\r\n                          onChange={(e) =>\r\n                            modItem(i, \"discount\", e.target.value)\r\n                          }\r\n                        />\r\n                      </td>\r\n                      <td className=\"border p-1\">\r\n                        <input\r\n                          type=\"number\"\r\n                          className=\"border w-16\"\r\n                          value={it.taxRate}\r\n                          onChange={(e) =>\r\n                            modItem(i, \"taxRate\", e.target.value)\r\n                          }\r\n                        />\r\n                      </td>\r\n                      <td className=\"border p-1\">\r\n                        <button\r\n                          className=\"text-red-600\"\r\n                          onClick={() => delItem(i)}\r\n                        >\r\n                          Remove\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  ))\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          {/* totals & discounts */}\r\n          <div className=\"grid md:grid-cols-2 gap-4 mt-4\">\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex justify-between\">\r\n                <label>Other Charges</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"border p-1 w-28\"\r\n                  value={otherCharges}\r\n                  onChange={(e) => setOtherCharges(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <label>Coupon Code</label>\r\n                <input\r\n                  className=\"border p-1 w-40\"\r\n                  value={couponCode}\r\n                  onChange={(e) => setCouponCode(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"flex justify-between items-center\">\r\n                <label>\r\n                  Coupon {couponType === \"percentage\" ? \"%\" : \"₹\"}\r\n                </label>\r\n                <div className=\"flex gap-2 items-center\">\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"border p-1 w-24\"\r\n                    value={couponValue}\r\n                    onChange={(e) => setCouponValue(e.target.value)}\r\n                  />\r\n                  <select\r\n                    className=\"border p-1\"\r\n                    value={couponType}\r\n                    onChange={(e) => setCouponType(e.target.value)}\r\n                  >\r\n                    <option value=\"\">None</option>\r\n                    <option value=\"percentage\">%</option>\r\n                    <option value=\"value\">Fixed</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex justify-between items-center\">\r\n                <label>Discount on All</label>\r\n                <div className=\"flex gap-2 items-center\">\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"border p-1 w-24\"\r\n                    value={discountOnAll}\r\n                    onChange={(e) => setDiscountOnAll(e.target.value)}\r\n                  />\r\n                  <select\r\n                    className=\"border p-1\"\r\n                    value={discountOnAllType}\r\n                    onChange={(e) =>\r\n                      setDiscountOnAllType(e.target.value)\r\n                    }\r\n                  >\r\n                    <option value=\"percentage\">%</option>\r\n                    <option value=\"value\">Fixed</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label>Note</label>\r\n                <textarea\r\n                  className=\"border p-2 w-full min-h-[80px]\"\r\n                  value={note}\r\n                  onChange={(e) => setNote(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"border-l pl-4 space-y-2\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"font-semibold\">Subtotal</span>\r\n                <span>{totals.sub}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"font-semibold\">Other Charges</span>\r\n                <span>{Number(otherCharges).toFixed(2)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"font-semibold\">Coupon Disc.</span>\r\n                <span>{totals.coup}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"font-semibold\">Disc. on All</span>\r\n                <span>{totals.doa}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-lg font-bold\">\r\n                <span>Grand Total</span>\r\n                <span>{totals.grand}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* previous payments */}\r\n          {prevPayments.length > 0 && (\r\n            <div className=\"mt-6\">\r\n              <h2 className=\"text-base font-semibold text-cyan-500 mb-2\">\r\n                Previous Payments\r\n              </h2>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full border bg-white\">\r\n                  <thead className=\"bg-gray-200 text-sm\">\r\n                    <tr>\r\n                      <th className=\"border p-1\">#</th>\r\n                      <th className=\"border p-1\">Date</th>\r\n                      <th className=\"border p-1\">Type</th>\r\n                      <th className=\"border p-1\">Amount</th>\r\n                      <th className=\"border p-1\">Note</th>\r\n                      <th className=\"border p-1\">Receipt</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {prevPayments.map((p, i) => (\r\n                      <tr\r\n                        key={i}\r\n                        className=\"text-center odd:bg-gray-50 text-sm\"\r\n                      >\r\n                        <td className=\"border p-1\">{i + 1}</td>\r\n                        <td className=\"border p-1\">\r\n                          {dayjs(p.paymentDate).format(\"DD-MMM-YY\")}\r\n                        </td>\r\n                        <td className=\"border p-1\">\r\n                          {\r\n                            paymentTypes.find(\r\n                              (t) => t.value === p.paymentType\r\n                            )?.label\r\n                          }\r\n                        </td>\r\n                        <td className=\"border p-1\">{p.amount}</td>\r\n                        <td className=\"border p-1\">{p.paymentNote || \"–\"}</td>\r\n                        <td className=\"border p-1\">\r\n                          <Link\r\n                            to={`/receipt/${editId}`}\r\n                            className=\"text-sky-600 underline\"\r\n                          >\r\n                            view\r\n                          </Link>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* payment entry */}\r\n          <div className=\"bg-gray-100 p-4 mt-6 rounded-lg space-y-4\">\r\n            <h2 className=\"text-lg font-semibold\">Payment</h2>\r\n            <div className=\"grid md:grid-cols-3 gap-4\">\r\n              <div>\r\n                <label>Amount</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  className=\"border p-2 w-full\"\r\n                  value={paymentAmount}\r\n                  onChange={(e) => setPaymentAmount(e.target.value)}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label>Payment Type</label>\r\n                <Select\r\n                  options={paymentTypes}\r\n                  value={\r\n                    paymentTypes.find(\r\n                      (o) => o.value === selectedPaymentType\r\n                    ) || null\r\n                  }\r\n                  onChange={(o) => {\r\n                    setSelectedPaymentType(o.value);\r\n                    setSelectedAccount(null);\r\n                    setSelectedTerminal(null);\r\n                  }}\r\n                />\r\n              </div>\r\n              {isCash && (\r\n                <div>\r\n                  <label>Account</label>\r\n                  <Select\r\n                    options={cashAccounts}\r\n                    value={\r\n                      cashAccounts.find(\r\n                        (o) => o.value === selectedAccount\r\n                      ) || null\r\n                    }\r\n                    onChange={(o) =>\r\n                      setSelectedAccount(o ? o.value : null)\r\n                    }\r\n                  />\r\n                </div>\r\n              )}\r\n              {isBank && (\r\n                <div>\r\n                  <label>Terminal</label>\r\n                  <Select\r\n                    options={terminals.filter(\r\n                      (t) => t.warehouse === selectedWarehouse\r\n                    )}\r\n                    value={\r\n                      terminals.find(\r\n                        (t) => t.value === selectedTerminal\r\n                      ) || null\r\n                    }\r\n                    onChange={(o) =>\r\n                      setSelectedTerminal(o ? o.value : null)\r\n                    }\r\n                    placeholder=\"Select TID\"\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div>\r\n              <label>Payment Note</label>\r\n              <textarea\r\n                className=\"border p-2 w-full min-h-[80px]\"\r\n                value={paymentNote}\r\n                onChange={(e) => setPaymentNote(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* actions */}\r\n          <div className=\"flex justify-center gap-4 mt-6\">\r\n            <button\r\n              className=\"bg-green-600 hover:bg-green-700 text-white px-10 py-2 rounded\"\r\n              onClick={save}\r\n            >\r\n              {editId ? \"Update\" : \"Save\"}\r\n            </button>\r\n            <button\r\n              className=\"bg-orange-500 hover:bg-orange-600 text-white px-10 py-2 rounded\"\r\n              onClick={() => navigate(\"/sale-list\")}\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n\r\n          {/* scanner overlay */}\r\n          {scanning && (\r\n            <div className=\"fixed inset-0 bg-black/70 flex flex-col items-center justify-center z-50\">\r\n              <div className=\"w-72 h-72 border-4 border-white overflow-hidden relative\">\r\n                <video\r\n                  ref={videoRef}\r\n                  className=\"object-cover w-full h-full\"\r\n                  autoPlay\r\n                  muted\r\n                  playsInline\r\n                />\r\n              </div>\r\n              <button\r\n                className=\"mt-4 bg-red-600 text-white px-4 py-2 rounded\"\r\n                onClick={() => {\r\n                  stopScanner();\r\n                  setScanning(false);\r\n                }}\r\n              >\r\n                Close\r\n              </button>\r\n            </div>\r\n          )}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",c=\"month\",f=\"quarter\",h=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),s=n-i<0,u=e.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:f}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=\"$isDayjsObject\",S=function(t){return t instanceof _||!(!t||!t[p])},w=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},O=function(t,e){if(S(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},b=v;b.l=w,b.i=S,b.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!b.u(e)||e,f=b.p(t),l=function(t,e){var i=b.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return b.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(f){case h:return r?l(1,0):l(31,11);case c:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=b.p(t),f=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=f+\"Date\",n[d]=f+\"Date\",n[c]=f+\"Month\",n[h]=f+\"FullYear\",n[u]=f+\"Hours\",n[s]=f+\"Minutes\",n[i]=f+\"Seconds\",n[r]=f+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===c||o===h){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(r,f){var d,l=this;r=Number(r);var $=b.p(f),y=function(t){var e=O(l);return b.w(e.date(e.date()+Math.round(t*r)),l)};if($===c)return this.set(c,this.$M+r);if($===h)return this.set(h,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return b.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=b.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,c=n.months,f=n.meridiem,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},d=function(t){return b.s(s%12||12,t,\"0\")},$=f||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r};return r.replace(y,(function(t,r){return r||function(t){switch(t){case\"YY\":return String(e.$y).slice(-2);case\"YYYY\":return b.s(e.$y,4,\"0\");case\"M\":return a+1;case\"MM\":return b.s(a+1,2,\"0\");case\"MMM\":return h(n.monthsShort,a,c,3);case\"MMMM\":return h(c,a);case\"D\":return e.$D;case\"DD\":return b.s(e.$D,2,\"0\");case\"d\":return String(e.$W);case\"dd\":return h(n.weekdaysMin,e.$W,o,2);case\"ddd\":return h(n.weekdaysShort,e.$W,o,3);case\"dddd\":return o[e.$W];case\"H\":return String(s);case\"HH\":return b.s(s,2,\"0\");case\"h\":return d(1);case\"hh\":return d(2);case\"a\":return $(s,u,!0);case\"A\":return $(s,u,!1);case\"m\":return String(u);case\"mm\":return b.s(u,2,\"0\");case\"s\":return String(e.$s);case\"ss\":return b.s(e.$s,2,\"0\");case\"SSS\":return b.s(e.$ms,3,\"0\");case\"Z\":return i}return null}(t)||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=this,M=b.p(d),m=O(r),v=(m.utcOffset()-this.utcOffset())*e,g=this-m,D=function(){return b.m(y,m)};switch(M){case h:$=D()/12;break;case c:$=D();break;case f:$=D()/3;break;case o:$=(g-v)/6048e5;break;case a:$=(g-v)/864e5;break;case u:$=g/n;break;case s:$=g/e;break;case i:$=g/t;break;default:$=g}return l?$:b.a($)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),k=_.prototype;return O.prototype=k,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",c],[\"$y\",h],[\"$D\",d]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,_,O),t.$i=!0),O},O.locale=w,O.isDayjs=S,O.unix=function(t){return O(1e3*t)},O.en=D[g],O.Ls=D,O.p={},O}));","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import * as React from \"react\";\n\nfunction CameraIcon(props, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 2,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef\n  }, props), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 13a3 3 0 11-6 0 3 3 0 016 0z\"\n  }));\n}\n\nconst ForwardRef = React.forwardRef(CameraIcon);\nexport default ForwardRef;"],"names":["esc","s","replace","generateSaleRef","lastRef","year","Date","getFullYear","prefix","yr","num","split","test","isNaN","String","padStart","AddSale","_paymentTypes$find2","navigate","useNavigate","params","useSearchParams","editId","get","allItems","setAllItems","useState","warehouses","setWarehouses","customers","setCustomers","paymentTypes","setPaymentTypes","accounts","setAccounts","terminals","setTerminals","selectedWarehouse","setSelectedWarehouse","selectedCustomer","setSelectedCustomer","saleDate","setSaleDate","dayjs","format","dueDate","setDueDate","referenceNo","setReferenceNo","items","setItems","otherCharges","setOtherCharges","couponCode","setCouponCode","couponType","setCouponType","couponValue","setCouponValue","discountOnAll","setDiscountOnAll","discountOnAllType","setDiscountOnAllType","note","setNote","paymentAmount","setPaymentAmount","selectedPaymentType","setSelectedPaymentType","selectedAccount","setSelectedAccount","selectedTerminal","setSelectedTerminal","paymentNote","setPaymentNote","prevPayments","setPrevPayments","sidebarOpen","setSidebarOpen","window","innerWidth","query","setQuery","scanning","setScanning","videoRef","useRef","readerRef","stopScanner","_videoRef$current","_videoRef$current$src","reader","current","reset","stopContinuousDecode","stopStreams","srcObject","getTracks","forEach","t","stop","useEffect","token","localStorage","getItem","auth","headers","Authorization","respCust","respWh","respPT","respAcc","respTerm","Promise","all","axios","custOptions","data","map","c","label","customerName","value","_id","walkIn","find","o","toLowerCase","activeWh","filter","w","status","_w$cashAccount","warehouseName","store","cashAccount","length","_activeWh$","restrictedWarehouse","isRestricted","p","paymentTypeName","name","a","accountName","parent","parentAccount","tid","warehouse","sale","hydrateForEdit","err","console","error","async","flat","it","isVar","Boolean","parentItemId","parentId","variantId","itemName","variantName","fetchItems","_s$warehouse","_s$customer","_s$payments","customer","discountCouponCode","discountOnBill","pay","payments","_pay$paymentType","amount","paymentType","account","terminal","_it$item","_it$tax","item","variant","itemCode","salesPrice","unitPrice","discount","taxRate","taxAmount","quantity","tax","filteredItems","useMemo","i","_i$warehouse","prev","some","f","suggestions","trim","rx","RegExp","_it$barcodes","barcodes","join","slice","addItem","row","nameTxt","existingIdx","findIndex","_row$tax","_row$tax2","taxPercentage","BrowserMultiFormatReader","decodeFromConstraints","video","facingMode","exact","res","code","getText","hit","_i$barcodes","includes","modItem","idx","field","Number","totals","sub","base","oc","coup","doa","grand","toFixed","selectedWh","cashAccounts","mode","isCash","isBank","resp","normal","Array","isArray","sales","isReturn","sort","b","createdAt","log","newRef","e","defaultRef","_jsxs","className","children","_jsx","Navbar","isSidebarOpen","Sidebar","NavLink","to","FaTachometerAlt","BiChevronRight","Select","options","onChange","type","target","FaBarcode","placeholder","val","_i$barcodes2","onKeyDown","key","disabled","onClick","CameraIcon","_s$barcodes","colSpan","min","_","delItem","_paymentTypes$find3","paymentDate","Link","alert","mappedItems","subtotal","_paymentTypes$find","x","push","body","grandTotal","put","post","_err$response","_err$response$data","response","message","ref","autoPlay","muted","playsInline","module","exports","n","r","u","h","d","l","$","y","M","weekdays","months","ordinal","m","v","z","utcOffset","Math","abs","floor","date","month","clone","add","ceil","D","ms","Q","g","S","O","args","arguments","locale","$L","utc","$u","$x","$offset","this","parse","prototype","$d","NaN","match","substring","UTC","init","$y","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","toString","isSame","startOf","endOf","isAfter","isBefore","$g","set","unix","valueOf","getTime","toDate","apply","$locale","weekStart","$set","daysInMonth","round","subtract","invalidDate","meridiem","monthsShort","weekdaysMin","weekdaysShort","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","k","extend","$i","isDayjs","en","Ls","_typeof","Symbol","iterator","constructor","React","props","svgRef","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin"],"sourceRoot":""}