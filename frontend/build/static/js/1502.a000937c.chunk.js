"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1502],{14840:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(65043),r=t(21197),l=t(59255),n=t(70579);function d(){const[e,s]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(r.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,n.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,n.jsx)("div",{children:(0,n.jsx)(l.A,{isSidebarOpen:e})}),(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,n.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},21502:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(65043),r=t(60184),l=t(21197),n=t(59255),d=t(86213),c=t(14840),i=t(66727),o=t(70579);const x=()=>{const[e,s]=(0,a.useState)(!0),[t,x]=(0,a.useState)(""),[m,h]=(0,a.useState)(10),[p,u]=(0,a.useState)(1),[b,j]=(0,a.useState)(!1),[y,f]=(0,a.useState)([]),g=(0,i.Zp)(),[N,w]=(0,a.useState)(null);(0,a.useEffect)((()=>{window.innerWidth<768&&s(!1)}),[window.innerWidth]);const v=async()=>{try{j(!0);const e=await d.A.get("api/advance-payments",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("API response:",e.data),f(e.data.data||[])}catch(e){console.error("Error fetching advance payments:",e.message)}finally{j(!1)}};(0,a.useEffect)((()=>{v()}),[]);const k=y.filter((e=>e._id.toLowerCase().includes(t.toLowerCase()))),S=p*m,A=S-m,C=Math.ceil(k.length/m),L=k.slice(A,S),D=e=>{e>=1&&e<=C&&u(e)};return b?(0,o.jsx)(c.A,{}):(0,o.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,o.jsx)(l.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,o.jsxs)("div",{className:"box-border flex",children:[(0,o.jsx)("div",{className:"w-auto",children:(0,o.jsx)(n.A,{isSidebarOpen:e})}),(0,o.jsxs)("div",{className:"overflow-x-auto  flex flex-col p-2 md:p-2 min-h-screen w-full",children:[(0,o.jsxs)("header",{className:"flex flex-col items-start justify-between p-0 mb-6 md:flex-row md:items-center",children:[(0,o.jsx)("h2",{className:"text-lg font-bold md:text-xl",children:"Advance Payments List"}),(0,o.jsxs)("nav",{className:"flex flex-wrap gap-2 mt-2 text-sm text-gray-600 md:mt-0",children:[(0,o.jsxs)(i.k2,{to:"/dashboard",className:"flex items-center text-gray-700 no-underline",children:[(0,o.jsx)(r.$BV,{className:"mr-1"}),"Home"]}),(0,o.jsx)("span",{children:">"}),(0,o.jsx)(i.k2,{to:"/customer/view",className:"text-gray-700 no-underline",children:"Customer List"}),(0,o.jsx)("span",{children:">"}),(0,o.jsx)(i.k2,{to:"/advance-list",className:"text-gray-700 no-underline",children:"Advance Payment List"})]})]}),(0,o.jsxs)("div",{className:"p-4 mb-4 bg-white border-t-4 rounded shadow border-cyan-500",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold",children:"Advance Payments"}),(0,o.jsx)("button",{className:"px-4 py-1 mt-2 text-white rounded bg-cyan-400 hover:bg-cyan-600 md:mt-0",onClick:()=>g("/create-advance"),children:"+ Create Advance"})]}),(0,o.jsxs)("div",{className:"flex flex-col justify-between mt-4 mb-4 space-y-2 md:flex-row md:space-y-0 md:items-center",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"text-sm",children:"Show"}),(0,o.jsxs)("select",{className:"p-2 text-sm border border-gray-300 rounded-md",value:m,onChange:e=>{h(Number(e.target.value)),u(1)},children:[(0,o.jsx)("option",{children:"10"}),(0,o.jsx)("option",{children:"20"}),(0,o.jsx)("option",{children:"50"})]}),(0,o.jsx)("span",{className:"text-sm",children:"Entries"})]}),(0,o.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between flex-1 gap-2",children:[(0,o.jsx)("button",{className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"Copy"}),(0,o.jsx)("button",{className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"Excel"}),(0,o.jsx)("button",{className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"PDF"}),(0,o.jsx)("button",{className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"Print"}),(0,o.jsx)("button",{className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"CSV"})]}),(0,o.jsx)("input",{type:"text",placeholder:"Search",className:"w-full p-2 text-sm border border-gray-300 ",onChange:e=>x(e.target.value)})]})]}),(0,o.jsx)("div",{className:"w-full overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full bg-white border-collapse rounded-md shadow-lg",children:[(0,o.jsx)("thead",{className:"text-sm bg-gray-100",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2 border",children:"ID"}),(0,o.jsx)("th",{className:"px-4 py-2 border",children:"Date"}),(0,o.jsx)("th",{className:"px-4 py-2 border",children:"Customer Name"}),(0,o.jsx)("th",{className:"px-4 py-2 border",children:"Amount"}),(0,o.jsx)("th",{className:"px-4 py-2 border",children:"Payment Type"}),(0,o.jsx)("th",{className:"px-4 py-2 border",children:"Created By"}),(0,o.jsx)("th",{className:"px-4 py-2 border",children:"Action"})]})}),(0,o.jsx)("tbody",{children:0===L.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"7",className:"py-4 text-sm text-center text-gray-500",children:"No data available in table"})}):L.map((e=>{var s,t,a;return(0,o.jsxs)("tr",{className:"border-t",children:[(0,o.jsx)("td",{className:"px-4 py-2 border",children:e._id}),(0,o.jsx)("td",{className:"px-4 py-2 border",children:new Date(e.createdAt).toDateString()}),(0,o.jsx)("td",{className:"px-4 py-2 border",children:(null===(s=e.customer)||void 0===s?void 0:s.customerName)||e.customerName||"N/A"}),(0,o.jsx)("td",{className:"px-4 py-2 border",children:e.amount}),(0,o.jsx)("td",{className:"px-4 py-2 border",children:(null===(t=e.paymentType)||void 0===t?void 0:t.paymentTypeName)||"NA"}),(0,o.jsx)("td",{className:"px-4 py-2 border",children:(null===(a=e.createdBy)||void 0===a?void 0:a.name)||e.creatorName||"N/A"}),(0,o.jsxs)("td",{className:"relative px-4 py-2 border",children:[(0,o.jsx)("button",{className:"px-3 py-1 text-white rounded bg-cyan-600",onClick:()=>{return s=e._id,void w(N===s?null:s);var s},children:"Action \u25bc"}),N===e._id&&(0,o.jsxs)("div",{className:"absolute right-0 z-10 w-32 mt-1 bg-white border border-gray-200 rounded-md shadow-md",children:[(0,o.jsxs)("button",{className:"flex items-center w-full px-3 py-2 text-gray-700 hover:bg-gray-100",onClick:()=>g(`/add-advance?id=${e._id}`),children:[(0,o.jsx)(r.uO9,{className:"mr-2"})," Edit"]}),(0,o.jsxs)("button",{className:"flex items-center w-full px-3 py-2 text-red-600 hover:bg-gray-100",onClick:()=>(async e=>{if(window.confirm("Do you want to delete this advance payment?")){j(!0);try{await d.A.delete(`api/advance-payments/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Deleted Successfully")}catch(s){console.error("Error deleting advance payment:",s.message)}finally{v(),j(!1)}}})(e._id),children:[(0,o.jsx)(r.qbC,{className:"mr-2"})," Delete"]})]})]})]},e._id)}))})]})}),(0,o.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 p-2 md:justify-between md:flex-row",children:[(0,o.jsxs)("span",{children:["                    ",(0,o.jsxs)("span",{children:["Showing ",m*(p-1)+1," to ",Math.min(m*p,k.length)," of ",k.length," entries"]}),"              "]}),(0,o.jsxs)("div",{className:"flex justify-between w-full md:w-auto md:gap-2",children:[(0,o.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(1===p?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>D(p-1),disabled:1===p,children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Previous"]}),(0,o.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(p===C?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>D(p+1),disabled:p===C,children:["Next",(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=1502.a000937c.chunk.js.map