"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9681],{39681:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var t=a(65043),r=a(86213),n=a(60184),d=a(21197),i=a(59255),l=a(70579);const c=r.A.create({baseURL:"/vps/api"});function o(){const[e,s]=(0,t.useState)(!0),[a,r]=(0,t.useState)([]),[o,h]=(0,t.useState)(!1),[x,u]=(0,t.useState)(null);(0,t.useEffect)((()=>{h(!0),c.get("/bookings/assigned").then((e=>{r(e.data.data),u(null)})).catch((()=>u("Failed to load your assigned jobs"))).finally((()=>h(!1)))}),[]);return(0,l.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,l.jsx)(d.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,l.jsxs)("div",{className:"flex flex-1",children:[(0,l.jsx)(i.A,{isSidebarOpen:e}),(0,l.jsxs)("main",{className:"flex-1 p-6 bg-gray-100 overflow-auto",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Your Assigned Jobs"}),x&&(0,l.jsx)("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:x}),o?(0,l.jsx)("div",{children:"Loading\u2026"}):0===a.length?(0,l.jsx)("div",{className:"text-gray-600",children:"No jobs assigned to your van."}):(0,l.jsx)("div",{className:"space-y-4",children:a.map((e=>(0,l.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,l.jsxs)("div",{className:"text-gray-800 mb-1",children:[(0,l.jsx)("strong",{children:"Customer:"})," ",e.customer.name," (",e.customer.phone,")"]}),(0,l.jsxs)("div",{className:"text-gray-700 mb-1",children:[(0,l.jsx)("strong",{children:"Pickup:"})," ",e.pickupAddress.street,", ",e.pickupAddress.area,", ",e.pickupAddress.city]}),(0,l.jsxs)("div",{className:"text-gray-700 mb-1",children:[(0,l.jsx)("strong",{children:"When:"})," ","scheduled"===e.type?new Date(e.scheduledFor).toLocaleString():"ASAP"]}),(0,l.jsxs)("div",{className:"text-gray-700 mb-4",children:[(0,l.jsx)("strong",{children:"Remark:"})," ",e.remark||(0,l.jsx)("em",{children:"none"})]}),(0,l.jsxs)("button",{onClick:()=>(async e=>{try{await c.patch(`/bookings/${e}/claim`,{}),r((s=>s.filter((s=>s._id!==e))))}catch(t){var s,a;alert("Claim failed: "+((null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||t.message))}})(e._id),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 flex items-center gap-1",children:[(0,l.jsx)(n.CMH,{})," Claim"]})]},e._id)))})]})]})]})}c.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e}))}}]);
//# sourceMappingURL=9681.01d0d36c.chunk.js.map