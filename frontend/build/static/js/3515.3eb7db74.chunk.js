"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3515],{3656:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(65043),l=s(66727),o=s(86213),r=s(21197),n=s(59255),i=s(14840),d=s(60184),c=s(49804),m=s(26873),x=s(70579);const u=()=>{var e,t,s;const u=(0,l.Zp)(),[h]=(0,l.ok)(),f=h.get("id"),p=localStorage.getItem("role"),g=localStorage.getItem("storeId");(0,a.useEffect)((()=>{window.innerWidth<768&&N(!1)}),[]),(0,a.useEffect)((()=>{f&&(async()=>{S(!0);const e=localStorage.getItem("token");if(e)try{const t=await fetch("api/rider-commission/all",{headers:{Authorization:`Bearer ${e}`}}),s=await t.json(),a=Array.isArray(s)?s:Array.isArray(s.data)?s.data:[];console.log(a);const l=a.find((e=>e._id===f));console.log("AAAaa"),console.log(l),R(l)}catch(t){console.error("Error fetching users:",t)}finally{S(!1)}else u("/")})()}),[f]);const[v,y]=(0,a.useState)([]),[w,b]=(0,a.useState)("storeAdmin"===p&&g?[g]:[]),[j,N]=(0,a.useState)(!0),[A,S]=(0,a.useState)(!1),[k,B]=(0,a.useState)([]),[C,R]=(0,a.useState)({storeId:"",totalAmount:0,moneyBreakdown:[]}),[z,E]=(0,a.useState)(""),[I,M]=(0,a.useState)(0);return(0,a.useEffect)((()=>{S(!0);const e=localStorage.getItem("token");if(!e)return u("/");const t={Authorization:`Bearer ${e}`};o.A.get("admin/store/add/store",{headers:t}).then((e=>y(e.data.result||[]))).catch(console.error),S(!1)}),[u]),(0,a.useEffect)((()=>{const e=v.map((e=>({label:e.StoreName,value:e._id})));B(e)}),[v]),(0,a.useEffect)((()=>console.log(C)),[C]),A?(0,x.jsx)(i.A,{}):(0,x.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,x.jsx)(r.A,{isSidebarOpen:j,setSidebarOpen:N}),(0,x.jsxs)("div",{className:"flex flex-grow",children:[(0,x.jsx)("div",{children:(0,x.jsx)(n.A,{isSidebarOpen:j})}),(0,x.jsxs)("form",{className:"flex-grow p-6 overflow-auto bg-gray-100",onSubmit:async e=>{e.preventDefault(),S(!0);try{const e=localStorage.getItem("token");if(f)await o.A.put(`api/rider-commission/${f}`,C,{headers:{Authorization:`Bearer ${e}`}}),alert(" updated successfully!");else{console.log(C);const t=await o.A.post("api/rider-commission/create",C,{headers:{Authorization:`Bearer ${e}`}});console.log(t),R({storeId:"",totalAmount:0,moneyBreakdown:[]}),alert("created successfully!")}}catch(t){console.error("Error submitting rider commission:",t),alert("Error submitting rider commission")}finally{S(!1)}},children:[(0,x.jsxs)("header",{className:"flex flex-col items-center justify-between mb-4 md:flex-row",children:[(0,x.jsxs)("div",{className:"flex flex-col items-baseline gap-2",children:[(0,x.jsx)("h1",{className:"text-2xl font-bold",children:f?"Edit Rider Commission Model":"Create Rider Commission Model"}),(0,x.jsx)("p",{className:"text-gray-600",children:f?"Modify details":"Fill in details"})]}),(0,x.jsxs)("nav",{className:"flex items-center text-gray-500",children:[(0,x.jsxs)(l.k2,{to:"/dashboard",className:"flex items-center text-gray-500 no-underline hover:text-gray-800",children:[(0,x.jsx)(d.$BV,{className:"mr-1"})," Home"]}),(0,x.jsx)(c.XWt,{className:"mx-2"}),(0,x.jsx)(l.k2,{to:"/rider-commission/view",className:"text-gray-500 no-underline hover:text-gray-800",children:"Rider Commission List"})]})]}),(0,x.jsxs)("div",{className:"flex flex-col gap-5 p-2 bg-white rounded-md md:flex-row",children:[(0,x.jsxs)("div",{className:"flex flex-col w-full",children:[(0,x.jsx)("label",{htmlFor:"Store",className:"text-xl font-semibold",children:"Store"}),(0,x.jsx)(m.Ay,{className:"w-full",placeholder:"Select Store",options:k,onChange:e=>R((t=>({...t,storeId:e.value}))),value:k.find((e=>{var t;return e.value===((null===(t=C.storeId)||void 0===t?void 0:t._id)||C.storeId)}))||null})]}),(0,x.jsxs)("div",{className:"flex flex-col w-full",children:[(0,x.jsx)("label",{htmlFor:"totalamount",className:"text-xl font-semibold",children:"Total Amount"}),(0,x.jsx)("input",{type:"Number",min:"0",value:C.totalAmount,name:"totalAmount",className:"px-1 py-2 border-2 rounded-md",placeholder:"Enter  Total Amount",onChange:e=>{const{name:t,value:s}=e.target;R((a=>({...a,[t]:"number"===e.target.type?Number(s):s})))}})]})]}),(0,x.jsxs)("div",{className:"flex flex-col gap-5 p-2 mt-5 bg-white rounded-md md:flex-row",children:[(0,x.jsxs)("div",{className:"flex flex-col w-full",children:[(0,x.jsx)("label",{htmlFor:"reason",className:"text-xl ",children:"Reason"}),(0,x.jsx)("input",{type:"text",name:"reason",className:"px-1 py-2 border-2 rounded-md",value:z,onChange:e=>E(e.target.value)})]}),(0,x.jsxs)("div",{className:"flex flex-col w-full",children:[(0,x.jsx)("label",{htmlFor:"amount",className:"text-xl font-semibold",children:"Amount"}),(0,x.jsx)("input",{type:"Number",min:"0",value:I,name:"amount",className:"px-1 py-2 border-2 rounded-md",placeholder:"Enter Amount",onChange:e=>M(Number(e.target.value))})]})]}),(0,x.jsxs)("div",{className:"flex flex-col justify-center gap-4 mt-6 md:flex-row",children:[(0,x.jsxs)("button",{className:"flex items-center gap-2 px-6 py-2 text-white transition-colors duration-200 rounded-lg shadow-md bg-emerald-500 hover:bg-emerald-600 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-opacity-50 active:bg-emerald-700",type:"button",onClick:e=>{e.preventDefault(),R((e=>({...e,moneyBreakdown:[...e.moneyBreakdown||[],{reason:z,amount:I}]}))),E(""),M(0)},children:[(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Breakdown"]}),(0,x.jsxs)("button",{type:"button",onClick:()=>{E(""),M(0)},className:"flex items-center gap-2 px-6 py-2 text-white transition-colors duration-200 rounded-lg shadow-md bg-amber-500 hover:bg-amber-600 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50 active:bg-amber-700",children:[(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"Reset Fields"]})]}),(0,x.jsx)("div",{className:"w-full mt-5 overflow-hidden rounded-lg shadow-sm ring-1 ring-gray-200",children:(0,x.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,x.jsx)("thead",{className:"bg-gray-50",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Reason"}),(0,x.jsx)("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Amount"}),(0,x.jsx)("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Actions"})]})}),(0,x.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[0===(null===(e=C.moneyBreakdown)||void 0===e?void 0:e.length)&&(0,x.jsx)("tr",{className:"transition-colors duration-150 hover:bg-gray-50",children:(0,x.jsx)("td",{className:"px-6 py-4 text-xl text-center text-gray-900 whitespace-nowrap",colSpan:"5",children:"Nothing is added"})}),(null===(t=C.moneyBreakdown)||void 0===t?void 0:t.length)>0&&(null===(s=C.moneyBreakdown)||void 0===s?void 0:s.map(((e,t)=>(0,x.jsxs)("tr",{className:"transition-colors duration-150 hover:bg-gray-50",children:[(0,x.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap",children:e.reason||"NA"}),(0,x.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:(0,x.jsx)("div",{className:"flex items-center",children:(0,x.jsx)("span",{children:e.amount})})}),(0,x.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-right whitespace-nowrap",children:(0,x.jsx)("div",{className:"flex justify-end space-x-3",children:(0,x.jsx)("button",{className:"text-red-600 transition-colors hover:text-red-900",onClick:()=>(e=>{const t=C.moneyBreakdown.filter(((t,s)=>s!==e));R((e=>({...e,moneyBreakdown:t})))})(t),type:"button",children:"Delete"})})})]}))))]})]})}),(0,x.jsxs)("div",{className:"flex flex-col justify-center gap-4 mt-8 md:flex-row",children:[(0,x.jsxs)("button",{type:"submit",className:"px-6 py-2.5 text-white bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-lg shadow-sm hover:shadow-md transition-all duration-200 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-opacity-50 active:translate-y-0 flex items-center gap-2",children:[(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:f?(0,x.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}):(0,x.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),f?"Update Commission":"Create Commission"]}),(0,x.jsxs)("button",{type:"button",className:"px-6 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:shadow-md transition-all duration-200 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-30 active:bg-gray-100 flex items-center gap-2",children:[(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Dashboard"]})]})]})]})]})}},14840:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(65043),l=s(21197),o=s(59255),r=s(70579);function n(){const[e,t]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,r.jsx)(l.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,r.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,r.jsx)("div",{children:(0,r.jsx)(o.A,{isSidebarOpen:e})}),(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,r.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},82284:(e,t,s)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}s.d(t,{A:()=>a})}}]);
//# sourceMappingURL=3515.3eb7db74.chunk.js.map