"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4321],{4321:(e,s,r)=>{r.r(s),r.d(s,{default:()=>i});var t=r(65043),a=r(66727),d=r(86213),l=r(14840),n=r(70579);const i=()=>{var e,s,r,i,o,c,h,x,m,p,u;const{id:j}=(0,a.g)(),g=(0,a.Zp)(),[N,v]=(0,t.useState)(null),[b,y]=(0,t.useState)(!0),[f,A]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async()=>{const e=localStorage.getItem("token");if(!e)return console.log("No token found redirecting..."),void g("/");try{const s=await d.A.get(`/api/purchases/${j}`,{headers:{Authorization:`Bearer ${e}`}});console.log("API Response:",s.data),s.data.success?v(s.data.data):A("Failed to fetch purchase details: "+s.data.message)}catch(s){console.error("API Error:",s),A(s.message||"An error occurred while fetching purchase details")}finally{y(!1)}})()}),[j,g]),b?(0,n.jsx)(l.A,{}):f?(0,n.jsx)("div",{className:"p-4 text-red-500",children:f}):N?(0,n.jsxs)("div",{className:"flex flex-col h-screen p-4",children:[(0,n.jsxs)("h1",{className:"text-2xl font-semibold mb-4",children:["Purchase Details - ",N.purchaseCode||"N/A"]}),(0,n.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Purchase Date:"})," ",new Date(N.purchaseDate).toLocaleDateString()]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Status:"})," ",N.status||"N/A"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Reference No:"})," ",N.referenceNo||"N/A"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Warehouse:"})," ",(null===(e=N.warehouse)||void 0===e?void 0:e.warehouseName)||"N/A"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Supplier:"})," ",(null===(s=N.supplier)||void 0===s?void 0:s.supplierName)||(null===(r=N.supplier)||void 0===r?void 0:r.email)||"No supplier"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Created By:"})," ",N.createdByModel," ",(null===(i=N.createdBy)||void 0===i?void 0:i.name)||`${null===(o=N.createdBy)||void 0===o?void 0:o.FirstName} ${null===(c=N.createdBy)||void 0===c?void 0:c.LastName}`||"N/A"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Note:"})," ",N.note||"N/A"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Grand Total:"})," \u20b9",(N.grandTotal||0).toFixed(2)]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Other Charges:"})," \u20b9",(N.otherCharges||0).toFixed(2)]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Discount on All:"})," \u20b9",(N.discountOnAll||0).toFixed(2)]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Paid Amount:"})," \u20b9",((null===(h=N.payments)||void 0===h?void 0:h.length)>0?N.payments[0].amount:0).toFixed(2)]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Payment Status:"})," ",(null===(x=N.payments)||void 0===x?void 0:x.length)>0?(N.grandTotal||0)===(N.payments[0].amount||0)?"Paid":(N.grandTotal||0)>(N.payments[0].amount||0)?"Pending":"Overpaid":"Pending"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Payment Note:"})," ",(null===(m=N.payments)||void 0===m||null===(p=m[0])||void 0===p?void 0:p.paymentNote)||"N/A"]})]})]}),(0,n.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Items"}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full bg-white border border-gray-300 shadow-sm",children:[(0,n.jsx)("thead",{className:"bg-gray-200",children:(0,n.jsx)("tr",{children:["Item Name","Quantity","Purchase Price","MRP","Discount","Total Amount"].map((e=>(0,n.jsx)("th",{className:"px-4 py-2 font-medium text-left border",children:e},e)))})}),(0,n.jsx)("tbody",{children:(null===(u=N.items)||void 0===u?void 0:u.map(((e,s)=>{var r,t;return(0,n.jsxs)("tr",{className:"bg-gray-100",children:[(0,n.jsx)("td",{className:"px-4 py-2 border",children:(null===(r=e.item)||void 0===r?void 0:r.itemName)||(null===(t=e.item)||void 0===t?void 0:t.name)||"N/A"}),(0,n.jsx)("td",{className:"px-4 py-2 border",children:e.quantity||"N/A"}),(0,n.jsxs)("td",{className:"px-4 py-2 border",children:["\u20b9",(e.purchasePrice||0).toFixed(2)]}),(0,n.jsxs)("td",{className:"px-4 py-2 border",children:["\u20b9",(e.mrp||0).toFixed(2)]}),(0,n.jsxs)("td",{className:"px-4 py-2 border",children:["\u20b9",(e.discount||0).toFixed(2)]}),(0,n.jsxs)("td",{className:"px-4 py-2 border",children:["\u20b9",(e.totalAmount||0).toFixed(2)]})]},s)})))||(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"7",className:"px-4 py-2 text-center border",children:"No items available"})})})]})}),(0,n.jsx)("div",{className:"mt-6 text-right",children:(0,n.jsx)("button",{className:"px-4 py-2 text-white bg-cyan-500 rounded hover:bg-cyan-600",onClick:()=>g(-1),children:"Back"})})]})]}):(0,n.jsx)("div",{className:"p-4",children:"No purchase data available"})}},14840:(e,s,r)=>{r.d(s,{A:()=>n});var t=r(65043),a=r(21197),d=r(59255),l=r(70579);function n(){const[e,s]=(0,t.useState)(!1);return(0,l.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,l.jsx)(a.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,l.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,l.jsx)("div",{children:(0,l.jsx)(d.A,{isSidebarOpen:e})}),(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,l.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}}}]);
//# sourceMappingURL=4321.2f0e1f22.chunk.js.map