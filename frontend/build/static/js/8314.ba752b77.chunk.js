"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8314],{14840:(e,t,s)=>{s.d(t,{A:()=>d});var a=s(65043),r=s(21197),i=s(59255),n=s(70579);function d(){const[e,t]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(r.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,n.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,n.jsx)("div",{children:(0,n.jsx)(i.A,{isSidebarOpen:e})}),(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,n.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},38314:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var a=s(65043),r=s(21197),i=s(59255),n=s(49804),d=s(60184),l=s(86213),c=s(14840),o=s(66727),m=s(70579);const x=function(){const[e,t]=(0,a.useState)(!0),[s,x]=(0,a.useState)([]),[h,u]=(0,a.useState)(""),[b,p]=(0,a.useState)([]),[f,v]=(0,a.useState)(!1),[g,j]=(0,a.useState)(""),[y,N]=(0,a.useState)({}),[w,S]=(0,a.useState)([]);(0,a.useEffect)((()=>{window.innerWidth<768&&t(!1),(async()=>{try{v(!0);const t=localStorage.getItem("token"),s=(await l.A.get("api/warehouses",{headers:{Authorization:`Bearer ${t}`}})).data.data||[];if(x(s),!h&&s.length>0){var e;const t=s.find((e=>e.isRestricted&&"Active"===e.status)),a=t?t._id:(null===(e=s.find((e=>"Active"===e.status)))||void 0===e?void 0:e._id)||"";u(a)}}catch(t){console.error("Error fetching warehouses:",t.message)}finally{v(!1)}})()}),[]),(0,a.useEffect)((()=>{const e=g.trim();h&&""!==e?(async(e,t)=>{if(t&&e)try{v(!0);const s=localStorage.getItem("token"),a=((await l.A.get("api/items",{headers:{Authorization:`Bearer ${s}`},params:{warehouse:t,search:e}})).data.data||[]).map((e=>{var t;const s=Boolean(e.parentItemId);return{...e,parentId:s?e.parentItemId:e._id,variantId:s?e._id:null,itemName:s?`${e.itemName} / ${e.variantName||"Variant"}`:e.itemName,itemCode:e.itemCode||"",barcode:(null===(t=e.barcodes)||void 0===t?void 0:t[0])||"",barcodes:e.barcodes||[],isVariant:s,currentStock:e.currentStock||0,warehouse:e.warehouse}})).filter((e=>{var s;return(null===(s=e.warehouse)||void 0===s?void 0:s._id)===t&&e.currentStock>0}));p(a);const r=a.find((t=>t.barcode===e||t.itemCode===e));r&&(k(r),j(""))}catch(s){console.error("Error fetching search items:",s.message),p([])}finally{v(!1)}else p([])})(e,h):p([])}),[g,h]),(0,a.useEffect)((()=>{j(""),p([]),S([])}),[h]);const k=e=>{const t=y[e._id]||1;w.find((t=>t._id===e._id))||S([...w,{...e,quantity:t}])},_=w.reduce(((e,t)=>e+(t.quantity||0)),0);return f?(0,m.jsx)(c.A,{}):(0,m.jsxs)("div",{className:"flex flex-col h-screen bg-gray-100",children:[(0,m.jsx)("style",{children:"\n        @media print {\n          /* Hide everything except the print\u2010area */\n          body * {\n            visibility: hidden;\n          }\n          .print-area, .print-area * {\n            visibility: visible;\n          }\n          .print-area {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n          }\n        }\n      "}),(0,m.jsx)(r.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,m.jsxs)("div",{className:"flex flex-grow",children:[(0,m.jsx)(i.A,{isSidebarOpen:e}),(0,m.jsxs)("div",{className:"flex-grow p-2 overflow-x-auto transition-all duration-300",children:[(0,m.jsxs)("header",{className:"flex flex-col items-center justify-between p-4 mb-1 bg-white rounded-md shadow sm:flex-row",children:[(0,m.jsxs)("div",{className:"flex items-baseline gap-2 sm:flex-row",children:[(0,m.jsx)("h1",{className:"text-xl font-semibold text-gray-800",children:"Print Labels"}),(0,m.jsx)("span",{className:"text-sm text-gray-600",children:"Add/Update Sales"})]}),(0,m.jsxs)("nav",{className:"flex items-center text-sm text-gray-500",children:[(0,m.jsxs)(o.N_,{to:"/dashboard",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,m.jsx)(d.$BV,{className:"mr-2"})," Home"]}),(0,m.jsx)(n.XWt,{className:"mx-2"}),(0,m.jsx)(o.N_,{to:"/print-labels",className:"text-gray-700 no-underline hover:text-cyan-600",children:"Print Labels"})]})]}),(0,m.jsxs)("div",{className:"p-4 mt-5 overflow-auto border-t-4 rounded-lg border-cyan-500",children:[(0,m.jsx)("div",{className:"flex justify-center mb-4",children:(0,m.jsxs)("select",{value:h,onChange:e=>u(e.target.value),className:"w-full max-w-xs px-4 py-2 border rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-cyan-400",children:[(0,m.jsx)("option",{value:"",children:"Select Warehouse"}),s.filter((e=>"Active"===e.status)).map((e=>(0,m.jsx)("option",{value:e._id,children:e.warehouseName},e._id)))]})}),(0,m.jsx)("div",{className:"flex justify-center mb-4",children:(0,m.jsx)("input",{type:"text",placeholder:"Item name / Barcode / Itemcode",className:"w-full px-4 py-2 text-gray-700 border border-gray-300 rounded-md md:w-1/2 lg:w-1/2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:g,onChange:e=>j(e.target.value),disabled:!h})}),""!==g.trim()&&b.length>0&&(0,m.jsx)("ul",{className:"max-h-60 overflow-y-auto bg-white border rounded shadow mb-4 p-2",children:b.map((e=>(0,m.jsxs)("li",{className:"flex items-center justify-between px-3 py-2 border-b last:border-none hover:bg-gray-50 cursor-pointer",onClick:()=>k(e),children:[(0,m.jsxs)("span",{className:"text-gray-800",children:[(0,m.jsx)("strong",{children:e.itemCode})," \u2014 ",e.itemName]}),(0,m.jsxs)("span",{className:"text-sm text-gray-500",children:["Stock: ",e.currentStock]})]},e._id)))}),(0,m.jsxs)("div",{className:"p-4 bg-white rounded-md shadow-md",children:[(0,m.jsxs)("div",{className:"flex justify-center gap-x-2",children:[(0,m.jsx)("div",{className:"w-64 px-4 py-2 text-sm font-semibold text-center text-white bg-cyan-600",children:"Item Name"}),(0,m.jsx)("div",{className:"w-64 px-4 py-2 text-sm font-semibold text-center text-white bg-cyan-600",children:"Quantity"}),(0,m.jsx)("div",{className:"w-24 px-4 py-2 text-sm font-semibold text-center text-white bg-cyan-600",children:"Action"})]}),0===w.length?(0,m.jsx)("div",{className:"py-4 text-center text-gray-500",children:"No items in print list"}):w.map((e=>(0,m.jsxs)("div",{className:"flex items-center justify-center py-2 border-t gap-x-2",children:[(0,m.jsx)("div",{className:"w-64 text-center",children:e.itemName}),(0,m.jsx)("div",{className:"w-64 text-center",children:(0,m.jsx)("input",{type:"number",min:"1",className:"w-20 py-1 text-center border border-gray-300 rounded-md",value:e.quantity,onChange:t=>S((s=>s.map((s=>s._id===e._id?{...s,quantity:parseInt(t.target.value,10)||1}:s))))})}),(0,m.jsx)("div",{className:"w-24 text-center",children:(0,m.jsx)("button",{className:"px-2 py-1 text-white bg-red-500 rounded",onClick:()=>{return t=e._id,void S(w.filter((e=>e._id!==t)));var t},children:"Remove"})})]},e._id))),(0,m.jsxs)("div",{className:"flex items-center mt-1 ml-20",children:[(0,m.jsx)("span",{className:"mr-2 font-semibold text-gray-700",children:"Total Labels:"}),(0,m.jsx)("span",{className:"text-gray-600",children:_})]}),(0,m.jsxs)("div",{className:"flex justify-center mt-2 space-x-4",children:[(0,m.jsx)("button",{className:"w-40 px-6 py-2 font-semibold text-white transition duration-300 bg-green-500 shadow-md hover:bg-green-600",onClick:()=>{alert("Preview:\n"+JSON.stringify(w,null,2))},children:"Preview"}),(0,m.jsx)("button",{className:"w-40 px-6 py-2 font-semibold text-white transition duration-300 bg-orange-500 shadow-md hover:bg-orange-600",onClick:()=>{S([])},children:"Close"})]})]}),(0,m.jsxs)("div",{className:"px-6 py-4 mt-2 bg-white rounded-md shadow-md",children:[(0,m.jsx)("div",{className:"mb-4 border-b-2 border-cyan-500"}),(0,m.jsx)("div",{className:"flex justify-end",children:(0,m.jsx)("button",{className:"px-4 py-1 font-bold text-white transition duration-300 shadow-md bg-cyan-600 hover:bg-cyan-600",onClick:()=>{window.print()},children:"Print"})})]})]})]})]}),(0,m.jsx)("div",{className:"print-area hidden",children:(0,m.jsx)("div",{className:"p-4",children:(0,m.jsx)("div",{className:"grid grid-cols-3 gap-4",children:w.map((e=>(0,m.jsxs)("div",{className:"border p-3 text-center break-inside-avoid",style:{pageBreakInside:"avoid"},children:[(0,m.jsx)("div",{className:"font-bold mb-2 text-lg",children:e.itemName}),(0,m.jsxs)("div",{className:"text-sm mb-1",children:["Code: ",e.itemCode]}),(0,m.jsxs)("div",{className:"text-sm mb-1",children:["Qty: ",e.quantity]})]},e._id)))})})})]})}}}]);
//# sourceMappingURL=8314.ba752b77.chunk.js.map