(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[57],{34598:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(65043),n=a(31782),r=a(49804),i=a(60184),l=a(96130),o=a(21197),c=a(59255),u=a(86213),d=a(26873),m=a(60446),h=a.n(m),f=a(66727),x=a(70579);const p=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),v=e=>{const t=(new Date).getFullYear();if(!e||"string"!==typeof e)return`SO/${t}/01`;const[a,s,n]=e.split("/");return"SO"!==a||!/^\d{4}$/.test(s)||isNaN(+n)?`SO/${t}/01`:`SO/${s}/${String(+n+1).padStart(2,"0")}`};function b(){var e;const t=(0,f.Zp)(),[a]=(0,f.ok)(),m=a.get("id"),[b,g]=(0,s.useState)([]),[j,N]=(0,s.useState)([]),[y,w]=(0,s.useState)([]),[$,S]=(0,s.useState)([]),[C,D]=(0,s.useState)([]),[M,A]=(0,s.useState)([]),[k,_]=(0,s.useState)(null),[O,I]=(0,s.useState)(null),[T,Y]=(0,s.useState)(h()().format("YYYY-MM-DD")),[P,L]=(0,s.useState)(""),[F,H]=(0,s.useState)(""),[R,E]=(0,s.useState)([]),[q,W]=(0,s.useState)(0),[z,B]=(0,s.useState)(""),[U,V]=(0,s.useState)(""),[Z,J]=(0,s.useState)(0),[G,Q]=(0,s.useState)(0),[K,X]=(0,s.useState)("percentage"),[ee,te]=(0,s.useState)(""),[ae,se]=(0,s.useState)(0),[ne,re]=(0,s.useState)(null),[ie,le]=(0,s.useState)(null),[oe,ce]=(0,s.useState)(null),[ue,de]=(0,s.useState)(""),[me,he]=(0,s.useState)([]),[fe,xe]=(0,s.useState)(window.innerWidth>=768),[pe,ve]=(0,s.useState)(""),[be,ge]=(0,s.useState)(!1),je=(0,s.useRef)(null),Ne=(0,s.useRef)(null);function ye(){var e,t;const a=Ne.current;a&&("function"===typeof a.reset?a.reset():"function"===typeof a.stopContinuousDecode?a.stopContinuousDecode():"function"===typeof a.stopStreams&&a.stopStreams(),Ne.current=null),null===(e=je.current)||void 0===e||null===(t=e.srcObject)||void 0===t||t.getTracks().forEach((e=>e.stop()))}(0,s.useEffect)((()=>{(async()=>{try{const a=localStorage.getItem("token");if(!a)return t("/login");const s={headers:{Authorization:`Bearer ${a}`}},[n,r,i,l,o]=await Promise.all([u.A.get("api/customer-data/all",s),u.A.get("api/warehouses",s),u.A.get("api/payment-types",s),u.A.get("api/accounts",s),u.A.get("api/terminals",s)]),c=(n.data.data||n.data).map((e=>({label:e.customerName,value:e._id})));if(w(c),!m){const e=c.find((e=>"walk-in customer"===e.label.toLowerCase()));I(e?e.value:null)}const d=(r.data.data||[]).filter((e=>"Active"===e.status));if(N(d.map((e=>{var t;return{label:e.warehouseName,value:e._id,store:e.store,cashAccount:(null===(t=e.cashAccount)||void 0===t?void 0:t._id)||e.cashAccount}}))),!m&&d.length){var e;const t=d.find((e=>e.isRestricted&&"Active"===e.status));_((null===t||void 0===t?void 0:t._id)||(null===(e=d[0])||void 0===e?void 0:e._id)||null)}if(S((i.data.data||i.data).map((e=>({label:e.paymentTypeName,value:e._id,name:e.paymentTypeName.toLowerCase()})))),D((l.data.data||l.data).map((e=>({label:e.accountName,value:e._id,parent:e.parentAccount})))),A((o.data.data||o.data).map((e=>({label:e.tid,value:e._id,warehouse:e.warehouse})))),m){const{data:e}=await u.A.get(`api/sales/${m}`,s);we(e)}}catch(a){console.error(a)}})()}),[]),(0,s.useEffect)((()=>{!async function(){if(k)try{const e={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},t=((await u.A.get("api/items",{...e,params:{warehouse:k}})).data.data||[]).map((e=>{const t=Boolean(e.parentItemId);return{...e,parentId:t?e.parentItemId:e._id,variantId:t?e._id:null,itemName:t?`${e.itemName} / ${e.variantName}`:e.itemName}}));g(t)}catch(e){console.error("Fetch items error",e),g([])}else g([])}()}),[k]);const we=e=>{var t,a,s;_(null===(t=e.warehouse)||void 0===t?void 0:t._id),I(null===(a=e.customer)||void 0===a?void 0:a._id),Y(h()(e.saleDate).format("YYYY-MM-DD")),L(e.dueDate?h()(e.dueDate).format("YYYY-MM-DD"):""),H(e.referenceNo||""),W(e.otherCharges||0),B(e.discountCouponCode||""),V(e.couponType||""),J(e.couponValue||0),Q(e.discountOnBill||0),te(e.note||"");const n=null===(s=e.payments)||void 0===s?void 0:s[0];var r;n&&(se(n.amount||0),de(n.paymentNote||""),re(null===(r=n.paymentType)||void 0===r?void 0:r._id),le(n.account||null),ce(n.terminal||null));he(e.payments||[]),E(e.items.map((e=>{var t,a;return{parentId:(null===(t=e.item)||void 0===t?void 0:t._id)||e._id,variantId:e.variant||null,itemName:e.itemName,itemCode:e.itemCode,salesPrice:e.unitPrice,discount:e.discount,taxRate:e.taxAmount?100*e.taxAmount/(e.unitPrice*e.quantity-e.discount):0,quantity:e.quantity,tax:(null===(a=e.tax)||void 0===a?void 0:a._id)||null}})))},$e=(0,s.useMemo)((()=>b.filter((e=>{var t;return(null===(t=e.warehouse)||void 0===t?void 0:t._id)===k}))),[b,k]);(0,s.useEffect)((()=>{E((e=>e.filter((e=>$e.some((t=>t._id===e.parentId))))))}),[$e]);const Se=(0,s.useMemo)((()=>{if(!pe.trim())return[];const e=new RegExp(p(pe.trim()),"i");return $e.filter((t=>{var a;return e.test(t.itemName)||e.test(t.itemCode)||e.test((null===(a=t.barcodes)||void 0===a?void 0:a.join(" "))||"")})).slice(0,15)}),[pe,$e]),Ce=e=>{const t=e.variantName?`${e.itemName} / ${e.variantName}`:e.itemName,a=R.findIndex((t=>t.parentId===(e.parentId||e._id)&&(t.variantId||null)===(e.variantId||null)));E(-1!==a?e=>e.map(((e,t)=>t===a?{...e,quantity:e.quantity+1}:e)):a=>{var s,n;return[...a,{parentId:e.parentId||e._id,variantId:e.variantId||null,itemName:t,itemCode:e.itemCode,salesPrice:e.salesPrice||0,discount:0,taxRate:(null===(s=e.tax)||void 0===s?void 0:s.taxPercentage)||0,quantity:1,tax:(null===(n=e.tax)||void 0===n?void 0:n._id)||null}]})};(0,s.useEffect)((()=>{if(!be)return;const e=new n.sx;return Ne.current=e,e.decodeFromConstraints({video:{facingMode:{exact:"environment"}}},je.current,(e=>{if(e){const t=e.getText(),a=$e.find((e=>{var a;return e.itemCode===t||(null===(a=e.barcodes)||void 0===a?void 0:a.includes(t))||e.itemName.toLowerCase()===t.toLowerCase()}));a&&Ce(a),ge(!1),ye()}})),()=>{ye()}}),[be,$e]);const De=(e,t,a)=>E((s=>s.map(((s,n)=>n===e?{...s,[t]:"itemName"===t?a:Number(a)}:s)))),Me=(0,s.useMemo)((()=>{let e=0;R.forEach((t=>{const a=(t.salesPrice||0)*t.quantity-(t.discount||0),s=a*(t.taxRate||0)/100;e+=a+s}));const t=Number(q)||0,a="percentage"===U?e*Z/100:"value"===U?Number(Z):0,s="percentage"===K?e*G/100:Number(G),n=e+t-a-s;return{sub:e.toFixed(2),coup:a.toFixed(2),doa:s.toFixed(2),grand:n>0?n.toFixed(2):"0.00"}}),[R,q,U,Z,G,K]);(0,s.useEffect)((()=>{m||se(Number(Me.grand))}),[Me.grand,m]);const Ae=j.find((e=>e.value===k)),ke=Ae&&Ae.cashAccount?C.filter((e=>e.value===Ae.cashAccount)):[],_e=null===(e=$.find((e=>e.value===ne)))||void 0===e?void 0:e.name,Oe="cash"===_e,Ie="bank"===_e;return(0,s.useEffect)((()=>{m||(async()=>{try{const e=localStorage.getItem("token");if(!e)return console.error("No token found, redirecting to login"),void t("/login");const a={headers:{Authorization:`Bearer ${e}`}},s=await u.A.get("api/sales",a),n=(Array.isArray(s.data.sales)?s.data.sales:[]).filter((e=>!e.isReturn&&!!e.referenceNo)).sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));console.log("Non-return sales:",n);const r=n.length?n[0].referenceNo:null;console.log("Last referenceNo:",r);const i=v(r);console.log("Generated referenceNo:",i),H(i)}catch(e){console.error("Could not auto-gen ref:",e);const t=v(null);console.log("Using default referenceNo:",t),H(t)}})()}),[m,t]),(0,x.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,x.jsx)(o.A,{isSidebarOpen:fe,setSidebarOpen:xe}),(0,x.jsxs)("div",{className:"flex flex-grow",children:[(0,x.jsx)(c.A,{isSidebarOpen:fe}),(0,x.jsxs)("main",{className:"flex flex-col flex-grow p-2 md:p-4 overflow-x-auto",children:[(0,x.jsxs)("header",{className:"bg-gray-200 rounded-md p-2 mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,x.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,x.jsx)("h1",{className:"font-semibold text-lg",children:"Sales"}),(0,x.jsxs)("span",{className:"text-xs",children:[m?"Update":"Add"," Sale"]})]}),(0,x.jsxs)("nav",{className:"flex items-center text-xs gap-1 text-gray-600",children:[(0,x.jsxs)(f.k2,{to:"/dashboard",className:"flex items-center gap-1 hover:text-cyan-600",children:[(0,x.jsx)(i.$BV,{})," Home"]}),(0,x.jsx)(r.XWt,{}),(0,x.jsx)(f.k2,{to:"/sale-list",className:"hover:text-cyan-600",children:"Sales List"})]})]}),(0,x.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"font-semibold text-sm",children:"Warehouse *"}),(0,x.jsx)(d.Ay,{options:j,value:j.find((e=>e.value===k))||null,onChange:e=>_(e.value)})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"font-semibold text-sm",children:"Sale Date *"}),(0,x.jsx)("input",{type:"date",className:"border rounded p-2 w-full",value:T,onChange:e=>Y(e.target.value)})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"font-semibold text-sm",children:"Due Date"}),(0,x.jsx)("input",{type:"date",className:"border rounded p-2 w-full",value:P,onChange:e=>L(e.target.value)})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"font-semibold text-sm",children:"Customer *"}),(0,x.jsx)(d.Ay,{options:y,value:y.find((e=>e.value===O))||null,onChange:e=>I(e.value)})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"font-semibold text-sm",children:"Reference No"}),(0,x.jsx)("input",{className:"border rounded p-2 w-full",value:F,onChange:e=>H(e.target.value)})]})]}),(0,x.jsxs)("div",{className:"relative flex items-center mt-4",children:[(0,x.jsx)(i.SCC,{className:"mr-2 text-gray-500"}),(0,x.jsx)("input",{className:"border rounded p-2 w-full",placeholder:"Item name / code / barcode",value:pe,onChange:e=>{const t=e.target.value;ve(t);const a=$e.find((e=>{var a;return null===(a=e.barcodes)||void 0===a?void 0:a.includes(t)}));a&&(Ce(a),ve(""))},onKeyDown:e=>{"Enter"===e.key&&Se[0]&&(Ce(Se[0]),ve(""))}}),(0,x.jsx)("button",{className:"ml-2",disabled:!k,onClick:()=>ge(!0),children:(0,x.jsx)(l.A,{className:"w-6 h-6 text-gray-500"})}),pe&&Se.length>0&&(0,x.jsx)("ul",{className:"absolute top-11 bg-white border rounded shadow w-full max-h-64 overflow-auto z-50",children:Se.map((e=>{var t;return(0,x.jsxs)("li",{className:"p-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{Ce(e),ve("")},children:[(0,x.jsx)("b",{children:e.itemCode})," \u2013 ",e.itemName,(null===(t=e.barcodes)||void 0===t?void 0:t.length)>0&&(0,x.jsxs)("span",{className:"text-gray-500",children:["(",e.barcodes[0],")"]})]},e._id)}))})]}),(0,x.jsx)("div",{className:"overflow-x-auto mt-4 rounded",children:(0,x.jsxs)("table",{className:"min-w-full border",children:[(0,x.jsx)("thead",{className:"bg-sky-600 text-white text-sm",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"p-1 border",children:"Name"}),(0,x.jsx)("th",{className:"p-1 border",children:"Code"}),(0,x.jsx)("th",{className:"p-1 border",children:"Qty"}),(0,x.jsx)("th",{className:"p-1 border",children:"Price"}),(0,x.jsx)("th",{className:"p-1 border",children:"Disc"}),(0,x.jsx)("th",{className:"p-1 border",children:"Tax %"}),(0,x.jsx)("th",{className:"p-1 border",children:"Action"})]})}),(0,x.jsx)("tbody",{children:0===R.length?(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"7",className:"text-center p-2",children:"No items"})}):R.map(((e,t)=>(0,x.jsxs)("tr",{className:"text-center text-sm odd:bg-gray-50",children:[(0,x.jsx)("td",{className:"border p-1",children:e.itemName}),(0,x.jsx)("td",{className:"border p-1",children:e.itemCode}),(0,x.jsx)("td",{className:"border p-1",children:(0,x.jsx)("input",{type:"number",min:"1",className:"border w-16",value:e.quantity,onChange:e=>De(t,"quantity",e.target.value)})}),(0,x.jsx)("td",{className:"border p-1",children:(0,x.jsx)("input",{type:"number",className:"border w-20",value:e.salesPrice,onChange:e=>De(t,"salesPrice",e.target.value)})}),(0,x.jsx)("td",{className:"border p-1",children:(0,x.jsx)("input",{type:"number",className:"border w-20",value:e.discount,onChange:e=>De(t,"discount",e.target.value)})}),(0,x.jsx)("td",{className:"border p-1",children:(0,x.jsx)("input",{type:"number",className:"border w-16",value:e.taxRate,onChange:e=>De(t,"taxRate",e.target.value)})}),(0,x.jsx)("td",{className:"border p-1",children:(0,x.jsx)("button",{className:"text-red-600",onClick:()=>(e=>E((t=>t.filter(((t,a)=>a!==e)))))(t),children:"Remove"})})]},t)))})]})}),(0,x.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[(0,x.jsxs)("div",{className:"space-y-3",children:[(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("label",{children:"Other Charges"}),(0,x.jsx)("input",{type:"number",className:"border p-1 w-28",value:q,onChange:e=>W(e.target.value)})]}),(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("label",{children:"Coupon Code"}),(0,x.jsx)("input",{className:"border p-1 w-40",value:z,onChange:e=>B(e.target.value)})]}),(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsxs)("label",{children:["Coupon ","percentage"===U?"%":"\u20b9"]}),(0,x.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,x.jsx)("input",{type:"number",className:"border p-1 w-24",value:Z,onChange:e=>J(e.target.value)}),(0,x.jsxs)("select",{className:"border p-1",value:U,onChange:e=>V(e.target.value),children:[(0,x.jsx)("option",{value:"",children:"None"}),(0,x.jsx)("option",{value:"percentage",children:"%"}),(0,x.jsx)("option",{value:"value",children:"Fixed"})]})]})]}),(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("label",{children:"Discount on All"}),(0,x.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,x.jsx)("input",{type:"number",className:"border p-1 w-24",value:G,onChange:e=>Q(e.target.value)}),(0,x.jsxs)("select",{className:"border p-1",value:K,onChange:e=>X(e.target.value),children:[(0,x.jsx)("option",{value:"percentage",children:"%"}),(0,x.jsx)("option",{value:"value",children:"Fixed"})]})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{children:"Note"}),(0,x.jsx)("textarea",{className:"border p-2 w-full min-h-[80px]",value:ee,onChange:e=>te(e.target.value)})]})]}),(0,x.jsxs)("div",{className:"border-l pl-4 space-y-2",children:[(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("span",{className:"font-semibold",children:"Subtotal"}),(0,x.jsx)("span",{children:Me.sub})]}),(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("span",{className:"font-semibold",children:"Other Charges"}),(0,x.jsx)("span",{children:Number(q).toFixed(2)})]}),(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("span",{className:"font-semibold",children:"Coupon Disc."}),(0,x.jsx)("span",{children:Me.coup})]}),(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("span",{className:"font-semibold",children:"Disc. on All"}),(0,x.jsx)("span",{children:Me.doa})]}),(0,x.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,x.jsx)("span",{children:"Grand Total"}),(0,x.jsx)("span",{children:Me.grand})]})]})]}),me.length>0&&(0,x.jsxs)("div",{className:"mt-6",children:[(0,x.jsx)("h2",{className:"text-base font-semibold text-cyan-500 mb-2",children:"Previous Payments"}),(0,x.jsx)("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"min-w-full border bg-white",children:[(0,x.jsx)("thead",{className:"bg-gray-200 text-sm",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"border p-1",children:"#"}),(0,x.jsx)("th",{className:"border p-1",children:"Date"}),(0,x.jsx)("th",{className:"border p-1",children:"Type"}),(0,x.jsx)("th",{className:"border p-1",children:"Amount"}),(0,x.jsx)("th",{className:"border p-1",children:"Note"}),(0,x.jsx)("th",{className:"border p-1",children:"Receipt"})]})}),(0,x.jsx)("tbody",{children:me.map(((e,t)=>{var a;return(0,x.jsxs)("tr",{className:"text-center odd:bg-gray-50 text-sm",children:[(0,x.jsx)("td",{className:"border p-1",children:t+1}),(0,x.jsx)("td",{className:"border p-1",children:h()(e.paymentDate).format("DD-MMM-YY")}),(0,x.jsx)("td",{className:"border p-1",children:null===(a=$.find((t=>t.value===e.paymentType)))||void 0===a?void 0:a.label}),(0,x.jsx)("td",{className:"border p-1",children:e.amount}),(0,x.jsx)("td",{className:"border p-1",children:e.paymentNote||"\u2013"}),(0,x.jsx)("td",{className:"border p-1",children:(0,x.jsx)(f.N_,{to:`/receipt/${m}`,className:"text-sky-600 underline",children:"view"})})]},t)}))})]})})]}),(0,x.jsxs)("div",{className:"bg-gray-100 p-4 mt-6 rounded-lg space-y-4",children:[(0,x.jsx)("h2",{className:"text-lg font-semibold",children:"Payment"}),(0,x.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{children:"Amount"}),(0,x.jsx)("input",{type:"number",min:"0",className:"border p-2 w-full",value:ae,onChange:e=>se(e.target.value)})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{children:"Payment Type"}),(0,x.jsx)(d.Ay,{options:$,value:$.find((e=>e.value===ne))||null,onChange:e=>{re(e.value),le(null),ce(null)}})]}),Oe&&(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{children:"Account"}),(0,x.jsx)(d.Ay,{options:ke,value:ke.find((e=>e.value===ie))||null,onChange:e=>le(e?e.value:null)})]}),Ie&&(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{children:"Terminal"}),(0,x.jsx)(d.Ay,{options:M.filter((e=>e.warehouse===k)),value:M.find((e=>e.value===oe))||null,onChange:e=>ce(e?e.value:null),placeholder:"Select TID"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{children:"Payment Note"}),(0,x.jsx)("textarea",{className:"border p-2 w-full min-h-[80px]",value:ue,onChange:e=>de(e.target.value)})]})]}),(0,x.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[(0,x.jsx)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-10 py-2 rounded",onClick:async()=>{try{const a=localStorage.getItem("token");if(!a)return;const s={headers:{Authorization:`Bearer ${a}`}};if(!k||!O||!R.length)return alert("Fill mandatory fields");if(ae>0&&!ne)return alert("Pick payment type");const n=R.map((e=>{const t=(e.salesPrice||0)*e.quantity-(e.discount||0),a=t*(e.taxRate||0)/100;return{item:e.parentId,variant:e.variantId||null,quantity:e.quantity,unitPrice:e.salesPrice,discount:e.discount,tax:e.tax||null,taxAmount:a,subtotal:t+a}})),r=[];if(ae>0){var e;const t={paymentType:ne,amount:Number(ae),paymentNote:ue},a=null===(e=$.find((e=>e.value===ne)))||void 0===e?void 0:e.name;"cash"===a&&(t.account=ie),"bank"===a&&(t.terminal=oe),r.push(t)}const i={warehouse:k,customer:O,saleDate:T,dueDate:P||null,referenceNo:F,items:n,otherCharges:Number(q)||0,discountCouponCode:z,couponType:U,couponValue:Number(Z)||0,discountOnBill:Number(Me.doa),note:ee,payments:r,subtotal:Number(Me.sub),grandTotal:Number(Me.grand),status:"Completed"};m?await u.A.put(`api/sales/${m}`,i,s):await u.A.post("api/sales",i,s),alert("Saved \u2714\ufe0f"),t("/sale-list")}catch(n){var a,s;alert((null===(a=n.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||n.message),console.error(n)}},children:m?"Update":"Save"}),(0,x.jsx)("button",{className:"bg-orange-500 hover:bg-orange-600 text-white px-10 py-2 rounded",onClick:()=>t("/sale-list"),children:"Cancel"})]}),be&&(0,x.jsxs)("div",{className:"fixed inset-0 bg-black/70 flex flex-col items-center justify-center z-50",children:[(0,x.jsx)("div",{className:"w-72 h-72 border-4 border-white overflow-hidden relative",children:(0,x.jsx)("video",{ref:je,className:"object-cover w-full h-full",autoPlay:!0,muted:!0,playsInline:!0})}),(0,x.jsx)("button",{className:"mt-4 bg-red-600 text-white px-4 py-2 rounded",onClick:()=>{ye(),ge(!1)},children:"Close"})]})]})]})]})}},60446:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,a=36e5,s="millisecond",n="second",r="minute",i="hour",l="day",o="week",c="month",u="quarter",d="year",m="date",h="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||t[0])+"]"}},v=function(e,t,a){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(a)+e},b={s:v,z:function(e){var t=-e.utcOffset(),a=Math.abs(t),s=Math.floor(a/60),n=a%60;return(t<=0?"+":"-")+v(s,2,"0")+":"+v(n,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var s=12*(a.year()-t.year())+(a.month()-t.month()),n=t.clone().add(s,c),r=a-n<0,i=t.clone().add(s+(r?-1:1),c);return+(-(s+(a-n)/(r?n-i:i-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:o,d:l,D:m,h:i,m:r,s:n,ms:s,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",j={};j[g]=p;var N="$isDayjsObject",y=function(e){return e instanceof C||!(!e||!e[N])},w=function e(t,a,s){var n;if(!t)return g;if("string"==typeof t){var r=t.toLowerCase();j[r]&&(n=r),a&&(j[r]=a,n=r);var i=t.split("-");if(!n&&i.length>1)return e(i[0])}else{var l=t.name;j[l]=t,n=l}return!s&&n&&(g=n),n||!s&&g},$=function(e,t){if(y(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new C(a)},S=b;S.l=w,S.i=y,S.w=function(e,t){return $(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function p(e){this.$L=w(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[N]=!0}var v=p.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(f);if(s){var n=s[2]-1||0,r=(s[7]||"0").substring(0,3);return a?new Date(Date.UTC(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)):new Date(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return S},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(e,t){var a=$(e);return this.startOf(t)<=a&&a<=this.endOf(t)},v.isAfter=function(e,t){return $(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<$(e)},v.$g=function(e,t,a){return S.u(e)?this[t]:this.set(a,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var a=this,s=!!S.u(t)||t,u=S.p(e),h=function(e,t){var n=S.w(a.$u?Date.UTC(a.$y,t,e):new Date(a.$y,t,e),a);return s?n:n.endOf(l)},f=function(e,t){return S.w(a.toDate()[e].apply(a.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),a)},x=this.$W,p=this.$M,v=this.$D,b="set"+(this.$u?"UTC":"");switch(u){case d:return s?h(1,0):h(31,11);case c:return s?h(1,p):h(0,p+1);case o:var g=this.$locale().weekStart||0,j=(x<g?x+7:x)-g;return h(s?v-j:v+(6-j),p);case l:case m:return f(b+"Hours",0);case i:return f(b+"Minutes",1);case r:return f(b+"Seconds",2);case n:return f(b+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var a,o=S.p(e),u="set"+(this.$u?"UTC":""),h=(a={},a[l]=u+"Date",a[m]=u+"Date",a[c]=u+"Month",a[d]=u+"FullYear",a[i]=u+"Hours",a[r]=u+"Minutes",a[n]=u+"Seconds",a[s]=u+"Milliseconds",a)[o],f=o===l?this.$D+(t-this.$W):t;if(o===c||o===d){var x=this.clone().set(m,1);x.$d[h](f),x.init(),this.$d=x.set(m,Math.min(this.$D,x.daysInMonth())).$d}else h&&this.$d[h](f);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[S.p(e)]()},v.add=function(s,u){var m,h=this;s=Number(s);var f=S.p(u),x=function(e){var t=$(h);return S.w(t.date(t.date()+Math.round(e*s)),h)};if(f===c)return this.set(c,this.$M+s);if(f===d)return this.set(d,this.$y+s);if(f===l)return x(1);if(f===o)return x(7);var p=(m={},m[r]=t,m[i]=a,m[n]=e,m)[f]||1,v=this.$d.getTime()+s*p;return S.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||h;var s=e||"YYYY-MM-DDTHH:mm:ssZ",n=S.z(this),r=this.$H,i=this.$m,l=this.$M,o=a.weekdays,c=a.months,u=a.meridiem,d=function(e,a,n,r){return e&&(e[a]||e(t,s))||n[a].slice(0,r)},m=function(e){return S.s(r%12||12,e,"0")},f=u||function(e,t,a){var s=e<12?"AM":"PM";return a?s.toLowerCase():s};return s.replace(x,(function(e,s){return s||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return l+1;case"MM":return S.s(l+1,2,"0");case"MMM":return d(a.monthsShort,l,c,3);case"MMMM":return d(c,l);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(a.weekdaysMin,t.$W,o,2);case"ddd":return d(a.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(r);case"HH":return S.s(r,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return f(r,i,!0);case"A":return f(r,i,!1);case"m":return String(i);case"mm":return S.s(i,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return n}return null}(e)||n.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(s,m,h){var f,x=this,p=S.p(m),v=$(s),b=(v.utcOffset()-this.utcOffset())*t,g=this-v,j=function(){return S.m(x,v)};switch(p){case d:f=j()/12;break;case c:f=j();break;case u:f=j()/3;break;case o:f=(g-b)/6048e5;break;case l:f=(g-b)/864e5;break;case i:f=g/a;break;case r:f=g/t;break;case n:f=g/e;break;default:f=g}return h?f:S.a(f)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return j[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),s=w(e,t,!0);return s&&(a.$L=s),a},v.clone=function(){return S.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},p}(),D=C.prototype;return $.prototype=D,[["$ms",s],["$s",n],["$m",r],["$H",i],["$W",l],["$M",c],["$y",d],["$D",m]].forEach((function(e){D[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),$.extend=function(e,t){return e.$i||(e(t,C,$),e.$i=!0),$},$.locale=w,$.isDayjs=y,$.unix=function(e){return $(1e3*e)},$.en=j[g],$.Ls=j,$.p={},$}()},82284:(e,t,a)=>{"use strict";function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}a.d(t,{A:()=>s})},96130:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(65043);const n=s.forwardRef((function(e,t){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"}))}))}}]);
//# sourceMappingURL=57.a4f2b6c7.chunk.js.map