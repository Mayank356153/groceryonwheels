"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3462],{14840:(e,a,s)=>{s.d(a,{A:()=>l});var t=s(65043),r=s(21197),n=s(59255),o=s(70579);function l(){const[e,a]=(0,t.useState)(!1);return(0,o.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,o.jsx)(r.A,{isSidebarOpen:e,setSidebarOpen:a}),(0,o.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,o.jsx)("div",{children:(0,o.jsx)(n.A,{isSidebarOpen:e})}),(0,o.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[(0,o.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,o.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},73462:(e,a,s)=>{s.r(a),s.d(a,{default:()=>x});var t=s(65043),r=s(66727),n=s(86213),o=s(21197),l=s(59255),d=s(14840),c=s(49804),i=s(60184),m=s(70579);const x=function(){const e=(0,r.Zp)(),[a]=(0,r.ok)(),s=a.get("id"),[x,p]=(0,t.useState)(!0),[u,h]=(0,t.useState)(!1),[b,g]=(0,t.useState)([]),[y,f]=(0,t.useState)([]),[j,v]=(0,t.useState)([]);(0,t.useEffect)((()=>{window.innerWidth<768&&p(!1)}),[]);const[N,w]=(0,t.useState)({date:"",referenceNo:"",category:"",expenseFor:"",paymentType:"",account:"",amount:"",note:"",status:"Active"});(0,t.useEffect)((()=>{A(),S(),k()}),[]);const A=async()=>{try{const e=await n.A.get("api/expense-categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});g(Array.isArray(e.data)?e.data:e.data.data||[])}catch(e){console.error("Error fetching expense categories:",e.message)}},S=async()=>{try{const e=await n.A.get("api/payment-types",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});f(e.data.data||[])}catch(e){console.error("Error fetching payment types:",e.message)}},k=async()=>{try{const e=await n.A.get("api/accounts",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});v(e.data.data||[])}catch(e){console.error("Error fetching accounts:",e.message)}};(0,t.useEffect)((()=>{if(s){(async()=>{h(!0);try{var e,a,t;const r=(await n.A.get(`api/expenses/${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data;w({date:r.date?r.date.split("T")[0]:"",referenceNo:r.referenceNo||"",category:(null===(e=r.category)||void 0===e?void 0:e._id)||"",expenseFor:r.expenseFor||"",paymentType:(null===(a=r.paymentType)||void 0===a?void 0:a._id)||"",account:(null===(t=r.account)||void 0===t?void 0:t._id)||"",amount:r.amount||"",note:r.note||"",status:r.status||"Active"})}catch(r){console.error("Error fetching expense:",r.message)}finally{h(!1)}})()}}),[s]);const E=e=>{w({...N,[e.target.name]:e.target.value})};return u?(0,m.jsx)(d.A,{}):(0,m.jsxs)("div",{className:"flex flex-col h-screen bg-gray-100",children:[(0,m.jsx)(o.A,{isSidebarOpen:x,setSidebarOpen:p}),(0,m.jsxs)("div",{className:"flex flex-grow",children:[(0,m.jsx)(l.A,{isSidebarOpen:x}),(0,m.jsxs)("div",{className:"flex-grow p-4  transition-all duration-300 ",children:[(0,m.jsxs)("header",{className:"flex flex-col items-center justify-between p-4 mb-1 bg-white rounded-md shadow sm:flex-row",children:[(0,m.jsxs)("div",{className:"flex items-baseline gap-2 sm:flex-row",children:[(0,m.jsx)("h1",{className:"text-xl font-semibold text-gray-800",children:s?"Edit Expense":"Expense"}),(0,m.jsx)("span",{className:"text-sm text-gray-600",children:s?"Edit Expense":"Add Expense"})]}),(0,m.jsxs)("nav",{className:"flex items-center text-sm text-gray-500",children:[(0,m.jsxs)("a",{href:"/dashboard",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,m.jsx)(i.$BV,{className:"mr-2"})," Home"]}),(0,m.jsx)(c.XWt,{className:"mx-2 "}),(0,m.jsx)("a",{href:"/expense-list",className:"text-gray-700 no-underline hover:text-cyan-600",children:"Expense List"})]})]}),(0,m.jsx)("div",{className:"p-4 bg-white border-t-4 rounded-md shadow-md border-cyan-500",children:(0,m.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),h(!0);try{const a={...N};""===a.category&&delete a.category,""===a.account&&delete a.account,s?(await n.A.put(`api/expenses/${s}`,a,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Expense updated successfully!")):(await n.A.post("api/expenses",a,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Expense created successfully!")),e("/expense-list")}catch(t){console.error("Error submitting expense:",t.message),alert("Error submitting expense")}finally{h(!1)}},children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block mb-1 font-semibold",children:"Expense Date"}),(0,m.jsx)("input",{type:"date",name:"date",value:N.date,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block mb-1 font-semibold",children:"Category"}),(0,m.jsxs)("select",{name:"category",value:N.category,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,m.jsx)("option",{value:"",children:"Select Category"}),b.map((e=>(0,m.jsx)("option",{value:e._id,children:e.categoryName},e._id)))]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block mb-1 font-semibold",children:"Payment Type"}),(0,m.jsxs)("select",{name:"paymentType",value:N.paymentType,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:[(0,m.jsx)("option",{value:"",children:"Select"}),y.map((e=>(0,m.jsx)("option",{value:e._id,children:e.paymentTypeName},e._id)))]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block mb-1 font-semibold",children:"Account"}),(0,m.jsxs)("select",{name:"account",value:N.account,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,m.jsx)("option",{value:"",children:"None"}),j.map((e=>(0,m.jsx)("option",{value:e._id,children:e.accountName},e._id)))]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block mb-1 font-semibold",children:"Reference No."}),(0,m.jsx)("input",{type:"text",name:"referenceNo",value:N.referenceNo,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block mb-1 font-semibold",children:"Expense For"}),(0,m.jsx)("input",{type:"text",name:"expenseFor",value:N.expenseFor,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block mb-1 font-semibold",children:"Amount"}),(0,m.jsx)("input",{type:"number",name:"amount",value:N.amount,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block mb-1 font-semibold",children:"Note"}),(0,m.jsx)("textarea",{name:"note",rows:"2",value:N.note,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),(0,m.jsxs)("div",{className:"flex justify-end mt-4 space-x-2",children:[(0,m.jsx)("button",{type:"submit",className:"px-6 py-2 font-semibold text-white bg-green-500 rounded-md shadow hover:bg-green-600",children:s?"Update Expense":"Save"}),(0,m.jsx)("button",{type:"button",onClick:()=>{e("/expense-list")},className:"px-6 py-2 font-semibold text-white bg-orange-500 rounded-md shadow hover:bg-orange-600",children:"Close"})]})]})})]})]})]})}}}]);
//# sourceMappingURL=3462.ae2c3a98.chunk.js.map