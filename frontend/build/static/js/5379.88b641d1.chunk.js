"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5379],{14840:(e,t,s)=>{s.d(t,{A:()=>o});var r=s(65043),a=s(21197),n=s(59255),l=s(70579);function o(){const[e,t]=(0,r.useState)(!1);return(0,l.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,l.jsx)(a.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,l.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,l.jsx)("div",{children:(0,l.jsx)(n.A,{isSidebarOpen:e})}),(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,l.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},75379:(e,t,s)=>{s.r(t),s.d(t,{default:()=>O});var r=s(65043),a=s(66727),n=s(60184),l=s(37762),o=s(64857),i=s(11238),d=s(49804),c=s(21197),m=s(59255),x=s(86213),u=s(14840),h=s(26873),g=s(70579);const y=e=>{let{isOpen:t,onClose:s,data:a,rider:l}=e;const[o,i]=(0,r.useState)([]);console.log(a);const[d,c]=(0,r.useState)({transferAccountId:"",amount:"",riderID:l._id,riderAccountId:a._id});(0,r.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token");if(!e)return void alert("No token found. Please log in.");const t=await x.A.get("api/accounts",{headers:{Authorization:`Bearer ${e}`}});console.log(t.data.data||[]);const s=t.data.data.map((e=>({label:`${e.accountName}-${e.accountNumber}`,value:e._id})));i(s)}catch(e){console.error("Error fetching accounts:",e),alert("Error fetching accounts")}})()}),[]);return t?(0,g.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-opacity-55",children:[(0,g.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-10 backdrop-blur-[1px]",onClick:s}),(0,g.jsxs)("div",{className:"relative w-full max-w-md bg-white border border-gray-200 rounded-lg shadow-xl",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold",children:"Money Transfer"}),(0,g.jsx)("button",{onClick:s,className:"text-gray-500 transition-colors hover:text-gray-700",children:(0,g.jsx)(n.QCr,{})})]}),(0,g.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),console.log(d);try{const e=await x.A.post("api/money-transfer/create",d,{headers:{Authorization:`bearer ${localStorage.getItem("token")}`}});console.log(e),s()}catch(t){console.log("Error in making deposit",t.message)}},className:"p-6",children:[(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Rider Name"}),(0,g.jsx)("input",{type:"text",name:"riderName",value:`${l.firstname} ${l.lastname}`,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Account Number"}),(0,g.jsx)("input",{type:"text",name:"accountNumber",value:a.accountNumber,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0})]}),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Account Transfer To"}),(0,g.jsx)(h.Ay,{options:o,onChange:e=>c((t=>({...t,transferAccountId:e.value})))})]}),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Transfer Amount"}),(0,g.jsx)("input",{type:"number",name:"depositAmount",value:d.depositAmount,onChange:e=>c((t=>({...t,amount:Number(e.target.value)}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0,min:"0"})]}),(0,g.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,g.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 transition-colors bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),(0,g.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white transition-colors rounded-md bg-cyan-600 hover:bg-cyan-700",children:"Transfer"})]})]})]})]}):null};var p=s(18210),b=s(91176),f=s(76691),j=s(39908),N=s(63405),v=s(7875);const w=e=>{let{transactions:t,setRiderTransactionsView:a,riderInfo:n}=e;const[i,d]=(0,r.useState)({startDate:(0,p.e)(new Date,7),endDate:new Date}),[c,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(t);(0,r.useEffect)((()=>{if(t.length>0){const e=t.filter((e=>{const t=new Date(e.createdAt);return t>=(0,b.o)(i.startDate)&&t<=(0,f.D)(i.endDate)}));u(e)}}),[i]);const h=(e,t)=>{d((s=>({...s,[t]:new Date(e.target.value)})))};return(0,g.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm",children:(0,g.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh]  bg-white rounded-xl shadow-2xl",children:[(0,g.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between p-6 bg-white border-b",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Rider Transactions History"}),(0,g.jsxs)("p",{className:"text-sm text-gray-500",children:[x.length," ",1===x.length?"transaction":"transactions"," found",i.startDate&&i.endDate&&(0,g.jsxs)("span",{className:"ml-2",children:["(",(0,j.GP)(i.startDate,"MMM dd")," - ",(0,j.GP)(i.endDate,"MMM dd"),")"]})]})]}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsxs)("button",{onClick:()=>m(!c),className:"flex items-center gap-1 px-3 py-1 text-sm font-medium text-gray-700 transition-colors bg-gray-100 rounded-lg hover:bg-gray-200",children:[(0,g.jsx)(N.A,{size:16}),"Filter Dates"]}),(0,g.jsx)("button",{onClick:()=>a(!1),className:"p-1 text-gray-500 transition-colors rounded-full hover:bg-gray-100 hover:text-gray-700","aria-label":"Close",children:(0,g.jsx)(v.A,{size:24})})]})]}),c&&(0,g.jsxs)("div",{className:"sticky z-10 p-4 border-b top-20 bg-gray-50",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),(0,g.jsx)("input",{type:"date",value:(0,j.GP)(i.startDate,"yyyy-MM-dd"),onChange:e=>h(e,"startDate"),className:"w-full p-2 mt-1 border border-gray-300 rounded-md"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),(0,g.jsx)("input",{type:"date",value:(0,j.GP)(i.endDate,"yyyy-MM-dd"),onChange:e=>h(e,"endDate"),className:"w-full p-2 mt-1 border border-gray-300 rounded-md"})]})]}),(0,g.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,g.jsx)("button",{onClick:()=>{d({startDate:(0,p.e)(new Date,7),endDate:new Date})},className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800",children:"Reset"}),(0,g.jsx)("button",{onClick:()=>m(!1),className:"px-3 py-1 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Apply"})]})]}),(0,g.jsx)("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:0===x.length?(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,g.jsx)("div",{className:"p-4 mb-4 bg-gray-100 rounded-full",children:(0,g.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No transactions yet"}),(0,g.jsx)("p",{className:"mt-1 text-gray-500",children:"Transactions will appear here once made"})]}):(0,g.jsx)("div",{className:"divide-y divide-gray-100",children:x.map((e=>(0,g.jsx)("div",{className:"p-4 transition-colors hover:bg-gray-50/50",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("div",{className:"p-3 rounded-lg "+("Debited"===e.format?"bg-red-50 text-red-600":"bg-green-50 text-green-600"),children:"Debited"===e.format?(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}):(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"font-medium text-gray-900",children:e.type}),(0,g.jsx)("p",{className:"text-sm text-gray-500",children:(0,j.GP)(new Date(e.createdAt),"MMM dd, yyyy \u2022 hh:mm a")})]})]}),(0,g.jsxs)("div",{className:"text-right",children:[(0,g.jsxs)("p",{className:"font-medium "+("Debited"===e.format?"text-red-600":"text-green-600"),children:["Debited"===e.format?"-":"+",e.amount.toLocaleString()]}),(0,g.jsx)("p",{className:"text-xs text-gray-500",children:e.transactionId})]})]})},e._id)))})}),(0,g.jsx)("div",{className:"sticky bottom-0 p-4 bg-white border-t",children:(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("div",{className:"flex gap-2",children:t.length>0&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("button",{onClick:()=>{Promise.resolve().then(s.bind(s,11238)).then((e=>{var t,s;const r=[["Rider Information","","","","",""],["Name:",(null===n||void 0===n?void 0:n.username)||"N/A"],["ID:",(null===n||void 0===n?void 0:n._id)||"N/A"],["Phone:",(null===n||void 0===n?void 0:n.mobile)||"N/A"],["Email:",(null===n||void 0===n?void 0:n.email)||"N/A"],["Account Number:",(null===n||void 0===n||null===(t=n.riderAccount)||void 0===t?void 0:t.accountNumber)||"N/A"],[],["Transaction History","","","","",""],[]],a=["Transaction ID","Type","Amount","Transaction Type","Date","Status"],l=x.map((e=>[e.transactionId||e._id||"N/A",e.type||"N/A",e.amount||0,e.format||"N/A",e.createdAt?(0,j.GP)(new Date(e.createdAt),"MMM dd, yyyy hh:mm a"):"N/A","Completed"])),o=[...r,a,...l],i=e.utils.aoa_to_sheet(o),d=(e,t)=>{var s;i[e]||(i[e]={t:"s",v:(null===(s=i[e])||void 0===s?void 0:s.v)||""});i[e].s=t};d("A1",{font:{bold:!0,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"4472C4"}}}),d("A7",{font:{bold:!0,size:14,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"70AD47"}}}),a.forEach(((t,s)=>{const a=e.utils.encode_cell({r:r.length,c:s});d(a,{font:{bold:!0},fill:{fgColor:{rgb:"F2F2F2"}}})})),i["!cols"]=[{wch:24},{wch:18},{wch:12},{wch:18},{wch:22},{wch:12}];const c=e.utils.book_new();e.utils.book_append_sheet(c,i,"Rider Transactions");const m=`Transactions_${(null===n||void 0===n||null===(s=n.username)||void 0===s?void 0:s.replace(/\s+/g,"_"))||"Rider"}_${(new Date).toISOString().slice(0,10)}.xlsx`;e.writeFile(c,m)})).catch((e=>{console.error("Error exporting to Excel:",e),alert("Failed to export transactions. Please try again.")}))},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white transition-colors bg-green-600 rounded-lg hover:bg-green-700",children:[(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Excel"]}),(0,g.jsxs)("button",{onClick:()=>{const e=new l.uE;if(console.log(n),n){e.setFontSize(16),e.setTextColor(40,53,147),e.text("Rider Information",14,20),e.setFontSize(10),e.setTextColor(0,0,0),console.log("username:",n.username),console.log("id:",n._id),console.log("mobile:",n.mobile),console.log("email:",n.email);const t=[["Name:",n.username||"N/A"],["ID:",n._id||"N/A"],["Phone:",n.mobile||"N/A"],["Email:",n.email||"N/A"],["Date Range:",`${(0,j.GP)(i.startDate,"MMM dd, yyyy")} - ${(0,j.GP)(i.endDate,"MMM dd, yyyy")}`]];console.log(t),(0,o.cs)(e,{startY:25,head:[["",""]],body:t,theme:"grid",headStyles:{fillColor:[255,255,255],textColor:[0,0,0]},styles:{fontSize:10,cellPadding:1}})}else e.text("No rider information available",14,20);const t=n?e.lastAutoTable.finalY+15:25;e.setFontSize(16),e.setTextColor(40,53,147),e.text("Transaction History",14,t);const s=x.length>0?x.map((e=>[e.transactionId||e._id||"N/A",e.type||"N/A",`${"Debited"===e.format?"-":"+"}${e.amount||0}`,e.format||"N/A",e.createdAt?(0,j.GP)(new Date(e.createdAt),"MMM dd, yyyy hh:mm a"):"N/A"])):[["No transactions available","","","",""]];(0,o.cs)(e,{startY:t+10,head:[["Transaction ID","Type","Amount","Transaction Type","Date"]],body:s,theme:"grid",headStyles:{fillColor:[40,53,147],textColor:[255,255,255]},alternateRowStyles:{fillColor:[240,240,240]},styles:{fontSize:9,cellPadding:3}});const r=null!==n&&void 0!==n&&n.username?n.username.replace(/\s+/g,"_"):"Rider",a=(new Date).toISOString().slice(0,10);e.save(`Transactions_${r}_${a}.pdf`)},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white transition-colors bg-red-600 rounded-lg hover:bg-red-700",children:[(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"PDF"]})]})}),(0,g.jsx)("button",{onClick:()=>a(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 transition-colors bg-gray-100 rounded-lg hover:bg-gray-200",children:"Close"})]})})]})})};var A=s(19392),S=s(77197),k=s(79252),C=s(56762),D=s(25484),M=s(32e3),T=s(4993);const _=e=>{let{orders:t,setRiderOrderView:a,riderInfo:n}=e;const[i,d]=(0,r.useState)(!0),[c,m]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[y,w]=(0,r.useState)(null),[_,I]=(0,r.useState)(null),[O,P]=(0,r.useState)({startDate:(0,p.e)(new Date,7),endDate:new Date}),[z,L]=(0,r.useState)(!1),$=async()=>{try{d(!0);const e=await x.A.get("api/order/all",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e.data.data);const s=e.data.data.filter((e=>t.includes(e._id)));m(s),h(s)}catch(e){w(e.message),console.error(e)}finally{d(!1)}};(0,r.useEffect)((()=>{$()}),[]),(0,r.useEffect)((()=>{if(c.length>0){const e=c.filter((e=>{const t=new Date(e.orderTime);return t>=(0,b.o)(O.startDate)&&t<=(0,f.D)(O.endDate)}));h(e)}}),[O,c]);const F=e=>{switch(e){case"Delivered":return(0,g.jsx)(A.A,{className:"text-green-500",size:18});case"Processing":return(0,g.jsx)(S.A,{className:"text-blue-500",size:18});case"Out for Delivery":return(0,g.jsx)(k.A,{className:"text-orange-500",size:18});default:return(0,g.jsx)(C.A,{className:"text-gray-500",size:18})}},R=(e,t)=>{P((s=>({...s,[t]:new Date(e.target.value)})))};return(0,g.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm",children:(0,g.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh]  bg-white rounded-xl shadow-2xl",children:[(0,g.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between p-6 bg-white border-b",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Order History"}),(0,g.jsxs)("p",{className:"text-sm text-gray-500",children:[u.length," ",1===u.length?"order":"orders"," found",O.startDate&&O.endDate&&(0,g.jsxs)("span",{className:"ml-2",children:["(",(0,j.GP)(O.startDate,"MMM dd")," - ",(0,j.GP)(O.endDate,"MMM dd"),")"]})]})]}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsxs)("button",{onClick:()=>L(!z),className:"flex items-center gap-1 px-3 py-1 text-sm font-medium text-gray-700 transition-colors bg-gray-100 rounded-lg hover:bg-gray-200",children:[(0,g.jsx)(N.A,{size:16}),"Filter Dates"]}),(0,g.jsx)("button",{onClick:()=>a(!1),className:"p-1 text-gray-500 transition-colors rounded-full hover:bg-gray-100 hover:text-gray-700","aria-label":"Close",children:(0,g.jsx)(v.A,{size:24})})]})]}),z&&(0,g.jsxs)("div",{className:"sticky z-10 p-4 border-b top-20 bg-gray-50",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),(0,g.jsx)("input",{type:"date",value:(0,j.GP)(O.startDate,"yyyy-MM-dd"),onChange:e=>R(e,"startDate"),className:"w-full p-2 mt-1 border border-gray-300 rounded-md"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),(0,g.jsx)("input",{type:"date",value:(0,j.GP)(O.endDate,"yyyy-MM-dd"),onChange:e=>R(e,"endDate"),className:"w-full p-2 mt-1 border border-gray-300 rounded-md"})]})]}),(0,g.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,g.jsx)("button",{onClick:()=>{P({startDate:(0,p.e)(new Date,7),endDate:new Date})},className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800",children:"Reset"}),(0,g.jsx)("button",{onClick:()=>L(!1),className:"px-3 py-1 text-sm text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Apply"})]})]}),(0,g.jsx)("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:i?(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center p-12",children:[(0,g.jsx)(D.A,{className:"w-8 h-8 text-blue-500 animate-spin"}),(0,g.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading orders..."})]}):y?(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,g.jsx)(C.A,{className:"w-12 h-12 text-red-500"}),(0,g.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Error loading orders"}),(0,g.jsx)("p",{className:"mt-2 text-gray-500",children:y}),(0,g.jsx)("button",{onClick:$,className:"px-4 py-2 mt-4 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Retry"})]}):0===u.length?(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,g.jsx)("div",{className:"p-4 mb-4 bg-gray-100 rounded-full",children:(0,g.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No orders found"}),(0,g.jsx)("p",{className:"mt-1 text-gray-500",children:0===c.length?"Orders will appear here once assigned":"No orders match the selected date range"})]}):(0,g.jsx)("div",{className:"divide-y divide-gray-100",children:u.map((e=>{var t,s,r,a,n,l;return(0,g.jsxs)("div",{className:"transition-colors hover:bg-gray-50/50",children:[(0,g.jsx)("div",{className:"p-6",children:(0,g.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,g.jsxs)("div",{className:"flex items-start gap-4",children:[(0,g.jsx)("div",{className:"p-3 rounded-lg bg-gray-50",children:F(e.status)}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsxs)("p",{className:"font-medium text-gray-900",children:["Order #",e.orderId]}),(0,g.jsx)("span",{className:"px-2 py-1 text-xs rounded-full "+("Delivered"===e.status?"bg-green-100 text-green-800":"Processing"===e.status?"bg-blue-100 text-blue-800":"Out for Delivery"===e.status?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,g.jsx)("p",{className:"text-sm text-gray-500",children:(0,j.GP)(new Date(e.orderTime),"MMM dd, yyyy \u2022 hh:mm a")}),(0,g.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:[e.items.length," ",1===e.items.length?"item":"items"]})]})]}),(0,g.jsxs)("div",{className:"sm:text-right",children:[(0,g.jsxs)("p",{className:"font-medium text-gray-900",children:["\u20b9",null===(t=e.finalAmount)||void 0===t?void 0:t.toLocaleString()]}),(0,g.jsxs)("div",{className:"flex gap-2 mt-2 sm:justify-end",children:[(0,g.jsxs)("button",{onClick:()=>{return t=e._id,void I(_===t?null:t);var t},className:"flex items-center gap-1 px-3 py-1 text-sm font-medium text-gray-700 transition-colors bg-gray-100 rounded-lg hover:bg-gray-200",children:["Details",_===e._id?(0,g.jsx)(M.A,{size:16}):(0,g.jsx)(T.A,{size:16})]}),"Out for Delivery"===e.status&&(0,g.jsx)("button",{className:"px-3 py-1 text-sm font-medium text-white transition-colors bg-blue-600 rounded-lg hover:bg-blue-700",children:"Track"})]})]})]})}),_===e._id&&(0,g.jsx)("div",{className:"h-full p-6 pt-0 overflow-y-auto border-t py-14",children:(0,g.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"mb-3 font-medium text-gray-900",children:"Shipping Information"}),(null===(s=e.shippingAddress)||void 0===s?void 0:s.length)>0&&(0,g.jsxs)("div",{className:"p-4 rounded-lg bg-gray-50",children:[(0,g.jsx)("p",{className:"font-medium",children:e.shippingAddress[0].area}),(0,g.jsxs)("p",{children:[e.shippingAddress[0].houseNo,", ",e.shippingAddress[0].city]}),(0,g.jsxs)("p",{children:[e.shippingAddress[0].state,", ",e.shippingAddress[0].postalCode]}),(0,g.jsx)("p",{children:e.shippingAddress[0].country}),e.shippingAddress[0].locationLink&&(0,g.jsx)("a",{href:e.shippingAddress[0].locationLink,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 text-sm text-blue-600 hover:underline",children:"View Location"})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"mb-3 font-medium text-gray-900",children:"Payment Information"}),(0,g.jsxs)("div",{className:"p-4 rounded-lg bg-gray-50",children:[(0,g.jsxs)("div",{className:"flex justify-between py-1",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Method:"}),(0,g.jsx)("span",{className:"font-medium",children:e.paymentMethod})]}),(0,g.jsxs)("div",{className:"flex justify-between py-1",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,g.jsx)("span",{className:"font-medium "+("Completed"===e.paymentStatus?"text-green-600":"Failed"===e.paymentStatus?"text-red-600":"text-yellow-600"),children:e.paymentStatus})]}),(0,g.jsxs)("div",{className:"flex justify-between py-1",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Order Total:"}),(0,g.jsxs)("span",{className:"font-medium",children:["\u20b9",null===(r=e.totalAmount)||void 0===r?void 0:r.toLocaleString()]})]}),e.discountApplied>0&&(0,g.jsxs)("div",{className:"flex justify-between py-1",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Discount:"}),(0,g.jsxs)("span",{className:"font-medium text-green-600",children:["-\u20b9",null===(a=e.discountApplied)||void 0===a?void 0:a.toLocaleString()]})]}),(0,g.jsxs)("div",{className:"flex justify-between py-1 pt-2 mt-2 border-t border-gray-200",children:[(0,g.jsx)("span",{className:"text-gray-600",children:"Final Amount:"}),(0,g.jsxs)("span",{className:"font-medium",children:["\u20b9",null===(n=e.finalAmount)||void 0===n?void 0:n.toLocaleString()]})]})]})]}),(0,g.jsxs)("div",{className:"md:col-span-2",children:[(0,g.jsx)("h3",{className:"mb-3 font-medium text-gray-900",children:"Items"}),(0,g.jsx)("div",{className:"overflow-hidden border border-gray-200 rounded-lg",children:(0,g.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,g.jsx)("thead",{className:"bg-gray-50",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Item"}),(0,g.jsx)("th",{className:"px-4 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Qty"}),(0,g.jsx)("th",{className:"px-4 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Price"}),(0,g.jsx)("th",{className:"px-4 py-3 text-xs font-medium tracking-wider text-right text-gray-500 uppercase",children:"Subtotal"})]})}),(0,g.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===(l=e.items)||void 0===l?void 0:l.map(((e,t)=>{var s,r,a;return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:(null===(s=e.item)||void 0===s?void 0:s.name)||`Item ${t+1}`}),(0,g.jsx)("td",{className:"px-4 py-3 text-sm text-right text-gray-500 whitespace-nowrap",children:e.quantity}),(0,g.jsxs)("td",{className:"px-4 py-3 text-sm text-right text-gray-500 whitespace-nowrap",children:["\u20b9",null===(r=e.price)||void 0===r?void 0:r.toLocaleString()]}),(0,g.jsxs)("td",{className:"px-4 py-3 text-sm text-right text-gray-500 whitespace-nowrap",children:["\u20b9",null===(a=e.price*e.quantity)||void 0===a?void 0:a.toLocaleString()]})]},t)}))})]})})]})]})})]},e._id)}))})}),(0,g.jsx)("div",{className:"sticky bottom-0 p-4 bg-white border-t",children:(0,g.jsxs)("div",{className:"flex justify-between",children:[u.length>0&&(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsxs)("button",{onClick:()=>{Promise.resolve().then(s.bind(s,11238)).then((e=>{const t=[...[["Rider Information"],["Name:",(null===n||void 0===n?void 0:n.username)||"N/A"],["ID:",(null===n||void 0===n?void 0:n._id)||"N/A"],["Phone:",(null===n||void 0===n?void 0:n.mobile)||"N/A"],["Email:",(null===n||void 0===n?void 0:n.email)||"N/A"],["Date Range:",`${(0,j.GP)(O.startDate,"MMM dd, yyyy")} - ${(0,j.GP)(O.endDate,"MMM dd, yyyy")}`],[],["Order History"],[]],["Order ID","Status","Date","Items","Amount","Payment Method","Payment Status"],...u.map((e=>[e.orderId,e.status,(0,j.GP)(new Date(e.orderTime),"MMM dd, yyyy hh:mm a"),e.items.length,e.finalAmount,e.paymentMethod,e.paymentStatus]))],s=e.utils.aoa_to_sheet(t);s["!cols"]=[{wch:20},{wch:15},{wch:20},{wch:8},{wch:12},{wch:15},{wch:15}];const r=e.utils.book_new();e.utils.book_append_sheet(r,s,"Orders"),e.writeFile(r,`Orders_${(null===n||void 0===n?void 0:n.username)||"Rider"}_${(new Date).toISOString().slice(0,10)}.xlsx`)}))},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white transition-colors bg-green-600 rounded-lg hover:bg-green-700",children:[(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Excel"]}),(0,g.jsxs)("button",{onClick:()=>{var e,t;const s=new l.uE;if(console.log(n),n){s.setFontSize(16),s.setTextColor(40,53,147),s.text("Rider Information",14,20);const e=[["Name:",n.username||"N/A"],["ID:",n._id||"N/A"],["Phone:",n.mobile||"N/A"],["Email:",n.email||"N/A"],["Date Range:",`${(0,j.GP)(O.startDate,"MMM dd, yyyy")} - ${(0,j.GP)(O.endDate,"MMM dd, yyyy")}`]];(0,o.cs)(s,{startY:25,head:[["",""]],body:e,theme:"grid",headStyles:{fillColor:[255,255,255],textColor:[0,0,0]},styles:{fontSize:10,cellPadding:1}})}s.setFontSize(16),s.setTextColor(40,53,147),s.text("Orders Summary",14,(null===(e=s.lastAutoTable)||void 0===e?void 0:e.finalY)+15||40);const r=u.map((e=>{var t;return[e.orderId,e.status,(0,j.GP)(new Date(e.orderTime),"MMM dd, yyyy"),e.items.length,`\u20b9${null===(t=Number(e.finalAmount))||void 0===t?void 0:t.toLocaleString()}`,e.paymentMethod]}));(0,o.cs)(s,{startY:(null===(t=s.lastAutoTable)||void 0===t?void 0:t.finalY)+20||45,head:[["Order ID","Status","Date","Items","Amount","Payment"]],body:r,theme:"grid",headStyles:{fillColor:[40,53,147],textColor:[255,255,255]},styles:{fontSize:9,cellPadding:3},columnStyles:{0:{cellWidth:40},1:{cellWidth:25},2:{cellWidth:30},3:{cellWidth:20},4:{cellWidth:30},5:{cellWidth:30}}}),u.length>0&&s.addPage(),u.forEach(((e,t)=>{var r,a;if(t>0&&s.addPage(),s.setFontSize(14),s.setTextColor(40,53,147),s.text(`Order #${e.orderId}`,14,20),(0,o.cs)(s,{startY:25,body:[["Status:",e.status],["Order Date:",(0,j.GP)(new Date(e.orderTime),"MMM dd, yyyy hh:mm a")],["Items Count:",e.items.length],["Final Amount:",`\u20b9${null===(r=e.finalAmount)||void 0===r?void 0:r.toLocaleString()}`]],theme:"grid",styles:{fontSize:10}}),s.setFontSize(12),s.text("Shipping Information",14,s.lastAutoTable.finalY+10),(null===(a=e.shippingAddress)||void 0===a?void 0:a.length)>0){const t=e.shippingAddress[0];(0,o.cs)(s,{startY:s.lastAutoTable.finalY+15,body:[["Area:",t.area],["Address:",`${t.houseNo}, ${t.city}`],["State:",t.state],["Postal Code:",t.postalCode],["Country:",t.country],...t.locationLink?[["Location:",{content:t.locationLink,link:t.locationLink}]]:[]],columnStyles:{1:{cellWidth:"auto"}},styles:{fontSize:10}})}s.setFontSize(12),s.text("Payment Information",14,s.lastAutoTable.finalY+10),(0,o.cs)(s,{startY:s.lastAutoTable.finalY+15,body:[["Method:",e.paymentMethod],["Status:",e.paymentStatus],["Order Total:",`\u20b9${e.totalAmount}`],...e.discountApplied>0?[["Discount:",`-\u20b9${e.discountApplied}`]]:[],["Final Amount:",`\u20b9${e.finalAmount}`]],styles:{fontSize:10}}),s.setFontSize(12),s.text("Order Items",14,s.lastAutoTable.finalY+10);const n=e.items.map((e=>{var t,s;return[(null===(t=e.item)||void 0===t?void 0:t.itemName)||"Unnamed Item",e.quantity,null===(s=e.price)||void 0===s?void 0:s.toLocaleString(),e.price*e.quantity-e.discount]}));(0,o.cs)(s,{startY:s.lastAutoTable.finalY+15,head:[["Item","Qty","Price","Subtotal"]],body:n,theme:"grid",headStyles:{fillColor:[40,53,147],textColor:[255,255,255]},columnStyles:{0:{cellWidth:"auto"},1:{cellWidth:15},2:{cellWidth:20},3:{cellWidth:20}},styles:{fontSize:9}})}));const a=`Orders_${(null===n||void 0===n?void 0:n.username)||"Rider"}_${(new Date).toISOString().slice(0,10)}.pdf`;s.save(a)},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white transition-colors bg-red-600 rounded-lg hover:bg-red-700",children:[(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"PDF"]})]}),(0,g.jsx)("button",{onClick:()=>a(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 transition-colors bg-gray-100 rounded-lg hover:bg-gray-200",children:"Close"})]})})]})})},I=e=>{let{isOpen:t,onClose:s,data:a,rider:l}=e;const[o,i]=(0,r.useState)([]);console.log(a);const[d,c]=(0,r.useState)({amount:"",riderId:l._id,riderAccountId:a._id});return t?(0,g.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-opacity-55",children:[(0,g.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-10 backdrop-blur-[1px]",onClick:s}),(0,g.jsxs)("div",{className:"relative w-full max-w-md bg-white border border-gray-200 rounded-lg shadow-xl",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold",children:"Add Money"}),(0,g.jsx)("button",{onClick:s,className:"text-gray-500 transition-colors hover:text-gray-700",children:(0,g.jsx)(n.QCr,{})})]}),(0,g.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await x.A.post("api/rider-account/money",d,{headers:{Authorization:`bearer ${localStorage.getItem("token")}`}});console.log(e),s()}catch(t){console.log(t)}},className:"p-6",children:[(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Rider Name"}),(0,g.jsx)("input",{type:"text",name:"riderName",value:`${l.firstname} ${l.lastname}`,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Account Number"}),(0,g.jsx)("input",{type:"text",name:"accountNumber",value:a.accountNumber,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0})]}),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsx)("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Amount"}),(0,g.jsx)("input",{type:"number",name:"amount",value:d.amount,onChange:e=>c((t=>({...t,amount:Number(e.target.value)}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0,min:"0"})]}),(0,g.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,g.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 transition-colors bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),(0,g.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white transition-colors rounded-md bg-cyan-600 hover:bg-cyan-700",children:"Add"})]})]})]})]}):null},O=()=>{(0,a.Zp)();const[e,t]=(0,r.useState)([]),[s,h]=(0,r.useState)(""),[p,b]=(0,r.useState)([]),[f,j]=(0,r.useState)(1),[N,v]=(0,r.useState)(!1),A=(0,r.useRef)(),[S,k]=(0,r.useState)(""),[C,D]=(0,r.useState)(10),[M,T]=(0,r.useState)(!0),[O,P]=(0,r.useState)(!1),[z,L]=(0,r.useState)(null),[$,F]=(0,r.useState)([]),[R,B]=(0,r.useState)({}),[E,W]=(0,r.useState)([]),[G,V]=(0,r.useState)(!1),[Y,H]=(0,r.useState)(!1),[q,Q]=(0,r.useState)(!1),[U,X]=(0,r.useState)([]),[Z,J]=(0,r.useState)([]);(0,r.useEffect)((()=>{window.innerWidth<768&&T(!1)}),[]);const K=async()=>{try{v(!0);const e=await x.A.get("api/rider/all",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e.data),t(e.data.data)}catch(e){console.log(e.message)}finally{v(!1)}};(0,r.useEffect)((()=>{K()}),[]);const ee=e.filter((e=>{var t;return(null===(t=e.username)||void 0===t?void 0:t.toLowerCase().includes(S.toLowerCase()))||e._id.toLowerCase().includes(S.toLowerCase())})),te=Math.ceil(ee.length/C),se=ee.slice((f-1)*C,f*C),re=e=>{e>=1&&e<=te&&j(e)},[ae,ne]=(0,r.useState)({x:0,y:0});return N?(0,g.jsx)(u.A,{}):(0,g.jsxs)("div",{className:"flex flex-col h-screen ",children:[(0,g.jsx)(c.A,{isSidebarOpen:M,setSidebarOpen:T}),(0,g.jsxs)("div",{className:"flex flex-grow",children:[(0,g.jsx)("div",{className:"w-auto",children:(0,g.jsx)(m.A,{isSidebarOpen:M})}),(0,g.jsxs)("div",{className:"overflow-x-auto  flex flex-col p-2 md:p-2 min-h-screen w-full",children:[(0,g.jsxs)("header",{className:"flex flex-col items-center justify-between px-1 py-2 bg-gray-100 rounded-md shadow sm:flex-row",children:[(0,g.jsxs)("div",{className:"flex items-baseline gap-1 text-center sm:flex-row sm:text-left",children:[(0,g.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"Rider Accounts List"}),(0,g.jsx)("span",{className:"text-xs text-gray-600 sm:text-sm",children:"View/Search Rider Accounts"})]}),(0,g.jsxs)("nav",{className:"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0",children:[(0,g.jsxs)(a.N_,{to:"/dashboard",className:"flex items-center text-gray-500 no-underline hover:text-cyan-600 text-sm/6",children:[(0,g.jsx)(n.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),"                    ",(0,g.jsx)(d.XWt,{className:"mx-1 sm:mx-2"}),(0,g.jsx)(a.N_,{to:"/account/rider/view",className:"flex items-center text-gray-500 no-underline hover:text-cyan-600 text-sm/6",children:"Rider Accounts List"}),"                "]})]}),G&&(0,g.jsx)(w,{setRiderTransactionsView:V,transactions:E||[],riderInfo:Z}),O&&(0,g.jsx)(y,{isOpen:O,onClose:()=>{P(!1),K()},rider:$||"NA",data:R}),Y&&(0,g.jsx)(_,{orders:U,setRiderOrderView:H,riderInfo:Z}),q&&(0,g.jsx)(I,{isOpen:q,onClose:()=>{Q(!1),K()},rider:$||"NA",data:R}),(0,g.jsxs)("div",{className:"flex flex-col justify-between mt-4 mb-4 space-y-2 lg:flex-row lg:space-y-0 lg:items-center",children:[(0,g.jsxs)("div",{className:"flex items-center px-2 space-x-2",children:[(0,g.jsx)("span",{className:"text-sm",children:"Show"}),(0,g.jsxs)("select",{className:"p-2 text-sm border border-gray-300 rounded-md",value:C,onChange:e=>{D(Number(e.target.value)),j(1)},children:[(0,g.jsx)("option",{children:"10"}),(0,g.jsx)("option",{children:"20"}),(0,g.jsx)("option",{children:"50"})]}),(0,g.jsx)("span",{className:"text-sm",children:"Entries"})]}),(0,g.jsxs)("div",{className:"flex flex-col gap-2 lg:flex-row",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between flex-1 gap-2 px-2",children:[(0,g.jsx)("button",{onClick:()=>{const e=se.map((e=>[`${e.firstname} ${e.lastname}`,e.riderAccount.accountNumber||"NA",e.riderAccount.totalOrderSale,e.riderAccount.cashSale,e.riderAccount.bankSale,e.riderAccount.moneyTransfer,e.riderAccount.openingBalance.toFixed(2),e.riderAccount.currentBalance||0]));let t=["Rider Name","Account Number","Total Order Sale","Cash Sale","Bank Sale","Money Transfer","Opening Balance","Current Balance"].join("\t")+"\n";e.forEach((e=>{t+=e.join("\t")+"\n"})),navigator.clipboard.writeText(t).then((()=>{alert("Rider accounts data copied to clipboard!")})).catch((e=>{console.error("Failed to copy: ",e),alert("Failed to copy data to clipboard")}))},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Copy"}),(0,g.jsx)("button",{onClick:()=>{const e=[["Rider Name","Account No.","Total Sale","Cash Sale","Bank Sale","Money Transfer","Opening","Current Balance"],...se.map((e=>[`${e.firstname} ${e.lastname}`,e.riderAccount.accountNumber||"NA",e.riderAccount.totalOrderSale,e.riderAccount.cashSale,e.riderAccount.bankSale,e.riderAccount.moneyTransfer,e.riderAccount.openingBalance.toFixed(2),e.riderAccount.currentBalance||0]))],t=i.utils.book_new(),s=i.utils.aoa_to_sheet(e),r={fill:{fgColor:{rgb:"E5E7EB"}},font:{bold:!0}};for(let a=0;a<e[0].length;a++){const e=i.utils.encode_cell({r:0,c:a});s[e].s||(s[e].s={}),Object.assign(s[e].s,r)}i.utils.book_append_sheet(t,s,"Rider Accounts"),i.writeFile(t,"rider_accounts.xlsx")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Excel"}),(0,g.jsx)("button",{onClick:()=>{const e=new l.uE;e.setFontSize(18),e.text("Rider Accounts Report",14,15);const t=se.map((e=>[`${e.firstname} ${e.lastname}`,e.riderAccount.accountNumber||"NA",e.riderAccount.totalOrderSale,e.riderAccount.cashSale,e.riderAccount.bankSale,e.riderAccount.moneyTransfer,e.riderAccount.openingBalance.toFixed(2),e.riderAccount.currentBalance||0]));(0,o.Ay)(e,{head:[["Rider Name","Account No.","Total Sale","Cash Sale","Bank Sale","Money Transfer","Opening","Current Balance"]],body:t,startY:25,styles:{cellPadding:3,fontSize:9,valign:"middle",halign:"center"},headStyles:{fillColor:[229,231,235],textColor:[0,0,0],fontStyle:"bold"},alternateRowStyles:{fillColor:[249,250,251]}}),e.save("rider_accounts_report.pdf")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"PDF"}),(0,g.jsx)("button",{onClick:()=>{window.print()},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Print"}),(0,g.jsx)("button",{onClick:()=>{const e=se.map((e=>[`"${e.firstname} ${e.lastname}"`,e.riderAccount.accountNumber||"NA",e.riderAccount.totalOrderSale,e.riderAccount.cashSale,e.riderAccount.bankSale,e.riderAccount.moneyTransfer,e.riderAccount.openingBalance.toFixed(2),e.riderAccount.currentBalance||0])),t=[["Rider Name","Account Number","Total Order Sale","Cash Sale","Bank Sale","Money Transfer","Opening Balance","Current Balance"].join(","),...e.map((e=>e.join(",")))].join("\n"),s=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download","rider_accounts.csv"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"CSV"})]}),(0,g.jsx)("input",{type:"text",placeholder:"Search",className:"w-full p-2 text-sm border border-gray-300 rounded-sm ",onChange:e=>k(e.target.value)})]})]}),s?(0,g.jsxs)("p",{className:"text-red-500",children:["Error: ",s]}):(0,g.jsx)("div",{className:"relative w-full overflow-x-auto",children:(0,g.jsxs)("table",{className:"min-w-full border border-collapse border-gray-300",ref:A,children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"bg-gray-200",children:[(0,g.jsx)("th",{className:"p-2 text-sm border border-gray-300",children:"Rider Name"}),(0,g.jsx)("th",{className:"p-2 text-sm border border-gray-300",children:"Account Number"}),(0,g.jsx)("th",{className:"p-2 text-sm border border-gray-300",children:"Total Order Sale"}),(0,g.jsx)("th",{className:"p-2 text-sm border border-gray-300",children:"Cash Sale"}),(0,g.jsx)("th",{className:"p-2 text-sm border border-gray-300",children:"Bank Sale"}),(0,g.jsx)("th",{className:"p-2 text-sm border border-gray-300",children:"Money Transfer"}),(0,g.jsx)("th",{className:"p-2 text-sm border border-gray-300",children:"Opening"}),(0,g.jsx)("th",{className:"p-2 text-sm border border-gray-300",children:"Current Balance"}),(0,g.jsx)("th",{className:"p-2 text-sm border border-gray-300",children:"Action"})]})}),(0,g.jsxs)("tbody",{children:[se.length<=0&&(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:"10",className:"py-2 text-lg text-center border border-gray-300",children:"No Data Available"})}),se.length>0&&se.map((e=>(0,g.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,g.jsxs)("td",{className:"p-2 text-sm border border-gray-300",children:[e.firstname," ",e.lastname]}),(0,g.jsx)("td",{className:"p-2 text-sm border border-gray-300",children:e.riderAccount.accountNumber||"NA"}),(0,g.jsx)("td",{className:"p-2 text-sm border border-gray-300",children:e.riderAccount.totalOrderSale}),(0,g.jsx)("td",{className:"p-2 text-sm border border-gray-300",children:e.riderAccount.cashSale}),(0,g.jsx)("td",{className:"p-2 text-sm border border-gray-300",children:e.riderAccount.bankSale}),(0,g.jsx)("td",{className:"p-2 text-sm border border-gray-300",children:e.riderAccount.moneyTransfer}),(0,g.jsx)("td",{className:"p-2 text-sm border border-gray-300",children:e.riderAccount.openingBalance.toFixed(2)}),(0,g.jsx)("td",{className:"p-2 text-sm border border-gray-300",children:e.riderAccount.currentBalance||0}),(0,g.jsx)("td",{className:"relative p-2 text-sm border border-gray-300",children:(0,g.jsx)("div",{className:"flex justify-center",children:(0,g.jsxs)("div",{className:"relative inline-block",children:[(0,g.jsxs)("button",{onClick:t=>((e,t)=>{if(t){const e=t.currentTarget.getBoundingClientRect();ne({x:e.left,y:e.top})}L(z===e?null:e)})(e.riderAccount._id,t),className:"flex items-center gap-1.5 px-4 py-2 text-white transition-all duration-200 rounded-lg shadow-sm bg-gradient-to-r from-cyan-500 to-cyan-600 hover:from-cyan-600 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2","aria-expanded":z===e.riderAccount._id,"aria-haspopup":"true",children:["Actions",(0,g.jsx)("svg",{className:"w-4 h-4 transition-transform duration-200 "+(z===e.riderAccount._id?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),z===e.riderAccount._id&&(0,g.jsx)("div",{className:"fixed z-50 w-56 mt-1 origin-top-right bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none animate-fade-in",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:(0,g.jsxs)("div",{className:"py-1",role:"none",children:[(0,g.jsxs)("button",{className:"flex items-center w-full px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-100/90 transition-colors duration-150 group",role:"menuitem",onClick:()=>{console.log(e.orderId),X(e.orderId),H(!0),J(e),L(null)},children:[(0,g.jsx)(n.Ny1,{className:"w-5 h-5 mr-3 text-cyan-500 group-hover:text-cyan-600"}),(0,g.jsx)("span",{children:"View Order History"})]}),(0,g.jsx)("div",{className:"my-1 border-t border-gray-100/80"}),(0,g.jsxs)("button",{className:"flex items-center w-full px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-100/90 transition-colors duration-150 group",role:"menuitem",onClick:()=>{console.log(e.RiderTranscation),W(e.RiderTranscation),V(!0),J(e),L(null)},children:[(0,g.jsx)(n.Ny1,{className:"w-5 h-5 mr-3 text-cyan-500 group-hover:text-cyan-600"}),(0,g.jsx)("span",{children:"View Transactions"})]}),(0,g.jsx)("div",{className:"my-1 border-t border-gray-100/80"}),(0,g.jsxs)("button",{className:"flex items-center w-full px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-100/90 transition-colors duration-150 group",role:"menuitem",onClick:()=>{P(!0),F(e),B(e.riderAccount),L(null)},children:[(0,g.jsx)(n.MxO,{className:"w-5 h-5 mr-3 text-green-500 group-hover:text-green-600"}),(0,g.jsx)("span",{children:"Money Transfer"})]}),(0,g.jsx)("div",{className:"my-1 border-t border-gray-100/80"}),(0,g.jsxs)("button",{className:"flex items-center w-full px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-100/90 transition-colors duration-150 group",role:"menuitem",onClick:()=>{Q(!0),F(e),B(e.riderAccount),L(null)},children:[(0,g.jsx)(n.MxO,{className:"w-5 h-5 mr-3 text-green-500 group-hover:text-green-600"}),(0,g.jsx)("span",{children:"Add Money"})]}),(0,g.jsx)("div",{className:"my-1 border-t border-gray-100/80"}),(0,g.jsxs)("button",{className:"flex items-center w-full px-4 py-2.5 text-sm text-red-600 hover:bg-gray-100/90 transition-colors duration-150 group",role:"menuitem",onClick:()=>(async e=>{if(window.confirm("Do u want to delete this")){v(!0);try{await x.A.delete(`api/accounts/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Deleted Successfully")}catch(s){console.error(s.message)}finally{await K(),v(!1)}}})(e.riderAccount._id),children:[(0,g.jsx)(n.qbC,{className:"w-5 h-5 mr-3 text-red-500 group-hover:text-red-600"}),(0,g.jsx)("span",{children:"Delete Account"})]})]})})]})})})]},e._id)))]})]})}),(0,g.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 p-2 md:justify-between md:flex-row",children:[(0,g.jsxs)("span",{children:["                    ",(0,g.jsxs)("span",{children:["Showing ",C*(f-1)+1," to ",Math.min(C*f,ee.length)," of ",ee.length," entries"]}),"              "]}),(0,g.jsxs)("div",{className:"flex justify-between w-full md:w-auto md:gap-2",children:[(0,g.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(1===f?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>re(f-1),disabled:1===f,children:[(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Previous"]}),(0,g.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(f===te?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>re(f+1),disabled:f===te,children:["Next",(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=5379.88b641d1.chunk.js.map