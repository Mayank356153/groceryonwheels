"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6232],{14840:(e,s,t)=>{t.d(s,{A:()=>o});var n=t(65043),a=t(21197),l=t(59255),r=t(70579);function o(){const[e,s]=(0,n.useState)(!1);return(0,r.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,r.jsx)(a.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,r.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,r.jsx)("div",{children:(0,r.jsx)(l.A,{isSidebarOpen:e})}),(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,r.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},36232:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var n=t(65043),a=t(21197),l=t(59255),r=t(66727),o=t(60184),i=t(86213),d=t(14840),c=t(70579);const m=()=>{var e;const[s,t]=(0,n.useState)(""),[m,u]=(0,n.useState)(!1),[x,h]=(0,n.useState)(!0);(0,n.useEffect)((()=>{window.innerWidth<768&&h(!1)}),[]);const g=(null===(e=(0,r.zy)().state)||void 0===e?void 0:e.templateContent)||"",[b,f]=(0,n.useState)({message:g,phoneNumbers:[],sentAt:(new Date).toISOString()});return m?(0,c.jsx)(d.A,{}):(0,c.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,c.jsx)(a.A,{isSidebarOpen:x,setSidebarOpen:h}),(0,c.jsxs)("div",{className:"flex flex-grow",children:[(0,c.jsx)(l.A,{isSidebarOpen:x}),(0,c.jsxs)("div",{className:"flex flex-col flex-grow w-full min-h-screen ",children:[(0,c.jsxs)("header",{className:"flex flex-col items-center justify-between p-4 mb-6 bg-gray-100 rounded-lg md:flex-row",children:[(0,c.jsx)("h1",{className:"text-2xl font-semibold",children:"Send Message"}),(0,c.jsxs)("div",{className:"flex items-center space-x-2 text-blue-600",children:[(0,c.jsxs)(r.N_,{to:"/dashboard",className:"flex items-center text-sm text-gray-500 no-underline hover:text-cyan-600",children:[(0,c.jsx)(o.$BV,{className:"mr-2"})," Home"]}),(0,c.jsx)("span",{className:"text-gray-400",children:">"}),(0,c.jsx)(r.N_,{to:"/message-templates-list",className:"text-sm text-gray-500 no-underline hover:text-cyan-600",children:"Message Templates"})]})]}),(0,c.jsxs)("div",{className:"w-full p-6 mx-auto bg-white rounded-lg shadow-lg ",children:[(0,c.jsx)("h2",{className:"mb-4 text-xl font-semibold",children:"Send Message"}),(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),b.phoneNumbers.length<=0?alert("Add at least one Mobile Number"):(await(async()=>{try{u(!0),await i.A.post("api/message/send",b,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Message Sent Successfully")}catch(n){var e,s,t;console.error("Error:",(null===(e=n.response)||void 0===e?void 0:e.data)||n.message),alert("Unsuccessful: "+((null===(s=n.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||n.message))}finally{u(!1)}})(),t(""),f({message:"",phoneNumbers:[],sentAt:(new Date).toISOString()}))},children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"mobile",children:"Mobile *"}),(0,c.jsxs)("label",{className:"flex items-center w-full",children:[(0,c.jsx)("input",{type:"text",id:"mobile",value:s,minLength:"10",maxLength:"10",onChange:e=>t(e.target.value),className:"block w-full px-2 py-[10px] mt-1 border border-gray-300 rounded-none shadow-sm rounded-l-md focus:outline-none focus:ring-2 focus:ring-cyan-700",placeholder:"Enter 10-digit Number"}),(0,c.jsx)("button",{className:"flex items-center justify-center h-full px-2 mt-1 border-2 border-gray-300 rounded-none shadow-sm rounded-r-md",name:"mobile",type:"button",onClick:e=>{const{name:n}=e.target;"mobile"===n&&(10===s.length?(f((e=>({...e,phoneNumbers:[...e.phoneNumbers,s]}))),alert("Number added successfully"),t("")):alert("Invalid Number (must be 10 digits)"))},children:(0,c.jsx)(o.OiG,{})})]}),b.phoneNumbers.length>0&&(0,c.jsx)("ul",{className:"mt-2 text-sm",children:b.phoneNumbers.map(((e,s)=>(0,c.jsx)("li",{className:"text-gray-700",children:e},s)))})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700",htmlFor:"message",children:"Message *"}),(0,c.jsx)("textarea",{id:"message",name:"message",value:b.message,onChange:e=>{const{value:s}=e.target;f((e=>({...e,message:s})))},className:"block w-full p-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-cyan-500",rows:"4",placeholder:"Type your message here...",required:!0})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("button",{type:"submit",className:"px-4 py-2 font-semibold text-white transition bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400",children:"Send"}),(0,c.jsx)("button",{type:"button",className:"px-4 py-2 font-semibold text-white transition bg-orange-500 hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-400",children:"Close"})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=6232.362b97f7.chunk.js.map