"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7388],{14840:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(65043),r=t(21197),l=t(59255),i=t(70579);function n(){const[e,s]=(0,a.useState)(!1);return(0,i.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,i.jsx)(r.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,i.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,i.jsx)("div",{children:(0,i.jsx)(l.A,{isSidebarOpen:e})}),(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,i.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},21830:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(65043),r=t(70579);function l(e){let{id:s=" ",type:t="text",label_class:l="",label:i,className:n="",placeholder:d="",div_class:c="",...o}=e;const x=(0,a.useId)();return(0,r.jsxs)("div",{className:c,children:[" ",i?(0,r.jsx)("label",{className:l,htmlFor:" "===s?x:s,children:i}):null," ",(0,r.jsx)("input",{type:t,id:" "===s?x:s,placeholder:d,className:n,...o})]})}},37388:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var a=t(65043),r=t(86213),l=t(53888),i=t(21830),n=t(66727),d=t(21197),c=t(59255),o=t(60184),x=t(37762),p=t(64857),u=t(11238),h=t(14840),m=t(70579);function b(){const[e,s]=(0,a.useState)([]),[t,b]=(0,a.useState)(!0),[j,y]=(0,a.useState)(null),[g,f]=(0,a.useState)(!0),[N,v]=(0,a.useState)(!1),[w,S]=(0,a.useState)(0),[k,D]=(0,a.useState)(0),[A,C]=(0,a.useState)(0),[_,B]=(0,a.useState)([]),[$,R]=(0,a.useState)([]),L=(0,n.Zp)();(0,a.useEffect)((()=>{window.innerWidth<768&&f(!1)}),[]);const P=async()=>{try{const e=await r.A.get("api/suppliers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});s(e.data.data),console.log(e.data)}catch(e){y(e.message)}finally{b(!1)}};(0,a.useEffect)((()=>{P()}),[]);const[E,I]=(0,a.useState)(1),[O,M]=(0,a.useState)(10),[V,W]=(0,a.useState)(""),T=e.filter((e=>{var s;return(null===(s=e.supplierName)||void 0===s?void 0:s.toLowerCase().includes(V.toLowerCase()))||e._id.toLowerCase().includes(V.toLowerCase())})),z=Math.ceil(T.length/O),F=T.slice((E-1)*O,E*O);(0,a.useEffect)((()=>{(()=>{const e=F.reduce(((e,s)=>(e.previousBalance+=s.previousBalance||0,e.purchaseDue+=s.purchaseDue||0,e.previousReturnDue+=s.purchaseReturnDue||0,e)),{previousBalance:0,purchaseDue:0,previousReturnDue:0});S(e.previousBalance),D(e.purchaseDue),C(e.previousReturnDue)})()}),[T]);const G=e=>{e>=1&&e<=z&&I(e)},H=(e,s)=>{const t=e.target.value;"edit"===t&&L(`/supplier/add?id=${s}`),"delete"===t&&(async e=>{if(window.confirm("Do u want to delete supplier")){b(!0);try{await r.A.delete(`api/suppliers/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Deleted Successfully")}catch(j){console.error(j.message)}finally{P(),b(!1)}}})(s),"discount"===t&&L(`/create?id=${s}`)};return t?(0,m.jsx)(h.A,{}):j?(0,m.jsx)("h1",{children:"Something Went Wrong..."}):(0,m.jsxs)("div",{className:"flex flex-col overflow-x-hidden",children:[(0,m.jsx)(d.A,{isSidebarOpen:g,setSidebarOpen:f}),(0,m.jsxs)("div",{className:"flex w-screen ",children:[(0,m.jsx)("div",{children:(0,m.jsx)(c.A,{isSidebarOpen:g})}),(0,m.jsxs)("div",{className:"flex flex-col flex-grow w-full min-h-screen p-2 overflow-x-hidden transition-all duration-300 bg-gray-200",children:[(0,m.jsxs)("div",{className:"flex flex-col items-end justify-between md:flex-row",children:[(0,m.jsxs)("div",{className:"flex items-end w-full gap-2 pl-2 md:w-1/2",children:[(0,m.jsx)("span",{className:"text-3xl ",children:"Supplier List"}),(0,m.jsx)("span",{className:"text-sm text-gray-700",children:"View /Search Suppliers"})]}),(0,m.jsxs)("div",{className:"flex w-full gap-2 pl-2 pr-2 mb-2 text-sm font-semibold text-black bg-gray-500 bg-opacity-50 rounded-md md:text-gray-500 md:justify-end md:w-1/2 md:bg-transparent",children:[(0,m.jsxs)(n.k2,{to:"/dashboard",className:"flex items-center text-gray-700 no-underline",children:[(0,m.jsx)(o.$BV,{}),"Home "]}),(0,m.jsx)("span",{children:">"}),(0,m.jsx)(n.k2,{to:"/supplier/import",className:"text-gray-700 no-underline",children:"Import Suppliers"}),(0,m.jsx)("span",{children:">"}),(0,m.jsx)(n.k2,{to:"/supplier/view",className:"text-gray-700 no-underline ",children:"Suppliers"})]})]}),(0,m.jsxs)("div",{className:"bg-white border-t-4 max-autorounded-lg border-t-blue-600 border-opacity-55",children:[(0,m.jsxs)("div",{className:"flex flex-col items-center justify-start w-full px-3 py-2 sm:justify-between sm:flex-row",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(i.A,{type:"checkbox"}),"View Account Payable Suppliers"]}),(0,m.jsx)("div",{children:(0,m.jsx)(l.A,{text:"+Create Supplier",className:"flex-shrink-0 px-4 py-2 font-bold text-center text-white bg-blue-600 rounded cursor-pointer hover:bg-blue-700 ",onClick:()=>L("/supplier/add")})})]}),(0,m.jsxs)("div",{className:"px-3 border-gray-100 border-t-1 border-1 min-h-50",children:[(0,m.jsxs)("div",{className:"flex flex-col justify-between mt-4 mb-4 space-y-2 md:flex-row md:space-y-0 md:items-center",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)("span",{className:"text-sm",children:"Show"}),(0,m.jsxs)("select",{className:"p-2 text-sm border border-gray-300 rounded-md",value:O,onChange:e=>{M(Number(e.target.value)),I(1)},children:[(0,m.jsx)("option",{children:"10"}),(0,m.jsx)("option",{children:"20"}),(0,m.jsx)("option",{children:"50"})]}),(0,m.jsx)("span",{className:"text-sm",children:"Entries"})]}),(0,m.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between flex-1 gap-2",children:[(0,m.jsx)("button",{onClick:()=>{const e=T.map((e=>`${e._id}, ${e.supplierName}, ${e.mobile},${e.email},${e.previousBalance},${e.purchaseDue},${e.purchaseReturnDue},${e.previousBalance+e.purchaseDue+e.purchaseReturnDue},${_.includes(e._id)?"InActive":"Active"}}`)).join("\n");navigator.clipboard.writeText(e),alert("Data copied to clipboard!")},className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"Copy"}),(0,m.jsx)("button",{onClick:()=>{const e=u.utils.json_to_sheet(T),s=u.utils.book_new();u.utils.book_append_sheet(s,e,"supplier"),u.writeFile(s,"supplier.xlsx")},className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"Excel"}),(0,m.jsx)("button",{onClick:()=>{const e=new x.uE;e.text("Customer List",20,20);const s=T.map((e=>[e._id,e.supplierName,e.mobile,e.email,e.previousBalance,e.purchaseDue,e.previousReturnDue,e.previousBalance+e.purchaseDue+e.purchaseReturnDue,_.includes(e._id)?"InActive":"Active"]));(0,p.Ay)(e,{head:[["Supplier Id","Supplier Name","Mobile","Email","Previous Balance","Purchase Due","Previous Return Due","Total","Advance","Status"]],body:s}),e.save("supplier_list.pdf")},className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"PDF"}),(0,m.jsx)("button",{onClick:()=>{window.print()},className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"Print"}),(0,m.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,"+T.map((e=>Object.values(e).join(","))).join("\n"),s=encodeURI(e),t=document.createElement("a");t.setAttribute("href",s),t.setAttribute("download","supplier.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"CSV"})]}),(0,m.jsx)("input",{type:"text",placeholder:"Search",className:"w-full p-2 text-sm border border-gray-300 md:w-auto",onChange:e=>W(e.target.value)})]})]}),(0,m.jsx)("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full border-separate",children:[(0,m.jsx)("thead",{className:"text-sm",children:(0,m.jsxs)("tr",{className:"bg-gray-200",children:[(0,m.jsx)("th",{className:"px-4 py-2 text-left",children:(0,m.jsx)(i.A,{type:"checkbox",id:"table_head",onChange:()=>v(!N)})}),(0,m.jsx)("th",{className:"px-4 py-2 text-left",children:"Supplier ID"}),(0,m.jsx)("th",{className:"px-4 py-2 text-left",children:"Supplier Name"}),(0,m.jsx)("th",{className:"px-4 py-2",children:"Mobile"}),(0,m.jsx)("th",{className:"px-4 py-2 text-left",children:"Email"}),(0,m.jsx)("th",{className:"px-4 py-2 text-left ",children:"Previous Balance"}),(0,m.jsx)("th",{className:"px-4 py-2 text-left",children:"Purchase Due"}),(0,m.jsx)("th",{className:"px-4 py-2 text-left ",children:"Purchase Return Due"}),(0,m.jsx)("th",{className:"px-4 py-2 text-left ",children:"Total(+)"}),(0,m.jsx)("th",{className:"px-4 py-2 text-left ",children:"Status"}),(0,m.jsx)("th",{className:"px-4 py-2 text-left ",children:"Action"})]})}),(0,m.jsxs)("tbody",{className:"border-gray-100 border-1",children:[F.length<=0&&(0,m.jsx)("tr",{children:(0,m.jsx)("td",{className:"py-2 text-center border-gray-100 border-1",colSpan:"11",children:"No Data Available"})}),Array.isArray(F)&&F.map(((e,s)=>(0,m.jsxs)("tr",{id:e._id,children:[(0,m.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:(0,m.jsx)(i.A,{type:"checkbox",id:"table_body",checked:N||$.includes(e._id),onChange:()=>{return s=e._id,void R((e=>e.includes(s)?e.filter((e=>e!=s)):[...e,s]));var s}})}),(0,m.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e._id}),(0,m.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e.supplierName}),(0,m.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e.mobile}),(0,m.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e.email}),(0,m.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e.previousBalance}),(0,m.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1 ",children:e.purchaseDue}),(0,m.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e.purchaseReturnDue}),(0,m.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1 ",children:e.previousBalance+e.purchaseDue+e.purchaseReturnDue}),(0,m.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",onClick:()=>B((s=>s.includes(e._id)?s.filter((s=>s!==e._id)):[...s,e._id])),children:_.includes(e._id)?(0,m.jsx)("span",{className:"p-1 text-white bg-red-700 rounded-md",children:"Inactive"}):(0,m.jsx)("span",{className:"p-1 text-white bg-green-400 rounded-md",children:"Active"})}),(0,m.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:(0,m.jsxs)("select",{className:"px-1 py-1 text-sm border rounded-sm",onChange:s=>H(s,e._id),children:[(0,m.jsx)("option",{value:"",selected:!0,disabled:!0,children:"Actions"}),(0,m.jsx)("option",{value:"discount",children:" Generate Discount Coupon"}),(0,m.jsx)("option",{value:"edit",children:"Edit"}),(0,m.jsx)("option",{value:"view",children:"View Payment"}),(0,m.jsx)("option",{value:"delete",children:"Delete"})]})})]},s))),F.length>0&&(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"px-4 py-2 bg-gray-200"}),(0,m.jsx)("td",{className:"px-4 py-2 bg-gray-200"}),(0,m.jsx)("td",{className:"px-4 py-2 bg-gray-200"}),(0,m.jsx)("td",{className:"px-4 py-2 bg-gray-200"}),(0,m.jsx)("td",{className:"px-4 py-2 font-semibold text-right bg-gray-200 ",children:"Total:"}),(0,m.jsx)("td",{className:"px-4 py-2 font-semibold text-left bg-gray-200 ",children:w}),(0,m.jsx)("td",{className:"px-4 py-2 font-semibold bg-gray-200 ",children:k}),(0,m.jsx)("td",{className:"px-4 py-2 font-semibold bg-gray-200 ",children:A}),(0,m.jsx)("td",{className:"px-4 py-2 font-semibold bg-gray-200 ",children:w+k+A}),(0,m.jsx)("td",{className:"px-4 py-2 bg-gray-200 "}),(0,m.jsx)("td",{className:"px-4 py-2 bg-gray-200 "})]})]})]})}),(0,m.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 p-2 md:justify-between md:flex-row",children:[(0,m.jsxs)("span",{children:["                    ",(0,m.jsxs)("span",{children:["Showing ",O*(E-1)+1," to ",Math.min(O*E,T.length)," of ",T.length," entries"]}),"              "]}),(0,m.jsxs)("div",{className:"flex justify-between w-full md:w-auto md:gap-2",children:[(0,m.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(1===E?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>G(E-1),disabled:1===E,children:[(0,m.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Previous"]}),(0,m.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(E===z?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>G(E+1),disabled:E===z,children:["Next",(0,m.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]})]})]})]})]})]})}},53888:(e,s,t)=>{t.d(s,{A:()=>r});t(65043);var a=t(70579);function r(e){let{text:s,type:t="button",className:r,...l}=e;return(0,a.jsx)("button",{className:`${r}`,...l,children:s})}}}]);
//# sourceMappingURL=7388.0fe22cdb.chunk.js.map