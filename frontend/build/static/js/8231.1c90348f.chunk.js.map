{"version":3,"file":"static/js/8231.1c90348f.chunk.js","mappings":"mLAKe,SAASA,IACtB,MAAOC,IAAcC,EAAAA,EAAAA,MACfC,EAAeF,EAAOG,IAAI,MAC1BC,EAAeC,aAAaC,QAAQ,SACpCC,EAAe,2BAA2BL,KAGzCM,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,MAqBzC,IAnBAC,EAAAA,EAAAA,YAAU,KACR,IAAKT,EAAa,OAClB,MAAMU,EAAgBC,UACpB,IACE,MAAM,KAAEC,SAAeC,EAAAA,EAAMZ,IAAII,EAAQ,CACvCS,QAAS,CAAEC,cAAe,UAAUb,QAE/Bc,EAAKC,GAAOL,EAAKA,KAAKM,OAAOC,YACpCZ,EAAY,CAAEU,MAAKD,OACrB,CAAE,MAAOI,GACPC,QAAQC,MAAM,uBAAwBF,EACxC,GAEFV,IACA,MAAMa,EAAWC,YAAYd,EAAe,KAC5C,MAAO,IAAMe,cAAcF,EAAS,GACnC,CAACvB,EAAaK,EAAQH,KAGpBI,EACH,OAAOoB,EAAAA,EAAAA,KAAA,OAAKC,MAAO,CAAEC,OAAQ,QAASC,QAAS,OAAQC,WAAY,SAAUC,eAAgB,UAAWC,SAAC,gCAK3G,MAAMC,EACJ,kCAAkC3B,EAASW,OAAOX,EAASU,wBAG7D,OACEU,EAAAA,EAAAA,KAAA,UACEQ,MAAM,oBACNC,IAAKF,EACLG,MAAM,OACNR,OAAO,QACPD,MAAO,CAAEU,OAAQ,GACjBC,iBAAe,EACfC,QAAQ,QAGd,C","sources":["components/Warehpuse/WarehouseTracker.jsx"],"sourcesContent":["// src/components/Warehouse/WarehouseTracker.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useSearchParams } from 'react-router-dom';\r\n\r\nexport default function WarehouseTracker() {\r\n  const [params]     = useSearchParams();\r\n  const warehouseId  = params.get('id');\r\n  const token        = localStorage.getItem('token');\r\n  const apiUrl       = `/api/warehouse-location/${warehouseId}`;\r\n\r\n  // no hard-coded fallback any more\r\n  const [position, setPosition] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!warehouseId) return;\r\n    const fetchLocation = async () => {\r\n      try {\r\n        const { data } = await axios.get(apiUrl, {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        const [lng, lat] = data.data.coords.coordinates;   // ← fixed\r\n        setPosition({ lat, lng });\r\n      } catch (err) {\r\n        console.error('fetchLocation error:', err);\r\n      }\r\n    };\r\n    fetchLocation();\r\n    const interval = setInterval(fetchLocation, 5000);\r\n    return () => clearInterval(interval);\r\n  }, [warehouseId, apiUrl, token]);\r\n\r\n  // wait until we have a real location\r\n  if (!position) {\r\n    return <div style={{ height: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n      Loading live position…\r\n    </div>;\r\n  }\r\n\r\n  const mapSrc =\r\n    `https://maps.google.com/maps?q=${position.lat},${position.lng}` +\r\n    `&z=17&output=embed`;\r\n\r\n  return (\r\n    <iframe\r\n      title=\"Warehouse Tracker\"\r\n      src={mapSrc}\r\n      width=\"100%\"\r\n      height=\"100vh\"\r\n      style={{ border: 0 }}\r\n      allowFullScreen\r\n      loading=\"lazy\"\r\n    />\r\n  );\r\n}\r\n"],"names":["WarehouseTracker","params","useSearchParams","warehouseId","get","token","localStorage","getItem","apiUrl","position","setPosition","useState","useEffect","fetchLocation","async","data","axios","headers","Authorization","lng","lat","coords","coordinates","err","console","error","interval","setInterval","clearInterval","_jsx","style","height","display","alignItems","justifyContent","children","mapSrc","title","src","width","border","allowFullScreen","loading"],"sourceRoot":""}