{"version":3,"file":"static/js/5569.a442ba7d.chunk.js","mappings":"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","sources":["components/ImageManagement/subcategory/SubCategoryMasterImage.jsx","components/ImageManagement/subcategory/OneSubCategoryMaster.jsx","components/ImageManagement/subcategory/SubCategoryImageManagement.jsx"],"sourcesContent":["\r\nimport { useState, useEffect } from 'react';\r\nimport axios from \"axios\";\r\nimport { IdentificationIcon } from '@heroicons/react/solid';\r\n\r\nconst SubCategoryMasterImage = ({ onClose }) => {\r\n  const [categories, setCategories] = useState([]);\r\n  const [masterImages, setMasterImages] = useState({});\r\n    const[currentMasterImage,setCurrentMasterImage]=useState([])\r\n  const [currentCategoryIndex, setCurrentCategoryIndex] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\nconst [page, setPage] = useState(1);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Fetch categories\r\n        const categoriesResponse = await axios.get(\r\n          \"/api/subcategories\",\r\n          { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } }\r\n        );\r\n        \r\n        const dataArr = Array.isArray(categoriesResponse.data)\r\n          ? categoriesResponse.data\r\n          : Array.isArray(categoriesResponse.data.data)\r\n            ? categoriesResponse.data.data\r\n            : [];\r\n        \r\n        setCategories(dataArr);\r\n\r\n        // Fetch master images\r\n        const masterResponse = await axios.get(\r\n          '/api/items/getImageBySubCategory',\r\n          { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } }\r\n        );\r\n\r\n        if (masterResponse.data.success) {\r\n          setMasterImages(masterResponse.data.data);\r\n          console.log(masterResponse.data.data);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Error fetching data:\", err);\r\n        setError(\"Failed to fetch data. Please try again.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleRegenerateMasterImage = async (id) => {\r\n     try {\r\n    setLoading(true);\r\n    const res = await axios.get(\r\n `/api/items/subcategory/getImageForsubCategory?subcategoryId=${id}`,\r\n      {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n      }\r\n    );\r\n\r\n console.log(res) \r\n    setCurrentMasterImage(res.data)  \r\n}\r\n\r\n\r\ncatch (err) {\r\n    console.error(\"Failed to fetch merged images:\", err);\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n  };\r\n\r\n  const handleNextCategory = () => {\r\n    setCurrentCategoryIndex(prev => (prev + 1) % categories.length);\r\n  };\r\n\r\n  const handlePrevCategory = () => {\r\n    setCurrentCategoryIndex(prev => (prev - 1 + categories.length) % categories.length);\r\n  };\r\n\r\n  const currentCategory = categories[currentCategoryIndex];\r\n  const currentCategoryId = currentCategory?._id || currentCategory?.id;\r\n\r\nuseEffect(() => {\r\n  if (currentCategoryId && masterImages[currentCategoryId]) {\r\n    setCurrentMasterImage(masterImages[currentCategoryId]);\r\n  } else {\r\n    setCurrentMasterImage([]);\r\n  }\r\n}, [currentCategoryId, masterImages]);\r\n\r\n\r\n\r\n   const handleSubmit=async(img)=>{\r\n      const tokenHeader =  () => ({\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n        try{\r\n          console.log(currentCategoryId)\r\n          console.log(currentCategoryId)\r\n            const res = await axios.put(\r\n            \"/api/subcategories/assign/master-image\",{\r\n                      id:currentCategoryId,\r\n                      image:img\r\n            },\r\n            tokenHeader()\r\n          );\r\n          console.log(res)\r\n           if(res.data.success) alert(\"Master image updated successfully\")\r\n\r\n        }\r\n        catch(error){\r\n          console.log(\"ERro in assigning master image\",error)\r\n        }\r\n  }\r\n\r\n  \r\n\r\n  if (loading && !categories.length) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n        <div className=\"p-6 bg-white rounded-lg shadow-lg\">\r\n          <p>Loading categories and master images...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n        <div className=\"p-6 bg-white rounded-lg shadow-lg\">\r\n          <p className=\"text-red-500\">{error}</p>\r\n          <button \r\n            onClick={onClose}\r\n            className=\"px-4 py-2 mt-4 text-white bg-blue-500 rounded hover:bg-blue-600\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n      <div className=\"relative w-11/12 max-w-5xl p-6 bg-white rounded-lg shadow-lg\">\r\n        {/* Close Button */}\r\n        <button\r\n          onClick={onClose}\r\n          className=\"absolute p-1 text-gray-500 top-2 right-2 hover:text-gray-800\"\r\n          aria-label=\"Close\"\r\n        >\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n          </svg>\r\n        </button>\r\n\r\n        <h2 className=\"mb-4 text-xl font-semibold text-center\">\r\n          Category Master Images\r\n        </h2>\r\n\r\n        {currentCategory && (\r\n          <div className=\"text-center\">\r\n            <h3 className=\"mb-2 text-lg font-medium\">\r\n              {currentCategory?.name || `Category ${currentCategoryIndex + 1}`}\r\n            </h3>\r\n            <p className=\"mb-4 text-sm text-gray-600\">\r\n              ID: {currentCategoryId}\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"p-4 mb-6 border border-gray-200 rounded-lg bg-gray-50\">\r\n      {currentMasterImage && currentMasterImage.length > 0 ? (\r\n        <div className=\"flex flex-col items-center\">\r\n          <div className=\"w-full px-4 py-2 mb-2 overflow-x-auto\">\r\n            <div className=\"flex gap-6 min-w-max\">\r\n              {currentMasterImage.map((img, index) => (\r\n                <div \r\n                  key={index} \r\n                  className=\"flex hover:cursor-pointer flex-col items-center transition-transform duration-200 hover:scale-105\"\r\n                  onClick={() => handleSubmit(img)}\r\n                >\r\n                  <div className=\"relative group\">\r\n                    <img\r\n                      src={img}\r\n                      alt={`Master ${index + 1} for ${currentCategory?.name || currentCategoryId}`}\r\n                      className=\"object-contain w-48 h-48 rounded-lg shadow cursor-pointer md:w-64 md:h-64\"\r\n                    />\r\n                    <div className=\"absolute inset-0 flex items-center justify-center transition-opacity duration-200 bg-black bg-opacity-0 rounded-lg opacity-0 group-hover:opacity-100 group-hover:bg-opacity-30\">\r\n                      <span className=\"px-3 py-1 text-sm font-medium text-white bg-black bg-opacity-50 rounded-full\">\r\n                        Select Image\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <p className=\"mt-2 text-sm font-medium text-gray-600\">Image {index + 1}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <p className=\"text-xs text-gray-500\">Scroll horizontally to view all images</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"flex flex-col items-center justify-center py-10\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-12 h-12 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n          </svg>\r\n          <p className=\"mt-2 text-gray-500\">\r\n            No master image available for this category\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n\r\n        <div className=\"flex flex-col justify-between gap-2 mt-6 md:flex-row\">\r\n          <button\r\n            onClick={handlePrevCategory}\r\n            disabled={loading || categories.length <= 1}\r\n            className=\"px-4 py-2 text-white bg-gray-500 rounded hover:bg-gray-600 disabled:opacity-50\"\r\n          >\r\n            Previous\r\n          </button>\r\n\r\n          <div className=\"flex flex-col gap-4 md:flex-row\" >\r\n            <button\r\n              onClick={()=>handleRegenerateMasterImage(currentCategoryId)}\r\n              disabled={loading || !currentCategory}\r\n              className=\"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600 disabled:opacity-50\"\r\n            >\r\n              {loading ? 'Generating...' : 'Regenerate Master Image'}\r\n            </button>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleNextCategory}\r\n            disabled={loading || categories.length <= 1}\r\n            className=\"px-4 py-2 text-white bg-gray-500 rounded hover:bg-gray-600 disabled:opacity-50\"\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"mt-4 text-center text-gray-500\">\r\n          Category {currentCategoryIndex + 1} of {categories.length}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubCategoryMasterImage;","import { useState, useEffect } from 'react';\r\nimport axios from \"axios\";\r\n\r\nconst OneSubCategoryMaster = ({ onClose, subcategory }) => {\r\n  const [masterImages, setMasterImages] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [page, setPage] = useState(1);\r\n\r\n  useEffect(() => {\r\n      alert(\"l\")\r\n      handleRegenerateMasterImage()\r\n      console.log(subcategory)\r\n  }, []);\r\n\r\n  const handleRegenerateMasterImage = async () => {\r\n    try {\r\n      console.log(subcategory)\r\n      setLoading(true);\r\n      const res = await axios.get(\r\n `/api/items/subcategory/getImageForsubCategory?subcategoryId=${subcategory._id}`,\r\n        {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n        }\r\n      );\r\n\r\n      console.log(res)\r\n      setMasterImages(res.data);\r\n    } catch (err) {\r\n      console.error(\"Failed to regenerate master images:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSetAsMaster = async (image) => {\r\n    try {\r\n      const res = await axios.put(\r\n            \"api/subcategories/assign/master-image\",{\r\n                      id:subcategory._id,\r\n                      image:image\r\n            },\r\n        {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` }\r\n        }\r\n      );\r\n\r\n      if (res.data.success) {\r\n        alert(\"Master image updated successfully!\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Failed to set master image:\", err);\r\n      alert(\" set as master image.\");\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n        <div className=\"p-6 bg-white rounded-lg shadow-lg\">\r\n          <p>Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !subcategory) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n        <div className=\"p-6 bg-white rounded-lg shadow-lg\">\r\n          <p className=\"text-red-500\">{error || \"Category not found.\"}</p>\r\n          <button \r\n            onClick={onClose}\r\n            className=\"px-4 py-2 mt-4 text-white bg-blue-500 rounded hover:bg-blue-600\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n      <div className=\"relative w-11/12 max-w-4xl p-6 bg-white rounded-lg shadow-lg\">\r\n        <button\r\n          onClick={onClose}\r\n          className=\"absolute p-1 text-gray-500 top-2 right-2 hover:text-gray-800\"\r\n          aria-label=\"Close\"\r\n        >\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n          </svg>\r\n        </button>\r\n\r\n        <h2 className=\"mb-4 text-xl font-semibold text-center\">Master Images - {subcategory.name}</h2>\r\n        <p className=\"mb-4 text-center text-gray-500\">Category ID: {subcategory._id}</p>\r\n\r\n        {masterImages.length > 0 ? (\r\n          <div className=\"grid grid-cols-1 gap-4 mb-4 sm:grid-cols-2 md:grid-cols-3\">\r\n            {masterImages.map((img, i) => (\r\n              <div key={i} className=\"flex flex-col items-center justify-center p-2 border rounded shadow-sm\">\r\n                <img\r\n                  src={`${img}`}\r\n                  alt=\"master\"\r\n                  className=\"object-contain mb-2 max-h-64\"\r\n                />\r\n                <button\r\n                  onClick={() => handleSetAsMaster(img)}\r\n                  className=\"px-3 py-1 text-white bg-blue-500 rounded hover:bg-blue-600\"\r\n                >\r\n                  Set as Master\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <p className=\"text-center text-gray-500\">No master images available.</p>\r\n        )}\r\n\r\n        <div className=\"flex justify-center mt-6\">\r\n          <button\r\n            onClick={handleRegenerateMasterImage}\r\n            className=\"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600\"\r\n          >\r\n            {loading ? 'Generating...' : 'Regenerate Master Images'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OneSubCategoryMaster;\r\n","import React from 'react'\r\nimport Select from 'react-select'\r\nimport { useState,useEffect ,useRef} from 'react'\r\nimport axios, { all } from 'axios'\r\nimport { useNavigate } from 'react-router-dom'\r\n// import Navbar from \"../Navbar.jsx\";\r\nimport Navbar from \"../../Navbar.jsx\"\r\nimport { NavLink } from 'react-router-dom'\r\nimport { FaTachometerAlt } from 'react-icons/fa'\r\nimport { CameraIcon } from '@heroicons/react/solid'\r\nimport { BrowserMultiFormatReader } from \"@zxing/library\";\r\nimport Sidebar from '../../Sidebar.jsx'\r\nimport SubCategoryMasterImage from './SubCategoryMasterImage.jsx'\r\nimport OneSubCategoryMaster from './OneSubCategoryMaster.jsx'\r\nconst  SubCategoryImageManagement=()=> {\r\n    const [isSidebarOpen, setSidebarOpen] = useState(true);\r\n    const[allCategory,setAllCategory]=useState([])\r\n   const[category,setCategory]=useState([])\r\n    const [master,setMaster]=useState(false)\r\n    const [onemaster,setOneMaster]=useState(false)\r\n    const[categoryid,setCategoryId]=useState(null)\r\n    const[selectedItem,setSelectedItem]=useState({})\r\n     useEffect(()=>{\r\n        if(window.innerWidth < 768){\r\n          setSidebarOpen(false)\r\n        }\r\n      },[window.innerWidth])\r\n    \r\n    \r\n     \r\n\r\n\r\n     const fetchItems = async () => {\r\n        try {\r\n            const response = await axios.get('api/items/getWithsubCategory',{\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`\r\n                  }});\r\nsetAllCategory(Object.keys(response.data.data));\r\n} catch (error) {\r\n            console.error(\"Error fetching stores:\", error);\r\n        }\r\n     }\r\n\r\n\r\n   const fetchsubCategory = async () => {\r\n         try {\r\n           const response = await axios.get(\r\n        \"api/subcategories\",\r\n             { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } }\r\n           );\r\n           const dataArr = Array.isArray(response.data)\r\n             ? response.data\r\n             : Array.isArray(response.data.data)\r\n               ? response.data.data\r\n               : [];\r\n               console.log(dataArr)\r\n           setCategory(dataArr);\r\n         } catch (err) {\r\n           console.error(\"Fetch categories error:\", err);\r\n         }\r\n       };\r\n     \r\n     useEffect(()=>{\r\n      fetchItems();\r\n      fetchsubCategory();\r\n     },[])\r\n  return (\r\n    <div className=\"flex flex-col h-screen\">\r\n      <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\r\n      <div className=\"flex flex-grow \">\r\n         <div>\r\n          \r\n        <Sidebar isSidebarOpen={isSidebarOpen} />\r\n         </div>\r\n          \r\n           {/* Content */}\r\n         <div className={` flex flex-col p-2 md:p-2  w-full`}>\r\n          <header className=\"flex flex-col items-center justify-between p-4 rounded-md shadow sm:flex-row\">\r\n            <div className=\"flex items-center gap-1 text-center sm:flex-row sm:text-left\">\r\n              <h1 className=\"text-lg font-semibold truncate sm:text-xl\">SubCategory Master Image</h1>\r\n              <span className=\"text-xs text-gray-600 sm:text-sm\">Add/Update Master</span>\r\n            </div>\r\n\r\n            <nav className=\"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0\">\r\n   <NavLink to=\"/dashboard\" className=\"flex items-center text-gray-700 no-underline hover:text-cyan-600\">\r\n                            <FaTachometerAlt className=\"mr-2 text-gray-500 hover:text-cyan-600\" /> Home\r\n                          </NavLink>     \r\n                          <NavLink to=\"/banners/view\" className=\"flex items-center text-gray-700 no-underline hover:text-cyan-600\">\r\n                           &gt; Item Master Image\r\n                          </NavLink>    \r\n                          <NavLink to=\"/banners/add\" className=\"text-gray-700 no-underline hover:text-cyan-600\">\r\n                           &gt; Add Banner\r\n                          </NavLink>\r\n              \r\n            </nav>\r\n          </header>\r\n\r\n         \r\n\r\n          <div className=\"p-4 mt-1 bg-white border-t-4 rounded-lg shadow-md border-cyan-500\">\r\n \r\n               \r\n                 <div className=\"flex gap-5\">\r\n\r\n                    \r\n                  <div className=\"relative flex flex-col w-full py-2\">\r\n                                    <button\r\n              onClick={() => {\r\nsetMaster(true)\r\nsetSidebarOpen(false)\r\n              }}\r\n              className='px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded hover:bg-blue-700'\r\n            >\r\n              Generate Master Image\r\n            </button>\r\n                                   {\r\n            master && <SubCategoryMasterImage    onClose={() => \r\n              {\r\n               setSidebarOpen(true)\r\n               setMaster(false) \r\n              }\r\n            } />\r\n          }\r\n {\r\n            onemaster && <OneSubCategoryMaster                 subcategory={categoryid}\r\n   onClose={() => \r\n              {\r\n                               setSidebarOpen(true)\r\n\r\n               setOneMaster(false) \r\n              }\r\n            } />\r\n          }\r\n                  </div>\r\n                 </div>\r\n                    <div className='w-full mt-4 overflow-x-auto min-h-16'>\r\n  <table className='min-w-full border-2 divide-y divide-gray-200 min-h-48'>\r\n    <thead className='sticky top-0 bg-gray-200'>\r\n      <tr>\r\n        <th className='py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase'>SubCategory Name</th>\r\n        <th className='py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase'>Actions</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody className='bg-white divide-y divide-gray-200'>\r\n      {allCategory.map((categoryId, index) => {\r\n        const c=category.find(it=>it._id===categoryId)\r\n        return(\r\n        <tr key={index}>\r\n          <td className='py-4 text-sm text-gray-500 whitespace-nowrap'>{c.name}</td>\r\n          <td className='py-4 text-sm text-gray-500 whitespace-nowrap'>\r\n            <button\r\n              onClick={() =>{\r\n                setSidebarOpen(false)\r\n                setCategoryId(c)\r\n                setOneMaster(true)\r\n              }}\r\n              className='px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded hover:bg-blue-700'\r\n            >\r\n              Generate Master Image\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      )})}\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n\r\n                \r\n                 \r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default SubCategoryImageManagement\r\n"],"names":["_ref","onClose","categories","setCategories","useState","masterImages","setMasterImages","currentMasterImage","setCurrentMasterImage","currentCategoryIndex","setCurrentCategoryIndex","loading","setLoading","error","setError","page","setPage","useEffect","async","categoriesResponse","axios","get","headers","Authorization","localStorage","getItem","dataArr","Array","isArray","data","masterResponse","success","console","log","err","fetchData","currentCategory","currentCategoryId","_id","id","handleSubmit","res","put","image","img","alert","length","_jsx","className","children","_jsxs","onClick","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","name","map","index","src","alt","handlePrevCategory","prev","disabled","handleRegenerateMasterImage","handleNextCategory","subcategory","i","handleSetAsMaster","SubCategoryImageManagement","isSidebarOpen","setSidebarOpen","allCategory","setAllCategory","category","setCategory","master","setMaster","onemaster","setOneMaster","categoryid","setCategoryId","selectedItem","setSelectedItem","window","innerWidth","response","Object","keys","fetchItems","fetchsubCategory","Navbar","Sidebar","NavLink","to","FaTachometerAlt","SubCategoryMasterImage","OneSubCategoryMaster","categoryId","c","find","it"],"sourceRoot":""}