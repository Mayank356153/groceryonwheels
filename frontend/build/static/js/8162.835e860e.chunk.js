"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8162],{14840:(e,t,s)=>{s.d(t,{A:()=>o});var r=s(65043),l=s(21197),a=s(59255),i=s(70579);function o(){const[e,t]=(0,r.useState)(!1);return(0,i.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,i.jsx)(l.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,i.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,i.jsx)("div",{children:(0,i.jsx)(a.A,{isSidebarOpen:e})}),(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,i.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},48162:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var r=s(65043),l=s(21197),a=s(59255),i=s(66727),o=s(60184),d=s(70579);const n=e=>{let{setView:t,previewUrls:s,setFormData:l,formData:a,setPreviewUrls:i}=e;return(0,r.useEffect)((()=>console.log(s)),[s]),(0,d.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,d.jsxs)("div",{style:{backgroundColor:"#fff",padding:"30px",borderRadius:"12px",maxHeight:"80%",width:"80%",overflowY:"auto",boxShadow:"0 4px 20px rgba(0,0,0,0.3)",position:"relative"},children:[(0,d.jsx)("button",{onClick:()=>t(!1),style:{position:"absolute",top:"15px",right:"20px",background:"none",border:"none",fontSize:"26px",fontWeight:"bold",color:"#444",cursor:"pointer"},title:"Close",children:"\u2716"}),s.length>0?(0,d.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"15px"},children:s.map(((e,t)=>(0,d.jsxs)("div",{style:{position:"relative",borderRadius:"10px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:[e.path.match(/\.(mp4|webm|ogg|mov|avi)$/i)?(0,d.jsx)("video",{controls:!0,src:e.url,style:{width:"100%",height:"150px",objectFit:"cover",display:"block"},alt:`Video Preview ${t+1}`}):e.path.match(/\.(jpg|jpeg|png|gif|bmp|svg)$/i)?(0,d.jsx)("img",{src:e.url,alt:`Image Preview ${t+1}`,style:{width:"100%",height:"150px",objectFit:"cover",display:"block"}}):(0,d.jsx)("p",{style:{color:"#666"},children:"Unsupported media type"}),(0,d.jsx)("button",{onClick:()=>(e=>{const t=a.media.filter(((t,s)=>s!==e));l((e=>({...e,media:t})));const r=s.filter(((t,s)=>s!==e));i(r)})(t),style:{position:"absolute",top:"8px",right:"8px",backgroundColor:"rgba(255, 0, 0, 0.8)",border:"none",color:"#fff",fontWeight:"bold",borderRadius:"50%",width:"24px",height:"24px",cursor:"pointer",lineHeight:"22px",textAlign:"center"},title:"Remove Media",children:"\xd7"})]},t)))}):(0,d.jsx)("p",{style:{textAlign:"center",color:"#666"},children:"No media selected"})]})})};var c=s(86213),x=s(14840);function p(){const[e,t]=(0,r.useState)(!0);function s(e){if(!e)return"PROD/2025/12";const t=e.split("/");if(3!==t.length||"PROD"!==t[0])throw new Error("Invalid product ID format. Expected format: PROD/YYYY/NN");const s=t[1],r=parseInt(t[2],10);if(isNaN(r))throw new Error("Invalid number part in product ID");return`PROD/${s}/${r+1}`}const[p,m]=(0,r.useState)({ProductId:"",description:"",media:[],previousMedia:[]}),[u,f]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[b,j]=(0,r.useState)([]);(0,r.useEffect)((()=>console.log(p)),[p]),(0,r.useEffect)((()=>console.log(b)),[b]);return(0,r.useEffect)((()=>{(async()=>{try{f(!0);const e=await c.A.get("api/product/all",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(console.log(e.data),e.data){const t=e.data[e.data.length-1];m((e=>({...e,ProductId:s(t.productId)})))}}catch(e){console.error("Error fetching advance payments:",e.message)}finally{f(!1)}})()}),[]),u?(0,d.jsx)(x.A,{}):(0,d.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,d.jsx)(l.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,d.jsxs)("div",{className:"flex flex-grow",children:[(0,d.jsx)(a.A,{isSidebarOpen:e}),(0,d.jsxs)("div",{className:"relative flex flex-col flex-grow p-2 md:p-2",children:[(0,d.jsxs)("header",{className:"flex flex-col items-center justify-between p-4 rounded-md shadow sm:flex-row",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1 text-center sm:flex-row sm:text-left",children:[(0,d.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"New Product"}),(0,d.jsx)("span",{className:"text-xs text-gray-600 sm:text-sm",children:"Add/Update Product"})]}),(0,d.jsxs)("nav",{className:"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0",children:[(0,d.jsxs)(i.k2,{to:"/dashboard",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,d.jsx)(o.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,d.jsx)(i.k2,{to:"/product/view",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:"> Product List"}),(0,d.jsx)(i.k2,{to:"/product/add",className:"text-gray-700 no-underline hover:text-cyan-600",children:"> Add Product"})]})]}),h&&(0,d.jsx)(n,{previewUrls:b,setPreviewUrls:j,setView:g,view:h,formData:p,setFormData:m}),(0,d.jsxs)("div",{className:"p-4 mt-1 bg-white border-t-4 rounded-lg shadow-md border-cyan-500",children:[(0,d.jsxs)("div",{className:"flex w-full gap-2",children:[(0,d.jsxs)("div",{className:"flex flex-col w-full",children:[(0,d.jsx)("label",{children:"Product Id"}),(0,d.jsx)("input",{type:"text",readOnly:!0,className:"w-full px-2 py-1 border-2 rounded-md",value:p.ProductId})]}),(0,d.jsxs)("div",{className:"flex flex-col w-full",children:[(0,d.jsx)("label",{children:"Description"}),(0,d.jsx)("input",{type:"text",value:p.description,onChange:e=>m((t=>({...t,description:e.target.value}))),className:"w-full px-2 py-1 border-2 rounded-md"})]})]}),(0,d.jsxs)("div",{className:"flex flex-col w-full mt-4",children:[(0,d.jsx)("label",{children:"Media"}),(0,d.jsx)("input",{type:"file",onChange:async e=>{const t=e.target.files[0];if(t){const s=URL.createObjectURL(t);j((e=>[...e,{url:s,path:t.name}])),m((t=>({...t,media:[...t.media,e.target.files[0]]})))}else alert("Please select an image file.")},className:"w-full px-2 py-1 border-2 rounded-md"})]}),(0,d.jsx)("div",{className:"flex-col w-full mt-4",children:(0,d.jsx)("button",{onClick:()=>g(!0),className:"z-50 px-3 py-1 mt-2 ml-2 text-white transition bg-blue-500 rounded-md hover:bg-blue-600",children:"\ud83d\udcf7 View Gallery"})}),(0,d.jsx)("div",{className:"flex-col w-full mt-4",children:(0,d.jsx)("button",{onClick:async()=>{const e=new FormData;e.append("ProductId",p.ProductId),e.append("description",p.description),p.media.forEach((t=>{e.append("media",t)}));try{f(!0);const t=await c.A.post("api/product/add",e);alert("created successfully"),console.log("Success:",t.data),m({ProductId:s(t.response.productId),description:"",media:[],previousMedia:[]})}catch(t){console.error("Error fetching item code:",t)}finally{f(!1)}},className:"z-50 px-3 py-1 mt-2 ml-2 text-white transition bg-blue-500 rounded-md hover:bg-blue-600",children:"Submit"})})]})]})]})]})}}}]);
//# sourceMappingURL=8162.835e860e.chunk.js.map