{"version":3,"file":"static/js/2184.2c82f95f.chunk.js","mappings":"yMA4MA,QAtMA,WACE,MAAM,WAAEA,IAAeC,EAAAA,EAAAA,KACjBC,GAAWC,EAAAA,EAAAA,OACVC,EAAeC,IAAkBC,EAAAA,EAAAA,WAAS,IAC1CC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAGhCG,EAAUC,IAAeJ,EAAAA,EAAAA,UAAS,CACvCK,UAAW,GACXC,MAAO,GACPC,OAAQ,YAEXC,EAAAA,EAAAA,YAAU,KACJC,OAAOC,WAAa,KACrBX,GAAe,EACjB,GACA,IAEF,MAAOY,EAAUC,IAAeZ,EAAAA,EAAAA,UAAS,KAGzCQ,EAAAA,EAAAA,YAAU,KACRK,IACInB,GACFoB,EAAcpB,EAChB,GACC,CAACA,IAEJ,MAAMmB,EAAgBE,UACpB,IACE,MAAMC,EAAQC,aAAaC,QAAQ,SAC7BC,QAAYC,EAAAA,EAAMC,IAAI,YAAa,CACvCC,QAAS,CAAEC,cAAe,UAAUP,OAEtCJ,EAAYO,EAAIK,KAAKA,MAAQ,GAC/B,CAAE,MAAOC,GACPC,QAAQD,MAAM,4BAA6BA,EAAME,QACnD,GAGIb,EAAgBC,UACpBb,GAAW,GACX,IACE,MAAMc,EAAQC,aAAaC,QAAQ,SAI7BM,SAHYJ,EAAAA,EAAMC,IAAI,kBAAkBO,IAAM,CAClDN,QAAS,CAAEC,cAAe,UAAUP,QAErBQ,KAAKA,KACtBpB,EAAY,CACVC,UAAWmB,EAAKnB,WAAa,GAC7BC,MAAOkB,EAAKlB,MAAQkB,EAAKlB,MAAMuB,KAAKC,GAAMA,EAAEC,MAAO,GACnDxB,OAAQiB,EAAKjB,QAAU,UAE3B,CAAE,MAAOkB,GACPC,QAAQD,MAAM,4BAA6BA,EAAME,QACnD,CAAC,QACCzB,GAAW,EACb,GAGI8B,EAAgBC,IACpB7B,GAAa8B,IAAI,IAAWA,EAAM,CAACD,EAAEE,OAAOC,MAAOH,EAAEE,OAAOE,SAAS,EAGjEC,EAAmBL,IACvB,MAAMI,EAAQJ,EAAEE,OAAOE,MACnBlC,EAASG,MAAMiC,SAASF,GAE1BjC,GAAa8B,IAAI,IACZA,EACH5B,MAAO4B,EAAK5B,MAAMkC,QAAQV,GAAMA,IAAMO,QAIxCjC,GAAa8B,IAAI,IACZA,EACH5B,MAAO,IAAI4B,EAAK5B,MAAO+B,MAE3B,EAuCF,OAAIpC,GAAgBwC,EAAAA,EAAAA,KAAA,OAAAC,SAAK,gBAGvBC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qCAAoCF,SAAA,EAEjDD,EAAAA,EAAAA,KAACI,EAAAA,EAAM,CAAC/C,cAAeA,EAAeC,eAAgBA,KAGtD4C,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBF,SAAA,EAC7BD,EAAAA,EAAAA,KAACK,EAAAA,EAAO,CAAChD,cAAeA,KACxB6C,EAAAA,EAAAA,MAAA,OAAKC,UAAW,oDAAoDF,SAAA,EAClED,EAAAA,EAAAA,KAAA,MAAIG,UAAU,yBAAwBF,SAAEhD,EAAa,iBAAmB,mBACxE+C,EAAAA,EAAAA,KAAA,OAAKG,UAAU,qCAAoCF,UACjDC,EAAAA,EAAAA,MAAA,QAAMI,SAjDKhC,UACnBkB,EAAEe,iBACF9C,GAAW,GACX,IACE,MACMoB,EAAU,CAAEC,cAAe,UADnBN,aAAaC,QAAQ,YAE/BxB,SAEI0B,EAAAA,EAAM6B,IACV,kBAAkBvD,IAClBS,EACA,CAAEmB,YAEJ4B,MAAM,2CAGA9B,EAAAA,EAAM+B,KACV,iBACAhD,EACA,CAAEmB,YAEJ4B,MAAM,oCAERtD,EAAS,YACX,CAAE,MAAO6B,GACPC,QAAQD,MAAM,8BAA+BA,EAAME,SACnDuB,MAAM,8BACR,CAAC,QACChD,GAAW,EACb,GAoBqCwC,SAAA,EAC3BC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMF,SAAA,EACnBD,EAAAA,EAAAA,KAAA,SAAOG,UAAU,2BAA0BF,SAAC,gBAC5CD,EAAAA,EAAAA,KAAA,SACEW,KAAK,OACLhB,KAAK,YACLC,MAAOlC,EAASE,UAChBgD,SAAUrB,EACVY,UAAU,4CACVU,UAAQ,QAIZX,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMF,SAAA,EACnBD,EAAAA,EAAAA,KAAA,SAAOG,UAAU,2BAA0BF,SAAC,eAC5CD,EAAAA,EAAAA,KAAA,OAAKG,UAAU,uBAAsBF,SAClC/B,EAASkB,KAAK0B,IACbZ,EAAAA,EAAAA,MAAA,SAAqBC,UAAU,8BAA6BF,SAAA,EAC1DD,EAAAA,EAAAA,KAAA,SACEW,KAAK,WACLf,MAAOkB,EAAIxB,IACXyB,QAASrD,EAASG,MAAMiC,SAASgB,EAAIxB,KACrCsB,SAAUf,KAEZK,EAAAA,EAAAA,MAAA,QAAAD,SAAA,CACGa,EAAIE,QAAQ,KAAGF,EAAIG,cAAc,UAR1BH,EAAIxB,aAetBY,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMF,SAAA,EACnBD,EAAAA,EAAAA,KAAA,SAAOG,UAAU,2BAA0BF,SAAC,YAC5CC,EAAAA,EAAAA,MAAA,UACEP,KAAK,SACLC,MAAOlC,EAASI,OAChB8C,SAAUrB,EACVY,UAAU,4CAA2CF,SAAA,EAErDD,EAAAA,EAAAA,KAAA,UAAQJ,MAAM,SAAQK,SAAC,YACvBD,EAAAA,EAAAA,KAAA,UAAQJ,MAAM,WAAUK,SAAC,oBAG7BC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,6BAA4BF,SAAA,EACzCD,EAAAA,EAAAA,KAAA,UACEW,KAAK,SACLO,SAAU1D,EACV2C,UAAU,+DAA8DF,SAEvEhD,EAAa,mBAAqB,UAErC+C,EAAAA,EAAAA,KAAA,UACEW,KAAK,SACLQ,QAvEIC,KAClBjE,EAAS,YAAY,EAuEPgD,UAAU,iEAAgEF,SAC3E,0BAUjB,C","sources":["components/Settings/AddTaxGroup.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\"; // Changed from useSearchParams to useParams\r\nimport axios from \"axios\";\r\nimport Navbar from \"../Navbar\";\r\nimport Sidebar from \"../Sidebar\";\r\n\r\nfunction AddTaxGroup() {\r\n  const { taxGroupId } = useParams(); // Get taxGroupId from URL\r\n  const navigate = useNavigate();\r\n  const [isSidebarOpen, setSidebarOpen] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Form data for the tax group\r\n  const [formData, setFormData] = useState({\r\n    groupName: \"\",\r\n    taxes: [], // Array of selected tax IDs\r\n    status: \"active\"\r\n  });\r\n useEffect(()=>{\r\n    if(window.innerWidth < 768){\r\n      setSidebarOpen(false)\r\n    }\r\n  },[])\r\n  // All available taxes to select from\r\n  const [allTaxes, setAllTaxes] = useState([]);\r\n\r\n  // Fetch all taxes and, if editing, load the existing tax group\r\n  useEffect(() => {\r\n    fetchAllTaxes();\r\n    if (taxGroupId) {\r\n      fetchTaxGroup(taxGroupId);\r\n    }\r\n  }, [taxGroupId]);\r\n\r\n  const fetchAllTaxes = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const res = await axios.get(\"api/taxes\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setAllTaxes(res.data.data || []);\r\n    } catch (error) {\r\n      console.error(\"Error fetching all taxes:\", error.message);\r\n    }\r\n  };\r\n\r\n  const fetchTaxGroup = async (id) => {\r\n    setLoading(true);\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const res = await axios.get(`api/tax-groups/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      const data = res.data.data;\r\n      setFormData({\r\n        groupName: data.groupName || \"\",\r\n        taxes: data.taxes ? data.taxes.map((t) => t._id) : [],\r\n        status: data.status || \"active\"\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error fetching tax group:\", error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setFormData((prev) => ({ ...prev, [e.target.name]: e.target.value }));\r\n  };\r\n\r\n  const handleTaxSelect = (e) => {\r\n    const value = e.target.value;\r\n    if (formData.taxes.includes(value)) {\r\n      // Remove if already selected\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        taxes: prev.taxes.filter((t) => t !== value)\r\n      }));\r\n    } else {\r\n      // Add if not selected\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        taxes: [...prev.taxes, value]\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const headers = { Authorization: `Bearer ${token}` };\r\n      if (taxGroupId) {\r\n        // Update existing tax group\r\n        await axios.put(\r\n          `api/tax-groups/${taxGroupId}`,\r\n          formData,\r\n          { headers }\r\n        );\r\n        alert(\"Tax Group updated successfully!\");\r\n      } else {\r\n        // Create new tax group\r\n        await axios.post(\r\n          \"api/tax-groups\",\r\n          formData,\r\n          { headers }\r\n        );\r\n        alert(\"Tax Group created successfully!\");\r\n      }\r\n      navigate(\"/tax-list\"); // Navigate back to the tax list\r\n    } catch (error) {\r\n      console.error(\"Error submitting tax group:\", error.message);\r\n      alert(\"Error submitting tax group.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    navigate(\"/tax-list\"); // Navigate to the tax list page\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen bg-gray-100\">\r\n      {/* Navbar */}\r\n      <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\r\n\r\n      {/* Main Layout: Sidebar & Content */}\r\n      <div className=\"flex flex-grow\">\r\n        <Sidebar isSidebarOpen={isSidebarOpen} />\r\n        <div className={`flex-grow w-full p-4 transition-all duration-300 `}>\r\n          <h1 className=\"mb-4 text-xl font-bold\">{taxGroupId ? \"Edit Tax Group\" : \"Add Tax Group\"}</h1>\r\n          <div className=\"p-4 bg-white rounded-md shadow-md \">\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"mb-4\">\r\n                <label className=\"block mb-1 font-semibold\">Group Name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"groupName\"\r\n                  value={formData.groupName}\r\n                  onChange={handleChange}\r\n                  className=\"w-full p-2 border border-gray-300 rounded\"\r\n                  required\r\n                />\r\n              </div>\r\n              {/* Sub Taxes selection */}\r\n              <div className=\"mb-4\">\r\n                <label className=\"block mb-1 font-semibold\">Sub Taxes</label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {allTaxes.map((tax) => (\r\n                    <label key={tax._id} className=\"flex items-center space-x-1\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        value={tax._id}\r\n                        checked={formData.taxes.includes(tax._id)}\r\n                        onChange={handleTaxSelect}\r\n                      />\r\n                      <span>\r\n                        {tax.taxName} ({tax.taxPercentage}%)\r\n                      </span>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              {/* Status selection */}\r\n              <div className=\"mb-4\">\r\n                <label className=\"block mb-1 font-semibold\">Status</label>\r\n                <select\r\n                  name=\"status\"\r\n                  value={formData.status}\r\n                  onChange={handleChange}\r\n                  className=\"w-full p-2 border border-gray-300 rounded\"\r\n                >\r\n                  <option value=\"active\">Active</option>\r\n                  <option value=\"inactive\">Inactive</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"flex justify-end space-x-2\">\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  className=\"px-4 py-2 text-white bg-green-500 rounded hover:bg-green-600\"\r\n                >\r\n                  {taxGroupId ? \"Update Tax Group\" : \"Save\"}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleClose}\r\n                  className=\"px-4 py-2 text-white bg-orange-500 rounded hover:bg-orange-600\"\r\n                >\r\n                  Close\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddTaxGroup;\r\n"],"names":["taxGroupId","useParams","navigate","useNavigate","isSidebarOpen","setSidebarOpen","useState","loading","setLoading","formData","setFormData","groupName","taxes","status","useEffect","window","innerWidth","allTaxes","setAllTaxes","fetchAllTaxes","fetchTaxGroup","async","token","localStorage","getItem","res","axios","get","headers","Authorization","data","error","console","message","id","map","t","_id","handleChange","e","prev","target","name","value","handleTaxSelect","includes","filter","_jsx","children","_jsxs","className","Navbar","Sidebar","onSubmit","preventDefault","put","alert","post","type","onChange","required","tax","checked","taxName","taxPercentage","disabled","onClick","handleClose"],"sourceRoot":""}