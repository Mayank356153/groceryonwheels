"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4031],{14840:(e,t,s)=>{s.d(t,{A:()=>i});var l=s(65043),a=s(21197),r=s(59255),d=s(70579);function i(){const[e,t]=(0,l.useState)(!1);return(0,d.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,d.jsx)(a.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,d.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,d.jsx)("div",{children:(0,d.jsx)(r.A,{isSidebarOpen:e})}),(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,d.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},16246:(e,t,s)=>{s.d(t,{A:()=>a});var l=s(70579);const a=e=>{let{title:t,value:s=0,icon:a,className:r="",props:d}=e;const i=a;return(0,l.jsxs)("div",{className:r,children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h2",{className:"text-3xl font-bold",children:["\u20b9",s]}),(0,l.jsx)("p",{className:"mt-1 text-sm uppercase",children:t})]}),(0,l.jsx)("div",{className:"transition-transform duration-300 ease-in-out hover:scale-125",children:(0,l.jsx)(i,{size:48,className:"opacity-60"})})]})}},44031:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var l=s(65043),a=s(21197),r=s(59255),d=s(16246),i=s(70579);const n=e=>{let{title:t,value:s="0",icon:l,className:a=""}=e;const r=l;return(0,i.jsxs)("div",{className:`flex items-center text-left  w-full   text-white shadow-md rounded-xl bg-white  ${a}`,children:[(0,i.jsx)("div",{className:"flex items-center justify-center w-24 h-24 text-white rounded-lg bg-gradient-to-br from-cyan-700 to-blue-600",children:(0,i.jsx)(r,{size:64})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:s}),(0,i.jsx)("p",{className:"text-lg font-semibold text-gray-700 uppercase",children:t})]})]})};var o=s(86213),c=s(60184),x=s(50108),m=s(82291),h=s(87734),u=s(52185),b=s(6026),p=s(86150),j=s(21327),g=s(38643),f=s(60446),y=s.n(f);const v=e=>{let{active:t}=e;const[s,a]=(0,l.useState)([]),[r,d]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{(async()=>{try{d(!0);const e=await o.A.get(`api/dashboard-chart-data?interval=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),{purchases:s,sales:l,expenses:r}=e.data.data,i={},n=(e,s)=>{e.forEach((e=>{let{_id:l,total:a}=e,r="";"daily"===t?r=y()(l).format("DD MMM,YYYY"):"weekly"===t?r=`${y()(l).startOf("week").format("DD MMM")} - ${y()(l).endOf("week").format("DD MMM,YYYY")}`:"monthly"===t?r=y()(l).format("MMM,YYYY"):"yearly"===t&&(r=y()(l).format("YYYY")),i[r]||(i[r]={month:r,Purchase:0,Sales:0,Expense:0}),i[r][s]+=a}))};n(s,"Purchase"),n(l,"Sales"),n(r,"Expense");const c=Object.values(i).sort(((e,t)=>y()(e.month,"MMM,YYYY").isAfter(y()(t.month,"MMM,YYYY"))?1:-1));a(c)}catch(e){console.log(e.message)}finally{d(!1)}})()}),[t]),(0,i.jsxs)("div",{className:"w-full p-4 transition-all duration-300 bg-white border-t-4 border-blue-700 rounded-md shadow-md",children:[(0,i.jsx)("h3",{className:"mb-4 text-lg font-semibold text-gray-700",children:"Purchase, Sales & Expense Bar Chart"}),(0,i.jsx)("div",{className:"relative w-full h-[500px]",children:r?(0,i.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-100 rounded animate-pulse",children:[(0,i.jsx)("div",{className:"w-10 h-10 mb-4 border-t-4 border-blue-500 border-solid rounded-full animate-spin"}),(0,i.jsx)("p",{className:"font-medium text-gray-600",children:"Fetching chart data..."})]}):(0,i.jsx)("div",{className:"w-full h-full fade-in",children:(0,i.jsx)(x.u,{width:"100%",height:"100%",children:(0,i.jsxs)(m.E,{data:s,margin:{top:10,right:20,left:0,bottom:5},children:[(0,i.jsx)(h.d,{strokeDasharray:"3 3"}),(0,i.jsx)(u.W,{dataKey:"month"}),(0,i.jsx)(b.h,{}),(0,i.jsx)(p.m,{}),(0,i.jsx)(j.s,{}),(0,i.jsx)(g.y,{dataKey:"Purchase",fill:"orangered"}),(0,i.jsx)(g.y,{dataKey:"Sales",fill:"blue"}),(0,i.jsx)(g.y,{dataKey:"Expense",fill:"green"})]})})})})]})};var N=s(60163),w=s(4240),k=s(17869);const S=["#8884d8","#8dd1e1","#82ca9d","#a4de6c","#d0ed57","#ffc658","#ff8042","#00C49F","#FFBB28","#FF8042"];function C(){const[e,t]=(0,l.useState)([]);return(0,l.useEffect)((()=>{(async()=>{try{const e=await o.A.get("api/items/top-trending?limit=10",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),s=e.data.data.map((e=>({name:e.itemName,value:e.totalSold})));console.log(s),t(s),console.log(e.data)}catch(e){console.log(e.message)}})()}),[]),(0,i.jsxs)("div",{className:"flex flex-col items-center w-full ",children:[(0,i.jsx)("h2",{className:"mb-4 text-lg font-semibold",children:"TOP 10 TRENDING ITEMS"}),(0,i.jsxs)(N.r,{width:400,height:400,children:[(0,i.jsx)(w.F,{data:e,cx:"50%",cy:"50%",innerRadius:100,outerRadius:160,fill:"#8884d8",paddingAngle:3,dataKey:"value",children:e.map(((e,t)=>(0,i.jsx)(k.f,{fill:S[t%S.length]},`cell-${t}`)))}),(0,i.jsx)(p.m,{}),(0,i.jsx)(j.s,{verticalAlign:"top",height:36})]})]})}var A=s(37762),Y=s(64857),M=s(11238);s(14840);const D=()=>{const[e,t]=(0,l.useState)([]),[s,x]=(0,l.useState)([]),[m,h]=(0,l.useState)([]),[u,b]=(0,l.useState)([]),[p,j]=(0,l.useState)(""),[g,f]=(0,l.useState)(10),[y,N]=(0,l.useState)(1),[w,k]=(0,l.useState)(!0),[S,D]=(0,l.useState)("daily");(0,l.useEffect)((()=>{window.innerWidth<768&&k(!1)}),[window.innerWidth]);(0,l.useEffect)((()=>{(async()=>{try{const e=await o.A.get("api/dashboard-summary",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});t(e.data.data)}catch(e){console.log(e.message)}})(),(async()=>{try{const e=await o.A.get("api/items/summary",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});x(e.data.data)}catch(e){console.log(e.message)}})(),(async()=>{try{const e=await o.A.get("api/items/low-stock?threshold=10",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});h(e.data.data)}catch(e){console.log(e.message)}})(),(async()=>{try{const e=await o.A.get("api/sales/recent?limit=10",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});b(e.data.data)}catch(e){console.log(e.message)}})()}),[]);const E=m.filter((e=>{var t;const s=p.toLowerCase();return null===(t=e.itemName)||void 0===t?void 0:t.toLowerCase().includes(s)})),I=y*g,L=I-g,B=Math.ceil(E.length/g),$=E.slice(L,I),P=e=>{e>=1&&e<=B&&N(e)};return(0,i.jsxs)("div",{className:"flex flex-col ",children:[(0,i.jsx)(a.A,{isSidebarOpen:w,setSidebarOpen:k}),(0,i.jsxs)("div",{className:"box-border flex min-h-screen bg-gray-400",children:[(0,i.jsx)("div",{className:"w-auto",children:(0,i.jsx)(r.A,{isSidebarOpen:w})}),(0,i.jsxs)("div",{className:"flex flex-col w-full px-2 py-2 mx-auto overflow-x-auto bg-gray-200",children:[(0,i.jsx)("header",{className:"text-2xl font-semibold text-gray-700",children:"DashBoard"}),(0,i.jsxs)("div",{className:"flex justify-end w-full mt-2",children:[(0,i.jsx)("button",{className:"px-2 py-2 border rounded-l-md "+("daily"===S?"bg-cyan-500 text-white":"bg-blue-400"),onClick:()=>D("daily"),children:"Today"}),(0,i.jsx)("button",{className:"px-2 py-2 border  "+("weekly"===S?"bg-cyan-500 text-white":"bg-blue-400"),onClick:()=>D("weekly"),onCLick:()=>D("weekly"),children:"Weekly"}),(0,i.jsx)("button",{className:"px-2 py-2 border  "+("monthly"===S?"bg-cyan-500 text-white":"bg-blue-400"),onClick:()=>D("monthly"),onCLick:()=>D("monthly"),children:"Monthly"}),(0,i.jsx)("button",{className:"px-2 py-2 border  "+("yearly"===S?"bg-cyan-500 text-white":"bg-blue-400"),onClick:()=>D("yearly"),onCLick:()=>D("yearly"),children:"Yearly"}),(0,i.jsx)("button",{className:"px-3 py-2 border rounded-r-md "+("all"===S?"bg-cyan-500 text-white":"bg-blue-400"),onClick:()=>D("all"),onCLick:()=>D("yearly"),children:"All"})]}),(0,i.jsxs)("div",{className:"grid w-full grid-cols-1 gap-4 mt-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[(0,i.jsx)(d.A,{title:"Purchase Due",value:(null===e||void 0===e?void 0:e.purchaseDue)||"0",icon:c.$ZR,className:"flex items-center justify-between w-full p-4 text-white shadow-md rounded-xl bg-gradient-to-r from-purple-600 to-pink-500 h-28"}),(0,i.jsx)(d.A,{title:"Sales Due",value:(null===e||void 0===e?void 0:e.salesDue)||"0",icon:c.LyP,className:"flex items-center justify-between w-full p-4 text-white shadow-md rounded-xl bg-gradient-to-r from-orange-500 to-pink-600 h-28"}),(0,i.jsx)(d.A,{title:"Sales",value:(null===e||void 0===e?void 0:e.totalSales)||"0",icon:c.t69,className:"flex items-center justify-between w-full p-4 text-white shadow-md rounded-xl bg-gradient-to-r from-green-500 to-cyan-400 h-28"}),(0,i.jsx)(d.A,{title:"Expense",value:(null===e||void 0===e?void 0:e.totalExpense)||"0",icon:c.tx_,className:"flex items-center justify-between w-full p-4 text-white shadow-md rounded-xl bg-gradient-to-r from-blue-900 to-sky-500 h-28"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-4 mt-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[(0,i.jsx)(n,{title:"Customers",value:(null===e||void 0===e?void 0:e.customerCount)||"0",icon:c.YXz}),(0,i.jsx)(n,{title:"Suppliers",value:(null===e||void 0===e?void 0:e.supplierCount)||"0",icon:c.dv1}),(0,i.jsx)(n,{title:"Purchases",value:(null===e||void 0===e?void 0:e.purchaseCount)||"0",icon:c._yv}),(0,i.jsx)(n,{title:"Invoices",value:(null===e||void 0===e?void 0:e.invoiceCount)||"0",icon:c.AsH})]}),(0,i.jsxs)("div",{className:"flex flex-col w-full gap-4 p-2 mt-4 md:flex-row",children:[(0,i.jsx)(v,{active:S}),(0,i.jsxs)("div",{className:"w-full h-auto bg-white border-t-4 border-blue-700 rounded-md md:w-1/2 md:m-0",children:[(0,i.jsx)("h5",{className:"p-2 text-center border-b-2 border-gray-300",children:"RECENTLY ADDED ITEMS"}),(0,i.jsx)("div",{className:"h-50",children:(0,i.jsxs)("table",{className:"w-full border-collapse table-auto h-50",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"border-b-2 border-gray-300",children:[(0,i.jsx)("th",{className:"px-2 py-1 text-left",children:"Sl.No"}),(0,i.jsx)("th",{className:"px-2 text-left",children:"Item Name"}),(0,i.jsx)("th",{className:"px-2 text-left",children:"Item Sales Price"})]})}),(0,i.jsx)("tbody",{children:null===s||void 0===s?void 0:s.slice(-12).map(((e,t)=>(0,i.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-4 py-2",children:t+1}),(0,i.jsx)("td",{className:"px-4 py-2",children:e.itemName}),(0,i.jsx)("td",{className:"px-4 py-2",children:e.salesPrice})]},t)))})]})})]})]}),(0,i.jsxs)("div",{className:"flex flex-col w-full py-4 mt-3 bg-white border-t-4 border-blue-600 rounded-md",children:[(0,i.jsx)("h5",{className:"px-2 py-2",children:"STOCK ALERT"}),(0,i.jsxs)("div",{className:"flex flex-col items-start justify-between w-full gap-2 px-2 md:items-center md:flex-row md:gap-0",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:"show"}),(0,i.jsxs)("select",{className:"px-2 py-1 ml-1 border",value:g,onChange:e=>{f(Number(e.target.value)),N(1)},children:[(0,i.jsx)("option",{value:"10",children:"10"}),(0,i.jsx)("option",{value:"10",children:"20"}),(0,i.jsx)("option",{value:"10",children:"50"})]}),(0,i.jsx)("span",{children:"entries"})]}),(0,i.jsxs)("div",{className:"flex flex-col items-start gap-2 md:items-center md:flex-row",children:[(0,i.jsxs)("div",{className:"flex items-center w-full gap-2",children:[(0,i.jsx)("button",{onClick:()=>{const e=y.map((e=>{var t,s;return`${e.itemName}, ${null===(t=e.category)||void 0===t?void 0:t.name}, ${null===(s=e.brand)||void 0===s?void 0:s.brnadName}`})).join("\n");navigator.clipboard.writeText(e),alert("Data copied to clipboard!")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Copy"}),(0,i.jsx)("button",{onClick:()=>{const e=M.utils.json_to_sheet(m),t=M.utils.book_new();M.utils.book_append_sheet(t,e,"LowStock"),M.writeFile(t,"low_stock.xlsx")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Excel"}),(0,i.jsx)("button",{onClick:()=>{const e=new A.uE;e.text("Low Stock List",20,20);const t=m.map(((e,t)=>{var s,l;return[t+1,e.itemName,null===(s=e.category)||void 0===s?void 0:s.name,null===(l=e.brand)||void 0===l?void 0:l.brandName]}));(0,Y.Ay)(e,{head:[["#","Item Name","Category Name","Brand Name"]],body:t}),e.save("lowStock.pdf")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"PDF"}),(0,i.jsx)("button",{onClick:()=>{window.print()},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Print"}),(0,i.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,"+m.map((e=>Object.values(e).join(","))).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","low_stock.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"CSV"})]}),(0,i.jsxs)("label",{htmlFor:"",children:["Search ",(0,i.jsx)("input",{type:"text",className:"px-2 py-1 border ",value:p,onChange:e=>j(e.target.value)})]})]})]}),(0,i.jsx)("div",{className:"w-full mt-4 overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full border border-gray-200",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"text-sm font-semibold text-gray-700 bg-gray-50",children:[(0,i.jsx)("th",{className:"w-12 px-4 py-2 text-left border",children:"#"}),(0,i.jsx)("th",{className:"px-4 py-2 text-left border",children:"Item Name"}),(0,i.jsx)("th",{className:"px-4 py-2 text-left border",children:"Category Name"}),(0,i.jsx)("th",{className:"px-4 py-2 text-left border",children:"Brand Name"})]})}),(0,i.jsx)("tbody",{className:"text-sm text-gray-600",children:$.length>0?$.map(((e,t)=>{var s,l;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"px-4 py-2 border",children:t+1}),(0,i.jsx)("td",{className:"px-4 py-2 border",children:e.itemName}),(0,i.jsx)("td",{className:"px-4 py-2 border",children:null===(s=e.category)||void 0===s?void 0:s.name}),(0,i.jsx)("td",{className:"px-4 py-2 border",children:(null===(l=e.brand)||void 0===l?void 0:l.brandName)||"NA"})]})})):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{className:"px-2 py-2 font-semibold text-center",colSpan:"4",children:"No Data Available"})})})]})}),(0,i.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 p-2 md:justify-between md:flex-row",children:[(0,i.jsxs)("span",{children:["Showing ",g*(y-1)+1," to ",Math.min(g*y,m.length)," of ",m.length," entries"]}),(0,i.jsxs)("div",{className:"flex justify-between w-full md:w-auto md:gap-2",children:[(0,i.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(1===y?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>P(y-1),disabled:1===y,children:[(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Previous"]}),(0,i.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(y>=B||0===B?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),disabled:y>=B||0===B,onClick:()=>P(y+1),children:["Next",(0,i.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]})]}),(0,i.jsxs)("div",{className:"flex flex-col w-full gap-4 mt-4 mb-2 overflow-x-auto md:flex-row",children:[(0,i.jsx)("div",{className:"w-full bg-white border-t-4 border-blue-700 rounded-md",children:(0,i.jsx)(C,{})}),(0,i.jsxs)("div",{className:"flex flex-col ",children:[(0,i.jsx)("div",{className:"w-full p-4 bg-white border-t-4 border-blue-700 rounded-t-lg",children:(0,i.jsx)("h2",{className:"text-xl font-semibold",children:"Recent Sales Invoices"})}),(0,i.jsx)("div",{className:"w-full overflow-x-auto border border-gray-200 rounded-b-md ",children:(0,i.jsxs)("table",{className:"min-w-[800px] w-full bg-white",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"text-left bg-gray-100",children:[(0,i.jsx)("th",{className:"px-2 py-2 text-sm border-b",children:"Sl.No"}),(0,i.jsx)("th",{className:"px-4 py-2 text-sm border-b",children:"Date"}),(0,i.jsx)("th",{className:"px-2 py-2 text-sm border-b",children:"Invoice ID"}),(0,i.jsx)("th",{className:"px-2 py-2 text-sm border-b",children:"Customer"}),(0,i.jsx)("th",{className:"px-2 py-2 text-sm border-b",children:"Total"}),(0,i.jsx)("th",{className:"px-2 py-2 text-sm border-b",children:"Status"}),(0,i.jsx)("th",{className:"px-2 py-2 text-sm border-b",children:"Created by"})]})}),(0,i.jsx)("tbody",{children:u.length>0?u.map(((e,t)=>{var s,l;return(0,i.jsxs)("tr",{className:"text-center",children:[(0,i.jsx)("td",{className:"px-4 text-sm border-b",children:t+1}),(0,i.jsx)("td",{className:"py-2 text-sm border-b",children:new Date(e.createdAt).toDateString()}),(0,i.jsx)("td",{className:"px-2 py-2 text-sm border-b",children:e.saleCode}),(0,i.jsx)("td",{className:"px-2 py-2 text-sm border-b",children:null===(s=e.customer)||void 0===s?void 0:s.email}),(0,i.jsx)("td",{className:"px-2 py-2 text-sm border-b",children:e.grandTotal||"0"}),(0,i.jsx)("td",{className:"px-2 py-2 text-sm border-b",children:e.status}),(0,i.jsx)("td",{className:"px-2 py-2 text-sm border-b",children:null===(l=e.createdBy)||void 0===l?void 0:l.name})]},e._id)})):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"7",className:"px-4 py-4 text-sm text-center text-gray-500",children:"No Data Available"})})})]})})]})]})]})]})]})}}}]);
//# sourceMappingURL=4031.a655d916.chunk.js.map