"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8906],{14840:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(65043),i=a(21197),s=a(59255),l=a(70579);function n(){const[e,t]=(0,r.useState)(!1);return(0,l.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,l.jsx)(i.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,l.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,l.jsx)("div",{children:(0,l.jsx)(s.A,{isSidebarOpen:e})}),(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,l.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},58906:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var r=a(65043),i=a(66727),s=a(21197),l=a(59255),n=a(60184),o=a(14840),d=a(86213),c=a(23546),m=a(3605),x=a(70579);const u=e=>{let{data:t,setView:a}=e;(0,r.useEffect)((()=>{const e=e=>{"Escape"===e.key&&a(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[a]);const i=[{label:"Profile Image",src:t.ProfileImage},{label:"Aadhar Card",src:t.AddharCardImage},{label:"PAN Card",src:t.PanCardImage},{label:"Driving License",src:t.DrivingLicenseImage}].filter((e=>e.src));return(0,x.jsx)(c.N,{children:(0,x.jsx)(m.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(4px)"},onClick:()=>a(!1),children:(0,x.jsxs)(m.P.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",damping:25},style:{backgroundColor:"#fff",padding:"2rem",borderRadius:"16px",maxHeight:"90vh",width:"90%",maxWidth:"1200px",overflowY:"auto",boxShadow:"0 10px 30px rgba(0,0,0,0.3)",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,x.jsx)("button",{onClick:()=>a(!1),style:{position:"absolute",top:"1rem",right:"1.5rem",background:"none",border:"none",fontSize:"1.5rem",fontWeight:"bold",color:"#666",cursor:"pointer",transition:"color 0.2s",padding:"0.5rem",borderRadius:"50%",width:"2.5rem",height:"2.5rem",display:"flex",alignItems:"center",justifyContent:"center"},onMouseOver:e=>e.currentTarget.style.color="#333",onMouseOut:e=>e.currentTarget.style.color="#666",title:"Close","aria-label":"Close modal",children:"\u2716"}),(0,x.jsx)("h2",{style:{textAlign:"center",marginBottom:"1.5rem",color:"#2d3748",fontSize:"1.8rem",fontWeight:"600"},children:"Rider Documents"}),0===i.length?(0,x.jsx)("div",{style:{textAlign:"center",padding:"2rem",color:"#718096",fontSize:"1.1rem"},children:"No documents available for preview"}):(0,x.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem",justifyItems:"center"},children:i.map(((e,t)=>(0,x.jsxs)(m.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},style:{width:"100%",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",backgroundColor:"#f8fafc"},children:[(0,x.jsx)("div",{style:{padding:"1rem",backgroundColor:"#f1f5f9",borderBottom:"1px solid #e2e8f0"},children:(0,x.jsx)("p",{style:{textAlign:"center",fontWeight:"600",margin:0,color:"#334155",fontSize:"1.1rem"},children:e.label})}),(0,x.jsx)("div",{style:{padding:"1rem",display:"flex",flexDirection:"column",gap:"1rem"},children:e.src.map(((t,a)=>(0,x.jsxs)("div",{style:{position:"relative",borderRadius:"8px",overflow:"hidden",border:"1px solid #e2e8f0"},children:[(0,x.jsx)("img",{src:`uploads/${t}`,alt:`${e.label} ${a+1}`,style:{width:"100%",height:"auto",maxHeight:"300px",objectFit:"contain",display:"block"},loading:"lazy"}),(0,x.jsx)("div",{style:{position:"absolute",bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.6)",color:"white",padding:"0.3rem",textAlign:"center",fontSize:"0.8rem"},children:t})]},a)))})]},t)))})]})})})};var h=a(11238),p=a(37762),b=a(64857);const g=()=>{const[e,t]=(0,r.useState)(!1),[a,c]=(0,r.useState)(null),[m,g]=(0,r.useState)(!0),[f,y]=(0,r.useState)([]),[j,v]=(0,r.useState)([]),[N,w]=(0,r.useState)(1),[S,A]=(0,r.useState)(10),[C,k]=(0,r.useState)([]),I=(0,i.Zp)(),[_,O]=(0,r.useState)(""),[R,$]=(0,r.useState)([]),[D,E]=(0,r.useState)(!1);(0,r.useEffect)((()=>{window.innerWidth<768&&g(!1)}),[]),(0,r.useEffect)((()=>{const e=localStorage.getItem("permissions");k(e?JSON.parse(e):[])}),[]);const L=async()=>{t(!0);const e=localStorage.getItem("token");if(e)try{const t=await fetch("/api/rider/all",{headers:{Authorization:`Bearer ${e}`}}),a=await t.json(),r=Array.isArray(a)?a:Array.isArray(a.data)?a.data:[];console.log(r),v(r)}catch(a){console.error("Error fetching users:",a)}finally{t(!1)}else I("/")};(0,r.useEffect)((()=>{L()}),[]);const P=j.filter((e=>{if(!_)return!0;const t=_.toLowerCase();return e.username.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)})),z=Math.ceil(P.length/S),M=(N-1)*S,U=P.slice(M,M+S);return e?(0,x.jsx)(o.A,{}):(0,x.jsxs)("div",{className:"flex flex-col ",children:[(0,x.jsx)(s.A,{isSidebarOpen:m,setSidebarOpen:g}),(0,x.jsxs)("div",{className:"box-border flex min-h-screen",children:[(0,x.jsx)("div",{className:"w-auto",children:(0,x.jsx)(l.A,{isSidebarOpen:m})}),(0,x.jsxs)("div",{className:"flex flex-col w-full p-2 mx-auto overflow-x-auto transition-all duration-300",children:[(0,x.jsxs)("header",{className:"flex flex-col items-center justify-start px-2 py-2 mb-2 bg-gray-100 rounded-md shadow md:justify-between md:flex-row",children:[(0,x.jsxs)("div",{className:"flex items-baseline gap-2 sm:text-left",children:[(0,x.jsx)("h1",{className:"text-lg font-semibold",children:"Rider List"}),(0,x.jsx)("span",{className:"text-xs text-gray-600",children:"View/Search Riders"})]}),(0,x.jsxs)("nav",{className:"flex gap-2 text-xs text-gray-500",children:[(0,x.jsxs)(i.k2,{to:"/dashboard",className:"flex items-center text-gray-500 no-underline hover:text-gray-800",children:[(0,x.jsx)(n.$BV,{})," Home"]}),(0,x.jsx)(i.k2,{to:"/admin/user/list",className:"text-gray-500 no-underline hover:text-gray-800",children:"> Riders List"})]})]}),D&&(0,x.jsx)(u,{setView:E,data:R}),(0,x.jsxs)("div",{className:"p-4 bg-white border rounded-lg shadow-md",children:[(0,x.jsxs)("header",{className:"flex items-center justify-between mb-4",children:[(0,x.jsx)("div",{children:"Riders List"}),(0,x.jsx)(i.N_,{to:"/rider/add",children:(0,x.jsx)("button",{className:"px-4 py-2 text-white rounded bg-cyan-500",children:"+ New Rider"})})]}),(0,x.jsxs)("div",{className:"flex flex-col justify-between mb-2 space-y-1 md:flex-row md:space-y-0 md:items-center",children:[(0,x.jsxs)("div",{className:"flex items-center w-full space-x-2",children:[(0,x.jsx)("span",{className:"text-sm",children:"Show"}),(0,x.jsxs)("select",{className:"p-2 text-sm border border-gray-300",value:S,onChange:e=>A(Number(e.target.value)),children:[(0,x.jsx)("option",{children:"10"}),(0,x.jsx)("option",{children:"20"}),(0,x.jsx)("option",{children:"50"})]}),(0,x.jsx)("span",{className:"text-sm",children:"Entries"})]}),(0,x.jsxs)("div",{className:"flex justify-end flex-1 gap-1 mt-2 mb-2 ",children:[(0,x.jsx)("button",{onClick:()=>{const e=`${["#","Store Name","Username","Name","Mobile","Email","Role","Created On","Status"].join("\t")}\n${U.map((e=>{var t,a,r;return[M+U.indexOf(e)+1,Array.isArray(e.store)?e.store.map((e=>e.StoreName)).join(", "):null!==(t=null===(a=e.store)||void 0===a?void 0:a.StoreName)&&void 0!==t?t:"N/A",e.username,`${e.firstname} ${e.lastname}`,e.mobile,e.email,null===(r=e.role)||void 0===r?void 0:r.roleName,new Date(e.createdAt).toDateString(),f.includes(e._id)?"Inactive":"Active"].join("\t")})).join("\n")}`;navigator.clipboard.writeText(e).then((()=>{alert("Table data copied to clipboard!")})).catch((t=>{console.error("Failed to copy: ",t);const a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),alert("Table data copied to clipboard!")}))},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"Copy"}),(0,x.jsx)("button",{onClick:()=>{const e=U.map((e=>{var t,a,r;return{"#":M+U.indexOf(e)+1,"Store Name":Array.isArray(e.store)?e.store.map((e=>e.StoreName)).join(", "):null!==(t=null===(a=e.store)||void 0===a?void 0:a.StoreName)&&void 0!==t?t:"N/A",Username:e.username,Name:`${e.firstname} ${e.lastname}`,Mobile:e.mobile,Email:e.email,Role:null===(r=e.role)||void 0===r?void 0:r.roleName,"Created On":new Date(e.createdAt).toDateString(),Status:f.includes(e._id)?"Inactive":"Active"}})),t=h.utils.json_to_sheet(e),a=h.utils.book_new();h.utils.book_append_sheet(a,t,"Users"),(0,h.writeFile)(a,"users_data.xlsx")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"Excel"}),(0,x.jsx)("button",{onClick:()=>{const e=new p.Ay;e.text("Riders Report",14,15);const t=U.map((e=>{var t,a,r;return[M+U.indexOf(e)+1,Array.isArray(e.store)?e.store.map((e=>e.StoreName)).join(", "):null!==(t=null===(a=e.store)||void 0===a?void 0:a.StoreName)&&void 0!==t?t:"N/A",e.username,`${e.firstname} ${e.lastname}`,e.mobile,e.email,null===(r=e.role)||void 0===r?void 0:r.roleName,new Date(e.createdAt).toDateString(),f.includes(e._id)?"Inactive":"Active"]}));(0,b.Ay)(e,{head:[["#","Store Name","Username","Name","Mobile","Email","Role","Created On","Status"]],body:t,startY:20,styles:{fontSize:8},headStyles:{fillColor:[220,220,220]}}),e.save("rider_list.pdf")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"PDF"}),(0,x.jsx)("button",{onClick:()=>{window.print()},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"Print"}),(0,x.jsx)("button",{onClick:()=>{const e=U.map((e=>{var t,a,r;return[M+U.indexOf(e)+1,Array.isArray(e.store)?`"${e.store.map((e=>e.StoreName)).join(", ")}"`:null!==(t=null===(a=e.store)||void 0===a?void 0:a.StoreName)&&void 0!==t?t:"N/A",e.username,`"${e.firstname} ${e.lastname}"`,e.mobile,e.email,null===(r=e.role)||void 0===r?void 0:r.roleName,new Date(e.createdAt).toDateString(),f.includes(e._id)?"Inactive":"Active"]})),t=[["#","Store Name","Username","Name","Mobile","Email","Role","Created On","Status"].join(","),...e.map((e=>e.join(",")))].join("\n"),a=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(a),i=document.createElement("a");i.setAttribute("href",r),i.setAttribute("download","riders_data.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500 lg:w-auto",children:"CSV"}),(0,x.jsx)("input",{type:"text",placeholder:"Search",className:"w-full p-2 text-sm border border-gray-300 md:w-auto",onChange:e=>O(e.target.value)})]})]}),(0,x.jsx)("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"w-full border border-collapse",children:[(0,x.jsx)("thead",{className:"bg-gray-200",children:(0,x.jsx)("tr",{children:["#","Store Name"," UserName","Name","Mobile","Email","Role","Created On","Images","Status","Action"].map((e=>(0,x.jsx)("th",{className:"p-1 border",children:e},e)))})}),(0,x.jsx)("tbody",{children:0===U.length?(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"10",className:"p-2 text-center",children:"No data Available"})}):U.map(((e,r)=>{var i,s,l;return(0,x.jsxs)("tr",{className:"text-sm",children:[(0,x.jsx)("td",{className:"p-1 border",children:M+r+1}),(0,x.jsx)("td",{className:"p-1 border",children:Array.isArray(e.store)?e.store.map((e=>e.StoreName)).join(", "):null!==(i=null===(s=e.store)||void 0===s?void 0:s.StoreName)&&void 0!==i?i:"N/A"}),(0,x.jsx)("td",{className:"p-1 border",children:e.username}),(0,x.jsxs)("td",{className:"p-1 border",children:[e.firstname," ",e.lastname]}),(0,x.jsx)("td",{className:"p-1 border",children:e.mobile}),(0,x.jsx)("td",{className:"p-1 border",children:e.email}),(0,x.jsx)("td",{className:"p-1 border",children:null===(l=e.role)||void 0===l?void 0:l.roleName}),(0,x.jsx)("td",{className:"p-1 border",children:new Date(e.createdAt).toDateString()}),(0,x.jsx)("td",{className:"p-1 border",children:(0,x.jsx)("button",{className:"px-3 bg-gray-300 rounded-2xl",onClick:()=>{E(!0),$({ProfileImage:e.profileImage,AddharCardImage:e.addharCardImage,PanCardImage:e.panCardImage,DrivingLicenseImage:e.drivingLicenseImage})},children:"View"})}),(0,x.jsx)("td",{className:"p-1 text-center transition duration-300 ease-in-out border cursor-pointer hover:bg-gray-100",onClick:()=>y((t=>t.includes(e._id)?t.filter((t=>t!==e._id)):[...t,e._id])),children:f.includes(e._id)?(0,x.jsx)("span",{className:"inline-block px-3 py-1 text-sm font-medium text-white transition duration-300 bg-red-600 rounded-full",children:"Inactive"}):(0,x.jsx)("span",{className:"inline-block px-3 py-1 text-sm font-medium text-white transition duration-300 bg-green-500 rounded-full",children:"Active"})}),(0,x.jsxs)("td",{className:"relative p-1 border",children:[(0,x.jsx)("button",{className:"px-3 py-1 text-white transition duration-300 rounded-full bg-cyan-600 hover:bg-cyan-700",onClick:()=>c((t=>t===e._id?null:e._id)),children:"Action \u23f7"}),a===e._id&&(0,x.jsxs)("div",{className:"absolute right-0 z-10 w-32 mt-2 bg-white border rounded-md shadow-lg animate-fade-in",children:[(0,x.jsx)("button",{className:"w-full px-3 py-2 text-sm text-left text-green-600 transition hover:bg-gray-100",onClick:()=>I(`/rider/add?id=${e._id}`),children:"\u270f\ufe0f Edit"}),(0,x.jsx)("button",{className:"w-full px-3 py-2 text-sm text-left text-red-600 transition hover:bg-gray-100",onClick:()=>(async e=>{if(window.confirm("Delete this user?")){t(!0);try{await d.A.delete(`/api/rider/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),L()}catch(a){console.error(a)}finally{t(!1)}}})(e._id),children:"\ud83d\uddd1\ufe0f Delete"})]})]})]},e._id)}))})]})}),(0,x.jsxs)("div",{className:"flex flex-col items-center gap-2 p-2 md:flex-row md:justify-between",children:[(0,x.jsxs)("span",{children:["Showing ",M+1," to ",Math.min(M+S,P.length)," of ",P.length," entries"]}),(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsx)("button",{className:"px-3 py-1 rounded "+(1===N?"bg-gray-300":"bg-blue-500 text-white"),disabled:1===N,onClick:()=>w((e=>e-1)),children:"Previous"}),(0,x.jsx)("button",{className:"px-3 py-1 rounded "+(N===z?"bg-gray-300":"bg-blue-500 text-white"),disabled:N===z,onClick:()=>w((e=>e+1)),children:"Next"})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=8906.9a989590.chunk.js.map