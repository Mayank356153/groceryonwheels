"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7188],{14840:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(65043),l=t(21197),r=t(59255),i=t(70579);function n(){const[e,s]=(0,a.useState)(!1);return(0,i.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,i.jsx)(l.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,i.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,i.jsx)("div",{children:(0,i.jsx)(r.A,{isSidebarOpen:e})}),(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,i.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},21830:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(65043),l=t(70579);function r(e){let{id:s=" ",type:t="text",label_class:r="",label:i,className:n="",placeholder:d="",div_class:o="",...c}=e;const x=(0,a.useId)();return(0,l.jsxs)("div",{className:o,children:[" ",i?(0,l.jsx)("label",{className:r,htmlFor:" "===s?x:s,children:i}):null," ",(0,l.jsx)("input",{type:t,id:" "===s?x:s,placeholder:d,className:n,...c})]})}},53888:(e,s,t)=>{t.d(s,{A:()=>l});t(65043);var a=t(70579);function l(e){let{text:s,type:t="button",className:l,...r}=e;return(0,a.jsx)("button",{className:`${l}`,...r,children:s})}},57188:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var a=t(65043),l=(t(53888),t(21830)),r=t(66727),i=t(21197),n=t(59255),d=t(60184),o=t(86213),c=t(37762),x=t(64857),m=t(11238),u=t(14840),p=t(70579);function h(){const e=(0,r.Zp)(),[s,t]=(0,a.useState)(!0),[h,f]=(0,a.useState)(null),[b,y]=(0,a.useState)(1),[j,g]=(0,a.useState)(10),[v,N]=(0,a.useState)(""),[w,A]=(0,a.useState)(!0),[k,C]=(0,a.useState)(!1),[S,_]=(0,a.useState)([]),[L,D]=(0,a.useState)(0),[$,I]=(0,a.useState)(0),[E,O]=(0,a.useState)(0),[R,M]=(0,a.useState)([]),[P,B]=(0,a.useState)("offline"),[V,W]=(0,a.useState)([]),[z,F]=(0,a.useState)([]);(0,a.useEffect)((()=>{window.innerWidth<768&&A(!1)}),[]);const T=async()=>{t(!0);try{const e=await o.A.get("api/customer-data/all",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});W(e.data)}catch(e){f(e.message)}finally{t(!1)}};(0,a.useEffect)((()=>{T(),(async()=>{t(!0);try{const e=await o.A.get("customer/customers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});F(e.data.data)}catch(e){f(e.message)}finally{t(!1)}})()}),[]);const U="offline"===P?V:z,G=U.filter((e=>{var s;return(null===(s=e.customerName||e.name)||void 0===s?void 0:s.toLowerCase().includes(v.toLowerCase()))||e._id.toLowerCase().includes(v.toLowerCase())})),H=Math.ceil(G.length/j),Z=G.slice((b-1)*j,b*j);(0,a.useEffect)((()=>{(()=>{if("offline"===P){const e=Z.reduce(((e,s)=>e+(s.creditLimit||0)),0),s=Z.reduce(((e,s)=>e+(s.previousDue||0)),0),t=Z.reduce(((e,s)=>e+(s.salesReturnDue||0)),0);D(e),I(s),O(t)}else D(0),I(0),O(0)})()}),[U,G,P]);const q=e=>{e>=1&&e<=H&&y(e)},J=(s,a)=>{const l=s.target.value;"edit"===l&&e(`/customer/add?id=${a}`),"delete"===l&&(async e=>{if(window.confirm("Do you want to delete customer?")){t(!0);try{await o.A.delete(`api/customer-data/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Deleted Successfully"),T()}catch(h){console.error(h.message)}finally{t(!1)}}})(a),"discount"===l&&e(`/create?customerid=${a}`)};return s?(0,p.jsx)(u.A,{}):h?(0,p.jsx)("h1",{children:"Something Went Wrong..."}):(0,p.jsxs)("div",{className:"flex flex-col overflow-x-hidden",children:[(0,p.jsx)(i.A,{isSidebarOpen:w,setSidebarOpen:A}),(0,p.jsxs)("div",{className:"flex w-screen overflow-x-hidden",children:[(0,p.jsx)(n.A,{isSidebarOpen:w}),(0,p.jsxs)("div",{className:"flex flex-col transition-all duration-300 p-2 w-full overflow-x-hidden",children:[(0,p.jsxs)("div",{className:"flex flex-col items-start justify-between py-2 md:items-end md:flex-row",children:[(0,p.jsxs)("div",{className:"flex items-end gap-2 pl-2",children:[(0,p.jsx)("span",{className:"text-3xl",children:"Customers List"}),(0,p.jsxs)("span",{className:"text-sm text-gray-700",children:["View / Search ","offline"===P?"Offline":"Online"," Customers"]})]}),(0,p.jsxs)("div",{className:"flex gap-2 pl-2 pr-2 mb-2 text-sm font-semibold text-black bg-gray-500 bg-opacity-50 rounded-md md:text-gray-500 md:justify-end md:bg-transparent",children:[(0,p.jsxs)(r.k2,{to:"/dashboard",className:"flex items-center text-gray-700 no-underline",children:[(0,p.jsx)(d.$BV,{}),"Home"]}),(0,p.jsx)("span",{}),(0,p.jsx)(r.k2,{to:"/customer/import",className:"text-gray-700 no-underline",children:"Import Customers"}),(0,p.jsx)("span",{}),(0,p.jsx)(r.k2,{to:"/customer/view",className:"text-gray-700 no-underline",children:"Customers"})]})]}),(0,p.jsxs)("div",{className:"w-full mx-auto bg-white border-t-4 border-collapse rounded-lg shadow-md border-opacity-55 border-t-blue-600",children:[(0,p.jsxs)("div",{className:"flex flex-col items-center justify-start px-3 py-2 sm:justify-between sm:flex-row",children:[(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)(l.A,{type:"checkbox"}),"View Account Receivable Customers"]}),(0,p.jsxs)("button",{className:"flex-shrink-0 px-4 py-2 font-bold text-center text-white bg-blue-600 rounded cursor-pointer hover:bg-blue-700",onClick:()=>e("offline"===P?"/customer/add":"/customer/app/create"),children:[(0,p.jsx)("span",{className:"text-xl",children:"+"}),"Create ","offline"===P?"Offline":"Online"," Customer"]})]}),(0,p.jsxs)("div",{className:"flex border-b",children:[(0,p.jsx)("button",{className:"flex-1 py-2 text-center "+("offline"===P?"bg-blue-100 border-b-2 border-blue-600":"bg-gray-100"),onClick:()=>{B("offline"),y(1)},children:"Offline Customers"}),(0,p.jsx)("button",{className:"flex-1 py-2 text-center "+("online"===P?"bg-blue-100 border-b-2 border-blue-600":"bg-gray-100"),onClick:()=>{B("online"),y(1)},children:"Online Customers"})]}),(0,p.jsxs)("div",{className:"",children:[(0,p.jsxs)("div",{className:"flex flex-col justify-between mt-4 mb-4 space-y-2 md:flex-row md:space-y-0 md:items-center",children:[(0,p.jsxs)("div",{className:"flex items-center px-2 space-x-2",children:[(0,p.jsx)("span",{className:"text-sm",children:"Show"}),(0,p.jsx)("select",{className:"p-2 text-sm border border-gray-300 rounded-md",value:j,onChange:e=>{g(Number(e.target.value)),y(1)},children:[10,20,30,40,50].map((e=>(0,p.jsx)("option",{value:e,children:e},e)))}),(0,p.jsx)("span",{className:"text-sm",children:"Entries"})]}),(0,p.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,p.jsx)("div",{className:"flex items-center justify-between flex-1 gap-2 px-2",children:["Copy","Excel","PDF","Print","CSV"].map(((e,s)=>(0,p.jsx)("button",{onClick:()=>{"Copy"===e&&(()=>{const e=G.map((e=>{var s;return"offline"===P?`${e._id}, ${e.customerName}, ${e.mobile},${e.email},${(null===(s=e.address)||void 0===s?void 0:s.locationLink)||"No Location link"},${e.creditLimit},${e.previousDue},${e.salesReturnDue||0},${e.advance},${R.includes(e._id)?"InActive":"Active"}`:`${e._id}, ${e.name}, ${e.phone},${e.email},${e.city||"N/A"},0,0,0,0,${R.includes(e._id)?"InActive":"Active"}`})).join("\n");navigator.clipboard.writeText(e),alert("Data copied to clipboard!")})(),"Excel"===e&&(()=>{const e=G.map((e=>{var s;return"offline"===P?{ID:e._id,Name:e.customerName,Mobile:e.mobile,Email:e.email,Location:(null===(s=e.address)||void 0===s?void 0:s.locationLink)||"No Location link",CreditLimit:e.creditLimit,PreviousDue:e.previousDue,SalesReturnDue:e.salesReturnDue||0,Advance:e.advance,Status:R.includes(e._id)?"InActive":"Active"}:{ID:e._id,Name:e.name,Mobile:e.phone,Email:e.email,Location:e.city||"N/A",CreditLimit:0,PreviousDue:0,SalesReturnDue:0,Advance:0,Status:R.includes(e._id)?"InActive":"Active"}})),s=m.utils.json_to_sheet(e),t=m.utils.book_new();m.utils.book_append_sheet(t,s,"Customers"),m.writeFile(t,"customers.xlsx")})(),"PDF"===e&&(()=>{const e=new c.uE;e.text("Customer List",20,20);const s=G.map((e=>{var s;return"offline"===P?[e._id,e.customerName,e.mobile,e.email,(null===(s=e.address)||void 0===s?void 0:s.locationLink)||"No Location link",e.creditLimit,e.previousDue,e.salesReturnDue||0,e.advance,R.includes(e._id)?"InActive":"Active"]:[e._id,e.name,e.phone,e.email,e.city||"N/A",0,0,0,0,R.includes(e._id)?"InActive":"Active"]}));(0,x.Ay)(e,{head:[["Customer Id","Customer Name","Mobile","Email","Location","Credit Limit","Previous Due","Sales return due","Advance","Status"]],body:s}),e.save("customer_list.pdf")})(),"Print"===e&&window.print(),"CSV"===e&&(()=>{const e="data:text/csv;charset=utf-8,"+G.map((e=>{var s;return"offline"===P?[e._id,e.customerName,e.mobile,e.email,(null===(s=e.address)||void 0===s?void 0:s.locationLink)||"No Location link",e.creditLimit,e.previousDue,e.salesReturnDue||0,e.advance,R.includes(e._id)?"InActive":"Active"]:[e._id,e.name,e.phone,e.email,e.city||"N/A",0,0,0,0,R.includes(e._id)?"InActive":"Active"]})).map((e=>e.join(","))).join("\n"),s=encodeURI(e),t=document.createElement("a");t.setAttribute("href",s),t.setAttribute("download","customers.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})()},className:"px-3 py-2 text-sm text-white bg-cyan-500",children:e},s)))}),(0,p.jsx)("input",{type:"text",placeholder:"Search",className:"w-full p-2 text-sm border border-gray-300 rounded-sm md:w-auto",onChange:e=>N(e.target.value)})]})]}),(0,p.jsx)("div",{className:"w-full overflow-x-auto",children:(0,p.jsxs)("table",{className:"w-full border-separate",children:[(0,p.jsx)("thead",{className:"text-sm",children:(0,p.jsxs)("tr",{className:"bg-gray-200",children:[(0,p.jsx)("th",{className:"px-4 py-2 text-left",children:(0,p.jsx)(l.A,{type:"checkbox",id:"table_head",checked:k,onChange:()=>C(!k)})}),(0,p.jsx)("th",{className:"px-4 py-2 text-left",children:"CUSTOMER ID"}),(0,p.jsx)("th",{className:"px-4 py-2 text-left",children:"CUSTOMER Name"}),(0,p.jsx)("th",{className:"px-4 py-2",children:"Mobile"}),(0,p.jsx)("th",{className:"px-4 py-2 text-left",children:"Email"}),(0,p.jsx)("th",{className:"px-4 py-2 text-left",children:"Location"}),(0,p.jsx)("th",{className:"px-4 py-2 text-left",children:"Credit card limit"}),(0,p.jsx)("th",{className:"px-4 py-2 text-left",children:"Previous due"}),(0,p.jsx)("th",{className:"px-4 py-2 text-left",children:"Sales return due"}),(0,p.jsx)("th",{className:"px-4 py-2 text-left",children:"Status"}),"offline"===P&&(0,p.jsx)("th",{className:"px-4 py-2 text-left",children:"Action"})]})}),(0,p.jsxs)("tbody",{className:"border-gray-100 border-1",children:[G.length<=0&&(0,p.jsx)("tr",{children:(0,p.jsx)("td",{className:"px-4 py-2 text-center border-gray-100 border-1",colSpan:"offline"===P?"11":"10",children:"No Data Available"})}),G.slice((b-1)*j,b*j).map(((e,s)=>{var t;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:(0,p.jsx)(l.A,{type:"checkbox",id:"table_body",checked:k||S.includes(e._id),onChange:()=>{return s=e._id,void _((e=>e.includes(s)?e.filter((e=>e!==s)):[...e,s]));var s}})}),(0,p.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e._id}),(0,p.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:"offline"===P?e.customerName:e.name}),(0,p.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:"offline"===P?e.mobile:e.phone}),(0,p.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e.email||"N/A"}),(0,p.jsx)("td",{className:"px-2 py-2 border-gray-100 border-1",children:"offline"===P?(null===(t=e.address)||void 0===t?void 0:t.locationLink)||"No Location link":e.city||"N/A"}),(0,p.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:"offline"===P?e.creditLimit:0}),(0,p.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:"offline"===P?e.previousDue:0}),(0,p.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:"offline"===P&&e.salesReturnDue||0}),(0,p.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",onClick:()=>M((s=>s.includes(e._id)?s.filter((s=>s!==e._id)):[...s,e._id])),children:R.includes(e._id)?(0,p.jsx)("span",{className:"p-1 text-white bg-red-700 rounded-md",children:"Inactive"}):(0,p.jsx)("span",{className:"p-1 text-white bg-green-400 rounded-md",children:"Active"})}),"offline"===P&&(0,p.jsx)("td",{className:"py-2 border-gray-100 border-1",children:(0,p.jsxs)("select",{className:"py-1 text-sm border rounded-sm",onChange:s=>J(s,e._id),children:[(0,p.jsx)("option",{value:"",selected:!0,disabled:!0,children:"Actions"}),(0,p.jsx)("option",{value:"discount",children:"Generate Discount Coupon"}),(0,p.jsx)("option",{value:"edit",children:"Edit"}),(0,p.jsx)("option",{value:"view",children:"View Payment"}),(0,p.jsx)("option",{value:"delete",children:"Delete"})]})})]},s)})),G.length>0&&"offline"===P&&(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"px-4 py-2 bg-gray-200"}),(0,p.jsx)("td",{className:"px-4 py-2 bg-gray-200"}),(0,p.jsx)("td",{className:"px-4 py-2 bg-gray-200"}),(0,p.jsx)("td",{className:"px-4 py-2 bg-gray-200"}),(0,p.jsx)("td",{className:"px-4 py-2 bg-gray-200"}),(0,p.jsx)("td",{className:"px-4 py-2 font-bold text-right bg-gray-200",children:"Total:"}),(0,p.jsx)("td",{className:"px-4 py-2 bg-gray-200",children:L}),(0,p.jsx)("td",{className:"px-4 py-2 bg-gray-200",children:$}),(0,p.jsx)("td",{className:"px-4 py-2 bg-gray-200",children:E}),(0,p.jsx)("td",{className:"px-4 py-2 bg-gray-200"}),"offline"===P&&(0,p.jsx)("td",{className:"px-4 py-2 bg-gray-200"})]})]})]})}),(0,p.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 p-2 md:justify-between md:flex-row",children:[(0,p.jsxs)("span",{children:["Showing ",j*(b-1)+1," to ",Math.min(j*b,G.length)," of ",G.length," entries"]}),(0,p.jsxs)("div",{className:"flex justify-between w-full md:w-auto md:gap-2",children:[(0,p.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n                      "+(1===b?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>q(b-1),disabled:1===b,children:[(0,p.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Previous"]}),(0,p.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n                      "+(b===H||0===H?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>q(b+1),disabled:b===H||0===H,children:["Next",(0,p.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=7188.9a4356d6.chunk.js.map