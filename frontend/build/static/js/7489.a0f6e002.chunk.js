"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7489],{21197:(e,s,t)=>{t.d(s,{A:()=>d});var r=t(65043),a=t(66727),l=t(86213),n=t(60184),i=t(23546),c=t(3605),o=t(70579);const d=e=>{let{isSidebarOpen:s,setSidebarOpen:t}=e;const d=(0,a.Zp)(),[x,m]=(0,r.useState)(!1),[h,u]=(0,r.useState)(null),[g,p]=(0,r.useState)(""),[f,j]=(0,r.useState)(!1),[b,N]=(0,r.useState)(!1);(0,r.useEffect)((()=>{h||y()}),[]);const y=async()=>{j(!0);try{const e=localStorage.getItem("token");if(!e)return u({name:"Guest",role:"guest"}),void p("Grocery On Wheel");let s=!1;try{s="admin"===JSON.parse(window.atob(e.split(".")[1])).role}catch{}const t=s?"/auth/profile":"/admiaddinguser/profile";console.log("\u23f3 Fetching profile from:",t);const{data:r}=await l.A.get(t,{headers:{Authorization:`Bearer ${e}`}});u({name:r.name,role:r.role}),p(r.storeName)}catch(e){console.error("Profile fetch error:",e),u({name:"Guest",role:"guest"}),p("Grocery On Wheel")}finally{j(!1)}},w="admin"===(localStorage.getItem("role")||"guest").toLowerCase()?"Admin Panel":g||"Grocery On Wheel";return(0,o.jsxs)("nav",{className:"flex flex-col items-center justify-between gap-2 px-6 py-1 text-white bg-gray-900 md:gap-0 md:flex-row",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between w-full gap-2 md:w-auto md:bg-transparent",children:[(0,o.jsx)("div",{className:"w-screen text-center md:w-full",children:(0,o.jsxs)("h2",{className:"text-2xl font-bold text-center cursor-pointer md:w-auto",onClick:()=>d("/dashboard"),children:[(0,o.jsx)("span",{className:"md:hidden",children:w}),s?(0,o.jsx)("span",{className:"hidden md:flex",children:w}):(0,o.jsx)("span",{className:"hidden md:flex",children:"POS"})]})}),(0,o.jsxs)("div",{className:"flex-col items-center hidden gap-2 md:flex md:flex-row",children:[(0,o.jsx)("button",{onClick:()=>t(!s),className:"flex items-center ",children:(0,o.jsx)(n.OXb,{size:24,className:"cursor-pointer hover:text-gray-400"})}),(0,o.jsxs)("div",{className:"relative hidden md:inline-block",children:[(0,o.jsx)("div",{className:"flex items-center justify-center w-10 h-10 text-white bg-green-500 rounded-md cursor-pointer hover:bg-green-600 ",onClick:()=>N(!b),children:(0,o.jsx)(n.OiG,{})}),b&&(0,o.jsx)(i.N,{children:(0,o.jsxs)(c.P.ul,{className:"absolute z-50 w-32 p-0 py-2 m-0 mt-2 text-gray-500 list-none bg-white rounded-md shadow-lg",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[(0,o.jsxs)("li",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-blue-200",onClick:()=>d("/add-sale"),children:[(0,o.jsx)(n.OiG,{className:"font-bold text-green-500"}),"Sales"]}),(0,o.jsxs)("li",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-blue-200",onClick:()=>d("/newquotation"),children:[(0,o.jsx)(n.OiG,{className:"font-bold text-green-500"}),"Quotation"]}),(0,o.jsxs)("li",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-blue-200",onClick:()=>d("/new-purchase"),children:[(0,o.jsx)(n.OiG,{className:"font-bold text-green-500"}),"Purchase"]}),(0,o.jsxs)("li",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-blue-200",onClick:()=>d("/customer/add"),children:[(0,o.jsx)(n.OiG,{className:"font-bold text-green-500"}),"Customer"]}),(0,o.jsxs)("li",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-blue-200",onClick:()=>d("/supplier/add"),children:[(0,o.jsx)(n.OiG,{className:"font-bold text-green-500"}),"Supplier"]}),(0,o.jsxs)("li",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-blue-200",onClick:()=>d("/items/add"),children:[(0,o.jsx)(n.OiG,{className:"font-bold text-green-500"}),"Item"]}),(0,o.jsxs)("li",{className:"flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-blue-200",onClick:()=>d("/add-expense"),children:[(0,o.jsx)(n.OiG,{className:"font-bold text-green-500"}),"Expense"]})]})})]})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between w-full md:w-auto",children:[(0,o.jsx)("div",{className:"flex items-start justify-start md:hidden",children:(0,o.jsx)("button",{onClick:()=>t(!s),className:"flex items-center ",children:(0,o.jsx)(n.OXb,{size:24,className:"cursor-pointer hover:text-gray-400"})})}),(0,o.jsxs)("div",{className:"relative flex items-center gap-4",children:[(0,o.jsx)("div",{children:(0,o.jsxs)("button",{className:"flex items-center px-2 hover:bg-gray-500",onClick:()=>d("/pos"),children:[(0,o.jsx)(n.OiG,{}),"POS"]})}),(0,o.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>m(!x),children:[(0,o.jsx)("img",{src:"/userlogoprof.png",alt:"Profile",className:"w-10 h-10 border-2 border-gray-300 rounded-full hover:opacity-80"}),(0,o.jsx)("span",{className:"text-sm",children:(null===h||void 0===h?void 0:h.name)||"Unknown User"})]}),x&&(0,o.jsx)("div",{className:"absolute right-0 z-10 w-64 p-4 mt-2 text-black bg-white rounded-md shadow-lg top-full",children:f?(0,o.jsx)("p",{className:"text-center text-gray-600",children:"Loading..."}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[(0,o.jsx)("img",{src:"/userlogoprof.png",alt:"Profile",className:"w-16 h-16 border-2 border-gray-400 rounded-full"}),(0,o.jsx)("h3",{className:"mt-2 text-lg font-bold",children:(null===h||void 0===h?void 0:h.name)||"Unknown User"}),(0,o.jsxs)("p",{className:"text-sm font-semibold text-blue-600",children:["Role: ",(null===h||void 0===h?void 0:h.role)||"Unknown"]})]}),(0,o.jsxs)("div",{className:"flex flex-col mt-4",children:[(0,o.jsx)("button",{className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Profile"}),(0,o.jsx)("button",{onClick:()=>{localStorage.clear(),d("/"),window.location.reload()},className:"px-4 py-2 mt-2 text-white bg-red-500 rounded-md hover:bg-red-600",children:"Sign Out"})]})]})})]})]})]})}},24592:(e,s,t)=>{t.d(s,{A:()=>c});var r=t(65043),a=t(66727),l=t(86213),n=t(60184),i=t(70579);const c=e=>{let{isSidebarOpen:s,setSidebarOpen:t}=e;const c=(0,a.Zp)(),[o,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(null),[h,u]=(0,r.useState)(""),[g,p]=(0,r.useState)(!1),[f,j]=(0,r.useState)(!1);(0,r.useEffect)((()=>{x||b()}),[]);const b=async()=>{p(!0);try{const e=localStorage.getItem("token");(localStorage.getItem("role")||"guest").toLowerCase();if(!e)return void m({name:"Guest",role:"Guest"});const s="/api/audit/profile",{data:t}=await l.A.get(s,{headers:{Authorization:`Bearer ${e}`}});console.log(t.data),m(t.data)}catch(e){console.error("Profile fetch error:",e),m({name:"Guest",role:"Guest"})}finally{p(!1)}},N="admin"===(localStorage.getItem("role")||"guest").toLowerCase()?"Admin Panel":h||"Grocery On Wheel";return(0,i.jsxs)("nav",{className:"flex flex-col items-center justify-between gap-2 px-6 py-1 text-white bg-gray-900 md:gap-0 md:flex-row",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between w-full gap-2 md:w-auto md:bg-transparent",children:[(0,i.jsx)("div",{className:`w-screen text-center ${s?"md:w-64":"w-auto"} md:text-center`,children:(0,i.jsxs)("h2",{className:"text-2xl font-bold text-center cursor-pointer md:w-auto",onClick:()=>c("/dashboard"),children:[(0,i.jsx)("span",{className:"md:hidden",children:N}),s?(0,i.jsx)("span",{className:"hidden md:flex",children:N}):(0,i.jsx)("span",{className:"hidden md:flex",children:"POS"})]})}),(0,i.jsx)("div",{className:"flex-col items-center hidden gap-2 md:flex md:flex-row",children:(0,i.jsx)("button",{onClick:()=>t(!s),className:"flex items-center ",children:(0,i.jsx)(n.OXb,{size:24,className:"cursor-pointer hover:text-gray-400"})})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between w-full md:w-auto",children:[(0,i.jsx)("div",{className:"flex items-start justify-start md:hidden",children:(0,i.jsx)("button",{onClick:()=>t(!s),className:"flex items-center ",children:(0,i.jsx)(n.OXb,{size:24,className:"cursor-pointer hover:text-gray-400"})})}),(0,i.jsxs)("div",{className:"relative flex items-center gap-4",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("button",{className:"flex items-center px-2 hover:bg-gray-500",onClick:()=>c("/pos"),children:[(0,i.jsx)(n.OiG,{}),"POS"]})}),(0,i.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>d(!o),children:[(0,i.jsx)("img",{src:"/userlogoprof.png",alt:"Profile",className:"w-10 h-10 border-2 border-gray-300 rounded-full hover:opacity-80"}),(0,i.jsx)("span",{className:"text-sm",children:(null===x||void 0===x?void 0:x.userName)||"Unknown User"})]}),o&&(0,i.jsx)("div",{className:"absolute right-0 z-10 w-64 p-4 mt-2 text-black bg-white rounded-md shadow-lg top-full",children:g?(0,i.jsx)("p",{className:"text-center text-gray-600",children:"Loading..."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("img",{src:"/userlogoprof.png",alt:"Profile",className:"w-16 h-16 border-2 border-gray-400 rounded-full"}),(0,i.jsx)("h3",{className:"mt-2 text-lg font-bold",children:(null===x||void 0===x?void 0:x.userName)||"Unknown User"}),(0,i.jsxs)("p",{className:"text-sm font-semibold text-blue-600",children:["Role: ",(null===x||void 0===x?void 0:x.role)||"Unknown"]})]}),(0,i.jsxs)("div",{className:"flex flex-col mt-4",children:[(0,i.jsx)("button",{className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",onClick:()=>c("/profile/edit"),children:"Profile"}),(0,i.jsx)("button",{onClick:()=>{localStorage.clear(),c("/"),window.location.reload()},className:"px-4 py-2 mt-2 text-white bg-red-500 rounded-md hover:bg-red-600",children:"Sign Out"})]})]})})]})]})]})}},52076:(e,s,t)=>{t.d(s,{A:()=>i});var r=t(65043),a=t(60184),l=t(66727),n=t(70579);const i=e=>{let{isSidebarOpen:s}=e;const t=(0,l.Zp)(),[i,c]=(0,r.useState)({help:!1,helps:!1,audit:!1});(localStorage.getItem("role")||"guest").toLowerCase();return s?(0,n.jsxs)("div",{className:"absolute md:relative w-64 overflow-y-auto text-white bg-gray-900 z-[999] scrollbar-thin scrollbar-thumb-gray-800 scrollbar-track-gray-200 min-h-screen ",children:[(0,n.jsxs)("div",{className:"flex items-center p-3 cursor-pointer hover:bg-gray-700",onClick:()=>t("/auditor-dashboard"),children:[(0,n.jsx)(a.rQ8,{}),(0,n.jsx)("span",{children:"Dashboard"})]}),(0,n.jsxs)("ul",{className:"space-y-2",children:[(0,n.jsxs)("li",{className:"flex items-center p-2 space-x-2 text-sm cursor-pointer hover:bg-gray-700",onClick:()=>t("/bucket-create"),children:[(0,n.jsx)(a.Hw0,{})," ",(0,n.jsx)("span",{children:"Create Bucket"})]}),(0,n.jsxs)("li",{className:"flex items-center p-2 space-x-2 text-sm cursor-pointer hover:bg-gray-700",onClick:()=>t("/bucket-list"),children:[(0,n.jsx)(a.Hw0,{})," ",(0,n.jsx)("span",{children:"Bucket List"})]}),(0,n.jsxs)("li",{className:"flex items-center p-2 text-sm cursor-pointer hover:bg-gray-700",onClick:()=>window.location.href="https://pos.agribioj.com/help/",children:[(0,n.jsx)(a.gZZ,{}),(0,n.jsx)("span",{children:"Help Center"})]})]})]}):null}},53888:(e,s,t)=>{t.d(s,{A:()=>a});t(65043);var r=t(70579);function a(e){let{text:s,type:t="button",className:a,...l}=e;return(0,r.jsx)("button",{className:`${a}`,...l,children:s})}},57489:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var r=t(65043),a=t(86213),l=t(66727),n=(t(21197),t(52076)),i=t(53888),c=t(60184),o=(t(79038),t(24592)),d=t(75200),x=t(70579);const m=()=>{const[e,s]=(0,r.useState)(!0),[t,m]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=()=>{window.innerWidth<768?s(!1):s(!0)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const h=(0,l.Zp)(),u=async()=>{try{const e=await a.A.get(`/api/audit/bucket/auditor/${localStorage.getItem("id")}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e.data),m(e.data.data)}catch(e){console.log(e.message)}};(0,r.useEffect)((()=>{u()}),[]);const g=async e=>{if(window.confirm("Do u want to delete customer"))try{await a.A.delete(`/audit/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});alert("Deleted Successfully")}catch(s){console.error(s.message)}finally{u()}};return(0,x.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,x.jsx)(o.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,x.jsxs)("div",{className:"flex flex-grow ",children:[(0,x.jsx)(n.A,{isSidebarOpen:e}),(0,x.jsxs)("div",{className:"flex-grow flex flex-col p-2 md:p-2  ",children:[(0,x.jsxs)("header",{className:"flex flex-col items-center justify-between p-4 rounded-md shadow sm:flex-row",children:[(0,x.jsx)("div",{className:"flex items-center gap-1 text-center sm:flex-row sm:text-left",children:(0,x.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"Bucket List"})}),(0,x.jsxs)("nav",{className:"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0",children:[(0,x.jsxs)(l.k2,{to:"/dashboard",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,x.jsx)(c.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,x.jsx)(l.k2,{to:"/bucket-list",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:"> Bucket List"}),(0,x.jsx)(l.k2,{to:"/bucket-create",className:"text-gray-700 no-underline hover:text-cyan-600",children:"> Add Bucket"})]})]}),(0,x.jsx)("div",{className:"p-4 mt-1 bg-white border-t-4 rounded-lg shadow-md border-cyan-500",children:(0,x.jsxs)("div",{className:"overflow-x-auto border border-gray-200 rounded-lg shadow-sm",children:[(0,x.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,x.jsx)("thead",{className:"hidden bg-gray-50 md:table-header-group",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Bucket ID"}),(0,x.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Total Items"}),(0,x.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Actions"})]})}),(0,x.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e=>(0,x.jsxs)("tr",{className:"hidden hover:bg-gray-50 md:table-row",children:[(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,x.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e._id})}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,x.jsx)("div",{className:"text-sm text-gray-500",children:e.items.length})}),(0,x.jsx)("td",{className:"px-6 py-4 text-sm font-medium whitespace-nowrap",children:(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsxs)("button",{onClick:()=>h(`/bucket-create?id=${e._id}`),className:"text-indigo-600 hover:text-indigo-900",children:[(0,x.jsx)("span",{className:"hidden md:inline",children:"Update"}),(0,x.jsx)(d.SG1,{className:"inline md:hidden"})]}),(0,x.jsxs)("button",{onClick:()=>g(e._id),className:"text-red-600 hover:text-red-900",children:[(0,x.jsx)("span",{className:"hidden md:inline",children:"Delete"}),(0,x.jsx)(d.IXo,{className:"inline md:hidden"})]})]})})]},e._id)))})]}),(0,x.jsx)("div",{className:"bg-white md:hidden",children:t.map((e=>(0,x.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Bucket ID"}),(0,x.jsx)("p",{className:"text-sm text-gray-500",children:e._id})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Total Items"}),(0,x.jsx)("p",{className:"text-sm text-gray-500",children:e.items.length})]})]}),(0,x.jsxs)("div",{className:"flex justify-end mt-2 space-x-2",children:[(0,x.jsx)("button",{onClick:()=>h(`/bucket-create?id=${e._id}`),className:"p-1 text-indigo-600 hover:text-indigo-900",children:(0,x.jsx)(d.SG1,{})}),(0,x.jsx)("button",{onClick:()=>g(e._id),className:"p-1 text-red-600 hover:text-red-900",children:(0,x.jsx)(d.IXo,{})})]})]},e._id)))})]})}),(0,x.jsxs)("div",{className:"flex flex-col items-center justify-around w-full gap-2 mx-auto mt-4 sm:flex-row",children:[(0,x.jsx)(i.A,{className:"w-full text-white bg-green-500 rounded cursor-pointer hover:bg-green-600",type:"submit",text:"Submit",onClick:async e=>{e.preventDefault();const s=localStorage.getItem("auditId"),r=t.reduce(((e,s)=>{const t=s.items.map((e=>({itemId:e.item_id._id,quantity:e.quantity})));return e.concat(t)}),[]);console.log(r);try{const e=await a.A.put("/api/audit/bucket-submission",{auditId:s,buckets:r},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});alert("Buckets submitted"),console.log(e)}catch(l){alert("Unable to submit bucket"),console.log(l)}}})," ",(0,x.jsx)(i.A,{className:"w-full text-white bg-orange-500 rounded cursor-pointer hover:bg-orange-600",text:"Reset"}),"  "]})]})]})]})}}}]);
//# sourceMappingURL=7489.a0f6e002.chunk.js.map