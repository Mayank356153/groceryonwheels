{"version":3,"file":"static/js/1407.2c5b5147.chunk.js","mappings":"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","sources":["Loading.jsx","components/purchase/purchasereturn.jsx","../node_modules/dayjs/dayjs.min.js","../node_modules/@babel/runtime/helpers/esm/typeof.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport Navbar from \"./components/Navbar\";\nimport Sidebar from \"./components/Sidebar\";\nexport default function LoadingScreen() {\n    const[isSidebarOpen,setSidebarOpen]=useState(false)\n    return (\n        <div className='flex flex-col h-screen'>\n        {/* Navbar component with sidebar open state */}\n        <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\n        <div className='flex flex-grow mt-20'>\n          <div>\n            {/* Sidebar component with open state */}\n            <Sidebar isSidebarOpen={isSidebarOpen} />\n          </div>\n  \n          {/* Container for the entire component */}\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm\">\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin\"></div>\n            <p className=\"mt-3 text-lg font-semibold text-gray-700\">Loading...</p>\n          </div>\n        </div>\n          \n        </div>\n      </div>\n    );\n  }\n  ","import React, { useEffect, useState, useRef } from 'react';\r\nimport { BiChevronRight } from \"react-icons/bi\";\r\nimport { FaTachometerAlt, FaBarcode } from \"react-icons/fa\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCamera } from '@fortawesome/free-solid-svg-icons';\r\nimport Navbar from '../Navbar.jsx';\r\nimport Sidebar from '../Sidebar.jsx';\r\nimport LoadingScreen from '../../Loading.jsx';\r\nimport { useNavigate, Link, useSearchParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Select from 'react-select';\r\nimport { BrowserMultiFormatReader } from '@zxing/library';\r\nimport dayjs from 'dayjs';\r\n\r\n// Axios instance\r\nconst api = axios.create({ baseURL: \"vps/api\" });\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) config.headers.Authorization = `Bearer ${token}`;\r\n  return config;\r\n});\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401 || error.response?.status === 403) {\r\n      localStorage.removeItem(\"token\");\r\n      window.location.href = \"/\";\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Generate return code\r\nconst generateReturnCode = (lastReturnCode) => {\r\n  if (!lastReturnCode) return `PR/${new Date().getFullYear()}/01`;\r\n  const parts = lastReturnCode.split(\"/\");\r\n  const lastNumber = parseInt(parts[2], 10);\r\n  return `PR/${parts[1]}/${String(lastNumber + 1).padStart(2, \"0\")}`;\r\n};\r\n\r\n// Escape regex\r\nconst esc = (s) => s.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\r\n\r\n// Handle item field changes\r\nconst handleItemFieldChange = (index, field, value, items, setItems) => {\r\n  setItems((prev) => {\r\n    const updatedItems = [...prev];\r\n    updatedItems[index] = {\r\n      ...updatedItems[index],\r\n      [field]: field === 'reason' || field === 'expiryDate' ? value : Number(value) || 0,\r\n      totalAmount:\r\n        field === 'quantity' || field === 'price'\r\n          ? (Number(field === 'quantity' ? value : updatedItems[index].quantity) || 1) *\r\n            (Number(field === 'price' ? value : updatedItems[index].price) || 0)\r\n          : updatedItems[index].totalAmount,\r\n    };\r\n    if (field === 'quantity' && updatedItems[index].quantity > updatedItems[index].maxQuantity) {\r\n      updatedItems[index].quantity = updatedItems[index].maxQuantity;\r\n      updatedItems[index].totalAmount = updatedItems[index].maxQuantity * updatedItems[index].price;\r\n    }\r\n    return updatedItems;\r\n  });\r\n};\r\n\r\nconst PurchaseReturn = () => {\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const id = searchParams.get(\"id\");\r\n  const videoRef = useRef(null);\r\n  const codeReaderRef = useRef(null);\r\n\r\n  // Permissions\r\n  const [localPermissions, setLocalPermissions] = useState([]);\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem(\"permissions\");\r\n    if (stored) setLocalPermissions(JSON.parse(stored));\r\n  }, []);\r\n  const hasPermissionFor = (module, action) => {\r\n    const role = (localStorage.getItem(\"role\") || \"guest\").toLowerCase();\r\n    if (role === \"admin\") return true;\r\n    return localPermissions.some(p =>\r\n      p.module.toLowerCase() === module.toLowerCase() &&\r\n      p.actions.map(a => a.toLowerCase()).includes(action.toLowerCase())\r\n    );\r\n  };\r\n\r\n  // State\r\n  const [originalPurchaseRef, setOriginalPurchaseRef] = useState(\"\");\r\n  const [purchaseSuggestions, setPurchaseSuggestions] = useState([]);\r\n  const [originalPurchase, setOriginalPurchase] = useState(null);\r\n  const [returnCode, setReturnCode] = useState(\"\");\r\n  const [referenceNo, setReferenceNo] = useState(\"\");\r\n  const [purchaseDate, setPurchaseDate] = useState(new Date().toISOString().split(\"T\")[0]);\r\n  const [status, setStatus] = useState(\"Return\");\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [warehouses, setWarehouses] = useState([]);\r\n  const [suppliers, setSuppliers] = useState([]);\r\n  const [paymentTypes, setPaymentTypes] = useState([]);\r\n  const [accounts, setAccounts] = useState([]);\r\n  const [selectedWarehouse, setSelectedWarehouse] = useState(null);\r\n  const [selectedSupplier, setSelectedSupplier] = useState(null);\r\n  const [selectedPaymentType, setSelectedPaymentType] = useState(null);\r\n  const [selectedAccount, setSelectedAccount] = useState(null);\r\n  const [allItems, setAllItems] = useState([]);\r\n  const [filteredItems, setFilteredItems] = useState([]);\r\n  const [items, setItems] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [searchError, setSearchError] = useState(\"\");\r\n  const [scanning, setScanning] = useState(false);\r\n  const [otherCharges, setOtherCharges] = useState(0);\r\n  const [discountOnAll, setDiscountOnAll] = useState(0);\r\n  const [note, setNote] = useState(\"\");\r\n  const [paymentAmount, setPaymentAmount] = useState(0);\r\n  const [paymentNote, setPaymentNote] = useState(\"\");\r\n  const [grandTotal, setGrandTotal] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isSidebarOpen, setSidebarOpen] = useState(false);\r\n  const [couponCode, setCouponCode] = useState(\"\");\r\n  const [couponType, setCouponType] = useState(\"\");\r\n  const [couponValue, setCouponValue] = useState(0);\r\n  const [discountOnAllType, setDiscountOnAllType] = useState(\"Per%\");\r\n\r\n  useEffect(() => {\r\n    if (window.innerWidth < 768) setSidebarOpen(false);\r\n  }, []);\r\n\r\n  // Fetch initial data\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const [whRes, supRes, ptRes, acRes, retRes] = await Promise.all([\r\n          api.get(\"/warehouses\"),\r\n          api.get(\"/suppliers\"),\r\n          api.get(\"/payment-types\"),\r\n          api.get(\"/accounts\"),\r\n          api.get(\"/purchases?isReturn=true\"),\r\n        ]);\r\n\r\n        const warehouseData = (whRes.data.data || []).map(w => ({\r\n          label: w.warehouseName,\r\n          value: w._id,\r\n          cashAccount: w.cashAccount?._id || w.cashAccount || null,\r\n        }));\r\n        setWarehouses(warehouseData);\r\n        console.log(\"Warehouses:\", warehouseData);\r\n\r\n        setSuppliers((supRes.data.data || []).filter(s => s.supplierName).map(s => ({\r\n          label: s.supplierName,\r\n          value: s._id,\r\n        })));\r\n\r\n        setPaymentTypes((ptRes.data.data || []).map(x => ({\r\n          label: x.paymentTypeName,\r\n          value: x._id,\r\n          name: x.paymentTypeName.toLowerCase(),\r\n        })));\r\n\r\n        const accountData = (acRes.data.data || []).map(x => ({\r\n          label: x.accountNumber,\r\n          value: x._id,\r\n        }));\r\n        setAccounts(accountData);\r\n        console.log(\"Accounts:\", accountData);\r\n\r\n        const allReturns = retRes.data.data || [];\r\n        setReturnCode(allReturns.length ? generateReturnCode(allReturns[allReturns.length - 1].purchaseCode) : `PR/${new Date().getFullYear()}/01`);\r\n      } catch (err) {\r\n        console.error(\"Fetch error:\", err);\r\n        setErrorMessage(\"Failed to load data: \" + (err.response?.data?.message || err.message));\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Fetch items for selected warehouse\r\n  useEffect(() => {\r\n    const fetchItems = async () => {\r\n      if (!selectedWarehouse) {\r\n        setAllItems([]);\r\n        return;\r\n      }\r\n      try {\r\n        setLoading(true);\r\n        const resp = await api.get(\"/items\", {\r\n          params: { warehouse: selectedWarehouse.value }\r\n        });\r\n        const raw = resp.data.data || [];\r\n        const flat = raw.map(it => {\r\n          const isVar = Boolean(it.parentItemId);\r\n          return {\r\n            _id: it._id,\r\n            parentId: isVar ? it.parentItemId : it._id,\r\n            variantId: isVar ? it._id : null,\r\n            itemName: isVar ? `${it.parentItemName || it.itemName} / ${it.itemName}` : it.itemName,\r\n            itemCode: it.itemCode || \"\",\r\n            barcodes: it.barcodes || [],\r\n            warehouseId: it.warehouse?._id || it.warehouse || null,\r\n            mrp: it.mrp || 0,\r\n            isVariant: isVar,\r\n          };\r\n        });\r\n        setAllItems(flat);\r\n        console.log(\"Fetched items for warehouse\", selectedWarehouse.value, \":\", flat);\r\n        console.log(\"Checking for item 68134eff43481c8592016e2f:\", flat.find(it => it._id === \"68134eff43481c8592016e2f\"));\r\n      } catch (err) {\r\n        console.error(\"Fetch items error:\", err);\r\n        setErrorMessage(\"Failed to load items: \" + (err.response?.data?.message || err.message));\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchItems();\r\n  }, [selectedWarehouse]);\r\n\r\n  // Load existing return\r\n  useEffect(() => {\r\n    if (!id) return;\r\n    const fetchPurchase = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await api.get(`/purchases/${id}`);\r\n        const purchaseData = response.data.data;\r\n        console.log(\"Fetched purchase return:\", purchaseData);\r\n\r\n        setOriginalPurchase(purchaseData);\r\n        setOriginalPurchaseRef(purchaseData.referenceNo || \"\");\r\n        setPurchaseDate(purchaseData.purchaseDate ? dayjs(purchaseData.purchaseDate).format(\"YYYY-MM-DD\") : new Date().toISOString().split(\"T\")[0]);\r\n        setReferenceNo(purchaseData.referenceNo || \"\");\r\n        setSelectedWarehouse(warehouses.find(w => w.value === (purchaseData.warehouse?._id || purchaseData.warehouse)) || null);\r\n        setSelectedSupplier(suppliers.find(s => s.value === (purchaseData.supplier?._id || purchaseData.supplier)) || null);\r\n        setStatus(purchaseData.status || \"Return\");\r\n\r\n        const purchaseItems = purchaseData.items || [];\r\n        console.log(\"Purchase return items:\", purchaseItems);\r\n        const warehouseId = purchaseData.warehouse?._id || purchaseData.warehouse;\r\n        const newItems = purchaseItems.map(pi => {\r\n          const itemId = typeof pi.item === 'object' ? pi.item?._id : pi.item;\r\n          const variantId = pi.variant || null;\r\n          const item = allItems.find(it => it._id === itemId || it.variantId === variantId || it.parentId === itemId) || null;\r\n\r\n          if (!item) {\r\n            console.warn(`No matching item for ID ${itemId} or variant ${variantId} in allItems`, { purchaseItem: pi, warehouseId });\r\n            return null;\r\n          }\r\n\r\n          const expiryDate = pi.expiryDate ? dayjs(pi.expiryDate).format(\"YYYY-MM-DD\") : \"\";\r\n\r\n          return {\r\n            item: item.parentId,\r\n            variant: item.variantId,\r\n            itemName: item.itemName,\r\n            itemCode: item.itemCode,\r\n            barcode: item.barcodes[0] || \"\",\r\n            quantity: pi.quantity || 1,\r\n            price: pi.purchasePrice || item.mrp || 0,\r\n            maxQuantity: pi.quantity || 1,\r\n            reason: pi.reason || \"\",\r\n            totalAmount: (pi.quantity || 1) * (pi.purchasePrice || item.mrp || 0),\r\n            expiryDate,\r\n            purchasePrice: pi.purchasePrice || 0,\r\n            salesPrice: pi.salesPrice || 0,\r\n            unitCost: pi.unitCost || 0,\r\n            discount: pi.discount || 0,\r\n            parentId: item.parentId,\r\n            isVariant: item.isVariant,\r\n          };\r\n        }).filter(Boolean);\r\n\r\n        console.log(\"Mapped return items:\", newItems);\r\n        if (newItems.length === 0 && purchaseItems.length > 0) {\r\n          const itemsInWarehouse = allItems.filter(it => it.warehouseId === warehouseId);\r\n          \r\n        }\r\n        setItems(newItems);\r\n\r\n        setOtherCharges(purchaseData.otherCharges || 0);\r\n        setDiscountOnAll(purchaseData.discountOnAll || 0);\r\n        setNote(purchaseData.note || \"\");\r\n        setGrandTotal(purchaseData.grandTotal || 0);\r\n        setCouponCode(purchaseData.couponCode || \"\");\r\n        setCouponType(purchaseData.couponType || \"\");\r\n        setCouponValue(purchaseData.couponValue || 0);\r\n        setDiscountOnAllType(purchaseData.discountOnAllType || \"Per%\");\r\n\r\n        if (purchaseData.payments?.length > 0) {\r\n          setPaymentAmount(purchaseData.payments[0].amount || 0);\r\n          setPaymentNote(purchaseData.payments[0].paymentNote || \"\");\r\n          setSelectedPaymentType(paymentTypes.find(pt => pt.value === (purchaseData.payments[0].paymentType?._id || purchaseData.payments[0].paymentType)) || null);\r\n          setSelectedAccount(accounts.find(a => a.value === (purchaseData.payments[0].account?._id || purchaseData.payments[0].account)) || null);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Fetch purchase return error:\", err);\r\n        setErrorMessage(\"Failed to load purchase return: \" + (err.response?.data?.message || err.message));\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchPurchase();\r\n  }, [id, warehouses, suppliers, paymentTypes, accounts, allItems]);\r\n\r\n  // Derive cash accounts\r\n  const selectedWh = warehouses.find(w => w.value === selectedWarehouse?.value);\r\n  const cashAccounts = selectedWh?.cashAccount ? accounts.filter(a => a.value === selectedWh.cashAccount) : [];\r\n  const mode = paymentTypes.find(p => p.value === selectedPaymentType?.value)?.name;\r\n  const isCash = mode === \"cash\";\r\n\r\n  useEffect(() => {\r\n    if (isCash && cashAccounts.length > 0) {\r\n      setSelectedAccount(cashAccounts[0]);\r\n    } else if (isCash && cashAccounts.length === 0) {\r\n      console.warn(\"No cash accounts available for warehouse:\", selectedWh);\r\n      setErrorMessage(\"No cash account available for this warehouse. Please select an account manually or check warehouse data.\");\r\n      setSelectedAccount(null);\r\n    } else {\r\n      setSelectedAccount(null);\r\n    }\r\n  }, [isCash, cashAccounts, selectedWh]);\r\n\r\n  // Search purchases\r\n  useEffect(() => {\r\n    const searchPurchases = async () => {\r\n      if (!originalPurchaseRef.trim() || id) {\r\n        setPurchaseSuggestions([]);\r\n        return;\r\n      }\r\n      try {\r\n        const response = await api.get(\"/purchases?isReturn=false\");\r\n        const purchases = (response.data.data || []).filter(p =>\r\n          p.referenceNo?.toLowerCase().includes(originalPurchaseRef.toLowerCase())\r\n        );\r\n        setPurchaseSuggestions(purchases.map(p => ({\r\n          label: `Purchase: ${p.referenceNo}`,\r\n          value: p.referenceNo,\r\n          data: p,\r\n        })).slice(0, 10));\r\n      } catch (err) {\r\n        console.error(\"Search purchases error:\", err);\r\n        setErrorMessage(\"Error searching purchases: \" + (err.response?.data?.message || err.message));\r\n      }\r\n    };\r\n    searchPurchases();\r\n  }, [originalPurchaseRef, id]);\r\n\r\n  // Select purchase\r\n  const selectPurchase = async (suggestion) => {\r\n    try {\r\n      const { value, data } = suggestion;\r\n      console.log(\"Selected purchase:\", data);\r\n      setOriginalPurchaseRef(value);\r\n      setOriginalPurchase(data);\r\n      const warehouse = warehouses.find(w => w.value === (data.warehouse?._id || data.warehouse)) || null;\r\n      setSelectedWarehouse(warehouse);\r\n      setSelectedSupplier(suppliers.find(s => s.value === (data.supplier?._id || data.supplier)) || null);\r\n      setPurchaseDate(data.purchaseDate ? dayjs(data.purchaseDate).format(\"YYYY-MM-DD\") : new Date().toISOString().split(\"T\")[0]);\r\n      setReferenceNo(data.referenceNo || \"\");\r\n      setItems([]);\r\n      setFilteredItems([]);\r\n      setPurchaseSuggestions([]);\r\n\r\n      const purchaseItems = data.items || [];\r\n      console.log(\"Purchase items:\", purchaseItems);\r\n      const warehouseId = data.warehouse?._id || data.warehouse;\r\n      const newItems = purchaseItems.map(pi => {\r\n        const itemId = typeof pi.item === 'object' ? pi.item?._id : pi.item;\r\n        const variantId = pi.variant || null;\r\n        const item = allItems.find(it => it._id === itemId || it.variantId === variantId || it.parentId === itemId) || null;\r\n\r\n        if (!item) {\r\n          console.warn(`No matching item for ID ${itemId} or variant ${variantId} in allItems`, { purchaseItem: pi, warehouseId });\r\n          return null;\r\n        }\r\n\r\n        const expiryDate = pi.expiryDate ? dayjs(pi.expiryDate).format(\"YYYY-MM-DD\") : \"\";\r\n\r\n        return {\r\n          item: item.parentId,\r\n          variant: item.variantId,\r\n          itemName: item.itemName,\r\n          itemCode: item.itemCode,\r\n          barcode: item.barcodes[0] || \"\",\r\n          quantity: 1,\r\n          price: pi.purchasePrice || item.mrp || 0,\r\n          maxQuantity: pi.quantity || 1,\r\n          reason: \"\",\r\n          totalAmount: 1 * (pi.purchasePrice || item.mrp || 0),\r\n          expiryDate,\r\n          purchasePrice: pi.purchasePrice || 0,\r\n          salesPrice: pi.salesPrice || 0,\r\n          unitCost: pi.unitCost || 0,\r\n          discount: pi.discount || 0,\r\n          parentId: item.parentId,\r\n          isVariant: item.isVariant,\r\n        };\r\n      }).filter(Boolean);\r\n\r\n      console.log(\"Mapped purchase items:\", newItems);\r\n      if (newItems.length === 0 && purchaseItems.length > 0) {\r\n        const itemsInWarehouse = allItems.filter(it => it.warehouseId === warehouseId);\r\n       \r\n      }\r\n      setItems(newItems);\r\n    } catch (err) {\r\n      console.error(\"Load purchase error:\", err);\r\n      setErrorMessage(\"Failed to load purchase: \" + (err.response?.data?.message || err.message));\r\n    }\r\n  };\r\n\r\n  // Filter items\r\n  useEffect(() => {\r\n    if (!selectedWarehouse) {\r\n      setFilteredItems([]);\r\n      setSearchError(\"Select a warehouse\");\r\n      return;\r\n    }\r\n    if (originalPurchase) {\r\n      const warehouseId = originalPurchase.warehouse?._id || originalPurchase.warehouse;\r\n      const allowedItems = originalPurchase.items.flatMap(pi => {\r\n        const itemId = typeof pi.item === 'object' ? pi.item?._id : pi.item;\r\n        const variantId = pi.variant || null;\r\n        return allItems.filter(it => it._id === itemId || it.variantId === variantId || it.parentId === itemId);\r\n      });\r\n      setFilteredItems([...new Set(allowedItems)]);\r\n      console.log(\"Filtered items for warehouse\", warehouseId, \":\", allowedItems);\r\n    } else {\r\n      setFilteredItems(allItems);\r\n    }\r\n    setSearchError(\"\");\r\n  }, [selectedWarehouse, allItems, originalPurchase]);\r\n\r\n  // Item suggestions\r\n  useEffect(() => {\r\n    const q = searchTerm.trim().toLowerCase();\r\n    if (!q || !selectedWarehouse) {\r\n      setSuggestions([]);\r\n      return;\r\n    }\r\n    const rx = new RegExp(esc(q), \"i\");\r\n    setSuggestions(filteredItems.filter(it =>\r\n      rx.test(it.itemName) ||\r\n      rx.test(it.itemCode) ||\r\n      it.barcodes.some(b => rx.test(b))\r\n    ).slice(0, 20));\r\n  }, [searchTerm, filteredItems]);\r\n\r\n  // Barcode scanner\r\n  const startScanner = async () => {\r\n    if (!selectedWarehouse) {\r\n      setErrorMessage(\"Select warehouse first\");\r\n      return;\r\n    }\r\n    setSearchTerm(\"\");\r\n    setScanning(true);\r\n    const codeReader = new BrowserMultiFormatReader();\r\n    codeReaderRef.current = codeReader;\r\n\r\n    try {\r\n      const videoInputDevices = await codeReader.listVideoInputDevices();\r\n      await codeReader.decodeFromVideoDevice(videoInputDevices[0]?.deviceId, videoRef.current, (result) => {\r\n        if (result) {\r\n          const hit = filteredItems.find(it =>\r\n            it.barcodes.includes(result.getText()) ||\r\n            it.itemCode === result.getText()\r\n          );\r\n          if (hit) pushItem(hit);\r\n          codeReader.stopStreams();\r\n          setScanning(false);\r\n        }\r\n      });\r\n    } catch (err) {\r\n      console.error(\"Scanner error:\", err);\r\n      setErrorMessage(\"Scanner error: \" + err.message);\r\n      setScanning(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (codeReaderRef.current) codeReaderRef.current.reset();\r\n    };\r\n  }, []);\r\n\r\n  // Push item\r\n  const pushItem = (item) => {\r\n    if (!item) return;\r\n    if (items.some(i => i.item === item.parentId && i.variant === item.variantId)) {\r\n      setErrorMessage(\"Item already added\");\r\n      return;\r\n    }\r\n    if (originalPurchase) {\r\n      const purchaseItem = originalPurchase.items.find(pi => {\r\n        const itemId = typeof pi.item === 'object' ? pi.item?._id : pi.item;\r\n        const variantId = pi.variant || null;\r\n        return item._id === itemId || item.variantId === variantId || item.parentId === itemId;\r\n      });\r\n      if (!purchaseItem) {\r\n        setErrorMessage(\"Item not in original purchase\");\r\n        return;\r\n      }\r\n      setItems(prev => [\r\n        ...prev,\r\n        {\r\n          item: item.parentId,\r\n          variant: item.variantId,\r\n          itemName: item.itemName,\r\n          itemCode: item.itemCode,\r\n          barcode: item.barcodes[0] || \"\",\r\n          quantity: 1,\r\n          price: purchaseItem.purchasePrice || item.mrp || 0,\r\n          maxQuantity: purchaseItem.quantity || 1,\r\n          reason: \"\",\r\n          totalAmount: 1 * (purchaseItem.purchasePrice || item.mrp || 0),\r\n          expiryDate: purchaseItem.expiryDate ? dayjs(purchaseItem.expiryDate).format(\"YYYY-MM-DD\") : \"\",\r\n          purchasePrice: purchaseItem.purchasePrice || 0,\r\n          salesPrice: purchaseItem.salesPrice || 0,\r\n          unitCost: purchaseItem.unitCost || 0,\r\n          discount: purchaseItem.discount || 0,\r\n          parentId: item.parentId,\r\n          isVariant: item.isVariant,\r\n        },\r\n      ]);\r\n    } else {\r\n      setItems(prev => [\r\n        ...prev,\r\n        {\r\n          item: item.parentId,\r\n          variant: item.variantId,\r\n          itemName: item.itemName,\r\n          itemCode: item.itemCode,\r\n          barcode: item.barcodes[0] || \"\",\r\n          quantity: 1,\r\n          price: item.mrp || 0,\r\n          maxQuantity: 9999,\r\n          reason: \"\",\r\n          totalAmount: 1 * (item.mrp || 0),\r\n          expiryDate: \"\",\r\n          purchasePrice: item.mrp || 0,\r\n          salesPrice: item.salesPrice || 0,\r\n          unitCost: item.priceWithoutTax || 0,\r\n          discount: 0,\r\n          parentId: item.parentId,\r\n          isVariant: item.isVariant,\r\n        },\r\n      ]);\r\n    }\r\n    setSearchTerm(\"\");\r\n  };\r\n\r\n  // Handle Enter key\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === \"Enter\" && suggestions.length > 0) pushItem(suggestions[0]);\r\n  };\r\n\r\n  // Remove item\r\n  const handleRemoveItem = (idx) => {\r\n    setItems(prev => prev.filter((_, i) => i !== idx));\r\n  };\r\n\r\n  // Calculate totals\r\n  useEffect(() => {\r\n    let discount = Number(discountOnAll) || 0;\r\n    if (discountOnAllType === \"Per%\") {\r\n      const subtotal = items.reduce((sum, it) => sum + it.totalAmount, 0);\r\n      discount = (subtotal * discount) / 100;\r\n    }\r\n    let couponDiscount = Number(couponValue) || 0;\r\n    if (couponType === \"percentage\") {\r\n      const subtotal = items.reduce((sum, it) => sum + it.totalAmount, 0);\r\n      couponDiscount = (subtotal * couponDiscount) / 100;\r\n    }\r\n    const grand = items.reduce((sum, it) => sum + it.totalAmount, 0) +\r\n      Number(otherCharges || 0) - discount - couponDiscount;\r\n    setGrandTotal(Math.max(grand, 0));\r\n  }, [items, otherCharges, discountOnAll, discountOnAllType, couponValue, couponType]);\r\n\r\n  useEffect(() => {\r\n    if (!id) {\r\n      setPaymentAmount(grandTotal);\r\n    }\r\n  }, [grandTotal, id]);\r\n\r\n  // Save\r\n  const handleSave = async () => {\r\n    if (!selectedWarehouse || !selectedSupplier || !items.length) {\r\n      setErrorMessage(\"Warehouse, supplier, and at least one item are required\");\r\n      return;\r\n    }\r\n    if (paymentAmount > 0 && isCash && !selectedAccount) {\r\n      setErrorMessage(\"Please select a cash account for the payment\");\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      const payload = {\r\n        originalPurchaseRef: originalPurchaseRef || undefined,\r\n        referenceNo: referenceNo || originalPurchaseRef,\r\n        purchaseDate,\r\n        warehouse: selectedWarehouse.value,\r\n        supplier: selectedSupplier.value,\r\n        isReturn: true,\r\n        status,\r\n        createdBy: localStorage.getItem(\"userId\"),\r\n        createdByModel: \"User\",\r\n        items: items.map(it => ({\r\n          item: it.item,\r\n          variant: it.variant || undefined,\r\n          quantity: it.quantity,\r\n          purchasePrice: it.price,\r\n          salesPrice: it.salesPrice,\r\n          unitCost: it.unitCost,\r\n          totalAmount: it.totalAmount,\r\n          discount: it.discount || 0,\r\n          reason: it.reason || undefined,\r\n          expiryDate: it.expiryDate || undefined,\r\n        })),\r\n        otherCharges: Number(otherCharges) || 0,\r\n        discountOnAll: Number(discountOnAll) || 0,\r\n        discountOnAllType,\r\n        couponCode: couponCode || undefined,\r\n        couponType: couponType || undefined,\r\n        couponValue: Number(couponValue) || 0,\r\n        note,\r\n        grandTotal,\r\n        payments: paymentAmount > 0 ? [{\r\n          paymentType: selectedPaymentType?.value,\r\n          account: selectedAccount?.value || undefined,\r\n          amount: Number(paymentAmount),\r\n          paymentNote,\r\n          date: new Date().toISOString(),\r\n        }] : [],\r\n      };\r\n\r\n      console.log(\"Saving return payload:\", JSON.stringify(payload, null, 2));\r\n\r\n      if (id) {\r\n        const response = await api.put(`/purchases/purchase-returns/${id}`, payload);\r\n        console.log(\"Update response:\", response.data);\r\n      } else {\r\n        const response = await api.post(\"/purchases/purchase-returns\", payload);\r\n        console.log(\"Create response:\", response.data);\r\n      }\r\n\r\n      navigate(\"/purchasereturn-list\");\r\n    } catch (err) {\r\n      console.error(\"Save error:\", err.response?.data || err);\r\n      setErrorMessage(\r\n        \"Save failed: \" + (err.response?.data?.message || err.message) +\r\n        \". Check console for payload and response details.\"\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <LoadingScreen />;\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen\">\r\n      <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\r\n      <div className=\"flex flex-grow\">\r\n        <Sidebar isSidebarOpen={isSidebarOpen} />\r\n        <div className=\"flex-grow p-4 overflow-y-auto\">\r\n          <header className=\"flex flex-col md:flex-row items-center justify-between mb-4\">\r\n            <h1 className=\"text-xl font-bold\">Purchase Return</h1>\r\n            <nav className=\"flex items-center space-x-2 text-gray-600\">\r\n              <Link to=\"/dashboard\" className=\"hover:text-cyan-600\"><FaTachometerAlt className=\"mr-1\" /> Home</Link>\r\n              <BiChevronRight />\r\n              <Link to=\"/purchasereturn-list\" className=\"hover:text-cyan-600\">Return List</Link>\r\n            </nav>\r\n          </header>\r\n\r\n          {errorMessage && (\r\n            <div className=\"mb-4 p-3 bg-red-100 text-red-700 rounded\">{errorMessage}</div>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n            <div className=\"relative\">\r\n              <label className=\"font-semibold\">Original Purchase Ref</label>\r\n              <input\r\n                type=\"text\"\r\n                value={originalPurchaseRef}\r\n                onChange={e => setOriginalPurchaseRef(e.target.value)}\r\n                className=\"w-full p-2 border rounded\"\r\n                disabled={!!id}\r\n                placeholder=\"Enter purchase reference or leave blank\"\r\n              />\r\n              {purchaseSuggestions.length > 0 && (\r\n                <ul className=\"absolute z-50 w-full bg-white border rounded shadow max-h-60 overflow-y-auto mt-1\">\r\n                  {purchaseSuggestions.map((s, i) => (\r\n                    <li\r\n                      key={i}\r\n                      className=\"p-2 hover:bg-gray-100 cursor-pointer\"\r\n                      onClick={() => selectPurchase(s)}\r\n                    >\r\n                      {s.label}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              )}\r\n            </div>\r\n            <div>\r\n              <label className=\"font-semibold\">Return Code *</label>\r\n              <input type=\"text\" value={returnCode} readOnly className=\"w-full p-2 border rounded\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"font-semibold\">Reference No</label>\r\n              <input\r\n                type=\"text\"\r\n                value={referenceNo}\r\n                onChange={e => setReferenceNo(e.target.value)}\r\n                className=\"w-full p-2 border rounded\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"font-semibold\">Purchase Date *</label>\r\n              <input\r\n                type=\"date\"\r\n                value={purchaseDate}\r\n                onChange={e => setPurchaseDate(e.target.value)}\r\n                className=\"w-full p-2 border rounded\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"font-semibold\">Warehouse *</label>\r\n              <Select options={warehouses} value={selectedWarehouse} onChange={setSelectedWarehouse} />\r\n            </div>\r\n            <div>\r\n              <label className=\"font-semibold\">Supplier *</label>\r\n              <Select options={suppliers} value={selectedSupplier} onChange={setSelectedSupplier} />\r\n            </div>\r\n            <div>\r\n              <label className=\"font-semibold\">Status</label>\r\n              <select value={status} onChange={e => setStatus(e.target.value)} className=\"w-full p-2 border rounded\">\r\n                <option value=\"Return\">Return</option>\r\n                <option value=\"Cancel\">Cancel</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"relative mb-6\">\r\n            <div className=\"flex items-center\">\r\n              <FaBarcode className=\"mr-2 text-gray-600\" />\r\n              <input\r\n  type=\"text\"\r\n  disabled={!selectedWarehouse}\r\n  placeholder=\"Search item by name, code, or barcode\"\r\n  className=\"flex-grow p-2 border rounded disabled:bg-gray-100\"\r\n  value={searchTerm}\r\n  onChange={e => {\r\n    const v = e.target.value.trim();\r\n    setSearchTerm(v);\r\n    const hit = filteredItems.find(it =>\r\n      it.barcodes.includes(v) ||\r\n      it.itemCode === v ||\r\n      it.itemName.toLowerCase() === v.toLowerCase()\r\n    );\r\n    if (hit) {\r\n      pushItem(hit);\r\n      setSearchTerm(\"\");\r\n    }\r\n  }}\r\n  onKeyDown={handleKeyDown}\r\n/>\r\n\r\n              <button\r\n                onClick={() => pushItem(suggestions[0])}\r\n                disabled={!suggestions.length}\r\n                className=\"ml-2 px-4 py-2 bg-green-600 text-white rounded disabled:bg-gray-400\"\r\n              >\r\n                Add\r\n              </button>\r\n              <button\r\n                onClick={startScanner}\r\n                disabled={!selectedWarehouse}\r\n                className=\"ml-2 p-2 bg-gray-100 rounded disabled:opacity-50\"\r\n              >\r\n                <FontAwesomeIcon icon={faCamera} />\r\n              </button>\r\n            </div>\r\n            {searchError && <p className=\"text-red-500 text-sm mt-1\">{searchError}</p>}\r\n            {scanning && (\r\n              <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n                <video ref={videoRef} className=\"w-64 h-64\" />\r\n                <button\r\n                  onClick={() => { codeReaderRef.current?.reset(); setScanning(false); }}\r\n                  className=\"mt-4 px-4 py-2 bg-red-600 text-white rounded\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            )}\r\n            {suggestions.length > 0 && (\r\n              <ul className=\"absolute z-50 w-full bg-white border rounded shadow max-h-60 overflow-y-auto mt-1\">\r\n                {suggestions.map(it => (\r\n   <li key={it._id} className=\"p-2 hover:bg-gray-100 cursor-pointer\">\r\n     <div>\r\n       <strong>{it.itemName}</strong>\r\n       <span className=\"ml-2 text-xs text-gray-500\">\r\n         Code: {it.itemCode}\r\n       </span>\r\n     </div>\r\n     {it.barcodes.length > 0 && (\r\n       <div className=\"text-xs text-gray-600\">\r\n         Barcode: {it.barcodes.join(\", \")}\r\n       </div>\r\n     )}\r\n   </li>\r\n ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n\r\n          <table className=\"w-full border-collapse mb-6\">\r\n            <thead className=\"bg-sky-600 text-white\">\r\n              <tr>\r\n                <th className=\"border p-2\">Item</th>\r\n                <th className=\"border p-2\">Code</th>\r\n                <th className=\"border p-2\">Qty</th>\r\n                <th className=\"border p-2\">Price</th>\r\n                <th className=\"border p-2\">Expiry Date</th>\r\n                <th className=\"border p-2\">Reason</th>\r\n                <th className=\"border p-2\">Total</th>\r\n                <th className=\"border p-2\">Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {items.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan=\"8\" className=\"p-4 text-center text-red-600\">No items to return</td>\r\n                </tr>\r\n              ) : (\r\n                items.map((it, idx) => (\r\n                  <tr key={idx}>\r\n                    <td className=\"border p-2\">{it.itemName}</td>\r\n                    <td className=\"border p-2\">{it.itemCode}</td>\r\n                    <td className=\"border p-2\">\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"1\"\r\n                        max={it.maxQuantity}\r\n                        value={it.quantity}\r\n                        onChange={e => handleItemFieldChange(idx, \"quantity\", e.target.value, items, setItems)}\r\n                        className=\"w-16 p-1 border rounded\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"border p-2\">\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        value={it.price}\r\n                        onChange={e => handleItemFieldChange(idx, \"price\", e.target.value, items, setItems)}\r\n                        className=\"w-16 p-1 border rounded\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"border p-2\">\r\n                      <input\r\n                        type=\"date\"\r\n                        value={it.expiryDate}\r\n                        onChange={e => handleItemFieldChange(idx, \"expiryDate\", e.target.value, items, setItems)}\r\n                        className=\"w-32 p-1 border rounded\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"border p-2\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={it.reason}\r\n                        onChange={e => handleItemFieldChange(idx, \"reason\", e.target.value, items, setItems)}\r\n                        className=\"w-full p-1 border rounded\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"border p-2\">{it.totalAmount.toFixed(2)}</td>\r\n                    <td className=\"border p-2\">\r\n                      <button onClick={() => handleRemoveItem(idx)} className=\"text-red-600\">Remove</button>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n            <div>\r\n              <label className=\"font-semibold\">Other Charges</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                value={otherCharges}\r\n                onChange={e => setOtherCharges(Number(e.target.value))}\r\n                className=\"w-full p-2 border rounded\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"font-semibold\">Coupon Code</label>\r\n              <input\r\n                type=\"text\"\r\n                value={couponCode}\r\n                onChange={e => setCouponCode(e.target.value)}\r\n                className=\"w-full p-2 border rounded\"\r\n              />\r\n              <div className=\"flex space-x-2 mt-2\">\r\n                <select\r\n                  value={couponType}\r\n                  onChange={e => setCouponType(e.target.value)}\r\n                  className=\"flex-1 p-2 border rounded\"\r\n                >\r\n                  <option value=\"\">Type</option>\r\n                  <option value=\"percentage\">Percentage</option>\r\n                  <option value=\"value\">Fixed</option>\r\n                </select>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  value={couponValue}\r\n                  onChange={e => setCouponValue(Number(e.target.value))}\r\n                  className=\"w-24 p-2 border rounded\"\r\n                  placeholder=\"Value\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <label className=\"font-semibold\">Discount on All</label>\r\n              <div className=\"flex space-x-2\">\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  value={discountOnAll}\r\n                  onChange={e => setDiscountOnAll(Number(e.target.value))}\r\n                  className=\"flex-1 p-2 border rounded\"\r\n                  placeholder=\"Amount\"\r\n                />\r\n                <select\r\n                  value={discountOnAllType}\r\n                  onChange={e => setDiscountOnAllType(e.target.value)}\r\n                  className=\"w-24 p-2 border rounded\"\r\n                >\r\n                  <option value=\"Per%\">Per%</option>\r\n                  <option value=\"Fixed\">Fixed</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-span-2\">\r\n              <label className=\"font-semibold\">Note</label>\r\n              <textarea\r\n                value={note}\r\n                onChange={e => setNote(e.target.value)}\r\n                className=\"w-full p-2 border rounded\"\r\n                rows={3}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-6 p-4 bg-gray-100 rounded\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"font-semibold\">Payment Amount</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  value={paymentAmount}\r\n                  onChange={e => setPaymentAmount(e.target.value)}\r\n                  className=\"w-full p-2 border rounded\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"font-semibold\">Payment Type</label>\r\n                <Select options={paymentTypes} value={selectedPaymentType} onChange={setSelectedPaymentType} />\r\n              </div>\r\n              {isCash && (\r\n                <div>\r\n                  <label className=\"font-semibold\">Account</label>\r\n                  <Select\r\n                    options={cashAccounts.length > 0 ? cashAccounts : accounts}\r\n                    value={selectedAccount}\r\n                    onChange={setSelectedAccount}\r\n                    isClearable\r\n                  />\r\n                </div>\r\n              )}\r\n              <div className=\"col-span-2\">\r\n                <label className=\"font-semibold\">Payment Note</label>\r\n                <textarea\r\n                  value={paymentNote}\r\n                  onChange={e => setPaymentNote(e.target.value)}\r\n                  className=\"w-full p-2 border rounded\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-4\">\r\n            <button\r\n              onClick={handleSave}\r\n              disabled={!hasPermissionFor(\"PurchasesReturn\", \"Add\")}\r\n              className=\"px-4 py-2 bg-green-600 text-white rounded disabled:bg-gray-400\"\r\n            >\r\n              {id ? \"Update\" : \"Save\"}\r\n            </button>\r\n            <button\r\n              onClick={() => navigate(\"/purchasereturn-list\")}\r\n              className=\"px-4 py-2 bg-gray-600 text-white rounded\"\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PurchaseReturn;","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",c=\"month\",f=\"quarter\",h=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),s=n-i<0,u=e.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:f}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=\"$isDayjsObject\",S=function(t){return t instanceof _||!(!t||!t[p])},w=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},O=function(t,e){if(S(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},b=v;b.l=w,b.i=S,b.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!b.u(e)||e,f=b.p(t),l=function(t,e){var i=b.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return b.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(f){case h:return r?l(1,0):l(31,11);case c:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=b.p(t),f=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=f+\"Date\",n[d]=f+\"Date\",n[c]=f+\"Month\",n[h]=f+\"FullYear\",n[u]=f+\"Hours\",n[s]=f+\"Minutes\",n[i]=f+\"Seconds\",n[r]=f+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===c||o===h){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(r,f){var d,l=this;r=Number(r);var $=b.p(f),y=function(t){var e=O(l);return b.w(e.date(e.date()+Math.round(t*r)),l)};if($===c)return this.set(c,this.$M+r);if($===h)return this.set(h,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return b.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=b.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,c=n.months,f=n.meridiem,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},d=function(t){return b.s(s%12||12,t,\"0\")},$=f||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r};return r.replace(y,(function(t,r){return r||function(t){switch(t){case\"YY\":return String(e.$y).slice(-2);case\"YYYY\":return b.s(e.$y,4,\"0\");case\"M\":return a+1;case\"MM\":return b.s(a+1,2,\"0\");case\"MMM\":return h(n.monthsShort,a,c,3);case\"MMMM\":return h(c,a);case\"D\":return e.$D;case\"DD\":return b.s(e.$D,2,\"0\");case\"d\":return String(e.$W);case\"dd\":return h(n.weekdaysMin,e.$W,o,2);case\"ddd\":return h(n.weekdaysShort,e.$W,o,3);case\"dddd\":return o[e.$W];case\"H\":return String(s);case\"HH\":return b.s(s,2,\"0\");case\"h\":return d(1);case\"hh\":return d(2);case\"a\":return $(s,u,!0);case\"A\":return $(s,u,!1);case\"m\":return String(u);case\"mm\":return b.s(u,2,\"0\");case\"s\":return String(e.$s);case\"ss\":return b.s(e.$s,2,\"0\");case\"SSS\":return b.s(e.$ms,3,\"0\");case\"Z\":return i}return null}(t)||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=this,M=b.p(d),m=O(r),v=(m.utcOffset()-this.utcOffset())*e,g=this-m,D=function(){return b.m(y,m)};switch(M){case h:$=D()/12;break;case c:$=D();break;case f:$=D()/3;break;case o:$=(g-v)/6048e5;break;case a:$=(g-v)/864e5;break;case u:$=g/n;break;case s:$=g/e;break;case i:$=g/t;break;default:$=g}return l?$:b.a($)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),k=_.prototype;return O.prototype=k,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",c],[\"$y\",h],[\"$D\",d]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,_,O),t.$i=!0),O},O.locale=w,O.isDayjs=S,O.unix=function(t){return O(1e3*t)},O.en=D[g],O.Ls=D,O.p={},O}));","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };"],"names":["LoadingScreen","isSidebarOpen","setSidebarOpen","useState","_jsxs","className","children","_jsx","Navbar","Sidebar","api","axios","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","response","error","_error$response","_error$response2","status","removeItem","window","location","href","Promise","reject","handleItemFieldChange","index","field","value","items","setItems","prev","updatedItems","Number","totalAmount","quantity","price","maxQuantity","PurchaseReturn","_paymentTypes$find","navigate","useNavigate","searchParams","useSearchParams","id","get","videoRef","useRef","codeReaderRef","localPermissions","setLocalPermissions","useEffect","stored","JSON","parse","originalPurchaseRef","setOriginalPurchaseRef","purchaseSuggestions","setPurchaseSuggestions","originalPurchase","setOriginalPurchase","returnCode","setReturnCode","referenceNo","setReferenceNo","purchaseDate","setPurchaseDate","Date","toISOString","split","setStatus","errorMessage","setErrorMessage","warehouses","setWarehouses","suppliers","setSuppliers","paymentTypes","setPaymentTypes","accounts","setAccounts","selectedWarehouse","setSelectedWarehouse","selectedSupplier","setSelectedSupplier","selectedPaymentType","setSelectedPaymentType","selectedAccount","setSelectedAccount","allItems","setAllItems","filteredItems","setFilteredItems","searchTerm","setSearchTerm","suggestions","setSuggestions","searchError","setSearchError","scanning","setScanning","otherCharges","setOtherCharges","discountOnAll","setDiscountOnAll","note","setNote","paymentAmount","setPaymentAmount","paymentNote","setPaymentNote","grandTotal","setGrandTotal","loading","setLoading","couponCode","setCouponCode","couponType","setCouponType","couponValue","setCouponValue","discountOnAllType","setDiscountOnAllType","innerWidth","async","whRes","supRes","ptRes","acRes","retRes","all","warehouseData","data","map","w","_w$cashAccount","label","warehouseName","_id","cashAccount","console","log","filter","s","supplierName","x","paymentTypeName","name","toLowerCase","accountData","accountNumber","allReturns","length","lastReturnCode","getFullYear","parts","lastNumber","parseInt","String","padStart","generateReturnCode","purchaseCode","err","_err$response","_err$response$data","message","fetchData","resp","params","warehouse","flat","it","_it$warehouse","isVar","Boolean","parentItemId","parentId","variantId","itemName","parentItemName","itemCode","barcodes","warehouseId","mrp","isVariant","find","_err$response2","_err$response2$data","fetchItems","_purchaseData$warehou2","_purchaseData$payment","purchaseData","dayjs","format","_purchaseData$warehou","_purchaseData$supplie","supplier","purchaseItems","newItems","pi","_pi$item","itemId","item","variant","warn","purchaseItem","expiryDate","barcode","purchasePrice","reason","salesPrice","unitCost","discount","payments","amount","pt","_purchaseData$payment2","paymentType","a","_purchaseData$payment3","account","_err$response3","_err$response3$data","fetchPurchase","selectedWh","cashAccounts","isCash","p","trim","purchases","_p$referenceNo","includes","slice","_err$response4","_err$response4$data","searchPurchases","_originalPurchase$war","allowedItems","flatMap","_pi$item3","Set","q","rx","RegExp","replace","test","some","b","current","reset","pushItem","i","_pi$item4","priceWithoutTax","reduce","sum","couponDiscount","grand","Math","max","Link","to","FaTachometerAlt","BiChevronRight","type","onChange","e","target","disabled","placeholder","onClick","_data$warehouse2","suggestion","_data$warehouse","_data$supplier","_pi$item2","_err$response5","_err$response5$data","selectPurchase","readOnly","Select","options","FaBarcode","v","hit","onKeyDown","key","codeReader","BrowserMultiFormatReader","_videoInputDevices$","videoInputDevices","listVideoInputDevices","decodeFromVideoDevice","deviceId","result","getText","stopStreams","FontAwesomeIcon","icon","faCamera","ref","_codeReaderRef$curren","join","colSpan","idx","min","toFixed","_","handleRemoveItem","rows","isClearable","payload","undefined","isReturn","createdBy","createdByModel","date","stringify","put","post","_err$response6","_err$response7","_err$response7$data","module","action","actions","hasPermissionFor","exports","t","n","r","u","o","c","f","h","d","l","$","y","M","weekdays","months","ordinal","m","Array","z","utcOffset","abs","floor","year","month","clone","add","ceil","D","ms","Q","g","S","O","args","arguments","locale","$L","utc","$u","$x","$offset","this","prototype","$d","NaN","match","substring","UTC","init","$y","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","toString","isSame","startOf","endOf","isAfter","isBefore","$g","set","unix","valueOf","getTime","toDate","apply","$locale","weekStart","$set","daysInMonth","round","subtract","invalidDate","meridiem","monthsShort","weekdaysMin","weekdaysShort","getTimezoneOffset","diff","toJSON","toUTCString","k","forEach","extend","$i","isDayjs","en","Ls","_typeof","Symbol","iterator","constructor"],"sourceRoot":""}