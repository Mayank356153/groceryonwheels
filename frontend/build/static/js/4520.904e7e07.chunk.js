"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4520],{14840:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(65043),l=t(21197),r=t(59255),i=t(70579);function n(){const[e,s]=(0,a.useState)(!1);return(0,i.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,i.jsx)(l.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,i.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,i.jsx)("div",{children:(0,i.jsx)(r.A,{isSidebarOpen:e})}),(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,i.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},54520:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var a=t(65043),l=t(66727),r=t(59255),i=t(21197),n=t(14840),c=t(86213),d=t(60184),o=t(37762),x=t(64857),h=t(11238),m=t(70579);function u(){const[e,s]=(0,a.useState)(!0),[t,u]=(0,a.useState)([]),[p,b]=(0,a.useState)(!1),[g,j]=(0,a.useState)(null),[f,N]=(0,a.useState)(""),[w,y]=(0,a.useState)(10),[v,C]=(0,a.useState)(1),k=(0,l.Zp)(),[S,A]=(0,a.useState)(null);(0,a.useEffect)((()=>{window.innerWidth<768&&s(!1),_()}),[]);const _=async()=>{b(!0);try{const e=await c.A.get("api/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),s=Array.isArray(e.data)?e.data:Array.isArray(e.data.data)?e.data.data:[];u(s)}catch(e){console.error("Fetch categories error:",e)}finally{b(!1)}},$=t.filter((e=>e.name.toLowerCase().includes(f.toLowerCase()))),I=Math.ceil($.length/w),L=$.slice((v-1)*w,v*w);return p?(0,m.jsx)(n.A,{}):(0,m.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,m.jsx)(i.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,m.jsxs)("div",{className:"flex ",children:[(0,m.jsx)("div",{className:"w-auto",children:(0,m.jsx)(r.A,{isSidebarOpen:e})}),(0,m.jsxs)("div",{className:"w-full min-h-screen p-6 overflow-x-auto bg-gray-100",children:[(0,m.jsxs)("header",{className:"flex flex-col items-center justify-between mb-6 md:flex-row",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{className:"text-2xl font-semibold",children:"Categories List"}),(0,m.jsxs)("nav",{className:"flex mt-1 text-sm text-gray-600",children:[(0,m.jsxs)(l.k2,{to:"/dashboard",className:"flex items-center text-gray-500 no-underline",children:[(0,m.jsx)(d.$BV,{}),(0,m.jsx)("span",{className:"ml-1",children:"Home"})]}),(0,m.jsx)("span",{children:" > Categories List"})]})]}),(0,m.jsxs)("div",{className:"flex flex-col w-full gap-2 md:w-auto md:flex-row",children:[(0,m.jsx)("button",{onClick:()=>k("/subcategories-list"),className:"w-full px-4 py-2 text-white bg-indigo-600 rounded md:w-auto",children:"SubCategory List"}),(0,m.jsx)("button",{onClick:()=>k("/sub-subcategory-list"),className:"w-full px-4 py-2 text-white bg-indigo-600 rounded md:w-auto",children:"Sub\u2011SubCategory List"}),(0,m.jsx)(l.k2,{to:"/categories/import",children:(0,m.jsx)("button",{className:"w-full px-4 py-2 text-white bg-green-600 rounded",children:"Import Categories"})})]})]}),(0,m.jsxs)("div",{className:"flex flex-col gap-3 mb-4 md:flex-row md:items-center md:justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)("label",{children:"Show"}),(0,m.jsx)("select",{className:"px-2 py-1 border",value:w,onChange:e=>y(+e.target.value),children:[10,25,50,100].map((e=>(0,m.jsx)("option",{value:e,children:e},e)))}),(0,m.jsx)("label",{children:"Entries"})]}),(0,m.jsxs)("div",{className:"flex gap-1",children:[(0,m.jsxs)("div",{className:"flex flex-1 gap-1 text-sm",children:[(0,m.jsx)("button",{onClick:()=>{const e=L.map((e=>[e.name,e.description,e.status].join(","))).join("\n");navigator.clipboard.writeText(e),alert("Copied to clipboard!")},className:"px-2 bg-teal-300",children:"Copy"}),(0,m.jsx)("button",{onClick:()=>{const e=h.utils.json_to_sheet($),s=h.utils.book_new();h.utils.book_append_sheet(s,e,"Categories"),h.writeFile(s,"categories_list.xlsx")},className:"px-2 bg-teal-300",children:"Excel"}),(0,m.jsx)("button",{onClick:()=>{const e=new o.uE;e.text("Category List",20,20),(0,x.Ay)(e,{head:[["Name","Description","Status"]],body:$.map((e=>[e.name,e.description,e.status]))}),e.save("categories_list.pdf")},className:"px-2 bg-teal-300",children:"PDF"}),(0,m.jsx)("button",{onClick:()=>window.print(),className:"px-2 bg-teal-300",children:"Print"}),(0,m.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,"+$.map((e=>[e.name,e.description,e.status].join(","))).join("\n"),s=document.createElement("a");s.href=encodeURI(e),s.download="categories_list.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"px-2 bg-teal-300",children:"CSV"})]}),(0,m.jsx)("input",{type:"text",placeholder:"Search",className:"w-full px-2 py-1 border",value:f,onChange:e=>N(e.target.value)})]})]}),(0,m.jsx)("div",{className:"overflow-x-auto overflow-visible",children:(0,m.jsxs)("table",{className:"w-full bg-white border",children:[(0,m.jsx)("thead",{className:"bg-gray-200",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"p-2 border",children:"#"}),(0,m.jsx)("th",{className:"p-2 border",children:"Image"}),"                  ",(0,m.jsx)("th",{className:"p-2 border",children:"Name"}),(0,m.jsx)("th",{className:"p-2 border",children:"Description"}),(0,m.jsx)("th",{className:"p-2 border",children:"Status"}),(0,m.jsx)("th",{className:"p-2 border",children:"Action"})]})}),(0,m.jsx)("tbody",{children:L.map(((e,s)=>(0,m.jsxs)("tr",{className:"text-center border",children:[(0,m.jsx)("td",{className:"p-2 border",children:s+1}),(0,m.jsx)("td",{className:"p-2 border",children:e.image?(0,m.jsx)("img",{src:`/vps/uploads/categories/${e.image}`,alt:e.name,className:"inline-block object-cover w-12 h-12 rounded",onClick:()=>A(`/vps/uploads/categories/${e.image}`)}):(0,m.jsx)("span",{className:"text-gray-400",children:"No image"})}),(0,m.jsx)("td",{className:"p-2 border",children:e.name}),(0,m.jsx)("td",{className:"p-2 border",children:e.description}),(0,m.jsx)("td",{className:"p-2 border cursor-pointer",onClick:()=>(async e=>{const s=t.find((s=>s._id===e));if(!s)return;const a={...s,status:"Active"===s.status?"Inactive":"Active"};b(!0);try{await c.A.put(`api/categories/${e}`,a,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),_()}catch(l){console.error("Status toggle error:",l)}finally{b(!1)}})(e._id),children:"Active"===e.status?(0,m.jsx)("span",{className:"px-2 py-1 text-white bg-green-600 rounded",children:"Active"}):(0,m.jsx)("span",{className:"px-2 py-1 text-white bg-red-600 rounded",children:"Inactive"})}),(0,m.jsxs)("td",{className:"relative p-2 border",children:[(0,m.jsx)("button",{onClick:()=>(e=>j(g===e?null:e))(s),className:"px-2 py-1 text-white rounded bg-cyan-600",children:"Action"}),g===s&&(0,m.jsxs)("div",{className:"absolute right-0 mt-1 w-32 bg-white border rounded shadow z-20",children:[(0,m.jsxs)("button",{className:"flex items-center w-full gap-1 px-3 py-2 hover:bg-gray-100",onClick:()=>k(`/categories-list-form?id=${e._id}`),children:[(0,m.jsx)(d.uO9,{})," Edit"]}),(0,m.jsxs)("button",{className:"flex items-center w-full gap-1 px-3 py-2 text-red-600 hover:bg-gray-100",onClick:()=>(async e=>{if(window.confirm("Delete this category?")){b(!0);try{await c.A.delete(`api/categories/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),_()}catch(s){console.error("Delete error:",s)}finally{b(!1)}}})(e._id),children:[(0,m.jsx)(d.qbC,{})," Delete"]})]})]})]},e._id)))})]})}),(0,m.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,m.jsxs)("span",{children:["Showing ",(v-1)*w+1," to"," ",Math.min(v*w,$.length)," of"," ",$.length," entries"]}),(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsx)("button",{onClick:()=>{v>1&&C(v-1)},disabled:1===v,className:"px-3 py-1 bg-gray-300 rounded disabled:opacity-50",children:"Previous"}),(0,m.jsx)("button",{onClick:()=>{v<I&&C(v+1)},disabled:v===I,className:"px-3 py-1 bg-gray-300 rounded disabled:opacity-50",children:"Next"})]})]}),S&&(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:()=>A(null),children:(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("button",{className:"absolute top-0 right-0 m-2 text-white text-2xl",onClick:()=>A(null),children:"\xd7"}),(0,m.jsx)("img",{src:S,className:"max-w-full max-h-full rounded"})]})})]})]})]})}}}]);
//# sourceMappingURL=4520.904e7e07.chunk.js.map