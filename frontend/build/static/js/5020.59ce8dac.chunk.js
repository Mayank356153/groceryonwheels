"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5020],{14840:(e,s,a)=>{a.d(s,{A:()=>i});var r=a(65043),t=a(21197),l=a(59255),n=a(70579);function i(){const[e,s]=(0,r.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(t.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,n.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,n.jsx)("div",{children:(0,n.jsx)(l.A,{isSidebarOpen:e})}),(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,n.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},15020:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var r=a(65043),t=a(66727),l=a(21197),n=a(59255),i=a(14840),c=a(86213),d=a(49804),o=a(60184),h=a(70579);const x=()=>{const e=(0,t.Zp)(),[s,a]=(0,r.useState)([]),[x,m]=(0,r.useState)(!1),[b,j]=(0,r.useState)(""),[u,f]=(0,r.useState)(null),[N,p]=(0,r.useState)(!0);(0,r.useEffect)((()=>{window.innerWidth<768&&p(!1)}),[]);const w=async()=>{m(!0);const e=localStorage.getItem("token");try{const s=await c.A.get("api/terminals",{headers:{Authorization:`Bearer ${e}`}});a(s.data.data||[])}catch(s){console.error("Error fetching terminals:",s)}finally{m(!1)}};(0,r.useEffect)((()=>{w()}),[]);const g=s.filter((e=>e.tid.toLowerCase().includes(b.toLowerCase())||(e.warehouseName||"").toLowerCase().includes(b.toLowerCase())));return x?(0,h.jsx)(i.A,{}):(0,h.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,h.jsx)(l.A,{isSidebarOpen:N,setSidebarOpen:p}),(0,h.jsxs)("div",{className:"flex flex-grow",children:[(0,h.jsx)(n.A,{isSidebarOpen:N}),(0,h.jsxs)("main",{className:"flex-grow p-4 overflow-auto bg-gray-100",children:[(0,h.jsxs)("header",{className:"flex justify-between items-center mb-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{className:"text-2xl font-bold",children:"Terminal List"}),(0,h.jsx)("p",{className:"text-gray-600 text-sm",children:"View/Edit terminals"})]}),(0,h.jsxs)("nav",{className:"flex items-center text-gray-500 text-sm",children:[(0,h.jsxs)(t.N_,{to:"/dashboard",className:"flex items-center",children:[(0,h.jsx)(o.$BV,{className:"mr-1"})," Home"]}),(0,h.jsx)(d.XWt,{className:"mx-2"}),(0,h.jsx)("span",{children:"Terminals"})]})]}),(0,h.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,h.jsx)("button",{onClick:()=>e("/create-terminal"),className:"px-4 py-2 bg-cyan-500 text-white rounded",children:"+ New Terminal"}),(0,h.jsx)("input",{type:"text",placeholder:"Search by TID or warehouse\u2026",className:"w-1/3 p-2 border rounded",value:b,onChange:e=>j(e.target.value)})]}),(0,h.jsx)("div",{className:"overflow-x-auto bg-white border rounded",children:(0,h.jsxs)("table",{className:"w-full border-collapse",children:[(0,h.jsx)("thead",{className:"bg-gray-200",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"p-2 border",children:"#"}),(0,h.jsx)("th",{className:"p-2 border",children:"TID"}),(0,h.jsx)("th",{className:"p-2 border",children:"Warehouse"}),(0,h.jsx)("th",{className:"p-2 border",children:"QR Code"}),(0,h.jsx)("th",{className:"p-2 border",children:"Actions"})]})}),(0,h.jsx)("tbody",{children:0===g.length?(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:"5",className:"p-4 text-center",children:"No terminals found"})}):g.map(((s,a)=>(0,h.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,h.jsx)("td",{className:"p-2 border",children:a+1}),(0,h.jsx)("td",{className:"p-2 border",children:s.tid}),(0,h.jsx)("td",{className:"p-2 border",children:s.warehouse?s.warehouseName:"\u2014unassigned\u2014"}),(0,h.jsx)("td",{className:"p-2 border",children:s.qrCodePath?(0,h.jsx)("img",{src:s.qrCodePath,alt:"QR",className:"h-8 w-8 object-contain"}):"\u2014"}),(0,h.jsxs)("td",{className:"p-2 border relative",children:[(0,h.jsx)("button",{className:"px-2 py-1 text-white bg-cyan-600 rounded",onClick:()=>f((e=>e===s._id?null:s._id)),children:"Action"}),u===s._id&&(0,h.jsxs)("div",{className:"absolute right-0 mt-1 w-32 bg-white border rounded shadow z-10",children:[(0,h.jsx)("button",{className:"block w-full p-2 text-left hover:bg-gray-100",onClick:()=>e(`/create-terminal?id=${s._id}`),children:"\u270f\ufe0f Edit"}),(0,h.jsx)("button",{className:"block w-full p-2 text-left text-red-600 hover:bg-gray-100",onClick:()=>(async e=>{if(!window.confirm("Delete this terminal?"))return;m(!0);const s=localStorage.getItem("token");try{await c.A.delete(`api/terminals/${e}`,{headers:{Authorization:`Bearer ${s}`}}),w()}catch(a){console.error(a),alert("Delete failed")}finally{m(!1)}})(s._id),children:"\ud83d\uddd1\ufe0f Delete"})]})]})]},s._id)))})]})})]})]})]})}}}]);
//# sourceMappingURL=5020.59ce8dac.chunk.js.map