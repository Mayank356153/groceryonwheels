"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1041],{14840:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(65043),r=s(21197),n=s(59255),l=s(70579);function c(){const[e,t]=(0,a.useState)(!1);return(0,l.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,l.jsx)(r.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,l.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,l.jsx)("div",{children:(0,l.jsx)(n.A,{isSidebarOpen:e})}),(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,l.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},21041:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(65043),r=s(37762),n=s(64857),l=s(11238),c=s(49804),o=s(60184),i=s(21197),d=s(59255),x=s(86213),m=s(14840),p=s(66727),h=s(70579);const u=()=>{const e=(0,p.Zp)(),[t,s]=(0,a.useState)(10),[u,g]=(0,a.useState)(1),[y,f]=(0,a.useState)(!0),[b,j]=(0,a.useState)([]),[w,v]=(0,a.useState)(!1),[N,C]=(0,a.useState)([]);function S(e,t){return"admin"===(localStorage.getItem("role")||"guest").toLowerCase()||N.some((s=>s.module.toLowerCase()===e.toLowerCase()&&s.actions.map((e=>e.toLowerCase())).includes(t.toLowerCase())))}(0,a.useEffect)((()=>{const e=localStorage.getItem("permissions");e&&C(JSON.parse(e))}),[]);const[k,A]=(0,a.useState)(""),[E,_]=(0,a.useState)(null);(0,a.useEffect)((()=>{window.innerWidth<768&&f(!1)}),[]);const L=async()=>{try{v(!0);const e=localStorage.getItem("token"),t=await x.A.get("api/expenses",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});console.log(t.data),j(t.data.data)}catch(e){console.log(e.message)}finally{v(!1)}};(0,a.useEffect)((()=>{L()}),[]);const $=b.filter((e=>{var t;return(null===(t=e.category)||void 0===t?void 0:t.name)||"".toLowerCase().includes(k.toLowerCase())})),D=Math.ceil($.length/t),I=$.slice((u-1)*t,u*t),O=e=>{e>=1&&e<=D&&g(e)},[z,B]=(0,a.useState)(null),P=e=>{const t=b.find((t=>t._id===e));if(!t)return void console.error("Category not found for ID:",e);const s="Active"===t.status?"Inactive":"Active",a={...t,status:s};(async(e,t)=>{v(!0);try{await x.A.put(`api/expenses/${e}`,t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`}}),alert("Update Successfully"),L()}catch(n){var s,a,r;console.error("Error:",(null===(s=n.response)||void 0===s?void 0:s.data)||n.message),alert("Unsuccessful: "+((null===(a=n.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||n.message))}finally{v(!1)}})(e,a),B(a)};return w?(0,h.jsx)(m.A,{}):(0,h.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,h.jsx)(i.A,{isSidebarOpen:y,setSidebarOpen:f}),(0,h.jsxs)("div",{className:"flex flex-grow",children:[(0,h.jsx)("div",{className:"w-auto",children:(0,h.jsx)(d.A,{isSidebarOpen:y})}),(0,h.jsxs)("div",{className:"overflow-x-auto  flex flex-col p-2 md:p-2 min-h-screen w-full",children:[(0,h.jsxs)("header",{className:"flex flex-col items-center justify-between p-4 mb-2 bg-gray-100 rounded-md shadow sm:flex-row",children:[(0,h.jsx)("div",{className:"flex flex-col items-center gap-1 text-center sm:flex-row sm:text-left",children:(0,h.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"Expense Category List"})}),(0,h.jsxs)("nav",{className:"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0",children:[(0,h.jsxs)("a",{href:"#",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,h.jsx)(o.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,h.jsx)(c.XWt,{className:"mx-1 sm:mx-2"}),(0,h.jsx)("a",{href:"#",className:"text-gray-700 no-underline hover:text-cyan-600",children:"Expense Category List"})]})]}),(0,h.jsxs)("div",{className:"p-4 bg-white border-t-4 rounded-lg shadow-md border-cyan-500",children:[(0,h.jsxs)("header",{className:"flex items-center justify-between mb-4",children:[(0,h.jsx)("div",{}),S("ExpenseCategories","Add")&&(0,h.jsx)("button",{className:"px-4 py-2 text-white rounded bg-cyan-500",onClick:()=>e("/add-expense-category"),children:"+ New Expense"})]}),(0,h.jsxs)("div",{className:"flex flex-col justify-between w-full mt-4 mb-4 space-y-2 lg:flex-row lg:space-y-0 lg:items-center",children:[(0,h.jsxs)("div",{className:"flex items-center px-2 space-x-2",children:[(0,h.jsx)("span",{className:"text-sm",children:"Show"}),(0,h.jsxs)("select",{className:"p-2 text-sm border border-gray-300 rounded-md",value:t,onChange:e=>{s(Number(e.target.value)),g(1)},children:[(0,h.jsx)("option",{children:"10"}),(0,h.jsx)("option",{children:"20"}),(0,h.jsx)("option",{children:"50"})]}),(0,h.jsx)("span",{className:"text-sm",children:"Entries"})]}),(0,h.jsxs)("div",{className:"flex flex-col justify-around w-full gap-2 lg:flex-row",children:[(0,h.jsxs)("div",{className:"flex items-center justify-around flex-1 w-full gap-1 px-2",children:[(0,h.jsx)("button",{onClick:()=>{const e=b.map((e=>{var t;return`${(null===(t=e.category)||void 0===t?void 0:t.name)||"NA"}, ${e.note}, ${e.status}`})).join("\n");navigator.clipboard.writeText(e),alert("Data copied to clipboard!")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Copy"}),(0,h.jsx)("button",{onClick:()=>{const e=l.utils.json_to_sheet(b),t=l.utils.book_new();l.utils.book_append_sheet(t,e,"Expensescategory"),l.writeFile(t,"expenses_category.xlsx")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Excel"}),(0,h.jsx)("button",{onClick:()=>{const e=new r.uE;e.text("Expense Category List",20,20);const t=b.map((e=>{var t;return[(null===(t=e.category)||void 0===t?void 0:t.name)||"NA",e.note,e.status]}));(0,n.Ay)(e,{head:[["Category","Description","Status"]],body:t}),e.save("expensescategory.pdf")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"PDF"}),(0,h.jsx)("button",{onClick:()=>{window.print()},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Print"}),(0,h.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,"+b.map((e=>Object.values(e).join(","))).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","expenses_category.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"CSV"})]}),(0,h.jsx)("input",{type:"text",placeholder:"Search",className:"w-full p-2 text-sm border border-gray-300 rounded-sm md:w-auto",onChange:e=>A(e.target.value)})]})]}),(0,h.jsx)("div",{className:"overflow-x-auto",children:(0,h.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,h.jsx)("thead",{className:"bg-gray-200",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"px-3 py-2 text-sm text-center border",children:"Category"}),(0,h.jsx)("th",{className:"px-3 py-2 text-sm text-center border",children:"Description"}),(0,h.jsx)("th",{className:"px-3 py-2 text-sm text-center border",children:"Status"}),(0,h.jsx)("th",{className:"px-3 py-2 text-sm text-center border",children:"Action"})]})}),(0,h.jsx)("tbody",{children:0===I.length?(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:"4",className:"py-4 text-center",children:"No data available in table"})}):I.map((t=>(0,h.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,h.jsx)("td",{className:"px-3 py-2 text-sm text-center border",children:t.category?t.category.name:"No category"}),(0,h.jsx)("td",{className:"px-3 py-2 text-sm text-center border",children:t.note}),(0,h.jsx)("td",{className:"px-3 py-2 text-sm text-center border",onClick:()=>P(t._id),children:"active"===t.status.toLowerCase()?(0,h.jsx)("span",{className:"px-1 py-1 text-sm text-white bg-green-600 rounded-md",children:"Active"}):(0,h.jsx)("span",{className:"px-1 py-1 text-sm text-white bg-red-600 rounded-md",children:"Inactive"})}),(0,h.jsxs)("td",{className:"px-3 py-2 text-sm text-center border",children:[(0,h.jsx)("button",{onClick:()=>{_(E===t._id?null:t._id)},className:"px-3 py-1 text-white transition rounded bg-cyan-600 hover:bg-cyan-700",children:"Action \u25bc"}),E===t._id&&(0,h.jsxs)("div",{className:"absolute right-0 z-50 mt-2 bg-white border border-gray-200 rounded-md shadow-lg w-36 animate-fade-in",children:[S("ExpenseCategories","Edit")&&(0,h.jsxs)("button",{className:"flex items-center w-full px-3 py-2 text-gray-700 hover:bg-gray-100",onClick:()=>e(`/add-expense-category?id=${t._id}`),children:[(0,h.jsx)(o.uO9,{className:"mr-2"})," Edit"]}),S("ExpenseCategories","Delete")&&(0,h.jsxs)("button",{className:"flex items-center w-full px-3 py-2 text-red-600 hover:bg-gray-100",onClick:()=>(async e=>{if(window.confirm("Do u want to delete this")){v(!0);try{await x.A.delete(`api/expenses/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Deleted Successfully")}catch(t){console.error(t.message)}finally{await L(),v(!1)}}})(t._id),children:[(0,h.jsx)(o.qbC,{className:"mr-2"})," Delete"]})]}),"                                          "]})]},t._id)))})]})}),(0,h.jsxs)("div",{className:"flex flex-col items-center justify-between mt-4 md:flex-row",children:[(0,h.jsxs)("span",{children:["Showing ",t*(u-1)+1," to ",Math.min(t*u,b.length)," of ",b.length," entries"]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("button",{onClick:O,className:"px-4 py-2 mr-2 text-gray-600 bg-gray-300 disabled:opacity-50",disabled:1===u,children:"Previous"}),(0,h.jsx)("button",{onClick:O,className:"px-4 py-2 text-gray-600 bg-gray-300 disabled:opacity-50",disabled:u===D,children:"Next"})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=1041.5b09052c.chunk.js.map