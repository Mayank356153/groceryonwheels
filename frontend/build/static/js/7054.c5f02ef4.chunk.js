"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7054],{14840:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(65043),n=a(21197),l=a(59255),r=a(70579);function o(){const[e,t]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,r.jsx)(n.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,r.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,r.jsx)("div",{children:(0,r.jsx)(l.A,{isSidebarOpen:e})}),(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,r.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},35531:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(65043),n=a(49804),l=a(60184),r=a(21197),o=a(59255),d=a(86213),c=a(26873),i=a(66727),m=a(14840),u=a(70579);const x=()=>{const[e,t]=(0,s.useState)(!1),[a,x]=(0,s.useState)("addadvance"),[p,f]=(0,s.useState)(!0),[y,h]=(0,s.useState)([]),[g,v]=(0,s.useState)({}),[b,j]=(0,s.useState)({amount:0,customerName:null,date:"",paymentType:null,note:""});(0,s.useEffect)((()=>{window.innerWidth<768&&f(!1)}),[]);const[N]=(0,i.ok)(),w=N.get("id");(0,s.useEffect)((()=>{w&&(async()=>{try{t(!0);const e=(await d.A.get("api/advance-payments",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.data.find((e=>e._id===w));j(e),console.log(new Date(e.date).to)}catch(e){console.log(e.message)}finally{t(!1)}})()}),[w]);const A=e=>{const{name:t,value:a}=e.target;j((e=>({...e,[t]:"amount"===t?Number(a):a})))},S=e=>t=>{j((a=>({...a,[e]:t.value||null})))};(0,s.useEffect)((()=>console.log(b)),[b]),(0,s.useEffect)((()=>{(async()=>{try{t(!0);const e=(await d.A.get("api/customer-data/all",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.map((e=>({label:e.customerName.toUpperCase(),value:e._id})));h(e)}catch(e){console.log(e.message)}finally{t(!1)}})(),(async()=>{try{t(!0);const e=await d.A.get("api/payment-types",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.data.data){const t=e.data.data.map((e=>({label:e.paymentTypeName.toUpperCase(),value:e._id})));v(t)}}catch(e){console.log(e.message)}finally{t(!1)}})()}),[]);return e?(0,u.jsx)(m.A,{}):(0,u.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,u.jsx)(r.A,{isSidebarOpen:p,setSidebarOpen:f}),(0,u.jsxs)("div",{className:"flex flex-grow ",children:[(0,u.jsx)(o.A,{isSidebarOpen:p}),(0,u.jsxs)("div",{className:"flex-grow flex flex-col p-2 md:p-2  ",children:[(0,u.jsxs)("header",{className:"flex flex-col items-center justify-between p-4 rounded-md shadow sm:flex-row",children:[(0,u.jsxs)("div",{className:"flex flex-col items-center gap-1 text-center sm:flex-row sm:text-left",children:[(0,u.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"New Advance"}),(0,u.jsx)("span",{className:"text-xs text-gray-600 sm:text-sm",children:"Add/Update Brand"})]}),(0,u.jsxs)("nav",{className:"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0",children:[(0,u.jsxs)("a",{href:"#",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,u.jsx)(l.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,u.jsx)(n.XWt,{className:"hidden mx-1 sm:mx-2 sm:inline"}),(0,u.jsx)("a",{href:"#",className:"text-gray-700 no-underline hover:text-cyan-600",children:"Customers List"}),(0,u.jsx)(n.XWt,{className:"hidden mx-1 sm:mx-2 sm:inline"}),(0,u.jsx)(i.k2,{to:"/advance-lsti",className:"text-gray-700 no-underline hover:text-cyan-600",children:"Advance Payment List"})]})]}),(0,u.jsxs)("div",{className:"p-4 mt-1 bg-white border-t-4 rounded-lg shadow-md border-cyan-500",children:[(0,u.jsx)("div",{className:"flex border-b",children:(0,u.jsx)("button",{onClick:()=>x("addadvance"),className:"py-2 px-4 font-semibold "+("addadvance"===a?"border-b-2 border-cyan-500 text-blue-500":"text-gray-500"),children:"Add Advance"})}),(0,u.jsx)("div",{className:"mt-2",children:"addadvance"===a&&(0,u.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log(b),w?(async e=>{t(!0);try{const t=await d.A.put(`api/advance-payments/${e}`,b,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("Response:",t.data),alert(" Update Successfully")}catch(l){var a,s,n;console.error("Error:",(null===(a=l.response)||void 0===a?void 0:a.data)||l.message),alert("Unsuccessful: "+((null===(s=l.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||l.message))}finally{t(!1)}})(w):(async()=>{try{t(!0),await d.A.post("api/advance-payments",b,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Advance added successfully")}catch(e){console.log(e)}finally{t(!1)}})()},className:"space-y-5",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"block font-medium text-gray-700 text-sm/6",children:["Date ",(0,u.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,u.jsx)("input",{type:"date",name:"date",value:b.date?new Date(b.date).toISOString().split("T")[0]:"",onChange:A,required:!0,className:"w-full px-4 py-2 border rounded-md md:w-1/2 focus:ring-2 focus:ring-blue-400 focus:outline-none"})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"block font-medium text-gray-700 text-sm/6",children:["Customer Name ",(0,u.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,u.jsx)("div",{className:"w-full ",children:(0,u.jsx)(c.Ay,{className:"w-full bg-white cursor-pointer md:w-1/2",options:y,value:Array.isArray(y)&&y.find((e=>{var t;return e.value===((null===(t=b.customer)||void 0===t?void 0:t._id)||b.customer||"")}))||null,onChange:S("customer")})})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"block font-medium text-gray-700 text-sm/6",children:["Amount ",(0,u.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,u.jsx)("input",{type:"number",min:"0",name:"amount",value:b.amount,onChange:A,placeholder:"Enter amount",required:!0,className:"w-full px-4 py-2 border rounded-md md:w-1/2 focus:ring-2 focus:ring-blue-400 focus:outline-none"})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("label",{className:"block font-medium text-gray-700 text-sm/6",children:["Payment Type ",(0,u.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,u.jsx)("div",{className:"relative",children:(0,u.jsx)(c.Ay,{className:"w-full bg-white cursor-pointer md:w-1/2",options:g,value:Array.isArray(g)&&g.find((e=>{var t;return e.value===((null===(t=b.paymentType)||void 0===t?void 0:t._id)||b.paymentType||"")}))||null,onChange:S("paymentType")})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block font-medium text-gray-700 text-sm/6",children:"Additional Notes"}),(0,u.jsx)("textarea",{className:"w-full px-4 py-2 border rounded-md md:w-1/2 focus:ring-2 focus:ring-blue-400 focus:outline-none",placeholder:"Enter additional details...",value:b.note,onChange:A,name:"note"})]}),(0,u.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,u.jsx)("button",{type:"submit",className:"px-12 py-2 font-medium text-white bg-green-500 hover:bg-green-600",children:w?"Update":"Save"}),(0,u.jsx)("button",{type:"button",className:"px-12 py-2 font-medium text-white bg-yellow-500 hover:bg-yellow-600",children:"Clear"})]})]})})]})]})]})]})}},82284:(e,t,a)=>{function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}a.d(t,{A:()=>s})}}]);
//# sourceMappingURL=7054.c5f02ef4.chunk.js.map