"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[399],{30399:(e,a,s)=>{s.r(a),s.d(a,{default:()=>d});var l=s(65043),o=s(66727),r=s(86213),n=s(21197),t=s(59255),i=s(70579);const d=()=>{const e=(0,o.Zp)(),[a,s]=(0,l.useState)({userName:"",FirstName:"",LastName:"",Mobile:"",Email:"",Store:"",Role:"",Password:"",WarehouseGroup:"",Defaultwarehouse:""}),[d,c]=(0,l.useState)([]),[m,u]=(0,l.useState)(""),[p,h]=(0,l.useState)(""),[x,N]=(0,l.useState)(!1),[v,b]=(0,l.useState)(!0);(0,l.useEffect)((()=>{(async()=>{const a=localStorage.getItem("token");if(!a)return console.error("No token found. Redirecting to login..."),void e("/login");try{const e=await r.A.get("admincreatingrole/api/roles",{headers:{Authorization:`Bearer ${a}`}});console.log("Roles API Response:",e.data),e.data&&Array.isArray(e.data.roles)?c(e.data.roles):(console.error("Invalid role data received:",e.data),c([]))}catch(p){var s,l;console.error("Error fetching roles:",(null===(s=p.response)||void 0===s?void 0:s.data)||p.message),401===(null===(l=p.response)||void 0===l?void 0:l.status)&&(console.warn("Unauthorized! Clearing localStorage and redirecting..."),localStorage.clear(),e("/login")),c([])}finally{b(!1)}})()}),[e]);const g=e=>{const{name:a,value:l}=e.target;s((e=>({...e,[a]:l})))};return(0,i.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,i.jsx)(n.A,{isSidebarOpen:x,setSidebarOpen:N}),(0,i.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,i.jsx)("div",{className:"w-64",children:(0,i.jsx)(t.A,{isSidebarOpen:x})}),(0,i.jsxs)("div",{className:"w-full p-20",children:[m&&(0,i.jsx)("div",{className:"font-bold text-green-600",children:m}),p&&(0,i.jsx)("div",{className:"font-bold text-red-600",children:p}),(0,i.jsx)("h1",{className:"mb-6 text-2xl font-bold text-start",children:"Create User"}),v?(0,i.jsx)("p",{children:"Loading roles..."}):(0,i.jsxs)("form",{onSubmit:async l=>{l.preventDefault(),u(""),h("");const o=localStorage.getItem("token");if(!o)return console.error("No token found. Redirecting to login..."),void e("/login");try{const e=await r.A.post("admiaddinguser/adduserbyadmin",a,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}});console.log("User Created Response:",e.data),u("User added successfully!"),s({userName:"",FirstName:"",LastName:"",Mobile:"",Email:"",Store:"",Role:"",Password:"",WarehouseGroup:"",Defaultwarehouse:""})}catch(p){var n,t,i;console.error("Error adding user:",(null===(n=p.response)||void 0===n?void 0:n.data)||p.message),h((null===(t=p.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)||"Something went wrong")}},children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-10",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("label",{className:"block font-medium",children:"Username*"}),(0,i.jsx)("input",{type:"text",name:"userName",placeholder:"UserName",className:"w-full px-3 py-2 border",value:a.userName,onChange:g,required:!0}),(0,i.jsx)("label",{className:"block font-medium",children:"First Name*"}),(0,i.jsx)("input",{type:"text",name:"FirstName",className:"w-full px-3 py-2 border",value:a.FirstName,onChange:g,required:!0}),(0,i.jsx)("label",{className:"block font-medium",children:"Last Name*"}),(0,i.jsx)("input",{type:"text",name:"LastName",className:"w-full px-3 py-2 border",value:a.LastName,onChange:g,required:!0}),(0,i.jsx)("label",{className:"block font-medium",children:"Mobile"}),(0,i.jsx)("input",{type:"text",name:"Mobile",className:"w-full px-3 py-2 border",value:a.Mobile,onChange:g})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("label",{className:"block font-medium",children:"Email*"}),(0,i.jsx)("input",{type:"email",name:"Email",className:"w-full px-3 py-2 border",value:a.Email,onChange:g,required:!0}),(0,i.jsx)("label",{className:"block font-medium",children:"Store:"}),(0,i.jsxs)("select",{name:"Store",className:"w-full px-3 py-2 border",value:a.Store,onChange:g,required:!0,children:[(0,i.jsx)("option",{value:"",children:"Select Store"}),(0,i.jsx)("option",{value:"SAAS ADMIN",children:"SAAS ADMIN"}),(0,i.jsx)("option",{value:"POS",children:"POS"}),(0,i.jsx)("option",{value:"Keshav demo 1",children:"Keshav demo 1"}),(0,i.jsx)("option",{value:"Keshav demo 2",children:"Keshav demo 2"}),(0,i.jsx)("option",{value:"grocery on wheels",children:"Grocery on Wheels"})]}),(0,i.jsx)("label",{className:"block font-medium",children:"Role:"}),(0,i.jsxs)("select",{name:"Role",className:"w-full px-3 py-2 border",value:a.Role,onChange:g,required:!0,children:[(0,i.jsx)("option",{value:"",children:"Select Role"}),d.map((e=>(0,i.jsx)("option",{value:e.roleName,children:e.roleName},e._id)))]}),(0,i.jsx)("label",{className:"block font-medium",children:"Password*"}),(0,i.jsx)("input",{type:"password",name:"Password",className:"w-full px-3 py-2 border",value:a.Password,onChange:g,required:!0})]})]}),(0,i.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[(0,i.jsx)("button",{type:"submit",className:"px-6 py-2 font-bold text-white bg-green-500 rounded-md",children:"Save"}),(0,i.jsx)("button",{type:"button",className:"px-6 py-2 font-bold text-white bg-orange-500 rounded-md",onClick:()=>window.location.reload(),children:"Close"})]})]})]})]})]})}}}]);
//# sourceMappingURL=399.3ee4ea23.chunk.js.map