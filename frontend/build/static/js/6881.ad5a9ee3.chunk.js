"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6881],{86881:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(65043),n=s(66727),r=s(21197),c=s(59255),l=s(86213),d=s(49804),o=s(60184),i=s(37762),x=s(64857),h=s(11238),u=s(70579);function m(){const e=(0,n.Zp)(),[t,s]=(0,a.useState)(!0),[m,p]=(0,a.useState)([]),[b,y]=(0,a.useState)(""),[j,N]=(0,a.useState)(10),[g,w]=(0,a.useState)(1);(0,a.useEffect)((()=>{window.innerWidth<768&&s(!1)}),[]);const f=async()=>{try{const e=localStorage.getItem("token"),t=await l.A.get("api/states",{headers:{Authorization:`Bearer ${e}`}});p(t.data.data||[])}catch(e){console.error("Error fetching states:",e)}};(0,a.useEffect)((()=>{f()}),[]);if("admin"!==localStorage.getItem("role"))return(0,u.jsx)(n.C5,{to:"/dashboard",replace:!0});const v=m.filter((e=>e.stateName.toLowerCase().includes(b.toLowerCase()))),S=g*j,C=S-j,k=v.slice(C,S),$=Math.ceil(v.length/j),A=e=>{e>=1&&e<=$&&w(e)};return(0,u.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,u.jsx)(r.A,{isSidebarOpen:t,setSidebarOpen:s}),(0,u.jsxs)("div",{className:"flex flex-grow",children:[(0,u.jsx)(c.A,{isSidebarOpen:t}),(0,u.jsxs)("div",{className:"overflow-x-auto p-4 w-full transition-all duration-300",children:[(0,u.jsxs)("header",{className:"flex justify-between p-4 mb-2 bg-gray-100 rounded shadow",children:[(0,u.jsx)("div",{className:"flex items-center gap-2",children:(0,u.jsx)("h1",{className:"text-lg font-semibold",children:"State List"})}),(0,u.jsxs)("nav",{className:"flex items-center text-xs text-gray-500",children:[(0,u.jsxs)(n.k2,{to:"/dashboard",className:"flex items-center hover:text-cyan-600",children:[(0,u.jsx)(o.$BV,{className:"mr-1"})," Home"]}),(0,u.jsx)(d.XWt,{className:"mx-1"}),(0,u.jsx)("span",{children:"State List"})]})]}),(0,u.jsxs)("div",{className:"p-4 bg-white border-t-4 border-cyan-500 rounded shadow",children:[(0,u.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,u.jsx)("h2",{className:"text-lg font-semibold",children:"States"}),(0,u.jsx)("button",{onClick:()=>e("/add-state"),className:"px-4 py-2 bg-cyan-500 text-white rounded",children:"+ New State"})]}),(0,u.jsxs)("div",{className:"flex flex-wrap justify-between mb-4 gap-2",children:[(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"Show"}),(0,u.jsx)("select",{className:"p-1 border rounded",value:j,onChange:e=>{N(+e.target.value),w(1)},children:[10,20,50].map((e=>(0,u.jsx)("option",{children:e},e)))}),(0,u.jsx)("span",{children:"entries"})]}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,u.jsx)("button",{onClick:()=>{const e=v.map((e=>`${e.stateName},${e.country.countryName},${e.status}`)).join("\n");navigator.clipboard.writeText(e),alert("Copied to clipboard")},className:"px-2 py-1 bg-cyan-500 text-white rounded",children:"Copy"}),(0,u.jsx)("button",{onClick:()=>{const e=h.utils.json_to_sheet(v.map((e=>({"State Name":e.stateName,Country:e.country.countryName,Status:e.status})))),t=h.utils.book_new();h.utils.book_append_sheet(t,e,"States"),h.writeFile(t,"states.xlsx")},className:"px-2 py-1 bg-cyan-500 text-white rounded",children:"Excel"}),(0,u.jsx)("button",{onClick:()=>{const e=new i.uE;e.text("States List",20,20),(0,x.Ay)(e,{head:[["State Name","Country","Status"]],body:v.map((e=>[e.stateName,e.country.countryName,e.status]))}),e.save("states.pdf")},className:"px-2 py-1 bg-cyan-500 text-white rounded",children:"PDF"}),(0,u.jsx)("button",{onClick:()=>window.print(),className:"px-2 py-1 bg-cyan-500 text-white rounded",children:"Print"}),(0,u.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,"+v.map((e=>`${e.stateName},${e.country.countryName},${e.status}`)).join("\n"),t=document.createElement("a");t.href=encodeURI(e),t.download="states.csv",document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"px-2 py-1 bg-cyan-500 text-white rounded",children:"CSV"}),(0,u.jsx)("input",{type:"text",placeholder:"Search",className:"p-1 border rounded",value:b,onChange:e=>y(e.target.value)})]})]}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"min-w-full bg-white border-collapse rounded shadow",children:[(0,u.jsx)("thead",{className:"bg-gray-200",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-4 py-2 border",children:"State Name"}),(0,u.jsx)("th",{className:"px-4 py-2 border",children:"Country"}),(0,u.jsx)("th",{className:"px-4 py-2 border",children:"Status"}),(0,u.jsx)("th",{className:"px-4 py-2 border",children:"Action"})]})}),(0,u.jsx)("tbody",{children:0===k.length?(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"4",className:"py-4 text-center text-gray-500",children:"No records found"})}):k.map((t=>(0,u.jsxs)("tr",{className:"border-b",children:[(0,u.jsx)("td",{className:"px-4 py-2",children:t.stateName}),(0,u.jsx)("td",{className:"px-4 py-2",children:t.country.countryName}),(0,u.jsx)("td",{className:"px-4 py-2",children:(0,u.jsx)("button",{onClick:()=>(async(e,t)=>{const s="active"===t?"inactive":"active";try{const t=localStorage.getItem("token");await l.A.put(`api/states/${e}`,{status:s},{headers:{Authorization:`Bearer ${t}`}}),p((t=>t.map((t=>t._id===e?{...t,status:s}:t))))}catch(a){console.error("Error toggling status:",a.response||a),alert("Could not change status")}})(t._id,t.status),className:"px-2 py-1 rounded "+("active"===t.status?"bg-green-500 text-white":"bg-red-500 text-white"),children:t.status})}),(0,u.jsxs)("td",{className:"px-4 py-2 border",children:[(0,u.jsx)("button",{onClick:()=>e(`/edit-state/${t._id}`),className:"px-2 py-1 mr-2 bg-cyan-600 text-white rounded",children:"Edit"}),(0,u.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this state?"))try{const t=localStorage.getItem("token");await l.A.delete(`api/states/${e}`,{headers:{Authorization:`Bearer ${t}`}}),alert("State deleted"),f()}catch(t){console.error("Error deleting state:",t)}})(t._id),className:"px-2 py-1 bg-red-600 text-white rounded",children:"Delete"})]})]},t._id)))})]})}),(0,u.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,u.jsxs)("span",{children:["Showing ",C+1," to ",Math.min(S,v.length)," of ",v.length," entries"]}),(0,u.jsxs)("div",{className:"space-x-2",children:[(0,u.jsx)("button",{onClick:()=>A(g-1),disabled:1===g,className:"px-2 py-1 bg-gray-300 rounded disabled:opacity-50",children:"Previous"}),(0,u.jsx)("button",{onClick:()=>A(g+1),disabled:S>=v.length,className:"px-2 py-1 bg-gray-300 rounded disabled:opacity-50",children:"Next"})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=6881.ad5a9ee3.chunk.js.map