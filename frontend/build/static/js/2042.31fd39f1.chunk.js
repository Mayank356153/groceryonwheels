"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2042],{14840:(e,s,a)=>{a.d(s,{A:()=>i});var r=a(65043),l=a(21197),t=a(59255),n=a(70579);function i(){const[e,s]=(0,r.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(l.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,n.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,n.jsx)("div",{children:(0,n.jsx)(t.A,{isSidebarOpen:e})}),(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,n.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},32042:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var r=a(65043),l=a(66727),t=a(86213),n=a(21197),i=a(59255),d=a(14840),o=a(60184),c=a(49804),m=a(70579);const u=()=>{const e=(0,l.Zp)(),[s]=(0,l.ok)(),a=s.get("id"),[u,x]=(0,r.useState)(!0);(0,r.useEffect)((()=>{window.innerWidth<768&&x(!1)}),[]);const[h,f]=(0,r.useState)({userName:"",FirstName:"",LastName:"",Mobile:"",Email:"",profileImage:""}),[g,p]=(0,r.useState)(""),[b,j]=(0,r.useState)(""),[N,v]=(0,r.useState)(!1);localStorage.getItem("id");(0,r.useEffect)((()=>{(async()=>{v(!0);const s=localStorage.getItem("token");if(!s)return console.error("No token found. Redirecting to login..."),void e("/");try{const e=await t.A.get("admiaddinguser/userlist",{headers:{Authorization:`Bearer ${s}`}});console.log("user"),console.log(e)}catch(r){var a;console.error("Error fetching roles:",(null===(a=r.response)||void 0===a?void 0:a.data)||r.message)}finally{v(!1)}})(),(async()=>{v(!0);const s=localStorage.getItem("token");if(!s)return console.error("No token found. Redirecting to login..."),void e("/");try{const e=await t.A.get("admiaddinguser/profile",{headers:{Authorization:`Bearer ${s}`}});console.log(e)}catch(r){var a;console.error("Error fetching roles:",(null===(a=r.response)||void 0===a?void 0:a.data)||r.message)}finally{v(!1)}})()}),[]);const y=e=>{const{name:s,value:a}=e.target;f((e=>({...e,[s]:"Mobile"===s?Number(a):a})))};return N?(0,m.jsx)(d.A,{}):(0,m.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,m.jsx)(n.A,{isSidebarOpen:u,setSidebarOpen:x}),(0,m.jsxs)("div",{className:"flex flex-grow",children:[(0,m.jsx)(i.A,{isSidebarOpen:u}),(0,m.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),g!==b)return alert("Passwords do not match");v(!0);const r={...h,Password:g,createdBy:localStorage.getItem("userId")};try{const s={Authorization:`Bearer ${localStorage.getItem("token")}`};a?(await t.A.put(`admiaddinguser/${a}`,r,{headers:s}),alert("User updated")):(await t.A.post("admiaddinguser/adduserbyadmin",r,{headers:s}),alert("User created")),e("/admin/user/list")}catch(i){var l,n;alert((null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)||i.message)}finally{v(!1)}},className:"flex-grow p-6 overflow-auto bg-gray-100",children:[(0,m.jsxs)("header",{className:"flex items-center justify-between mb-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{className:"text-2xl font-bold",children:"Edit User"}),(0,m.jsx)("p",{className:"text-gray-600",children:a?"Modify details":"Fill in details"})]}),(0,m.jsxs)("nav",{className:"flex items-center text-gray-500",children:[(0,m.jsxs)(l.k2,{to:"/dashboard",className:"flex items-center",children:[(0,m.jsx)(o.$BV,{className:"mr-1"})," Home"]}),(0,m.jsx)(c.XWt,{className:"mx-2"}),(0,m.jsx)(l.k2,{to:"/admin/user/list",children:"User List"})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,m.jsxs)("div",{className:"space-y-4",children:[[{label:"Username",name:"userName",req:!0},{label:"First Name",name:"FirstName",req:!0},{label:"Last Name",name:"LastName",req:!0},{label:"Mobile",name:"Mobile"},{label:"Email",name:"Email",type:"email",req:!0}].map((e=>{let{label:s,name:a,type:r="text",req:l}=e;return(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block font-semibold",children:[s,l&&(0,m.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,m.jsx)("input",{type:r,name:a,value:h[a],onChange:y,required:l,className:"w-full p-2 border rounded"})]},a)})),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block font-semibold",children:["Password",(0,m.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,m.jsx)("input",{type:"password",value:g,onChange:e=>p(e.target.value),required:!0,className:"w-full p-2 border rounded"})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block font-semibold",children:["Confirm",(0,m.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,m.jsx)("input",{type:"password",value:b,onChange:e=>j(e.target.value),required:!0,className:"w-full p-2 border rounded"})]})]})]}),(0,m.jsx)("div",{className:"space-y-4",children:(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block font-semibold",children:"Profile Picture"}),(0,m.jsx)("input",{type:"file",onChange:e=>{const s=e.target.files[0];s&&f((e=>({...e,profileImage:URL.createObjectURL(s)})))},className:"w-full p-2 border rounded"}),(0,m.jsx)("div",{className:"w-64 h-64 mt-2 overflow-hidden border rounded",children:(0,m.jsx)("img",{src:h.profileImage||"/userlogoprof.png",alt:"",className:"object-cover w-full h-full"})})]})})]}),(0,m.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[(0,m.jsx)("button",{className:"px-8 py-2 text-white bg-green-600 rounded",children:a?"Update":"Save"}),(0,m.jsx)("button",{type:"button",onClick:()=>e("/admin/user/list"),className:"px-8 py-2 text-white bg-orange-500 rounded",children:"Cancel"})]})]})]})]})}}}]);
//# sourceMappingURL=2042.31fd39f1.chunk.js.map