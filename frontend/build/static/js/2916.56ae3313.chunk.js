"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2916],{14840:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(65043),l=t(21197),r=t(59255),i=t(70579);function n(){const[e,s]=(0,a.useState)(!1);return(0,i.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,i.jsx)(l.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,i.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,i.jsx)("div",{children:(0,i.jsx)(r.A,{isSidebarOpen:e})}),(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,i.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},21830:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(65043),l=t(70579);function r(e){let{id:s=" ",type:t="text",label_class:r="",label:i,className:n="",placeholder:d="",div_class:c="",...o}=e;const x=(0,a.useId)();return(0,l.jsxs)("div",{className:c,children:[" ",i?(0,l.jsx)("label",{className:r,htmlFor:" "===s?x:s,children:i}):null," ",(0,l.jsx)("input",{type:t,id:" "===s?x:s,placeholder:d,className:n,...o})]})}},53888:(e,s,t)=>{t.d(s,{A:()=>l});t(65043);var a=t(70579);function l(e){let{text:s,type:t="button",className:l,...r}=e;return(0,a.jsx)("button",{className:`${l}`,...r,children:s})}},62916:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var a=t(65043),l=(t(53888),t(21830)),r=t(66727),i=t(21197),n=t(59255),d=t(60184),c=t(86213),o=t(37762),x=t(64857),m=t(11238),u=t(14840),h=t(70579);function p(){const e=(0,r.Zp)(),[s,t]=(0,a.useState)([]),[p,b]=(0,a.useState)([]),[j,f]=(0,a.useState)(!0),[y,g]=(0,a.useState)(null),[N,v]=(0,a.useState)(1),[w,k]=(0,a.useState)(10),[C,S]=(0,a.useState)(""),[A,L]=(0,a.useState)(!0),[_,$]=(0,a.useState)(!1),[D,E]=(0,a.useState)(0),[I,O]=(0,a.useState)(0),[M,R]=(0,a.useState)([]),[B,P]=(0,a.useState)(0);(0,a.useEffect)((()=>{window.innerWidth<768&&L(!1)}),[]);const V=async()=>{f(!0);try{const e=await c.A.get("api/customer/all",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});t(e.data.data),console.log(e.data)}catch(e){g(e.message)}finally{f(!1)}},W=s.filter((e=>e.customerName.toLowerCase().includes(C.toLowerCase())||e._id.toLowerCase().includes(C.toLowerCase())));(0,a.useEffect)((()=>{V()}),[]);const T=Math.ceil(W.length/w),U=W.slice((N-1)*w,N*w);(0,a.useEffect)((()=>{(()=>{const e=U.reduce(((e,s)=>e+s.creditLimit),0),s=U.reduce(((e,s)=>e+s.previousDue),0),t=U.reduce(((e,s)=>e+(s.salesReturnDue||0)),0);E(e),P(s),O(t)})()}),[s,W]);const z=e=>{e>=1&&e<=T&&v(e)},F=(s,t)=>{const a=s.target.value;"edit"===a&&e(`/customer/add?id=${t}`),"delete"===a&&(async e=>{if(window.confirm("Do u want to delete customer")){f(!0);try{await c.A.delete(`api/customer/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Deleted Successfully")}catch(y){console.error(y.message)}finally{f(!1),V()}}})(t),"discount"===a&&e(`/create?customerid=${t}`)};return j?(0,h.jsx)(u.A,{}):y?(0,h.jsx)("h1",{children:"Something Went Wrong..."}):(0,h.jsxs)("div",{className:"flex flex-col overflow-x-hidden",children:[(0,h.jsx)(i.A,{isSidebarOpen:A,setSidebarOpen:L}),(0,h.jsxs)("div",{className:"flex w-screen overflow-x-hidden",children:[(0,h.jsx)("div",{children:(0,h.jsx)(n.A,{isSidebarOpen:A})}),(0,h.jsxs)("div",{className:"  flex flex-col  transition-all duration-300  p-2 w-full overflow-x-hidden ",children:[(0,h.jsxs)("div",{className:"flex flex-col items-start justify-between py-2 md:items-end md:flex-row ",children:[(0,h.jsxs)("div",{className:"flex items-end gap-2 pl-2 ",children:[(0,h.jsx)("span",{className:"text-3xl ",children:"Customers List"}),(0,h.jsx)("span",{className:"text-sm text-gray-700",children:"View /Search Customers"})]}),(0,h.jsxs)("div",{className:"flex gap-2 pl-2 pr-2 mb-2 text-sm font-semibold text-black bg-gray-500 bg-opacity-50 rounded-md md:text-gray-500 md:justify-end md:bg-transparent",children:[(0,h.jsxs)(r.k2,{to:"/dashboard",className:"flex items-center text-gray-700 no-underline",children:[(0,h.jsx)(d.$BV,{}),"Home "]}),(0,h.jsx)("span",{children:">"}),(0,h.jsx)(r.k2,{to:"/customer/import",className:"text-gray-700 no-underline",children:"Import Customers"}),(0,h.jsx)("span",{children:">"}),(0,h.jsx)(r.k2,{to:"/customer/view",className:"text-gray-700 no-underline ",children:"Customers"})]})]}),(0,h.jsxs)("div",{className:"w-full mx-auto bg-white border-t-4 border-collapse rounded-lg shadow-md border-opacity-55 border-t-blue-600",children:[(0,h.jsxs)("div",{className:"flex flex-col items-center justify-start px-3 py-2 sm:justify-between sm:flex-row",children:[(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(l.A,{type:"checkbox"}),"View Account Receivable Customers"]}),(0,h.jsxs)("button",{className:"flex-shrink-0 px-4 py-2 font-bold text-center text-white bg-blue-600 rounded cursor-pointer hover:bg-blue-700",onClick:()=>e("/customer/new"),children:[(0,h.jsx)("span",{className:"text-xl",children:"+"}),"Create Customer"]})]}),(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("div",{className:"flex flex-col justify-between mt-4 mb-4 space-y-2 md:flex-row md:space-y-0 md:items-center",children:[(0,h.jsxs)("div",{className:"flex items-center px-2 space-x-2",children:[(0,h.jsx)("span",{className:"text-sm",children:"Show"}),(0,h.jsxs)("select",{className:"p-2 text-sm border border-gray-300 rounded-md",value:w,onChange:e=>{k(Number(e.target.value)),v(1)},children:[(0,h.jsx)("option",{children:"10"}),(0,h.jsx)("option",{children:"20"}),(0,h.jsx)("option",{children:"50"})]}),(0,h.jsx)("span",{className:"text-sm",children:"Entries"})]}),(0,h.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between flex-1 gap-2 px-2",children:[(0,h.jsx)("button",{onClick:()=>{const e=W.map((e=>`${e._id}, ${e.customerName}, ${e.mobile},${e.email},${e.address?e.address.locationLink:"No Location link"},${e.creditLimit},${e.previousDue},${e.salesReturnDue||0},${e.advance},${p.includes(e._id)?"InActive":"Active"}}`)).join("\n");navigator.clipboard.writeText(e),alert("Data copied to clipboard!")},className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"Copy"}),(0,h.jsx)("button",{onClick:()=>{const e=m.utils.json_to_sheet(W),s=m.utils.book_new();m.utils.book_append_sheet(s,e,"Users"),m.writeFile(s,"users.xlsx")},className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"Excel"}),(0,h.jsx)("button",{onClick:()=>{const e=new o.uE;e.text("Customer List",20,20);const s=W.map((e=>[e._id,e.customerName,e.mobile,e.email,e.address?e.address.locationLink:"No Location link",e.creditLimit,e.previousDue,e.salesReturnDue||0,e.advance,p.includes(e._id)?"InActive":"Active"]));(0,x.Ay)(e,{head:[["Customer Id","Customer Name","Mobile","Email","Location Link","Credit Limit","Previous Due","Sales return due","Advance","Status"]],body:s}),e.save("customer_list.pdf")},className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"PDF"}),(0,h.jsx)("button",{onClick:()=>{window.print()},className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"Print"}),(0,h.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,"+W.map((e=>Object.values(e).join(","))).join("\n"),s=encodeURI(e),t=document.createElement("a");t.setAttribute("href",s),t.setAttribute("download","customers.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"px-3 py-2 text-sm text-white bg-cyan-500",children:"CSV"})]}),(0,h.jsx)("input",{type:"text",placeholder:"Search",className:"w-full p-2 text-sm border border-gray-300 rounded-sm md:w-auto",onChange:e=>S(e.target.value)})]})]}),(0,h.jsx)("div",{className:"w-full overflow-x-auto",children:(0,h.jsxs)("table",{className:"w-full border-separate",children:[(0,h.jsx)("thead",{className:"text-sm",children:(0,h.jsxs)("tr",{className:"bg-gray-200",children:[(0,h.jsx)("th",{className:"px-4 py-2 text-left",children:(0,h.jsx)(l.A,{type:"checkbox",id:"table_head",checked:_,onChange:()=>$(!_)})}),(0,h.jsx)("th",{className:"px-4 py-2 text-left",children:"CUSTOMER ID"}),(0,h.jsx)("th",{className:"px-4 py-2 text-left",children:"CUSTOMER Name"}),(0,h.jsx)("th",{className:"px-4 py-2",children:"Mobile"}),(0,h.jsx)("th",{className:"px-4 py-2 text-left",children:"Email"}),(0,h.jsx)("th",{className:"px-4 py-2 text-left ",children:"Location"}),(0,h.jsx)("th",{className:"px-4 py-2 text-left ",children:"Type"}),(0,h.jsx)("th",{className:"px-4 py-2 text-left ",children:"Status"}),(0,h.jsx)("th",{className:"px-4 py-2 text-left ",children:"Action"})]})}),(0,h.jsxs)("tbody",{className:"border-gray-100 border-1",children:[W.length<=0&&(0,h.jsx)("tr",{children:(0,h.jsx)("td",{className:"px-4 py-2 text-center border-gray-100 border-1",colSpan:"15",children:"No Data Available"})}),W.slice((N-1)*w,N*w).map(((e,s)=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:(0,h.jsx)(l.A,{type:"checkbox",id:"table_body",checked:_||M.includes(e._id),onChange:()=>{return s=e._id,void R((e=>e.includes(s)?e.filter((e=>e!=s)):[...e,s]));var s}})}),(0,h.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e._id}),(0,h.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e.customerName}),(0,h.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e.mobile}),(0,h.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e.email}),(0,h.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e.locationLink}),(0,h.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",children:e.type}),(0,h.jsx)("td",{className:"px-4 py-2 border-gray-100 border-1",onClick:()=>b((s=>s.includes(e._id)?s.filter((s=>s!==e._id)):[...s,e._id])),children:p.includes(e._id)?(0,h.jsx)("span",{className:"p-1 text-white bg-red-700 rounded-md",children:"Inactive"}):(0,h.jsx)("span",{className:"p-1 text-white bg-green-400 rounded-md",children:"Active"})}),(0,h.jsx)("td",{className:"py-2 border-gray-100 border-1",children:(0,h.jsxs)("select",{className:"py-1 text-sm border rounded-sm ",onClick:s=>F(s,e._id),children:[(0,h.jsx)("option",{value:"",selected:!0,disabled:!0,children:"Actions"}),(0,h.jsx)("option",{value:"discount",children:" Generate Discount Coupon"}),(0,h.jsx)("option",{value:"edit",children:"Edit"}),(0,h.jsx)("option",{value:"view",children:"View Payment"}),(0,h.jsx)("option",{value:"delete",children:"Delete"})]})})]},s)))]})]})}),(0,h.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 p-2 md:justify-between md:flex-row",children:[(0,h.jsxs)("span",{children:["                    ",(0,h.jsxs)("span",{children:["Showing ",w*(N-1)+1," to ",Math.min(w*N,W.length)," of ",W.length," entries"]}),"              "]}),(0,h.jsxs)("div",{className:"flex justify-between w-full md:w-auto md:gap-2",children:[(0,h.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(1===N?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>z(N-1),disabled:1===N,children:[(0,h.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Previous"]}),(0,h.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(N===T||0===T?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>z(N+1),disabled:N===T||0===T,children:["Next",(0,h.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=2916.56ae3313.chunk.js.map