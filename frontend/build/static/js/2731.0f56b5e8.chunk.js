"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2731],{14840:(e,t,s)=>{s.d(t,{A:()=>o});var r=s(65043),a=s(21197),n=s(59255),l=s(70579);function o(){const[e,t]=(0,r.useState)(!1);return(0,l.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,l.jsx)(a.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,l.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,l.jsx)("div",{children:(0,l.jsx)(n.A,{isSidebarOpen:e})}),(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,l.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},52731:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var r=s(65043),a=s(66727),n=s(49804),l=s(60184),o=s(37762),c=s(64857),i=s(11238),d=s(21197),x=s(59255),u=s(86213),m=s(14840),h=s(70579);const b=()=>{const e=(0,a.Zp)(),[t,s]=(0,r.useState)(""),[b,f]=(0,r.useState)(""),[p,j]=(0,r.useState)(""),[g,v]=(0,r.useState)("All"),[N,w]=(0,r.useState)(10),[y,A]=(0,r.useState)(""),[C,S]=(0,r.useState)(!0),[k,D]=(0,r.useState)([]),[L,$]=(0,r.useState)(!1),[_,T]=(0,r.useState)(1),[B,M]=(0,r.useState)(null),E=async()=>{try{$(!0);const e=await u.A.get("api/money-transfers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log(e.data),D(e.data.data)}catch(e){console.log(e.message)}finally{$(!1)}};(0,r.useEffect)((()=>{window.innerWidth<768&&S(!1)}),[]);const O=k.filter((e=>{var s,r,a,n,l,o,c,i,d,x,u,m,h,f,j,g;const v=(null===y||void 0===y?void 0:y.trim().toLowerCase())||"",N=(null===(s=e.debitAccount)||void 0===s||null===(r=s.accountNumber)||void 0===r||null===(a=r.toLowerCase())||void 0===a?void 0:a.includes(v))||!1,w=(null===(n=e.creditAccount)||void 0===n||null===(l=n.accountNumber)||void 0===l||null===(o=l.toLowerCase())||void 0===o?void 0:o.includes(v))||!1,A=(null===(c=e.creditAccount)||void 0===c||null===(i=c.accountName)||void 0===i||null===(d=i.toLowerCase())||void 0===d?void 0:d.includes(v))||!1,C=(null===(x=e.debitAccount)||void 0===x||null===(u=x.accountName)||void 0===u||null===(m=u.toLowerCase())||void 0===m?void 0:m.includes(v))||!1,S="all"===p||!p||(null===(h=e.creditAccount)||void 0===h||null===(f=h.accountNumber)||void 0===f?void 0:f.toLowerCase())===p,k="all"===b||!b||(null===(j=e.debitAccount)||void 0===j||null===(g=j.accountNumber)||void 0===g?void 0:g.toLowerCase())===b,D=!t||e.transferDate&&new Date(e.transferDate).toDateString()===new Date(t).toDateString();return(""===v||N||w||A||C)&&D&&S&&k}));(0,r.useEffect)((()=>{E()}),[]);const W=Math.ceil(O.length/N),z=O.slice((_-1)*N,_*N),I=e=>{e>=1&&e<=W&&T(e)};return L?(0,h.jsx)(m.A,{}):(0,h.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,h.jsx)(d.A,{isSidebarOpen:C,setSidebarOpen:S}),(0,h.jsxs)("div",{className:"flex flex-grow",children:[(0,h.jsx)("div",{className:"w-auto",children:(0,h.jsx)(x.A,{isSidebarOpen:C})}),(0,h.jsxs)("div",{className:"overflow-x-auto flex flex-col  md:p-2 min-h-screen w-full p-2",children:[(0,h.jsxs)("header",{className:"flex flex-col items-center justify-between px-1 py-2 bg-gray-100 rounded-md shadow sm:flex-row",children:[(0,h.jsxs)("div",{className:"flex items-baseline gap-1 text-center sm:flex-row sm:text-left",children:[(0,h.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"Money Transfer List"}),(0,h.jsx)("span",{className:"text-xs text-gray-600 sm:text-sm",children:"View/Search Transfers"})]}),(0,h.jsxs)("nav",{className:"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0",children:[(0,h.jsxs)("a",{href:"#",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,h.jsx)(l.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,h.jsx)(n.XWt,{className:"mx-1 sm:mx-2"}),(0,h.jsx)("a",{href:"#",className:"text-gray-700 no-underline hover:text-cyan-600",children:"Money Transfer List"})]})]}),(0,h.jsxs)("div",{className:"flex items-center justify-between p-4 mt-1 mb-4 border-t-4 rounded-lg border-cyan-500",children:[(0,h.jsx)("div",{}),(0,h.jsxs)("div",{children:[(0,h.jsxs)(a.N_,{to:"/add-money-transfer",className:"px-4 py-2 text-white no-underline transition rounded bg-cyan-500 hover:bg-cyan-600",children:[(0,h.jsx)("span",{className:"text-lg",children:"+"})," Create Transfer"]}),(0,h.jsxs)(a.N_,{to:"/account-list",className:"bg-green-600 text-white px-4 py-2 rounded",children:[(0,h.jsx)("span",{className:"text-lg",children:"+"})," Account List"]})]})]}),(0,h.jsx)("div",{className:"flex-col items-start md:flex-row md:items-center",children:(0,h.jsxs)("div",{className:"flex flex-wrap justify-between space-y-2",children:[(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Transfer Date"}),(0,h.jsx)("input",{type:"date",value:t,onChange:e=>s(e.target.value),className:"w-48 p-2 border"})]}),(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Debit Account"}),(0,h.jsxs)("select",{value:b,onChange:e=>f(e.target.value),className:"w-48 p-2 border",children:[(0,h.jsx)("option",{disabled:!0,children:"Select"}),(0,h.jsx)("option",{value:"all",children:"ALL"}),k.map((e=>{var t,s;return(0,h.jsx)("option",{value:null===(t=e.debitAccount)||void 0===t?void 0:t.accountNumber.toLowerCase(),children:null===(s=e.debitAccount)||void 0===s?void 0:s.accountNumber})}))]})]}),(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Credit Account"}),(0,h.jsxs)("select",{value:p,onChange:e=>j(e.target.value),className:"w-48 p-2 border",children:[(0,h.jsx)("option",{disabled:!0,children:"Select"}),(0,h.jsx)("option",{value:"all",children:"ALL"}),k.map((e=>{var t,s;return(0,h.jsx)("option",{value:null===(t=e.creditAccount)||void 0===t?void 0:t.accountNumber.toLowerCase(),children:null===(s=e.creditAccount)||void 0===s?void 0:s.accountNumber})}))]})]}),(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Users"}),(0,h.jsxs)("select",{value:g,onChange:e=>v(e.target.value),className:"w-48 p-2 border",children:[(0,h.jsx)("option",{value:"All",children:"All"}),(0,h.jsx)("option",{children:"Admin"}),(0,h.jsx)("option",{children:"Manager"})]})]})]})}),(0,h.jsxs)("div",{className:"flex flex-col justify-between mt-4 mb-4 space-y-2 lg:flex-row lg:space-y-0 lg:items-center",children:[(0,h.jsxs)("div",{className:"flex items-center px-2 space-x-2",children:[(0,h.jsx)("span",{className:"text-sm",children:"Show"}),(0,h.jsxs)("select",{className:"p-2 text-sm border border-gray-300 rounded-md",value:N,onChange:e=>{w(Number(e.target.value)),T(1)},children:[(0,h.jsx)("option",{children:"10"}),(0,h.jsx)("option",{children:"20"}),(0,h.jsx)("option",{children:"50"})]}),(0,h.jsx)("span",{className:"text-sm",children:"Entries"})]}),(0,h.jsxs)("div",{className:"flex flex-col gap-2 lg:flex-row",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between flex-1 gap-2 px-2",children:[(0,h.jsx)("button",{onClick:()=>{const e=k.map((e=>{var t,s;return`${e.transferCode}\t${new Date(e.transferDate).toDateString()}\t${e.referenceNo}\t${(null===(t=e.debitAccount)||void 0===t?void 0:t.accountNumber)||"NA"}\t${(null===(s=e.creditAccount)||void 0===s?void 0:s.accountNumber)||"NA"}\t${e.amount}\t${e.createdBy}`})).join("\n");navigator.clipboard.writeText(e),alert("Data copied to clipboard")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Copy"}),(0,h.jsx)("button",{onClick:()=>{const e=i.utils.json_to_sheet(k),t=i.utils.book_new();i.utils.book_append_sheet(t,e,"Transfers"),i.writeFile(t,"transfers.xlsx")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Excel"}),(0,h.jsx)("button",{onClick:()=>{const e=new o.uE;e.text("Money Transfer List",14,16);const t=k.map((e=>[e.transferCode,new Date(e.transferDate).toDateString(),e.referenceNo,e.debitAccount,e.creditAccount,e.amount,e.creatorName]));(0,c.Ay)(e,{head:[["Transfer Code","Transfer Date","Reference No.","Debit Account","Credit Account","Amount","Created By"]],body:t}),e.save("transfers.pdf")},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"PDF"}),(0,h.jsx)("button",{onClick:()=>{window.print()},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"Print"}),(0,h.jsx)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,"+k.map((e=>{var t,s;return`${e.transferCode},${new Date(e.transferDate).toDateString()},${e.referenceNo},${(null===(t=e.debitAccount)||void 0===t?void 0:t.accountNumber)||"NA"},${(null===(s=e.creditAccount)||void 0===s?void 0:s.accountNumber)||"NA"},${e.amount},${e.createdBy}`})).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","transfers.csv"),document.body.appendChild(s),s.click()},className:"w-full px-3 py-2 text-sm text-white bg-cyan-500",children:"CSV"})]}),(0,h.jsx)("input",{type:"text",placeholder:"Search",className:"w-full p-2 text-sm border border-gray-300 rounded-sm ",onChange:e=>A(e.target.value)})]})]}),(0,h.jsx)("div",{className:"overflow-x-auto",children:(0,h.jsxs)("table",{className:"w-full mt-4 border border-collapse border-gray-300",children:[(0,h.jsx)("thead",{className:"bg-gray-200",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Transfer Code"}),(0,h.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Transfer Date"}),(0,h.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Reference No."}),(0,h.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Debit Account"}),(0,h.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Credit Account"}),(0,h.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Amount"}),(0,h.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Created by"}),(0,h.jsx)("th",{className:"p-2 border border-gray-300 whitespace-nowrap",children:"Action"})]})}),(0,h.jsx)("tbody",{children:0===z.length?(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:"8",className:"p-4 text-center",children:"No data available in table"})}):z.map((t=>{var s,r;return(0,h.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,h.jsx)("td",{className:"p-2 border border-gray-300",children:t.transferCode}),(0,h.jsx)("td",{className:"p-2 border border-gray-300",children:new Date(t.transferDate).toDateString()}),(0,h.jsx)("td",{className:"p-2 border border-gray-300",children:t.referenceNo}),(0,h.jsx)("td",{className:"p-2 border border-gray-300",children:(null===(s=t.debitAccount)||void 0===s?void 0:s.accountNumber)||"N/A"}),(0,h.jsx)("td",{className:"p-2 border border-gray-300",children:(null===(r=t.creditAccount)||void 0===r?void 0:r.accountNumber)||"N/A"}),(0,h.jsx)("td",{className:"p-2 border border-gray-300",children:t.amount}),(0,h.jsx)("td",{className:"p-2 border border-gray-300",children:t.creatorName}),(0,h.jsxs)("td",{className:"p-2 border border-gray-300",children:[(0,h.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold text-white bg-cyan-600 rounded-full shadow-sm \n            hover:bg-cyan-700 active:scale-95 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-cyan-400",onClick:()=>{M(B?null:t._id)},children:[(0,h.jsx)("span",{children:"Action"}),(0,h.jsx)("svg",{className:"w-4 h-4 transition-transform duration-200 "+(B===t._id?"rotate-180":""),fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),B===t._id&&(0,h.jsxs)("div",{className:"absolute z-50 mt-2 bg-white border shadow-lg t-0 w-28",children:[(0,h.jsx)("button",{className:"w-full px-1 py-0 text-left text-green-500 hover:bg-gray-100",onClick:()=>e(`/add-money-transfer?id=${t._id}`),children:"\u270f\ufe0f Edit"}),(0,h.jsx)("button",{className:"w-full px-1 py-0 text-left text-red-500 hover:bg-gray-100",onClick:()=>(async e=>{if(window.confirm("Do u want to delete this ?")){$(!0);try{await u.A.delete(`api/money-transfers/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),alert("Deleted Successfully")}catch(t){console.error(t.message)}finally{E(),$(!1)}}})(t._id),children:"\ud83d\uddd1\ufe0f Delete"})]})]})]},t._id)}))})]})}),(0,h.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 p-2 md:justify-between md:flex-row",children:[(0,h.jsxs)("span",{children:["                    ",(0,h.jsxs)("span",{children:["Showing ",N*(_-1)+1," to ",Math.min(N*_,O.length)," of ",O.length," entries"]}),"              "]}),(0,h.jsxs)("div",{className:"flex justify-between w-full md:w-auto md:gap-2",children:[(0,h.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(1===_?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>I(_-1),disabled:1===_,children:[(0,h.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Previous"]}),(0,h.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 shadow-md \n    "+(_===W?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer"),onClick:()=>I(_+1),disabled:_===W,children:["Next",(0,h.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=2731.0f56b5e8.chunk.js.map