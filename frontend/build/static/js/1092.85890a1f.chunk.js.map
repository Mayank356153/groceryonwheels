{"version":3,"file":"static/js/1092.85890a1f.chunk.js","mappings":"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","sources":["components/ImageManagement/subsubcategory/SubCategoryMasterImage.jsx","components/ImageManagement/subsubcategory/OneSubSubCategoryMaster.jsx","components/ImageManagement/subsubcategory/SubSubCategoryImageManagement.jsx"],"sourcesContent":["\r\nimport { useState, useEffect } from 'react';\r\nimport axios from \"axios\";\r\nimport { IdentificationIcon } from '@heroicons/react/solid';\r\n\r\nconst SubCategoryMasterImage = ({ onClose }) => {\r\n  const [categories, setCategories] = useState([]);\r\n  const [masterImages, setMasterImages] = useState({});\r\n  const [currentCategoryIndex, setCurrentCategoryIndex] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\nconst [page, setPage] = useState(1);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Fetch categories\r\n        const categoriesResponse = await axios.get(\r\n          \"api/sub-subcategories\",\r\n          { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } }\r\n        );\r\n        \r\n        const dataArr = Array.isArray(categoriesResponse.data)\r\n          ? categoriesResponse.data\r\n          : Array.isArray(categoriesResponse.data.data)\r\n            ? categoriesResponse.data.data\r\n            : [];\r\n        \r\n        setCategories(dataArr);\r\n\r\n        // Fetch master images\r\n        const masterResponse = await axios.get(\r\n          'api/items/getImageBySubSubCategory',\r\n          { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } }\r\n        );\r\n\r\n        if (masterResponse.data.success) {\r\n          setMasterImages(masterResponse.data.data);\r\n          console.log(masterResponse.data.data);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Error fetching data:\", err);\r\n        setError(\"Failed to fetch data. Please try again.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleRegenerateMasterImage = async (id) => {\r\n     try {\r\n    setLoading(true);\r\n    const res = await axios.get(\r\n      `api/items/subsubcategory/assign-masterImage/?page=${page}`,{\r\n        categoryId:id\r\n      },\r\n      {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n      }\r\n    );\r\n\r\n    const images = res.data || [];\r\nsetMasterImages((prev) => ({\r\n  ...prev,\r\n  [currentCategoryId]: [...images],\r\n}));  } catch (err) {\r\n    console.error(\"Failed to fetch merged images:\", err);\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n  };\r\n\r\n  const handleNextCategory = () => {\r\n    setCurrentCategoryIndex(prev => (prev + 1) % categories.length);\r\n  };\r\n\r\n  const handlePrevCategory = () => {\r\n    setCurrentCategoryIndex(prev => (prev - 1 + categories.length) % categories.length);\r\n  };\r\n\r\n  const currentCategory = categories[currentCategoryIndex];\r\n  const currentCategoryId = currentCategory?._id || currentCategory?.id;\r\n  const currentMasterImage = currentCategoryId ? masterImages[currentCategoryId] : null;\r\n\r\n   const handleSubmit=async(image)=>{\r\n      const tokenHeader =  () => ({\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n        try{\r\n            const res = await axios.put(\r\n            \"api/sub-subcategories/assign/master-image\",{\r\n                      id:currentCategoryId,\r\n                      image:image[0]\r\n            },\r\n            tokenHeader()\r\n          );\r\n          console.log(res)\r\n          alert(\"Master image selected\")\r\n        }\r\n        catch(error){\r\n          console.log(\"ERro in assigning master image\",error)\r\n        }\r\n  }\r\n\r\n  if (loading && !categories.length) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n        <div className=\"p-6 bg-white rounded-lg shadow-lg\">\r\n          <p>Loading subsubcategories and master images...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n        <div className=\"p-6 bg-white rounded-lg shadow-lg\">\r\n          <p className=\"text-red-500\">{error}</p>\r\n          <button \r\n            onClick={onClose}\r\n            className=\"px-4 py-2 mt-4 text-white bg-blue-500 rounded hover:bg-blue-600\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n      <div className=\"relative w-11/12 max-w-5xl p-6 bg-white rounded-lg shadow-lg\">\r\n        {/* Close Button */}\r\n        <button\r\n          onClick={onClose}\r\n          className=\"absolute p-1 text-gray-500 top-2 right-2 hover:text-gray-800\"\r\n          aria-label=\"Close\"\r\n        >\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n          </svg>\r\n        </button>\r\n\r\n        <h2 className=\"mb-4 text-xl font-semibold text-center\">\r\n          subsubCategory Master Images\r\n        </h2>\r\n\r\n        {currentCategory && (\r\n          <div className=\"text-center\">\r\n            <h3 className=\"mb-2 text-lg font-medium\">\r\n              {currentCategory.name || `Category ${currentCategoryIndex + 1}`}\r\n            </h3>\r\n            <p className=\"mb-4 text-sm text-gray-600\">\r\n              ID: {currentCategoryId}\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex flex-col items-center justify-center p-4 mb-6 border border-gray-200 rounded-lg\">\r\n          {currentMasterImage ? (\r\n            <div className=\"flex flex-col items-center\">\r\n              <img  onClick={()=>handleSubmit(currentMasterImage)}\r\n                src={`${currentMasterImage}`} \r\n                alt={`Master for ${currentCategory?.name || currentCategoryId}`}\r\n                className=\"max-w-full mb-4 max-h-96\"\r\n              />\r\n              <p className=\"text-sm text-gray-500\">\r\n                Last generated master image\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <p className=\"py-10 text-gray-500\">\r\n              No master image available for this category\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex justify-between mt-6\">\r\n          <button\r\n            onClick={handlePrevCategory}\r\n            disabled={loading || categories.length <= 1}\r\n            className=\"px-4 py-2 text-white bg-gray-500 rounded hover:bg-gray-600 disabled:opacity-50\"\r\n          >\r\n            Previous\r\n          </button>\r\n\r\n          <div className=\"flex gap-4\">\r\n            <button\r\n              onClick={()=>handleRegenerateMasterImage(currentCategoryId)}\r\n              disabled={loading || !currentCategory}\r\n              className=\"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600 disabled:opacity-50\"\r\n            >\r\n              {loading ? 'Generating...' : 'Regenerate Master Image'}\r\n            </button>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleNextCategory}\r\n            disabled={loading || categories.length <= 1}\r\n            className=\"px-4 py-2 text-white bg-gray-500 rounded hover:bg-gray-600 disabled:opacity-50\"\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"mt-4 text-center text-gray-500\">\r\n          Category {currentCategoryIndex + 1} of {categories.length}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubCategoryMasterImage;","import { useState, useEffect } from 'react';\r\nimport axios from \"axios\";\r\n\r\nconst OneSubSubCategoryMaster = ({ onClose, subcategoryId }) => {\r\n  const [category, setCategory] = useState(null);\r\n  const [masterImages, setMasterImages] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [page, setPage] = useState(1);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        // Fetch specific category details\r\n        const catRes = await axios.get(\r\n          `api/sub-subcategories/${subcategoryId}`,\r\n          { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } }\r\n        );\r\n        setCategory(catRes.data?.data || catRes.data);\r\n\r\n        // Fetch master images\r\n        const masterRes = await axios.get(\r\n          'api/items/getImageBysubsubCategory',\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"token\")}`\r\n            }\r\n          }\r\n        );\r\n\r\n        const allImages = masterRes.data?.data || {};\r\n        setMasterImages(allImages[subcategoryId] || []);\r\n      } catch (err) {\r\n        console.error(\"Error fetching data:\", err);\r\n        setError(\"Failed to load category data.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (subcategoryId) fetchData();\r\n  }, [subcategoryId]);\r\n\r\n  const handleRegenerateMasterImage = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(\r\n        `api/items/subsubcategory/assign-masterImage/?page=${page}`,\r\n        {\r\n          params: { subcategoryId },\r\n          headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n        }\r\n      );\r\n\r\n      const images = res.data?.data || [];\r\n      setMasterImages(images);\r\n    } catch (err) {\r\n      console.error(\"Failed to regenerate master images:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSetAsMaster = async (image) => {\r\n    try {\r\n      const res = await axios.put(\r\n        `api/sub-subcategories/assign/master-image`,\r\n        {\r\n          id:subcategoryId,\r\n          image: image\r\n        },\r\n        {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` }\r\n        }\r\n      );\r\n\r\n       console.log(res)\r\n        alert(\"Master image updated successfully!\");\r\n      \r\n    } catch (err) {\r\n      console.error(\"Failed to set master image:\", err);\r\n      alert(\" set as master image.\");\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n        <div className=\"p-6 bg-white rounded-lg shadow-lg\">\r\n          <p>Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !category) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n        <div className=\"p-6 bg-white rounded-lg shadow-lg\">\r\n          <p className=\"text-red-500\">{error || \"Category not found.\"}</p>\r\n          <button \r\n            onClick={onClose}\r\n            className=\"px-4 py-2 mt-4 text-white bg-blue-500 rounded hover:bg-blue-600\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n      <div className=\"relative w-11/12 max-w-4xl p-6 bg-white rounded-lg shadow-lg\">\r\n        <button\r\n          onClick={onClose}\r\n          className=\"absolute p-1 text-gray-500 top-2 right-2 hover:text-gray-800\"\r\n          aria-label=\"Close\"\r\n        >\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n          </svg>\r\n        </button>\r\n\r\n        <h2 className=\"mb-4 text-xl font-semibold text-center\">Master Images - {category.name}</h2>\r\n        <p className=\"mb-4 text-center text-gray-500\">SubSubCategory ID: {subcategoryId}</p>\r\n\r\n        {masterImages.length > 0 ? (\r\n          <div className=\"grid grid-cols-1 gap-4 mb-4 sm:grid-cols-2 md:grid-cols-3\">\r\n            {masterImages.map((img, i) => (\r\n              <div key={i} className=\"flex flex-col items-center justify-center p-2 border rounded shadow-sm\">\r\n                <img\r\n                  src={`${img}`}\r\n                  alt=\"master\"\r\n                  className=\"object-contain mb-2 max-h-64\"\r\n                />\r\n                <button\r\n                  onClick={() => handleSetAsMaster(img)}\r\n                  className=\"px-3 py-1 text-white bg-blue-500 rounded hover:bg-blue-600\"\r\n                >\r\n                  Set as Master\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <p className=\"text-center text-gray-500\">No master images available.</p>\r\n        )}\r\n\r\n        <div className=\"flex justify-center mt-6\">\r\n          <button\r\n            onClick={handleRegenerateMasterImage}\r\n            className=\"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600\"\r\n          >\r\n            {loading ? 'Generating...' : 'Regenerate Master Images'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OneSubSubCategoryMaster;\r\n","import React from 'react'\r\nimport Select from 'react-select'\r\nimport { useState,useEffect ,useRef} from 'react'\r\nimport axios, { all } from 'axios'\r\nimport { useNavigate } from 'react-router-dom'\r\n// import Navbar from \"../Navbar.jsx\";\r\nimport Navbar from \"../../Navbar.jsx\"\r\nimport { NavLink } from 'react-router-dom'\r\nimport { FaTachometerAlt } from 'react-icons/fa'\r\nimport { CameraIcon } from '@heroicons/react/solid'\r\nimport { BrowserMultiFormatReader } from \"@zxing/library\";\r\nimport Sidebar from '../../Sidebar.jsx'\r\nimport SubCategoryMasterImage from './SubCategoryMasterImage.jsx'\r\nimport OneSubCategoryMaster from './OneSubSubCategoryMaster.jsx'\r\nconst  SubSubCategoryImageManagement=()=> {\r\n    const [isSidebarOpen, setSidebarOpen] = useState(true);\r\n    const[allCategory,setAllCategory]=useState([])\r\n   const[category,setCategory]=useState({})\r\n    const [master,setMaster]=useState(false)\r\n    const [onemaster,setOneMaster]=useState(false)\r\n    const[categoryid,setCategoryId]=useState(null)\r\n    const[selectedItem,setSelectedItem]=useState({})\r\n     useEffect(()=>{\r\n        if(window.innerWidth < 768){\r\n          setSidebarOpen(false)\r\n        }\r\n      },[window.innerWidth])\r\n    \r\n    \r\n     \r\n\r\n\r\n     const fetchItems = async () => {\r\n        try {\r\n            const response = await axios.get('/api/items/getWithsubsubCategory',{\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`\r\n                  }});\r\n\r\n                  \r\n            // console.log(response.data);\r\n            \r\nsetAllCategory(Object.keys(response.data.data));\r\n} catch (error) {\r\n            console.error(\"Error fetching stores:\", error);\r\n        }\r\n     }\r\n\r\n\r\n   \r\n      const fetchsubCategory = async () => {\r\n         try {\r\n           const response = await axios.get(\r\n        \"api/subcategories\",\r\n             { headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } }\r\n           );\r\n           const dataArr = Array.isArray(response.data)\r\n             ? response.data\r\n             : Array.isArray(response.data.data)\r\n               ? response.data.data\r\n               : [];\r\n               console.log(dataArr)\r\n           setCategory(dataArr);\r\n         } catch (err) {\r\n           console.error(\"Fetch categories error:\", err);\r\n         }\r\n       };\r\n\r\n     \r\n     useEffect(()=>{\r\n      fetchItems();\r\n      fetchsubCategory();\r\n     },[])\r\n  return (\r\n    <div className=\"flex flex-col h-screen\">\r\n      <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\r\n      <div className=\"flex flex-grow \">\r\n         <div>\r\n          \r\n        <Sidebar isSidebarOpen={isSidebarOpen} />\r\n         </div>\r\n          \r\n           {/* Content */}\r\n         <div className={` flex flex-col p-2 md:p-2  w-full`}>\r\n          <header className=\"flex flex-col items-center justify-between p-4 rounded-md shadow sm:flex-row\">\r\n            <div className=\"flex items-center gap-1 text-center sm:flex-row sm:text-left\">\r\n              <h1 className=\"text-lg font-semibold truncate sm:text-xl\">SubSubCategory Master Image</h1>\r\n            </div>\r\n\r\n            <nav className=\"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0\">\r\n   <NavLink to=\"/dashboard\" className=\"flex items-center text-gray-700 no-underline hover:text-cyan-600\">\r\n                            <FaTachometerAlt className=\"mr-2 text-gray-500 hover:text-cyan-600\" /> Home\r\n                          </NavLink>     \r\n                          <NavLink to=\"/banners/view\" className=\"flex items-center text-gray-700 no-underline hover:text-cyan-600\">\r\n                           &gt; Item Master Image\r\n                          </NavLink>    \r\n                        \r\n              \r\n            </nav>\r\n          </header>\r\n\r\n         \r\n\r\n          <div className=\"p-4 mt-1 bg-white border-t-4 rounded-lg shadow-md border-cyan-500\">\r\n \r\n               \r\n                 <div className=\"flex gap-5\">\r\n\r\n                    \r\n                  <div className=\"relative flex flex-col w-full py-2\">\r\n                                    <button\r\n              onClick={() => {\r\nsetMaster(true)\r\nsetSidebarOpen(false)\r\n              }}\r\n              className='px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded hover:bg-blue-700'\r\n            >\r\n              Generate Master Image\r\n            </button>\r\n                                   {\r\n            master && <SubCategoryMasterImage    onClose={() => \r\n              {\r\n               setSidebarOpen(true)\r\n               setMaster(false) \r\n              }\r\n            } />\r\n          }\r\n {\r\n            onemaster && <OneSubCategoryMaster                 subcategoryId={categoryid}\r\n   onClose={() => \r\n              {\r\n                               setSidebarOpen(true)\r\n\r\n               setOneMaster(false) \r\n              }\r\n            } />\r\n          }\r\n          \r\n                \r\n                 \r\n                                     </div>\r\n\r\n\r\n                  \r\n                 </div>\r\n  \r\n    \r\n\r\n                    \r\n\r\n                        \r\n                    <div className='w-full mt-4 overflow-x-auto min-h-16'>\r\n  <table className='min-w-full border-2 divide-y divide-gray-200 min-h-48'>\r\n    <thead className='sticky top-0 bg-gray-200'>\r\n      <tr>\r\n        <th className='py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase'>SubSubCategory Name</th>\r\n        <th className='py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase'>Actions</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody className='bg-white divide-y divide-gray-200'>\r\n      {allCategory.map((categoryId, index) =>{\r\n            const c=category.find(it => it._id===categoryId)\r\n            console.log(c)\r\n        return(\r\n        <tr key={index}>\r\n          <td className='py-4 text-sm text-gray-500 whitespace-nowrap'>{c?.name || \"NA\"}</td>\r\n          <td className='py-4 text-sm text-gray-500 whitespace-nowrap'>\r\n            <button\r\n              onClick={() =>{\r\n                setSidebarOpen(false)\r\n                setCategoryId(categoryId)\r\n                setOneMaster(true)\r\n              }}\r\n              className='px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded hover:bg-blue-700'\r\n            >\r\n              Generate Master Image\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      )})}\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n\r\n                \r\n                 \r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default SubSubCategoryImageManagement\r\n"],"names":["_ref","onClose","categories","setCategories","useState","masterImages","setMasterImages","currentCategoryIndex","setCurrentCategoryIndex","loading","setLoading","error","setError","page","setPage","useEffect","async","categoriesResponse","axios","get","headers","Authorization","localStorage","getItem","dataArr","Array","isArray","data","masterResponse","success","console","log","err","fetchData","currentCategory","currentCategoryId","_id","id","currentMasterImage","handleSubmit","res","put","image","alert","length","_jsx","className","children","_jsxs","onClick","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","name","src","alt","handlePrevCategory","prev","disabled","images","categoryId","handleRegenerateMasterImage","handleNextCategory","subcategoryId","category","setCategory","_catRes$data","_masterRes$data","catRes","allImages","map","img","i","handleSetAsMaster","_res$data","params","SubSubCategoryImageManagement","isSidebarOpen","setSidebarOpen","allCategory","setAllCategory","master","setMaster","onemaster","setOneMaster","categoryid","setCategoryId","selectedItem","setSelectedItem","window","innerWidth","response","Object","keys","fetchItems","fetchsubCategory","Navbar","Sidebar","NavLink","to","FaTachometerAlt","SubCategoryMasterImage","OneSubCategoryMaster","index","c","find","it"],"sourceRoot":""}