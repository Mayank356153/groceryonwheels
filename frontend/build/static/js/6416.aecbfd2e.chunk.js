"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6416],{14840:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(65043),r=a(21197),l=a(59255),n=a(70579);function i(){const[e,t]=(0,s.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(r.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,n.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,n.jsx)("div",{children:(0,n.jsx)(l.A,{isSidebarOpen:e})}),(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,n.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},86416:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(65043),r=a(66727),l=a(21197),n=a(59255),i=a(86213),c=a(14840),o=a(49804),d=a(60184),m=a(70579);function x(){const{stateId:e}=(0,r.g)(),t=(0,r.Zp)(),[a,x]=(0,s.useState)(!0),[u,h]=(0,s.useState)(!1),[b,f]=(0,s.useState)({stateName:"",country:"",status:"active"}),[g,j]=(0,s.useState)([]);(0,s.useEffect)((()=>{window.innerWidth<768&&x(!1)}),[]),(0,s.useEffect)((()=>{if((async()=>{try{const e=localStorage.getItem("token"),t=await i.A.get("api/countries",{headers:{Authorization:`Bearer ${e}`}});j(t.data.data||[])}catch(e){console.error("Error fetching countries:",e)}})(),e){(async e=>{h(!0);try{const t=localStorage.getItem("token"),a=(await i.A.get(`api/states/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data.data;f({stateName:a.stateName||"",country:a.country||"",status:a.status||"active"})}catch(t){console.error("Error fetching state:",t),alert("Error fetching state data.")}finally{h(!1)}})(e)}}),[e]);if("admin"!==localStorage.getItem("role"))return(0,m.jsx)(r.C5,{to:"/dashboard",replace:!0});const p=e=>{f((t=>({...t,[e.target.name]:e.target.value})))};return u?(0,m.jsx)(c.A,{}):(0,m.jsxs)("div",{className:"flex flex-col h-screen bg-gray-100",children:[(0,m.jsx)(l.A,{isSidebarOpen:a,setSidebarOpen:x}),(0,m.jsxs)("div",{className:"flex flex-grow",children:[(0,m.jsx)(n.A,{isSidebarOpen:a}),(0,m.jsxs)("div",{className:"flex-grow p-4 transition-all duration-300 w-full",children:[(0,m.jsx)("h1",{className:"mb-4 text-2xl font-bold",children:e?"Edit State":"Add State"}),(0,m.jsxs)("nav",{className:"flex items-center text-xs text-gray-500 mb-4",children:[(0,m.jsxs)(r.k2,{to:"/dashboard",className:"flex items-center hover:text-cyan-600",children:[(0,m.jsx)(d.$BV,{className:"mr-2"})," Home"]}),(0,m.jsxs)(r.k2,{to:"/state-list",className:"flex items-center mx-2 hover:text-cyan-600",children:[(0,m.jsx)(o.XWt,{className:"text-gray-400 mt-1.5"})," State List"]}),(0,m.jsx)(o.XWt,{className:"mx-2 text-gray-400 mt-1.5"}),(0,m.jsx)("span",{children:e?"Edit State":"Add State"})]}),(0,m.jsx)("div",{className:"p-6 bg-white rounded shadow-md",children:(0,m.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),h(!0);try{const a={Authorization:`Bearer ${localStorage.getItem("token")}`};e?(await i.A.put(`api/states/${e}`,b,{headers:a}),alert("State updated successfully!")):(await i.A.post("api/states",b,{headers:a}),alert("State created successfully!")),t("/state-list")}catch(s){console.error("Error submitting state:",s),alert("Error submitting state.")}finally{h(!1)}},children:[(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block mb-1 font-semibold",children:"State Name"}),(0,m.jsx)("input",{type:"text",name:"stateName",value:b.stateName,onChange:p,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block mb-1 font-semibold",children:"Country"}),(0,m.jsxs)("select",{name:"country",value:b.country,onChange:p,className:"w-full p-2 border border-gray-300 rounded",required:!0,children:[(0,m.jsx)("option",{value:"",children:"Select Country"}),g.map((e=>(0,m.jsx)("option",{value:e._id,children:e.countryName},e._id)))]})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block mb-1 font-semibold",children:"Status"}),(0,m.jsxs)("select",{name:"status",value:b.status,onChange:p,className:"w-full p-2 border border-gray-300 rounded",children:[(0,m.jsx)("option",{value:"active",children:"Active"}),(0,m.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,m.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,m.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:e?"Update State":"Create State"}),(0,m.jsx)("button",{type:"button",onClick:()=>t("/state-list"),className:"px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600",children:"Close"})]})]})})]})]})]})}}}]);
//# sourceMappingURL=6416.aecbfd2e.chunk.js.map