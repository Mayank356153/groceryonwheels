{"version":3,"file":"static/js/399.3ee4ea23.chunk.js","mappings":"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","sources":["components/AddUser.jsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\"; // For redirection\r\nimport axios from \"axios\";\r\nimport Navbar from \"./Navbar\";\r\nimport Sidebar from \"./Sidebar\"\r\n\r\nconst AddUser = () => {\r\n  const navigate = useNavigate();\r\n\r\n  // User form state\r\n  const [formData, setFormData] = useState({\r\n    userName: \"\",\r\n    FirstName: \"\",\r\n    LastName: \"\",\r\n    Mobile: \"\",\r\n    Email: \"\",\r\n    Store: \"\",\r\n    Role: \"\",\r\n    Password: \"\",\r\n    WarehouseGroup: \"\",\r\n    Defaultwarehouse: \"\",\r\n  });\r\n\r\n  const [roles, setRoles] = useState([]); // Role dropdown options\r\n  const [message, setMessage] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [isSidebarOpen, setSidebarOpen] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // ✅ Fetch Roles when the component loads\r\n  useEffect(() => {\r\n    const fetchRoles = async () => {\r\n      const token = localStorage.getItem(\"token\");\r\n\r\n      if (!token) {\r\n        console.error(\"No token found. Redirecting to login...\");\r\n        navigate(\"/login\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await axios.get(\"admincreatingrole/api/roles\", {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        console.log(\"Roles API Response:\", response.data);\r\n\r\n        if (response.data && Array.isArray(response.data.roles)) {\r\n          setRoles(response.data.roles);\r\n        } else {\r\n          console.error(\"Invalid role data received:\", response.data);\r\n          setRoles([]);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching roles:\", error.response?.data || error.message);\r\n        if (error.response?.status === 401) {\r\n          console.warn(\"Unauthorized! Clearing localStorage and redirecting...\");\r\n          localStorage.clear();\r\n          navigate(\"/login\");\r\n        }\r\n        setRoles([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchRoles();\r\n  }, [navigate]);\r\n\r\n  // ✅ Handle Input Change\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prevState) => ({\r\n      ...prevState,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  // ✅ Handle Form Submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setMessage(\"\");\r\n    setError(\"\");\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    if (!token) {\r\n      console.error(\"No token found. Redirecting to login...\");\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        \"admiaddinguser/adduserbyadmin\",\r\n        formData,\r\n        {\r\n          headers: { \r\n            \"Content-Type\": \"application/json\", \r\n            Authorization: `Bearer ${token}` \r\n          },\r\n        }\r\n      );\r\n\r\n      console.log(\"User Created Response:\", response.data);\r\n\r\n      setMessage(\"User added successfully!\");\r\n      setFormData({\r\n        userName: \"\",\r\n        FirstName: \"\",\r\n        LastName: \"\",\r\n        Mobile: \"\",\r\n        Email: \"\",\r\n        Store: \"\",\r\n        Role: \"\",\r\n        Password: \"\",\r\n        WarehouseGroup: \"\",\r\n        Defaultwarehouse: \"\",\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error adding user:\", error.response?.data || error.message);\r\n      setError(error.response?.data?.message || \"Something went wrong\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen\">\r\n      <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\r\n      <div className=\"flex flex-grow mt-20\">\r\n        <div className=\"w-64\">\r\n          <Sidebar isSidebarOpen={isSidebarOpen} />\r\n        </div>\r\n\r\n        <div className=\"w-full p-20\">\r\n          {/* Success & Error Messages */}\r\n          {message && <div className=\"font-bold text-green-600\">{message}</div>}\r\n          {error && <div className=\"font-bold text-red-600\">{error}</div>}\r\n\r\n          <h1 className=\"mb-6 text-2xl font-bold text-start\">Create User</h1>\r\n\r\n          {/* Loading Indicator for Roles */}\r\n          {loading ? (\r\n            <p>Loading roles...</p>\r\n          ) : (\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"grid grid-cols-2 gap-10\">\r\n                {/* Left Column */}\r\n                <div className=\"space-y-4\">\r\n                  <label className=\"block font-medium\">Username*</label>\r\n                  <input type=\"text\" name=\"userName\" placeholder=\"UserName\" className=\"w-full px-3 py-2 border\" value={formData.userName} onChange={handleChange} required />\r\n\r\n                  <label className=\"block font-medium\">First Name*</label>\r\n                  <input type=\"text\" name=\"FirstName\" className=\"w-full px-3 py-2 border\" value={formData.FirstName} onChange={handleChange} required />\r\n\r\n                  <label className=\"block font-medium\">Last Name*</label>\r\n                  <input type=\"text\" name=\"LastName\" className=\"w-full px-3 py-2 border\" value={formData.LastName} onChange={handleChange} required />\r\n\r\n                  <label className=\"block font-medium\">Mobile</label>\r\n                  <input type=\"text\" name=\"Mobile\" className=\"w-full px-3 py-2 border\" value={formData.Mobile} onChange={handleChange} />\r\n                </div>\r\n\r\n                {/* Right Column */}\r\n                <div className=\"space-y-4\">\r\n                  <label className=\"block font-medium\">Email*</label>\r\n                  <input type=\"email\" name=\"Email\" className=\"w-full px-3 py-2 border\" value={formData.Email} onChange={handleChange} required />\r\n\r\n                  <label className=\"block font-medium\">Store:</label>\r\n                  <select name=\"Store\" className=\"w-full px-3 py-2 border\" value={formData.Store} onChange={handleChange} required>\r\n                    <option value=\"\">Select Store</option>\r\n                    <option value=\"SAAS ADMIN\">SAAS ADMIN</option>\r\n                    <option value=\"POS\">POS</option>\r\n                    <option value=\"Keshav demo 1\">Keshav demo 1</option>\r\n                    <option value=\"Keshav demo 2\">Keshav demo 2</option>\r\n                    <option value=\"grocery on wheels\">Grocery on Wheels</option>\r\n                  </select>\r\n\r\n                  <label className=\"block font-medium\">Role:</label>\r\n                  <select name=\"Role\" className=\"w-full px-3 py-2 border\" value={formData.Role} onChange={handleChange} required>\r\n                    <option value=\"\">Select Role</option>\r\n                    {roles.map((role) => (\r\n                      <option key={role._id} value={role.roleName}>\r\n                        {role.roleName}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n\r\n                  <label className=\"block font-medium\">Password*</label>\r\n                  <input type=\"password\" name=\"Password\" className=\"w-full px-3 py-2 border\" value={formData.Password} onChange={handleChange} required />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Buttons */}\r\n              <div className=\"flex justify-center gap-4 mt-6\">\r\n                <button type=\"submit\" className=\"px-6 py-2 font-bold text-white bg-green-500 rounded-md\">Save</button>\r\n                <button type=\"button\" className=\"px-6 py-2 font-bold text-white bg-orange-500 rounded-md\" onClick={() => window.location.reload()}>Close</button>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddUser;\r\n\r\n"],"names":["AddUser","navigate","useNavigate","formData","setFormData","useState","userName","FirstName","LastName","Mobile","Email","Store","Role","Password","WarehouseGroup","Defaultwarehouse","roles","setRoles","message","setMessage","error","setError","isSidebarOpen","setSidebarOpen","loading","setLoading","useEffect","async","token","localStorage","getItem","console","response","axios","get","headers","Authorization","log","data","Array","isArray","_error$response","_error$response2","status","warn","clear","fetchRoles","handleChange","e","name","value","target","prevState","_jsxs","className","children","_jsx","Navbar","Sidebar","onSubmit","preventDefault","post","_error$response3","_error$response4","_error$response4$data","type","placeholder","onChange","required","map","role","roleName","_id","onClick","window","location","reload"],"sourceRoot":""}