{"version":3,"file":"static/js/1041.5b09052c.chunk.js","mappings":"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","sources":["Loading.jsx","components/Expenses/ExpenseCategoryList.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport Navbar from \"./components/Navbar\";\nimport Sidebar from \"./components/Sidebar\";\nexport default function LoadingScreen() {\n    const[isSidebarOpen,setSidebarOpen]=useState(false)\n    return (\n        <div className='flex flex-col h-screen'>\n        {/* Navbar component with sidebar open state */}\n        <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\n        <div className='flex flex-grow mt-20'>\n          <div>\n            {/* Sidebar component with open state */}\n            <Sidebar isSidebarOpen={isSidebarOpen} />\n          </div>\n  \n          {/* Container for the entire component */}\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm\">\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin\"></div>\n            <p className=\"mt-3 text-lg font-semibold text-gray-700\">Loading...</p>\n          </div>\n        </div>\n          \n        </div>\n      </div>\n    );\n  }\n  ","import React, { useState,useEffect } from 'react';\r\nimport { jsPDF } from \"jspdf\";\r\nimport autoTable from 'jspdf-autotable';\r\nimport * as XLSX from 'xlsx';\r\nimport { BiChevronRight } from 'react-icons/bi';\r\nimport { FaTachometerAlt,FaEdit,FaTrash } from 'react-icons/fa';\r\nimport Navbar from \"../Navbar.jsx\";\r\nimport Sidebar from \"../Sidebar.jsx\";\r\nimport axios from 'axios';\r\nimport LoadingScreen from '../../Loading.jsx';\r\nimport { useNavigate } from 'react-router-dom';\r\nconst ExpenseCategoryList = () => {\r\n  const navigate = useNavigate();\r\n    const [entriesPerPage, setEntriesPerPage] = useState(10);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [isSidebarOpen, setSidebarOpen] = useState(true);\r\n    const [expenses,setExpenses] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    // at top of component\r\nconst [localPermissions, setLocalPermissions] = useState([]);\r\nuseEffect(() => {\r\n  const stored = localStorage.getItem(\"permissions\");\r\n  if (stored) setLocalPermissions(JSON.parse(stored));\r\n}, []);\r\nfunction hasPermissionFor(module, action) {\r\n  const role = (localStorage.getItem(\"role\") || \"guest\").toLowerCase();\r\n  if (role === \"admin\") return true;\r\n  return localPermissions.some(p =>\r\n    p.module.toLowerCase() === module.toLowerCase() &&\r\n    p.actions.map(a => a.toLowerCase()).includes(action.toLowerCase())\r\n  );\r\n}\r\n\r\n  const[searchTerm,setSearchTerm]=useState(\"\")\r\n  const[dropdownIndex,setDropdownIndex]=useState(null)\r\n useEffect(()=>{\r\n    if(window.innerWidth < 768){\r\n      setSidebarOpen(false)\r\n    }\r\n  },[])\r\n  const fetchExpenses = async () => {\r\n    try {\r\n        setLoading(true)\r\n      const token = localStorage.getItem(\"token\");\r\n      const response = await axios.get(`api/expenses`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n      console.log(response.data)\r\n      setExpenses(response.data.data)\r\n     \r\n    } catch (err) {\r\n      console.log(err.message);\r\n    } \r\n    finally{\r\n        setLoading(false)\r\n    }\r\n  };\r\n useEffect(()=>{fetchExpenses()},[])\r\n\r\n const filteredData = expenses.filter(item => \r\n    // item.customer.customerName.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n    item.category?.name|| \"\".toLowerCase().includes(searchTerm.toLowerCase()) \r\n  );\r\n  const indexOfLastItem = currentPage * entriesPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - entriesPerPage;\r\n  const totalPages = Math.ceil(filteredData.length / entriesPerPage);\r\n  const currentUsers = filteredData.slice((currentPage-1)*entriesPerPage, currentPage* entriesPerPage);\r\n  \r\n  const handlePageChange = (newPage) =>  {\r\n    if(newPage >=1 && newPage <=totalPages )\r\n    setCurrentPage(newPage);\r\n  }\r\n  const handleEntriesChange=(e)=>{\r\n    setEntriesPerPage(Number(e.target.value))\r\n    setCurrentPage(1)\r\n  }\r\n  \r\n    const handleCopy = () => {\r\n        const data = expenses.map(exp => `${exp.category?.name||\"NA\"}, ${exp.note}, ${exp.status}`).join('\\n');\r\n        navigator.clipboard.writeText(data);\r\n        alert(\"Data copied to clipboard!\");\r\n    };\r\n\r\n    const handleExcelDownload = () => {\r\n        const ws = XLSX.utils.json_to_sheet(expenses);\r\n        const wb = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(wb, ws, \"Expensescategory\");\r\n        XLSX.writeFile(wb, \"expenses_category.xlsx\");\r\n    };\r\n\r\n    const handlePdfDownload = () => {\r\n        const doc = new jsPDF();\r\n        doc.text(\"Expense Category List\", 20, 20);\r\n        const tableData = expenses.map(exp => [exp.category?.name || \"NA\", exp.note, exp.status]);\r\n        autoTable(doc, {\r\n            head: [['Category', 'Description', 'Status']],\r\n            body: tableData,\r\n        });\r\n        doc.save('expensescategory.pdf');\r\n    };\r\n\r\n    const handlePrint = () => {\r\n        window.print();\r\n    };\r\n\r\n    const handleCsvDownload = () => {\r\n        const csvContent = \"data:text/csv;charset=utf-8,\" + expenses.map(exp => Object.values(exp).join(\",\")).join(\"\\n\");\r\n        const encodedUri = encodeURI(csvContent);\r\n        const link = document.createElement(\"a\");\r\n        link.setAttribute(\"href\", encodedUri);\r\n        link.setAttribute(\"download\", \"expenses_category.csv\");\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    };\r\n   \r\n    \r\n\r\n    const updateData = async (id, newStatus) => {\r\n        setLoading(true);\r\n        \r\n        try {\r\n          const response = await axios.put(\r\n            `api/expenses/${id}`,\r\n             newStatus , // ✅ Send status as an object\r\n            {\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${localStorage.getItem(\"token\") || \"\"}`, // ✅ Prevent null token issues\r\n              },\r\n            }\r\n          );\r\n      \r\n          \r\n          alert(\"Update Successfully\");\r\n      \r\n         fetchExpenses(); // Fetch updated data after successful update\r\n      \r\n        } catch (err) {\r\n          console.error(\"Error:\", err.response?.data || err.message);\r\n          alert(\"Unsuccessful: \" + (err.response?.data?.message || err.message));\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n    }\r\n    const handleDelete = async (id) => {\r\n        const conf= window.confirm(\"Do u want to delete this\")\r\n        if(!conf){\r\n          return ;\r\n        }\r\n        setLoading(true)\r\n       \r\n        try {\r\n          const response = await axios.delete(`api/expenses/${id}`, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n            },\r\n          });\r\n        \r\n         alert(\"Deleted Successfully\")\r\n        \r\n        } catch (error) {\r\n          console.error( error.message);\r\n        }\r\n        finally{\r\n          await fetchExpenses();\r\n          setLoading(false)\r\n        }\r\n      };     \r\n\r\n        \r\n        const [update, setUpdate] = useState(null);\r\n        const handleStatus = (id) => {\r\n          const selectedCategory = expenses.find((item) => item._id === id);\r\n        \r\n          if (!selectedCategory) {\r\n            console.error(\"Category not found for ID:\", id);\r\n            return;\r\n          }\r\n        \r\n          // ✅ Create updated object immediately\r\n          const newStatus = selectedCategory.status === \"Active\" ? \"Inactive\" : \"Active\";\r\n          const updatedCategory = { ...selectedCategory, status: newStatus };\r\n        \r\n        \r\n          // ✅ Call API with the updated data immediately\r\n          updateData(id, updatedCategory);\r\n        \r\n          // ✅ Update local state immediately (for UI consistency)\r\n          setUpdate(updatedCategory);\r\n        };\r\n\r\n\r\n    if (loading) {\r\n        return <LoadingScreen />; // Show loading screen while fetching data\r\n    }\r\n    return (\r\n<div className=\"flex flex-col h-screen\">\r\n          {/* Navbar */}\r\n          <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\r\n              {/* Main Content */}\r\n              <div className=\"flex flex-grow\">\r\n                {/* Sidebar */}\r\n                \r\n              {/* Sidebar component with open state */}\r\n              <div className='w-auto'>\r\n                \r\n              <Sidebar isSidebarOpen={isSidebarOpen} />\r\n              </div>\r\n                \r\n                 {/* Content */}\r\n         <div className={`overflow-x-auto  flex flex-col p-2 md:p-2 min-h-screen w-full`}>\r\n\r\n            <header className=\"flex flex-col items-center justify-between p-4 mb-2 bg-gray-100 rounded-md shadow sm:flex-row\">\r\n                <div className=\"flex flex-col items-center gap-1 text-center sm:flex-row sm:text-left\">\r\n                    <h1 className=\"text-lg font-semibold truncate sm:text-xl\">Expense Category List</h1>\r\n                </div>\r\n                <nav className=\"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0\">\r\n                    <a href=\"#\" className=\"flex items-center text-gray-700 no-underline hover:text-cyan-600\"><FaTachometerAlt className=\"mr-2 text-gray-500 hover:text-cyan-600\" /> Home</a>\r\n                    <BiChevronRight className=\"mx-1 sm:mx-2\" />\r\n                    <a href=\"#\" className=\"text-gray-700 no-underline hover:text-cyan-600\">Expense Category List</a>\r\n                </nav>\r\n            </header>\r\n\r\n            <div className=\"p-4 bg-white border-t-4 rounded-lg shadow-md border-cyan-500\">\r\n                <header className=\"flex items-center justify-between mb-4\">\r\n                    <div></div>\r\n                    {hasPermissionFor(\"ExpenseCategories\",\"Add\") && (\r\n                    <button className=\"px-4 py-2 text-white rounded bg-cyan-500\" onClick={()=>navigate('/add-expense-category')}>+ New Expense</button>\r\n                    )}\r\n                </header>\r\n\r\n                <div className=\"flex flex-col justify-between w-full mt-4 mb-4 space-y-2 lg:flex-row lg:space-y-0 lg:items-center\">\r\n              <div className=\"flex items-center px-2 space-x-2\">\r\n                <span className=\"text-sm\">Show</span>\r\n                <select className=\"p-2 text-sm border border-gray-300 rounded-md\" value={entriesPerPage}   onChange={(e) => {\r\n                    setEntriesPerPage(Number(e.target.value));\r\n                    setCurrentPage(1);\r\n                  }}>\r\n                  <option>10</option>\r\n                  <option>20</option>\r\n                  <option>50</option>\r\n                </select>\r\n                <span className=\"text-sm\">Entries</span>\r\n              </div>\r\n              <div className=\"flex flex-col justify-around w-full gap-2 lg:flex-row\">\r\n                <div className='flex items-center justify-around flex-1 w-full gap-1 px-2'>\r\n                <button onClick={handleCopy} className=\"w-full px-3 py-2 text-sm text-white bg-cyan-500\">Copy</button>\r\n                <button onClick={handleExcelDownload} className=\"w-full px-3 py-2 text-sm text-white bg-cyan-500\">Excel</button>\r\n                <button onClick={handlePdfDownload} className=\"w-full px-3 py-2 text-sm text-white bg-cyan-500\">PDF</button>\r\n                <button onClick={handlePrint} className=\"w-full px-3 py-2 text-sm text-white bg-cyan-500\">Print</button>\r\n                <button onClick={handleCsvDownload} className=\"w-full px-3 py-2 text-sm text-white bg-cyan-500\">CSV</button>\r\n                </div>\r\n                <input type=\"text\" placeholder=\"Search\" className=\"w-full p-2 text-sm border border-gray-300 rounded-sm md:w-auto\" onChange={(e) => setSearchTerm(e.target.value)} />\r\n              </div>\r\n            </div>\r\n\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"min-w-full bg-white border border-gray-300\">\r\n                        <thead className=\"bg-gray-200\">\r\n                            <tr>\r\n                                <th className=\"px-3 py-2 text-sm text-center border\">Category</th>\r\n                                <th className=\"px-3 py-2 text-sm text-center border\">Description</th>\r\n                                <th className=\"px-3 py-2 text-sm text-center border\">Status</th>\r\n                                <th className=\"px-3 py-2 text-sm text-center border\">Action</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            { currentUsers.length === 0 ? (\r\n                                <tr>\r\n                                    <td colSpan=\"4\" className=\"py-4 text-center\">No data available in table</td>\r\n                                </tr>\r\n                            ) : (\r\n                                currentUsers.map((expense) => (\r\n                                    <tr key={expense._id} className=\"hover:bg-gray-100\">\r\n                                        <td className=\"px-3 py-2 text-sm text-center border\">{expense.category?expense.category.name:\"No category\"}</td>\r\n                                        <td className=\"px-3 py-2 text-sm text-center border\">{expense.note}</td>\r\n                                        <td className=\"px-3 py-2 text-sm text-center border\" onClick={()=>handleStatus(expense._id)}>\r\n                                        {expense.status.toLowerCase()==='active'?<span className=\"px-1 py-1 text-sm text-white bg-green-600 rounded-md\">Active</span>:<span className=\"px-1 py-1 text-sm text-white bg-red-600 rounded-md\">Inactive</span>}\r\n                                        </td>\r\n                                        <td className=\"px-3 py-2 text-sm text-center border\">\r\n<button\r\n      onClick={() => {\r\n        setDropdownIndex(dropdownIndex === expense._id ? null : expense._id);\r\n      }}\r\n      className=\"px-3 py-1 text-white transition rounded bg-cyan-600 hover:bg-cyan-700\"\r\n    >\r\n      Action ▼\r\n    </button>\r\n\r\n    {dropdownIndex === expense._id && (\r\n      <div\r\n        // ref={dropdownRef}\r\n        className=\"absolute right-0 z-50 mt-2 bg-white border border-gray-200 rounded-md shadow-lg w-36 animate-fade-in\"\r\n      >\r\n        {hasPermissionFor(\"ExpenseCategories\",\"Edit\") && (\r\n          <button\r\n          className=\"flex items-center w-full px-3 py-2 text-gray-700 hover:bg-gray-100\"\r\n          onClick={() => navigate(`/add-expense-category?id=${expense._id}`)}\r\n        >\r\n          <FaEdit className=\"mr-2\" /> Edit\r\n        </button>\r\n        )}\r\n        {hasPermissionFor(\"ExpenseCategories\",\"Delete\") && (\r\n        <button\r\n          className=\"flex items-center w-full px-3 py-2 text-red-600 hover:bg-gray-100\"\r\n          onClick={() => handleDelete(expense._id)}\r\n        >\r\n          <FaTrash className=\"mr-2\" /> Delete\r\n        </button>\r\n        )}\r\n      </div>\r\n    )}                                          </td>\r\n                                    </tr>\r\n                                ))\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col items-center justify-between mt-4 md:flex-row\">\r\n                    <span>Showing {entriesPerPage * (currentPage - 1) + 1} to {Math.min(entriesPerPage * currentPage, expenses.length)} of {expenses.length} entries</span>\r\n                    <div>\r\n                        <button onClick={handlePageChange} className=\"px-4 py-2 mr-2 text-gray-600 bg-gray-300 disabled:opacity-50\" disabled={currentPage === 1}>\r\n                            Previous\r\n                        </button>\r\n                        <button onClick={handlePageChange} className=\"px-4 py-2 text-gray-600 bg-gray-300 disabled:opacity-50\" disabled={currentPage === totalPages}>\r\n                            Next\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ExpenseCategoryList;"],"names":["LoadingScreen","isSidebarOpen","setSidebarOpen","useState","_jsxs","className","children","_jsx","Navbar","Sidebar","ExpenseCategoryList","navigate","useNavigate","entriesPerPage","setEntriesPerPage","currentPage","setCurrentPage","expenses","setExpenses","loading","setLoading","localPermissions","setLocalPermissions","hasPermissionFor","module","action","localStorage","getItem","toLowerCase","some","p","actions","map","a","includes","useEffect","stored","JSON","parse","searchTerm","setSearchTerm","dropdownIndex","setDropdownIndex","window","innerWidth","fetchExpenses","async","token","response","axios","get","headers","Authorization","console","log","data","err","message","filteredData","filter","item","_item$category","category","name","totalPages","Math","ceil","length","currentUsers","slice","handlePageChange","newPage","update","setUpdate","handleStatus","id","selectedCategory","find","_id","error","newStatus","status","updatedCategory","put","alert","_err$response","_err$response2","_err$response2$data","updateData","href","FaTachometerAlt","BiChevronRight","onClick","value","onChange","e","Number","target","handleCopy","exp","_exp$category","note","join","navigator","clipboard","writeText","handleExcelDownload","ws","XLSX","json_to_sheet","wb","book_new","book_append_sheet","handlePdfDownload","doc","jsPDF","text","tableData","_exp$category2","autoTable","head","body","save","handlePrint","print","handleCsvDownload","csvContent","Object","values","encodedUri","encodeURI","link","document","createElement","setAttribute","appendChild","click","removeChild","type","placeholder","colSpan","expense","FaEdit","confirm","delete","handleDelete","FaTrash","min","disabled"],"sourceRoot":""}