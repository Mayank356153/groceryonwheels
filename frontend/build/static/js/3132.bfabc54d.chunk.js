"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3132],{13132:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var t=a(65043),l=a(66727),r=a(86213),n=a(21197),i=a(59255),d=a(14840),c=a(60184),o=a(49804),m=a(70579);const x=()=>{const e=(0,l.Zp)(),[s]=(0,l.ok)(),a=s.get("id"),[x,h]=(0,t.useState)(!0),[u,p]=(0,t.useState)({tid:"",warehouse:""}),[f,j]=(0,t.useState)(null),[g,b]=(0,t.useState)([]),[v,N]=(0,t.useState)(!1);(0,t.useEffect)((()=>{window.innerWidth<768&&h(!1)}),[]),(0,t.useEffect)((()=>{const e=localStorage.getItem("token");r.A.get("api/warehouses",{headers:{Authorization:`Bearer ${e}`}}).then((e=>b(e.data.data||[]))).catch(console.error)}),[]),(0,t.useEffect)((()=>{if(!a)return;N(!0);const e=localStorage.getItem("token");r.A.get("api/terminals",{headers:{Authorization:`Bearer ${e}`}}).then((e=>{const s=e.data.data.find((e=>e._id===a));s&&p({tid:s.tid,warehouse:s.warehouse||""})})).catch(console.error).finally((()=>N(!1)))}),[a]);const w=e=>p((s=>({...s,[e.target.name]:e.target.value})));return v?(0,m.jsx)(d.A,{}):(0,m.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,m.jsx)(n.A,{isSidebarOpen:x,setSidebarOpen:h}),(0,m.jsxs)("div",{className:"flex flex-grow",children:[(0,m.jsx)(i.A,{isSidebarOpen:x}),(0,m.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),N(!0);const t=localStorage.getItem("token"),l=new FormData;l.append("tid",u.tid),u.warehouse&&l.append("warehouse",u.warehouse),f&&l.append("qrCode",f);try{a?(await r.A.put(`api/terminals/${a}`,l,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}}),alert("Terminal updated successfully")):(await r.A.post("api/terminals",l,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}}),alert("Terminal created successfully")),e("/terminal-list")}catch(d){var n,i;alert((null===(n=d.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||d.message)}finally{N(!1)}},className:"flex-grow p-6 overflow-auto bg-gray-100",children:[(0,m.jsxs)("header",{className:"flex justify-between items-center mb-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{className:"text-2xl font-bold",children:a?"Edit Terminal":"Create Terminal"}),(0,m.jsx)("p",{className:"text-gray-600",children:a?"Modify terminal details":"Fill in terminal details"})]}),(0,m.jsxs)("nav",{className:"flex items-center text-gray-500 text-sm",children:[(0,m.jsxs)(l.k2,{to:"/dashboard",className:"flex items-center",children:[(0,m.jsx)(c.$BV,{className:"mr-1"})," Home"]}),(0,m.jsx)(o.XWt,{className:"mx-2"}),(0,m.jsx)(l.k2,{to:"/terminal-list",children:"Terminal List"})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block font-semibold",children:["Terminal ID ",(0,m.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,m.jsx)("input",{name:"tid",value:u.tid,onChange:w,required:!0,className:"w-full p-2 border rounded",placeholder:"e.g. TID-12345"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block font-semibold",children:"Assign to Warehouse"}),(0,m.jsxs)("select",{name:"warehouse",value:u.warehouse,onChange:w,className:"w-full p-2 border rounded",children:[(0,m.jsx)("option",{value:"",children:"(unassigned)"}),g.map((e=>(0,m.jsx)("option",{value:e._id,children:e.warehouseName},e._id)))]})]})]}),(0,m.jsx)("div",{className:"space-y-4",children:(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block font-semibold",children:"QR Code"}),(0,m.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{j(e.target.files[0]||null)},className:"w-full p-2 border rounded"}),f&&(0,m.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Selected file: ",f.name]})]})})]}),(0,m.jsxs)("div",{className:"mt-8 flex justify-center gap-4",children:[(0,m.jsx)("button",{className:"px-8 py-2 bg-green-600 text-white rounded",children:a?"Update":"Save"}),(0,m.jsx)("button",{type:"button",onClick:()=>e("/admin/terminal/list"),className:"px-8 py-2 bg-orange-500 text-white rounded",children:"Cancel"})]})]})]})]})}},14840:(e,s,a)=>{a.d(s,{A:()=>i});var t=a(65043),l=a(21197),r=a(59255),n=a(70579);function i(){const[e,s]=(0,t.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(l.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,n.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,n.jsx)("div",{children:(0,n.jsx)(r.A,{isSidebarOpen:e})}),(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,n.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}}}]);
//# sourceMappingURL=3132.bfabc54d.chunk.js.map