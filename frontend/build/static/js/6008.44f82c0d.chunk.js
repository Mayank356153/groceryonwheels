"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6008],{24592:(e,t,s)=>{s.d(t,{A:()=>d});var a=s(65043),l=s(66727),r=s(86213),o=s(60184),n=s(70579);const d=e=>{let{isSidebarOpen:t,setSidebarOpen:s}=e;const d=(0,l.Zp)(),[i,c]=(0,a.useState)(!1),[m,x]=(0,a.useState)(null),[u,h]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),[g,w]=(0,a.useState)(!1);(0,a.useEffect)((()=>{m||y()}),[]);const y=async()=>{f(!0);try{const e=localStorage.getItem("token");(localStorage.getItem("role")||"guest").toLowerCase();if(!e)return void x({name:"Guest",role:"Guest"});const t="/api/audit/profile",{data:s}=await r.A.get(t,{headers:{Authorization:`Bearer ${e}`}});console.log(s.data),x(s.data)}catch(e){console.error("Profile fetch error:",e),x({name:"Guest",role:"Guest"})}finally{f(!1)}},j="admin"===(localStorage.getItem("role")||"guest").toLowerCase()?"Admin Panel":u||"Grocery On Wheel";return(0,n.jsxs)("nav",{className:"flex flex-col items-center justify-between gap-2 px-6 py-1 text-white bg-gray-900 md:gap-0 md:flex-row",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between w-full gap-2 md:w-auto md:bg-transparent",children:[(0,n.jsx)("div",{className:`w-screen text-center ${t?"md:w-64":"w-auto"} md:text-center`,children:(0,n.jsxs)("h2",{className:"text-2xl font-bold text-center cursor-pointer md:w-auto",onClick:()=>d("/dashboard"),children:[(0,n.jsx)("span",{className:"md:hidden",children:j}),t?(0,n.jsx)("span",{className:"hidden md:flex",children:j}):(0,n.jsx)("span",{className:"hidden md:flex",children:"POS"})]})}),(0,n.jsx)("div",{className:"flex-col items-center hidden gap-2 md:flex md:flex-row",children:(0,n.jsx)("button",{onClick:()=>s(!t),className:"flex items-center ",children:(0,n.jsx)(o.OXb,{size:24,className:"cursor-pointer hover:text-gray-400"})})})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between w-full md:w-auto",children:[(0,n.jsx)("div",{className:"flex items-start justify-start md:hidden",children:(0,n.jsx)("button",{onClick:()=>s(!t),className:"flex items-center ",children:(0,n.jsx)(o.OXb,{size:24,className:"cursor-pointer hover:text-gray-400"})})}),(0,n.jsxs)("div",{className:"relative flex items-center gap-4",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("button",{className:"flex items-center px-2 hover:bg-gray-500",onClick:()=>d("/pos"),children:[(0,n.jsx)(o.OiG,{}),"POS"]})}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>c(!i),children:[(0,n.jsx)("img",{src:"/userlogoprof.png",alt:"Profile",className:"w-10 h-10 border-2 border-gray-300 rounded-full hover:opacity-80"}),(0,n.jsx)("span",{className:"text-sm",children:(null===m||void 0===m?void 0:m.userName)||"Unknown User"})]}),i&&(0,n.jsx)("div",{className:"absolute right-0 z-10 w-64 p-4 mt-2 text-black bg-white rounded-md shadow-lg top-full",children:p?(0,n.jsx)("p",{className:"text-center text-gray-600",children:"Loading..."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("img",{src:"/userlogoprof.png",alt:"Profile",className:"w-16 h-16 border-2 border-gray-400 rounded-full"}),(0,n.jsx)("h3",{className:"mt-2 text-lg font-bold",children:(null===m||void 0===m?void 0:m.userName)||"Unknown User"}),(0,n.jsxs)("p",{className:"text-sm font-semibold text-blue-600",children:["Role: ",(null===m||void 0===m?void 0:m.role)||"Unknown"]})]}),(0,n.jsxs)("div",{className:"flex flex-col mt-4",children:[(0,n.jsx)("button",{className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",onClick:()=>d("/profile/edit"),children:"Profile"}),(0,n.jsx)("button",{onClick:()=>{localStorage.clear(),d("/"),window.location.reload()},className:"px-4 py-2 mt-2 text-white bg-red-500 rounded-md hover:bg-red-600",children:"Sign Out"})]})]})})]})]})]})}},51909:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var a=s(65043),l=s(26873),r=s(86213),o=s(21197),n=s(59255),d=s(53888),i=s(66727),c=s(60184),m=(s(24592),s(70579));const x=()=>{const[e,t]=(0,a.useState)(!0);(0,a.useEffect)((()=>{window.innerWidth<768&&t(!1)}),[window.innerWidth]);const[s,x]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[p,f]=(0,a.useState)([]),[g,w]=(0,a.useState)([]),[y,j]=(0,a.useState)({storeId:null,warehouseId:null,users:[]}),[b,N]=(0,a.useState)({username:"",password:"",employeeCode:""});(0,a.useEffect)((()=>{(async()=>{try{const e=await r.A.get("/admin/store/add/store",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("Store"),console.log(e.data);const t=e.data.result.map((e=>({label:e.StoreName,value:e._id})));h(e.data.result),x(t)}catch(e){console.error("Error fetching stores:",e)}})(),(async()=>{try{const e=await r.A.get("/api/warehouses",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("warehouse"),console.log(e.data),f(e.data.data)}catch(e){console.error("Error fetching warehouses:",e)}})()}),[]),(0,a.useEffect)((()=>{if(!y.storeId)return;alert("Store ID changed, fetching warehouses..."),console.log(u,y.storeId);const e=u.find((e=>e._id===y.storeId));if(!e)return void alert("Store not found, please select a valid store.");const t=p.filter((t=>t._id===e.warehouse));0!==t.length?(w(t.map((e=>({label:e.warehouseName,value:e._id})))),console.log(t)):alert("No warehouses found for the selected store.")}),[y.storeId]);return(0,m.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,m.jsx)(o.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,m.jsxs)("div",{className:"flex flex-grow ",children:[(0,m.jsx)(n.A,{isSidebarOpen:e}),(0,m.jsxs)("div",{className:"w-full flex flex-col p-2 md:p-2  ",children:[(0,m.jsxs)("header",{className:"flex flex-col items-center justify-between p-4 rounded-md shadow sm:flex-row",children:[(0,m.jsxs)("div",{className:"flex items-center gap-1 text-center sm:flex-row sm:text-left",children:[(0,m.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"New Audit"}),(0,m.jsx)("span",{className:"text-xs text-gray-600 sm:text-sm",children:"Add/Update Audit"})]}),(0,m.jsxs)("nav",{className:"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0",children:[(0,m.jsxs)(i.k2,{to:"/dashboard",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,m.jsx)(c.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,m.jsx)(i.k2,{to:"/audit/view",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:"> Audit List"}),(0,m.jsx)(i.k2,{to:"/audit",className:"text-gray-700 no-underline hover:text-cyan-600",children:"> Add Audit"})]})]}),(0,m.jsxs)("div",{className:"p-4 mt-1 bg-white border-t-4 rounded-lg shadow-md border-cyan-500",children:[(0,m.jsxs)("div",{className:"flex flex-col gap-2 md:gap-5 md:flex-row",children:[(0,m.jsxs)("div",{className:"w-full",children:[(0,m.jsx)("label",{htmlFor:"",children:"Store"}),(0,m.jsx)(l.Ay,{className:"w-full",options:s,onChange:e=>j((t=>({...t,storeId:e.value}))),value:s.find((e=>e.value===y.storeId))||null})]}),(0,m.jsxs)("div",{className:"w-full",children:[(0,m.jsx)("label",{htmlFor:"",children:"Warehouse"}),(0,m.jsx)(l.Ay,{className:"w-full",options:g,onChange:e=>j((t=>({...t,warehouseId:e.value}))),value:g.find((e=>e.value===y.warehouseId))||null})]})]}),(0,m.jsxs)("div",{className:"flex flex-col mt-4 md:gap-5 md:flex-row",children:[(0,m.jsxs)("div",{className:"w-full",children:[(0,m.jsx)("label",{htmlFor:"",children:"Username"}),(0,m.jsx)("input",{type:"text",name:"username",className:"w-full px-2 py-2 border-2 rounded-md",value:b.username,onChange:e=>N((t=>({...t,username:e.target.value})))})]}),(0,m.jsxs)("div",{className:"w-full",children:[(0,m.jsx)("label",{htmlFor:"",children:"Password"}),(0,m.jsx)("input",{type:"text",name:"username",className:"w-full px-2 py-2 border-2 rounded-md",value:b.password,onChange:e=>N((t=>({...t,password:e.target.value})))})]}),(0,m.jsxs)("div",{className:"w-full",children:[(0,m.jsx)("label",{htmlFor:"",children:"Employee Code"}),(0,m.jsx)("input",{type:"text",name:"username",className:"w-full px-2 py-2 border-2 rounded-md",value:b.employeeCode,onChange:e=>N((t=>({...t,employeeCode:e.target.value})))})]})]}),(0,m.jsxs)("div",{className:"flex flex-col items-center justify-around w-full gap-2 mx-auto mt-4 sm:flex-row",children:[(0,m.jsx)(d.A,{className:"w-full text-white bg-green-500 rounded cursor-pointer hover:bg-green-600",type:"submit",text:"Add",onClick:e=>{e.preventDefault(),""!==b.username&&""!==b.password?(j((e=>({...e,users:[...e.users,b]}))),N({username:"",password:"",employeeCode:""})):alert("Please fill all fields")}})," ",(0,m.jsx)(d.A,{className:"w-full text-white bg-orange-500 rounded cursor-pointer hover:bg-orange-600",text:"Reset",onClick:()=>N({username:"",password:"",employeeCode:""})})," "]}),(0,m.jsx)("div",{className:"w-full mt-4 overflow-x-auto min-h-16",children:(0,m.jsxs)("table",{className:"min-w-full border-2 divide-y divide-gray-200 min-h-48",children:[(0,m.jsx)("thead",{className:"bg-gray-200",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Username"}),(0,m.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Password"}),(0,m.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Employee Code"}),(0,m.jsx)("th",{className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Actions"})]})}),(0,m.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.users.map(((e,t)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:e.username}),(0,m.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:e.password}),(0,m.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:e.employeeCode}),(0,m.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:(0,m.jsx)("button",{onClick:()=>(e=>{j((t=>({...t,users:t.users.filter(((t,s)=>s!==e))})))})(t),className:"text-red-600 hover:text-red-900",children:"Remove"})})]},t)))})]})}),(0,m.jsxs)("div",{className:"flex flex-col items-center justify-around w-full gap-2 mx-auto mt-4 sm:flex-row",children:[(0,m.jsx)(d.A,{className:"w-full text-white bg-green-500 rounded cursor-pointer hover:bg-green-600",type:"submit",text:"Start",onClick:async e=>{e.preventDefault();try{console.log("Submitting audit with data:",y);const e=await r.A.post("/api/audit/create",y,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("Audit submitted successfully:",e.data),alert("Audit submitted successfully"),j({storeId:null,warehouseId:null,users:[]}),N({username:"",password:"",employeeCode:""})}catch(t){console.log("Error submitting audit:",t)}}})," ",(0,m.jsx)(d.A,{className:"w-full text-white bg-orange-500 rounded cursor-pointer hover:bg-orange-600",text:"Reset"})," "]})]})]})]})]})}},53888:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var a=s(70579);function l(e){let{text:t,type:s="button",className:l,...r}=e;return(0,a.jsx)("button",{className:`${l}`,...r,children:t})}},82284:(e,t,s)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}s.d(t,{A:()=>a})}}]);
//# sourceMappingURL=6008.44f82c0d.chunk.js.map