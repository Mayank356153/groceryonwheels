"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5665],{85665:(e,a,s)=>{s.r(a),s.d(a,{default:()=>i});var t=s(65043),n=s(86213),r=s(66727),o=s(21197),d=s(59255),l=s(70579);const u="api";function i(){const e=(0,r.Zp)(),a=localStorage.getItem("token")||"";n.A.defaults.headers.common={Authorization:`Bearer ${a}`};const[s,i]=(0,t.useState)(!0),[c,m]=(0,t.useState)([]),[h,x]=(0,t.useState)({date:(new Date).toLocaleDateString("en-CA"),amount:"",warehouseId:""}),[b,p]=(0,t.useState)(!1),[f,w]=(0,t.useState)("");(0,t.useEffect)((()=>{n.A.get(`${u}/warehouses`).then((e=>{const a=Array.isArray(e.data.data)?e.data.data:[];m(a)})).catch((e=>{console.error("Fetch warehouses:",e),m([]),w("Failed to load warehouses")}))}),[]);const v=e=>{const{name:a,value:s}=e.target;x((e=>({...e,[a]:s})))};return(0,l.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,l.jsx)(o.A,{isSidebarOpen:s,setSidebarOpen:i}),(0,l.jsxs)("div",{className:"flex flex-grow",children:[(0,l.jsx)(d.A,{isSidebarOpen:s}),(0,l.jsx)("main",{className:"p-6 bg-gray-50 flex-1 overflow-auto",children:(0,l.jsxs)("div",{className:"max-w-md mx-auto bg-white p-6 rounded shadow",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Record Van Cash"}),f&&(0,l.jsx)("div",{className:"mb-4 p-2 bg-red-100 text-red-700 rounded",children:f}),(0,l.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),w(""),!h.warehouseId||!h.amount)return w("Please select a warehouse and enter an amount");p(!0);try{const a={date:h.date,amount:Number(h.amount),warehouseId:h.warehouseId};await n.A.post(`${u}/ledger/van-cash`,a),e(-1)}catch(r){var s,t;console.error("postVanCash:",r),w((null===(s=r.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to record van cash")}finally{p(!1)}},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Date"}),(0,l.jsx)("input",{type:"date",name:"date",value:h.date,onChange:v,className:"w-full border rounded px-3 py-2",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Amount"}),(0,l.jsx)("input",{type:"number",name:"amount",value:h.amount,onChange:v,className:"w-full border rounded px-3 py-2",min:"0",step:"0.01",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-medium",children:"Warehouse"}),(0,l.jsxs)("select",{name:"warehouseId",value:h.warehouseId,onChange:v,className:"w-full border rounded px-3 py-2",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select warehouse\u2026"}),c.map((e=>(0,l.jsx)("option",{value:e._id,children:e.warehouseName||e.name||e._id},e._id)))]})]}),(0,l.jsx)("button",{type:"submit",disabled:b,className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition",children:b?"Saving\u2026":"Save Van Cash"})]})]})})]})]})}}}]);
//# sourceMappingURL=5665.08cc0502.chunk.js.map