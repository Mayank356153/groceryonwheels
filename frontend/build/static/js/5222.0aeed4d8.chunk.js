"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5222],{14840:(e,t,s)=>{s.d(t,{A:()=>i});var r=s(65043),a=s(21197),l=s(59255),n=s(70579);function i(){const[e,t]=(0,r.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(a.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,n.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,n.jsx)("div",{children:(0,n.jsx)(l.A,{isSidebarOpen:e})}),(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,n.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},35222:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var r=s(65043),a=s(66727),l=s(21197),n=s(59255),i=s(49804),d=s(60184),o=s(14840),c=s(86213),x=s(70579);const u=()=>{const[e,t]=(0,r.useState)(!1),[s,u]=(0,r.useState)([]),[m,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(1),[b,j]=(0,r.useState)(10),[g,N]=(0,r.useState)(null),[v,w]=(0,r.useState)({top:0,left:0}),y=(0,a.Zp)(),[S,A]=(0,r.useState)(!0),k=(0,r.useRef)(null),C=(0,r.useRef)({}),$=(0,r.useRef)({});(0,r.useEffect)((()=>{const e=e=>{k.current&&!k.current.contains(e.target)&&N(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),(0,r.useEffect)((()=>{window.innerWidth<768&&A(!1),L()}),[]);const L=async()=>{t(!0);const e=localStorage.getItem("token");if(e)try{const t=await c.A.get("/admiaddinguser/userlist",{headers:{Authorization:`Bearer ${e}`}});u(t.data)}catch(s){console.error("Error fetching users:",s)}finally{t(!1)}else y("/")},_=s.filter((e=>{var t,s;const r=m.toLowerCase().trim();return!r||(null===(t=e.userName)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(s=e.Email)||void 0===s?void 0:s.toLowerCase().includes(r))||`${e.FirstName} ${e.LastName}`.toLowerCase().includes(r)})),E=Math.ceil(_.length/b),O=(p-1)*b,R=_.slice(O,O+b);return e?(0,x.jsx)(o.A,{}):(0,x.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,x.jsx)(l.A,{isSidebarOpen:S,setSidebarOpen:A}),(0,x.jsxs)("div",{className:"flex flex-grow",children:[(0,x.jsx)(n.A,{isSidebarOpen:S}),(0,x.jsxs)("div",{className:"flex flex-col flex-1 p-4",children:[(0,x.jsxs)("header",{className:"flex justify-between items-center mb-4 px-2 py-2 bg-gray-100 rounded shadow",children:[(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("h1",{className:"text-lg font-semibold",children:"User List"}),(0,x.jsx)("span",{className:"text-xs text-gray-600",children:"View/Search Users"})]}),(0,x.jsxs)("nav",{className:"flex items-center text-xs text-gray-500 gap-1",children:[(0,x.jsxs)(a.k2,{to:"/dashboard",className:"flex items-center hover:text-cyan-600",children:[(0,x.jsx)(d.$BV,{})," Home"]}),(0,x.jsx)(i.XWt,{}),(0,x.jsx)(a.k2,{to:"/admin/user/list",className:"hover:text-cyan-600",children:"User List"})]})]}),(0,x.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-0 gap-2",children:[(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("span",{children:"Show"}),(0,x.jsx)("select",{className:"p-1 border rounded",value:b,onChange:e=>{j(+e.target.value),f(1)},children:[10,20,50].map((e=>(0,x.jsx)("option",{children:e},e)))}),(0,x.jsx)("span",{children:"Entries"})]}),(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("input",{className:"p-1 border rounded",placeholder:"Search",onChange:e=>h(e.target.value)}),(0,x.jsx)(a.N_,{to:"/create-user",children:(0,x.jsx)("button",{className:"px-4 py-2 text-white bg-cyan-500 rounded",children:"+ New User"})})]})]}),(0,x.jsx)("div",{className:"relative",children:(0,x.jsxs)("table",{className:"w-full border-collapse border",children:[(0,x.jsx)("thead",{className:"bg-gray-200",children:(0,x.jsx)("tr",{children:["#","Store Name","User Name","Name","Mobile","Email","Role","Created On","Status","Action"].map((e=>(0,x.jsx)("th",{className:"p-2 border text-left",children:e},e)))})}),(0,x.jsx)("tbody",{children:0===R.length?(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"10",className:"p-4 text-center",children:"No data Available"})}):R.map(((e,s)=>{var r;return(0,x.jsxs)("tr",{className:"text-sm",children:[(0,x.jsx)("td",{className:"p-2 border",children:O+s+1}),(0,x.jsx)("td",{className:"p-2 border",children:Array.isArray(e.Store)?e.Store.map((e=>e.StoreName)).join(", "):(null===(r=e.Store)||void 0===r?void 0:r.StoreName)||"N/A"}),(0,x.jsx)("td",{className:"p-2 border",children:e.userName}),(0,x.jsxs)("td",{className:"p-2 border",children:[e.FirstName," ",e.LastName]}),(0,x.jsx)("td",{className:"p-2 border",children:e.Mobile}),(0,x.jsx)("td",{className:"p-2 border",children:e.Email}),(0,x.jsx)("td",{className:"p-2 border",children:e.Role}),(0,x.jsx)("td",{className:"p-2 border",children:new Date(e.createdAt).toLocaleDateString()}),(0,x.jsx)("td",{className:"p-2 border text-center cursor-pointer",onClick:()=>(async(e,t)=>{const s=localStorage.getItem("token");try{await c.A.patch(`/admiaddinguser/${e}/status`,{status:"active"===t?"inactive":"active"},{headers:{Authorization:`Bearer ${s}`}}),L()}catch(r){console.error("Status update error:",r),alert("Failed to update status")}})(e._id,e.status),children:"active"===e.status?(0,x.jsx)("span",{className:"px-2 py-1 bg-green-500 text-white rounded-full",children:"Active"}):(0,x.jsx)("span",{className:"px-2 py-1 bg-red-600 text-white rounded-full",children:"Inactive"})}),(0,x.jsx)("td",{className:"p-2 border",children:(0,x.jsxs)("div",{children:[(0,x.jsx)("button",{ref:t=>C.current[e._id]=t,className:"px-3 py-1.5 font-semibold text-white bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:t=>(e=>{if(g===e)return void N(null);N(e);const t=C.current[e];if(t){const e=t.getBoundingClientRect(),s=192,r=80,a=(window.innerWidth,window.innerHeight);let l=e.bottom+8,n=e.right-s;n<8&&(n=8),l+r>a-8&&(l=e.top-r-8),l<8&&(l=8),w({top:l,left:n})}})(e._id),"aria-expanded":g===e._id,"aria-controls":`action-menu-${e._id}`,children:"Action"}),g===e._id&&(0,x.jsxs)("div",{id:`action-menu-${e._id}`,ref:t=>$.current[e._id]=t,className:"fixed bg-white border border-gray-200 rounded-lg shadow-xl z-[100] w-48 animate-slide-in",style:{top:`${v.top}px`,left:`${v.left}px`,animation:"slideIn 0.15s ease-in-out forwards"},children:[(0,x.jsx)("button",{className:"w-full px-4 py-2 text-left text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors duration-150",onClick:t=>{t.stopPropagation(),N(null),y(`/create-user?id=${e._id}`)},children:"Edit"}),(0,x.jsx)("button",{className:"w-full px-4 py-2 text-left text-red-600 hover:bg-red-50 hover:text-red-700 transition-colors duration-150",onClick:s=>{s.stopPropagation(),N(null),(async e=>{if(window.confirm("Delete this user?")){t(!0);try{await c.A.delete(`/admiaddinguser/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),L()}catch(s){console.error("Delete error:",s),alert("Failed to delete user")}finally{t(!1)}}})(e._id)},children:"Delete"})]})]})})]},e._id)}))})]})}),(0,x.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mt-4",children:[(0,x.jsxs)("span",{className:"text-sm",children:["Showing ",O+1," to ",Math.min(O+b,_.length)," of ",_.length," entries"]}),(0,x.jsxs)("div",{className:"flex gap-2 mt-2 md:mt-0",children:[(0,x.jsx)("button",{className:"px-3 py-1 rounded "+(1===p?"bg-gray-300":"bg-blue-500 text-white"),disabled:1===p,onClick:()=>f((e=>e-1)),children:"Previous"}),(0,x.jsx)("button",{className:"px-3 py-1 rounded "+(p===E?"bg-gray-300":"bg-blue-500 text-white"),disabled:p===E,onClick:()=>f((e=>e+1)),children:"Next"})]})]})]})]})]})}}}]);
//# sourceMappingURL=5222.0aeed4d8.chunk.js.map