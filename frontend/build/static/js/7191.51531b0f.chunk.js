"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7191],{14840:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(65043),l=s(21197),n=s(59255),r=s(70579);function c(){const[e,t]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,r.jsx)(l.A,{isSidebarOpen:e,setSidebarOpen:t}),(0,r.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,r.jsx)("div",{children:(0,r.jsx)(n.A,{isSidebarOpen:e})}),(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,r.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},97191:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(65043),l=s(49804),n=s(60184),r=s(21197),c=s(59255),d=s(86213),o=s(37762),i=s(64857),x=s(11238),m=(s(14840),s(66727)),h=s(70579);const u=()=>{const e=(0,m.Zp)(),[t,s]=(0,a.useState)(1),[u,p]=(0,a.useState)(10),[j,b]=(0,a.useState)(!0),[y,f]=(0,a.useState)({}),[g,w]=(0,a.useState)("all"),[N,v]=(0,a.useState)(!1),[k,S]=(0,a.useState)([]),[C,A]=(0,a.useState)([]),[D,_]=(0,a.useState)(""),[E,$]=(0,a.useState)(null);(0,a.useEffect)((()=>{window.innerWidth<768&&b(!1)}),[]);const B=async()=>{try{v(!0);const e=localStorage.getItem("token"),t=await d.A.get("api/stock-adjustments",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});console.log(t.data),S(t.data.data)}catch(e){console.log(e.message)}finally{v(!1)}},O=k.filter((e=>e._id.toLowerCase().includes(D.toLowerCase())&&(""===g||"all"===g||g===e.warehouse._id))),L=Math.ceil(O.length/u),z=O.slice((t-1)*u,t*u);(0,a.useEffect)((()=>{(async()=>{try{v(!0),await B(),await(async()=>{try{v(!0);const e=localStorage.getItem("token"),t=await d.A.get("api/warehouses",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});console.log(t.data);const s=t.data.data.map((e=>({label:e.warehouseName,value:e._id})));A(s)}catch(e){console.log(e.message)}finally{v(!1)}})()}catch(e){console.log(e)}finally{v(!1)}})()}),[]);return(0,h.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,h.jsx)(r.A,{isSidebarOpen:j,setSidebarOpen:b}),(0,h.jsxs)("div",{className:"flex flex-grow md:flex-row",children:[(0,h.jsx)(c.A,{isSidebarOpen:j}),(0,h.jsxs)("div",{className:"flex-grow  flex flex-col p-2 md:p-2 min-h-screen w-full",children:[(0,h.jsxs)("header",{className:"flex items-center justify-between p-4 mb-2 bg-gray-100 rounded-md shadow sm:flex-row",children:[(0,h.jsxs)("div",{className:"flex flex-col items-center gap-1 text-center sm:flex-row sm:text-left",children:[(0,h.jsx)("h1",{className:"text-lg font-semibold truncate sm:text-xl",children:"Stock Adjustment List"}),(0,h.jsx)("span",{className:"text-xs text-gray-600 sm:text-sm",children:"View/Search Stock Adjustments"})]}),(0,h.jsxs)("nav",{className:"flex flex-wrap items-center justify-center mt-2 text-xs text-gray-500 sm:justify-start sm:text-sm sm:mt-0",children:[(0,h.jsxs)("a",{href:"/dashboard",className:"flex items-center text-gray-700 no-underline hover:text-cyan-600",children:[(0,h.jsx)(n.$BV,{className:"mr-2 text-gray-500 hover:text-cyan-600"})," Home"]}),(0,h.jsx)(l.XWt,{className:"hidden mx-1 sm:mx-2 sm:inline"}),(0,h.jsx)("a",{href:"/stock-adjustment",className:"text-gray-700 no-underline hover:text-cyan-600",children:"Stock Adjustment"})]})]}),(0,h.jsxs)("div",{className:"flex flex-wrap-reverse items-center justify-between gap-2 p-4 mb-4 border-t-4 rounded-lg border-cyan-500",children:[(0,h.jsx)("div",{className:"mr-4",children:(0,h.jsxs)("select",{className:"p-2 border border-gray-300 rounded",onChange:e=>w(e.target.value),children:[(0,h.jsx)("option",{value:"all",children:"-All Warehouses-"}),C.map(((e,t)=>(0,h.jsx)("option",{value:e.value,children:e.label},t)))]})}),(0,h.jsx)("div",{children:(0,h.jsx)(m.N_,{to:"/stock-adjustment",className:"flex items-center justify-center w-full px-2 text-white no-underline rounded-md bg-cyan-500 md:w-auto",children:(0,h.jsx)("button",{className:"w-full px-2 text-white rounded-md bg-cyan-500 md:w-auto",children:"+ New Stock Adjustment"})})})]}),(0,h.jsxs)("div",{className:"flex flex-col justify-between mb-4 space-y-2 md:flex-row md:space-y-0 md:items-center",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("span",{className:"text-sm",children:"Show"}),(0,h.jsxs)("select",{className:"p-2 text-sm border border-gray-300",onChange:e=>{p(Number(e.target.value)),s(1)},children:[(0,h.jsx)("option",{children:"10"}),(0,h.jsx)("option",{children:"20"}),(0,h.jsx)("option",{children:"50"})]}),(0,h.jsx)("span",{className:"text-sm",children:"Entries"})]}),(0,h.jsxs)("div",{className:"flex flex-wrap gap-0.5 ",children:[(0,h.jsx)("button",{className:"px-4 py-2 text-sm text-white bg-cyan-500",onClick:()=>{const e=O.map((e=>`${new Date(e.adjustmentDate).toDateString()},${e.referenceNo},${e.createdBy}`)).join("\n");navigator.clipboard.writeText(e),alert("Data copied to clipboard!")},children:"Copy"}),(0,h.jsx)("button",{className:"px-4 py-2 text-sm text-white bg-cyan-500",onClick:()=>{const e=x.utils.json_to_sheet(O),t=x.utils.book_new();x.utils.book_append_sheet(t,e,"adjustmentlist list"),x.writeFile(t,"adjustmentlist.xlsx")},children:"Excel"}),(0,h.jsx)("button",{className:"px-4 py-2 text-sm text-white bg-cyan-500",onClick:()=>{const e=new o.uE;e.text("Customer List",20,20);const t=O.map((e=>[new Date(e.adjustmentDate).toDateString(),e.referenceNo,e.createdBy]));(0,i.Ay)(e,{head:[["Adjustment Date","Refernce No","Created By"]],body:t}),e.save("advance_list.pdf")},children:"PDF"}),(0,h.jsx)("button",{className:"px-4 py-2 text-sm text-white bg-cyan-500",onClick:()=>{window.print()},children:"Print"}),(0,h.jsx)("button",{className:"px-4 py-2 text-sm text-white bg-cyan-500",onClick:()=>{const e="data:text/csv;charset=utf-8,"+O.map((e=>Object.values(e).join(","))).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","stockAdjustmentlist.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},children:"CSV"}),(0,h.jsx)("input",{type:"text",value:D,onChange:e=>_(e.target.value),placeholder:"Search",className:"w-full p-2 text-sm border border-gray-300 md:w-auto"})]})]}),(0,h.jsxs)("div",{className:"overflow-x-auto",children:[(0,h.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{className:"bg-gray-200",children:[(0,h.jsx)("th",{className:"px-4 py-2 text-sm border md:text-base",children:"Select"}),(0,h.jsx)("th",{className:"px-4 py-2 text-sm border md:text-base",children:"Adjustment Date"}),(0,h.jsx)("th",{className:"px-4 py-2 text-sm border md:text-base",children:"Reference No."}),(0,h.jsx)("th",{className:"px-4 py-2 text-sm border md:text-base",children:"Created by"}),(0,h.jsx)("th",{className:"px-4 py-2 text-sm border md:text-base",children:"Action"})]})}),(0,h.jsx)("tbody",{children:z.length>0?z.map(((t,s)=>(0,h.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,h.jsx)("td",{className:"px-4 py-2 border",children:(0,h.jsx)("input",{type:"checkbox",checked:!!y[s],onChange:e=>((e,t)=>{const s={...y,[t]:e.target.checked};f(s)})(e,s),className:"text-cyan-500"})}),(0,h.jsx)("td",{className:"px-4 py-2 text-sm border md:text-base",children:new Date(t.adjustmentDate).toDateString()}),(0,h.jsx)("td",{className:"px-4 py-2 text-sm border md:text-base",children:t.referenceNo}),(0,h.jsx)("td",{className:"px-4 py-2 text-sm border md:text-base",children:t.createdBy}),(0,h.jsxs)("td",{className:"relative flex justify-center p-2 border",children:[(0,h.jsx)("button",{onClick:()=>{$(E===t._id?null:t._id)},className:"px-3 py-1 text-white transition rounded bg-cyan-600 hover:bg-cyan-700",children:"Action \u25bc"}),E===t._id&&(0,h.jsxs)("div",{className:"absolute right-0 z-50 mt-2 bg-white border border-gray-200 rounded-md shadow-lg w-36 animate-fade-in",children:[(0,h.jsxs)("button",{className:"flex items-center w-full px-3 py-2 text-gray-700 hover:bg-gray-100",onClick:()=>e(`/stock-adjustment?id=${t._id}`),children:[(0,h.jsx)(n.uO9,{className:"mr-2"})," Edit"]}),(0,h.jsxs)("button",{className:"flex items-center w-full px-3 py-2 text-red-600 hover:bg-gray-100",onClick:()=>(async e=>{if(window.confirm("Do you want to delete this ?"))try{if(!(await fetch(`api/stock-adjustments/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Failed to delete ");console.log("Stock adjustment deleted successfully!"),B()}catch(t){console.error("Error deleting stock adjustment:",t.message)}})(t._id),children:[(0,h.jsx)(n.qbC,{className:"mr-2"})," Delete"]})]})]})]},t._id))):(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:"10",className:"py-4 font-semibold text-center border",children:"No Data Available"})})})]}),(0,h.jsxs)("div",{className:"flex flex-col items-center justify-between mt-4 md:flex-row",children:[(0,h.jsxs)("p",{className:"text-sm",children:["Showing ",(t-1)*u+1," to ",Math.min(t*u,k.length)," of ",k.length," entries"]}),(0,h.jsxs)("div",{className:"flex gap-1",children:[(0,h.jsx)("button",{className:"px-2 py-1 rounded "+(1===t?"bg-gray-300 cursor-not-allowed":"bg-blue-500 text-white"),disabled:1===t,onClick:()=>s(t-1),children:"Previous"}),(0,h.jsx)("button",{className:"px-2 py-1 rounded "+(t===L?"bg-gray-300 cursor-not-allowed":"bg-blue-500 text-white"),disabled:t===L,onClick:()=>s(t+1),children:"Next"})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=7191.51531b0f.chunk.js.map