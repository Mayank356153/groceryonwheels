{"version":3,"file":"static/js/9366.69daecf4.chunk.js","mappings":"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","sources":["components/admin/deletion-requests.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Navbar from \"../Navbar.jsx\";\r\nimport Sidebar from \"../Sidebar.jsx\";\r\n\r\nexport default function DeletionRequests() {\r\n  const [list, setList] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isSidebarOpen, setSidebarOpen] = useState(true);\r\n\r\n  // Fetch the pending deletion requests\r\n  const fetchList = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { data } = await axios.get(\r\n        \"api/deletion-requests?status=PENDING\",\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"token\") || \"\"}`\r\n          }\r\n        }\r\n      );\r\n      setList(data.data || []);\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch deletion requests:\", err);\r\n      alert(err.response?.data?.message || err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Run fetchList once on mount\r\n  useEffect(() => {\r\n    fetchList();\r\n  }, []);\r\n\r\n  // Approve or reject a request\r\n  const act = async (id, approve) => {\r\n    setLoading(true);\r\n    try {\r\n      const url =\r\n        `api/deletion-requests/${id}` +\r\n        (approve ? \"/approve\" : \"/reject\");\r\n      await axios.put(\r\n        url,\r\n        {},\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"token\") || \"\"}`\r\n          }\r\n        }\r\n      );\r\n      await fetchList();\r\n    } catch (err) {\r\n      console.error(`Failed to ${approve ? \"approve\" : \"reject\"} request:`, err);\r\n      alert(err.response?.data?.message || err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-4\">\r\n        <p>Loading…</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  \r\n    return (\r\n    <div className=\"flex flex-col h-screen\">\r\n      <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\r\n      <div className=\"flex flex-grow\">\r\n        <Sidebar isSidebarOpen={isSidebarOpen} />\r\n      <div className=\"p-3 container-fluid\">\r\n    \r\n      <h1 className=\"text-lg font-bold mb-3\">Pending Deletion Requests</h1>\r\n      <table className=\"min-w-full text-sm border-collapse border\">\r\n        <thead>\r\n          <tr className=\"bg-gray-100\">\r\n            <th>Request ID</th>\r\n     <th>Warehouse</th>\r\n     <th>Requested By</th>\r\n     <th>Reason</th>\r\n            <th className=\"border px-2 py-1\">Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {list.map((r) => (\r\n            <tr key={r._id} className=\"hover:bg-gray-50\">\r\n             <td>{r._id}</td>\r\n       <td>{r.itemId?.warehouseName || r.itemId?._id}</td>\r\n       <td className=\"border px-2 py-1\">\r\n       {r.requestedBy\r\n         ? `${r.requestedBy.FirstName} ${r.requestedBy.LastName}`  // full name\r\n         : \"—\"}\r\n     </td>\r\n       <td>{r.reason || \"—\"}</td>\r\n              <td className=\"border px-2 py-1 space-x-2\">\r\n                <button\r\n                  onClick={() => act(r._id, true)}\r\n                  className=\"px-2 py-1 bg-green-600 text-white rounded hover:bg-green-700\"\r\n                >\r\n                  Approve\r\n                </button>\r\n                <button\r\n                  onClick={() => act(r._id, false)}\r\n                  className=\"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700\"\r\n                >\r\n                  Reject\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n          {list.length === 0 && (\r\n            <tr>\r\n              <td colSpan={5} className=\"text-center p-4\">\r\n                No pending requests.\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["DeletionRequests","list","setList","useState","loading","setLoading","isSidebarOpen","setSidebarOpen","fetchList","async","data","axios","get","headers","Authorization","localStorage","getItem","err","_err$response","_err$response$data","console","error","alert","response","message","useEffect","act","id","approve","url","put","_err$response2","_err$response2$data","_jsx","className","children","_jsxs","Navbar","Sidebar","map","r","_r$itemId","_r$itemId2","_id","itemId","warehouseName","requestedBy","FirstName","LastName","reason","onClick","length","colSpan"],"sourceRoot":""}