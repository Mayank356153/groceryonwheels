{"version":3,"file":"static/js/3450.4c4007c7.chunk.js","mappings":"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","sources":["components/Settings/AddUnit.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport Navbar from \"../Navbar\";\r\nimport Sidebar from \"../Sidebar\";\r\nimport axios from \"axios\";\r\n\r\nfunction AddUnit() {\r\n  const navigate = useNavigate();\r\n  const { unitId } = useParams(); // If present, we are editing\r\n\r\n  const [isSidebarOpen, setSidebarOpen] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    unitName: \"\",\r\n    description: \"\",\r\n    status: \"active\",\r\n  });\r\n useEffect(()=>{\r\n    if(window.innerWidth < 768){\r\n      setSidebarOpen(false)\r\n    }\r\n  },[])\r\n  // If editing, fetch the unit details\r\n  useEffect(() => {\r\n    if (unitId) {\r\n      fetchUnit(unitId);\r\n    }\r\n  }, [unitId]);\r\n\r\n  const fetchUnit = async (id) => {\r\n    setLoading(true);\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const res = await axios.get(`api/units/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      const data = res.data.data;\r\n      setFormData({\r\n        unitName: data.unitName || \"\",\r\n        description: data.description || \"\",\r\n        status: data.status || \"active\",\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error fetching unit:\", error.message);\r\n      alert(\"Error fetching unit data.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const headers = { Authorization: `Bearer ${token}` };\r\n\r\n      if (unitId) {\r\n        // Update existing unit\r\n        await axios.put(\r\n          `api/units/${unitId}`,\r\n          formData,\r\n          { headers }\r\n        );\r\n        alert(\"Unit updated successfully!\");\r\n      } else {\r\n        // Create new unit\r\n        await axios.post(\"api/units\", formData, {\r\n          headers,\r\n        });\r\n        alert(\"Unit created successfully!\");\r\n      }\r\n      navigate(\"/units-list\"); // or wherever your units list is\r\n    } catch (error) {\r\n      console.error(\"Error submitting unit:\", error.message);\r\n      alert(\"Error submitting unit.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    navigate(\"/units-list\"); // or your desired route\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen bg-gray-100\">\r\n      {/* Navbar */}\r\n      <Navbar isSidebarOpen={isSidebarOpen} setSidebarOpen={setSidebarOpen} />\r\n      {/* Main layout: Sidebar & Content */}\r\n      <div className=\"flex flex-grow\">\r\n        <Sidebar isSidebarOpen={isSidebarOpen} />\r\n        <div\r\n          className={`flex-grow p-4 w-full transition-all duration-300 `}\r\n        >\r\n          \r\n          <h1 className=\"mb-4 text-2xl font-bold\">\r\n            {unitId ? \"Edit Unit\" : \"Add Unit\"}\r\n          </h1>\r\n          <div className=\"p-6 bg-white rounded shadow-md \">\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"mb-4\">\r\n                <label className=\"block mb-1 font-semibold\">Unit Name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"unitName\"\r\n                  value={formData.unitName}\r\n                  onChange={handleChange}\r\n                  className=\"w-full p-2 border border-gray-300 rounded\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"mb-4\">\r\n                <label className=\"block mb-1 font-semibold\">Description</label>\r\n                <textarea\r\n                  name=\"description\"\r\n                  value={formData.description}\r\n                  onChange={handleChange}\r\n                  className=\"w-full p-2 border border-gray-300 rounded\"\r\n                  rows=\"3\"\r\n                />\r\n              </div>\r\n              <div className=\"mb-4\">\r\n                <label className=\"block mb-1 font-semibold\">Status</label>\r\n                <select\r\n                  name=\"status\"\r\n                  value={formData.status}\r\n                  onChange={handleChange}\r\n                  className=\"w-full p-2 border border-gray-300 rounded\"\r\n                >\r\n                  <option value=\"active\">Active</option>\r\n                  <option value=\"inactive\">Inactive</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"flex justify-end space-x-2\">\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-4 py-2 text-white bg-green-500 rounded hover:bg-green-600\"\r\n                  disabled={loading}\r\n                >\r\n                  {unitId ? \"Update\" : \"Save\"}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleClose}\r\n                  className=\"px-4 py-2 text-white bg-orange-500 rounded hover:bg-orange-600\"\r\n                >\r\n                  Close\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddUnit;\r\n"],"names":["navigate","useNavigate","unitId","useParams","isSidebarOpen","setSidebarOpen","useState","loading","setLoading","formData","setFormData","unitName","description","status","useEffect","window","innerWidth","fetchUnit","async","token","localStorage","getItem","data","axios","get","id","headers","Authorization","error","console","message","alert","handleChange","e","target","name","value","_jsx","children","_jsxs","className","Navbar","Sidebar","onSubmit","preventDefault","put","post","type","onChange","required","rows","disabled","onClick","handleClose"],"sourceRoot":""}