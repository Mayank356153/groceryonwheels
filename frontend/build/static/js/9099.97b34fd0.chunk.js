"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9099],{14840:(e,s,a)=>{a.d(s,{A:()=>o});var r=a(65043),t=a(21197),l=a(59255),n=a(70579);function o(){const[e,s]=(0,r.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,n.jsx)(t.A,{isSidebarOpen:e,setSidebarOpen:s}),(0,n.jsxs)("div",{className:"flex flex-grow mt-20",children:[(0,n.jsx)("div",{children:(0,n.jsx)(l.A,{isSidebarOpen:e})}),(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 border-4 rounded-full border-cyan-500 border-t-transparent animate-spin"}),(0,n.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-700",children:"Loading..."})]})})]})]})}},69099:(e,s,a)=>{a.r(s),a.d(s,{default:()=>m});var r=a(65043),t=a(66727),l=a(86213),n=a(21197),o=a(59255),i=a(14840),d=a(49804),c=a(60184),h=a(70579);const u="";function m(){const e=(0,t.Zp)(),[s,a]=(0,r.useState)(!0),[m,x]=(0,r.useState)(!1),[f,b]=(0,r.useState)([]),[v,p]=(0,r.useState)({fromWarehouse:"",toWarehouse:"",leaveBehind:1}),j={headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}};(0,r.useEffect)((()=>{(async()=>{try{var e;x(!0);const{data:s}=await l.A.get(`${u}/api/warehouses`,j),a=(s.data||[]).filter((e=>"Active"===e.status));b(a);const r=a.find((e=>e.isRestricted));r?p((e=>({...e,fromWarehouse:r._id}))):null!==(e=a[0])&&void 0!==e&&e._id&&p((e=>({...e,fromWarehouse:a[0]._id})))}catch(r){var s,a;console.error("warehouses:",r),alert((null===(s=r.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||r.message)}finally{x(!1)}})()}),[]);return m?(0,h.jsx)(i.A,{}):(0,h.jsxs)("div",{className:"flex flex-col h-screen bg-gray-100",children:[(0,h.jsx)(n.A,{isSidebarOpen:s,setSidebarOpen:a}),(0,h.jsxs)("div",{className:"flex flex-grow",children:[(0,h.jsx)(o.A,{isSidebarOpen:s}),(0,h.jsxs)("div",{className:"flex-grow p-4",children:[(0,h.jsxs)("header",{className:"flex flex-col items-center justify-between p-4 mb-3 bg-white rounded shadow md:flex-row",children:[(0,h.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,h.jsx)("h1",{className:"text-xl font-semibold",children:"Bulk Stock Transfer"}),(0,h.jsx)("span",{className:"text-sm text-gray-600",children:"Move every SKU at once"})]}),(0,h.jsxs)("nav",{className:"flex items-center text-sm text-gray-500",children:[(0,h.jsxs)("a",{href:"/dashboard",className:"flex items-center hover:text-cyan-600",children:[(0,h.jsx)(c.$BV,{className:"mr-1"})," Home"]}),(0,h.jsx)(d.XWt,{className:"mx-2"}),(0,h.jsx)("a",{href:"/transfer-list",className:"hover:text-cyan-600",children:"Stock Transfer List"})]})]}),(0,h.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),!v.fromWarehouse||!v.toWarehouse)return alert("Select both warehouses");if(v.fromWarehouse===v.toWarehouse)return alert("Cannot transfer to the same warehouse");x(!0);try{await l.A.post(`${u}/api/stock-transfers/stock-transfers/bulk`,{fromWarehouse:v.fromWarehouse,toWarehouse:v.toWarehouse,leaveBehind:v.leaveBehind},j),alert("Bulk transfer completed!"),e("/transfer-list")}catch(t){var a,r;console.error("bulk transfer:",t),alert((null===(a=t.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||t.message)}finally{x(!1)}},className:"p-4 bg-white border-t-4 rounded shadow border-cyan-500 max-w-xl mx-auto",children:[(0,h.jsxs)("div",{className:"grid gap-4 mb-4 md:grid-cols-2",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block mb-1 font-semibold",children:"From Warehouse"}),(0,h.jsxs)("select",{required:!0,value:v.fromWarehouse,onChange:e=>p({...v,fromWarehouse:e.target.value}),className:"w-full px-3 py-2 border rounded",children:[(0,h.jsx)("option",{value:"",children:"Select"}),f.map((e=>(0,h.jsx)("option",{value:e._id,children:e.warehouseName},e._id)))]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block mb-1 font-semibold",children:"To Warehouse"}),(0,h.jsxs)("select",{required:!0,value:v.toWarehouse,onChange:e=>p({...v,toWarehouse:e.target.value}),className:"w-full px-3 py-2 border rounded",children:[(0,h.jsx)("option",{value:"",children:"Select"}),f.map((e=>(0,h.jsx)("option",{value:e._id,children:e.warehouseName},e._id)))]})]})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("label",{className:"block mb-1 font-semibold",children:"Leave Behind (units)"}),(0,h.jsx)("input",{type:"number",min:"0",value:v.leaveBehind,onChange:e=>p({...v,leaveBehind:Math.max(0,+e.target.value)}),className:"w-32 px-3 py-2 border rounded"}),(0,h.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Set to 1 to keep at least one unit per SKU in source warehouse."})]}),(0,h.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,h.jsx)("button",{type:"submit",className:"px-6 py-2 text-white rounded shadow bg-cyan-500 hover:bg-cyan-600",children:"Transfer All"}),(0,h.jsx)("button",{type:"button",onClick:()=>e("/transfer-list"),className:"px-6 py-2 text-white bg-gray-400 rounded shadow hover:bg-gray-500",children:"Cancel"})]})]})]})]})]})}}}]);
//# sourceMappingURL=9099.97b34fd0.chunk.js.map